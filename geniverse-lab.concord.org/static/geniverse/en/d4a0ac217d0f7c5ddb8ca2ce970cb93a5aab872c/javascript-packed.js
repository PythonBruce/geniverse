/* @license
==========================================================================
SproutCore Costello -- Property Observing Library
Copyright ©2006-2011, Strobe Inc. and contributors.
Portions copyright ©2008-2010 Apple Inc. All rights reserved.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.

For more information about SproutCore, visit http://www.sproutcore.com

==========================================================================
@license */
var require=require||function require(){};
var sc_require=sc_require||require;var sc_resource=sc_resource||function sc_resource(){};
sc_require("license");var YES=true;var NO=false;if(typeof console==="undefined"){window.console={};
console.log=console.info=console.warn=console.error=function(){}}var SC=SC||{};var SproutCore=SproutCore||SC;
SC._baseMixin=function(c){var f=Array.prototype.slice.call(arguments,1),a,e=f[0]||{},g=1,d=f.length,i,b,h;
if(d===1){e=this||{};g=0}for(;g<d;g++){if(!(i=f[g])){continue}for(h in i){if(!i.hasOwnProperty(h)){continue
}b=i[h];if(e===b){continue}if(b!==undefined&&(c||(e[h]===undefined))){e[h]=b}}}return e
};SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(true);
return SC._baseMixin.apply(this,a)};SC.supplement=function(){var a=Array.prototype.slice.call(arguments);
a.unshift(false);return SC._baseMixin.apply(this,a)};SC.extend=SC.mixin;SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",typeOf:function(b){if(b===undefined){return SC.T_UNDEFINED
}if(b===null){return SC.T_NULL}var a=typeof(b);if(a=="object"){if(b instanceof Array){a=SC.T_ARRAY
}else{if(b instanceof Function){a=b.isClass?SC.T_CLASS:SC.T_FUNCTION}else{if(SC.Error&&(b instanceof SC.Error)){a=SC.T_ERROR
}else{if(b instanceof SC.Object){a=SC.T_OBJECT}else{a=SC.T_HASH}}}}}else{if(a===SC.T_FUNCTION){a=(b.isClass)?SC.T_CLASS:SC.T_FUNCTION
}}return a},none:function(a){return a===null||a===undefined},empty:function(a){return a===null||a===undefined||a===""
},isArray:function(c){if(c&&c.objectAt){return YES}var a=(c?c.length:null),b=typeof c;
return !((a===undefined)||(a===null)||(c instanceof Function)||(b==="string")||c.setInterval)
},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(c){if(c===null||c===undefined){return[]
}if(c.slice instanceof Function){if(typeof(c)==="string"){return[c]}else{return c.slice()
}}if(c.toArray){return c.toArray()}if(!SC.isArray(c)){return[c]}var b=[],a=c.length;
while(--a>=0){b[a]=c[a]}return b},guidKey:"_sc_guid_"+new Date().getTime(),_nextGUID:0,_numberGuids:[],_stringGuids:{},_keyCache:{},guidFor:function(d){if(d===undefined){return"(undefined)"
}if(d===null){return"(null)"}var a=this.guidKey;if(d[a]){return d[a]}if(d===Object){return"(Object)"
}if(d===Array){return"(Array)"}var b,c;switch(typeof d){case SC.T_NUMBER:b=this._numberGuids;
c=b[d];if(!c){c="nu"+d;b[d]=c}return c;case SC.T_STRING:b=this._stringGuids;c=b[d];
if(!c){c="st"+d;b[d]=c}return c;case SC.T_BOOL:return(d)?"(true)":"(false)";default:return SC.generateGuid(d)
}},keyFor:function(d,c){var b,a=this._keyCache[d];if(!a){a=this._keyCache[d]={}}b=a[c];
if(!b){b=a[c]=d+"_"+c}return b},generateGuid:function(b){var a=("sc"+(this._nextGUID++));
if(b){b[this.guidKey]=a}return a},hashFor:function(){var a=arguments.length,c="",e,d,b;
for(b=0;b<a;++b){e=arguments[b];c+=(e&&(d=e.hash)&&(typeof d===SC.T_FUNCTION))?d.call(e):this.guidFor(e)
}return c===""?null:c},isEqual:function(d,c){if(d===null){return c===null}else{if(d===undefined){return c===undefined
}else{return this.hashFor(d)===this.hashFor(c)}}},compare:function(s,p){if(s===p){return 0
}var j=SC.typeOf(s);var g=SC.typeOf(p);var b=SC.ORDER_DEFINITION_MAPPING;if(!b){var d=SC.ORDER_DEFINITION;
b=SC.ORDER_DEFINITION_MAPPING={};var q,n;for(q=0,n=d.length;q<n;++q){b[d[q]]=q}delete SC.ORDER_DEFINITION
}var u=b[j];var c=b[g];if(u<c){return -1}if(u>c){return 1}switch(j){case SC.T_BOOL:case SC.T_NUMBER:if(s<p){return -1
}if(s>p){return 1}return 0;case SC.T_STRING:var k=s.localeCompare(p);if(k<0){return -1
}if(k>0){return 1}return 0;case SC.T_ARRAY:var o=s.length;var m=p.length;var e=Math.min(o,m);
var a=0;var h=0;var f=arguments.callee;while(a===0&&h<e){a=f(s[h],p[h]);h++}if(a!==0){return a
}if(o<m){return -1}if(o>m){return 1}return 0;case SC.T_OBJECT:if(s.constructor.isComparable===YES){return s.constructor.compare(s,p)
}return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(c){if(c===null||c===undefined){return null
}var a=SC.K;a.prototype=c;var b=new a();a.prototype=null;if(typeof c.didBeget==="function"){b=c.didBeget(b)
}return b},copy:function(d,b){var c=d,a;if(d){if(d.isCopyable){return d.copy(b)}if(d.clone&&SC.typeOf(d.clone)===SC.T_FUNCTION){return d.clone()
}}switch(SC.typeOf(d)){case SC.T_ARRAY:c=d.slice();if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)
}}break;case SC.T_HASH:case SC.T_OBJECT:c={};for(var e in d){c[e]=b?SC.copy(d[e],true):d[e]
}break}return c},merge:function(){var c={},b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(c,arguments[a])
}return c},keys:function(c){var a=[];for(var b in c){a.push(b)}return a},inspect:function(d){var a,b=[];
for(var c in d){a=d[c];if(a==="toString"){continue}if(SC.typeOf(a)===SC.T_FUNCTION){a="function() { ... }"
}b.push(c+": "+a)}return"{"+b.join(" , ")+"}"},tupleForPropertyPath:function(e,a){if(typeof e==="object"&&(e instanceof Array)){return e
}var c;var b=e.indexOf("*");if(b<0){b=e.lastIndexOf(".")}c=(b>=0)?e.slice(b+1):e;
var d=this.objectForPropertyPath(e,a,b);return(d&&c)?[d,c]:null},objectForPropertyPath:function(f,c,d){var g,b,e,a;
if(!c){c=window}if(SC.typeOf(f)===SC.T_STRING){if(d===undefined){d=f.length}g=0;while((c)&&(g<d)){b=f.indexOf(".",g);
if((b<0)||(b>d)){b=d}e=f.slice(g,b);c=c.get?c.get(e):c[e];g=b+1}if(g<d){c=undefined
}}else{g=0;a=f.length;e=null;while((g<a)&&c){e=f[g++];if(e){c=(c.get)?c.get(e):c[e]
}}if(g<a){c=undefined}}return c},STRINGS:{},stringsFor:function(b,a){SC.mixin(SC.STRINGS,a);
return this}});SC.clone=SC.copy;SC.$A=SC.A;SC.didLoad=SC.K;SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS];
SC.mixin(Function.prototype,{property:function(){this.dependentKeys=SC.$A(arguments);
var a=SC.guidFor(this);this.cacheKey="__cache__"+a;this.lastSetValueKey="__lastValue__"+a;
this.isProperty=YES;return this},cacheable:function(a){this.isProperty=YES;if(!this.dependentKeys){this.dependentKeys=[]
}this.isCacheable=(a===undefined)?YES:a;return this},idempotent:function(a){this.isProperty=YES;
if(!this.dependentKeys){this.dependentKeys=[]}this.isVolatile=(a===undefined)?YES:a;
return this},observes:function(a){var e=arguments.length,b=null,d=null;while(--e>=0){var c=arguments[e];
if((c.indexOf(".")<0)&&(c.indexOf("*")<0)){if(!b){b=this.localPropertyPaths=[]}b.push(c)
}else{if(!d){d=this.propertyPaths=[]}d.push(c)}}return this}});String.prototype.fmt=function(){var b=arguments,a=0;
return this.replace(/%@([0-9]+)?/g,function(c,d){d=(d)?parseInt(d,0)-1:a++;c=b[d];
return((c===null)?"(null)":(c===undefined)?"":c).toString()})};String.prototype.loc=function(){var a=SC.STRINGS[this]||this;
return a.fmt.apply(a,arguments)};String.prototype.w=function(){var c=[],d=this.split(" "),b=d.length,e,a=0;
for(a=0;a<b;++a){e=d[a];if(e.length!==0){c.push(e)}}return c};if(!Date.now){Date.now=function(){return new Date().getTime()
}}SC.ObserverSet={targets:0,_membersCacheIsValid:NO,add:function(d,e,b){var c=(d)?SC.guidFor(d):"__this__";
var a=this[c];if(!a){a=this[c]=SC.CoreSet.create();a.target=d;a.isTargetSet=YES;this.targets++
}a.add(e);if(b!==undefined){if(!a.contexts){a.contexts={}}a.contexts[SC.guidFor(e)]=b
}this._membersCacheIsValid=NO},remove:function(c,d){var b=(c)?SC.guidFor(c):"__this__";
var a=this[b];if(!a){return NO}a.remove(d);if(a.length<=0){a.target=null;a.isTargetSet=NO;
a.contexts=null;delete this[b];this.targets--}else{if(a.contexts){delete a.contexts[SC.guidFor(d)]
}}this._membersCacheIsValid=NO;return YES},invokeMethods:function(){var b,c,a,d,e;
for(b in this){if(!this.hasOwnProperty(b)){continue}c=this[b];if(c&&c.isTargetSet){a=c.length;
d=c.target;while(--a>=0){e=c[a];if(e){e.call(d)}}}}},getMembers:function(){if(this._membersCacheIsValid){return this._members
}if(!this._members){this._members=[]}else{this._members.length=0}var b=this._members;
for(var c in this){if(!this.hasOwnProperty(c)){continue}var d=this[c];if(d&&d.isTargetSet){var a=d.length;
var e=d.target;var g=d.contexts;if(g){while(--a>=0){var f=d[a];b.push([e,f,g[SC.guidFor(f)]])
}}else{while(--a>=0){b.push([e,d[a]])}}}}this._membersCacheIsValid=YES;return b},clone:function(){var b,d,c,a=SC.ObserverSet.create();
for(c in this){if(!this.hasOwnProperty(c)){continue}b=this[c];if(b&&b.isTargetSet){d=b.clone();
d.target=b.target;if(b.contexts){d.contexts=SC.clone(b.contexts)}a[c]=d}}a.targets=this.targets;
a._membersCacheIsValid=NO;return a},create:function(){return SC.beget(this)}};SC.ObserverSet.slice=SC.ObserverSet.clone;
require("private/observer_set");SC.LOG_OBSERVERS=NO;SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES
},get:function(c){var b=this[c],a;if(b===undefined){return this.unknownProperty(c)
}else{if(b&&b.isProperty){if(b.isCacheable){a=this._kvo_cache;if(!a){a=this._kvo_cache={}
}return(a[b.cacheKey]!==undefined)?a[b.cacheKey]:(a[b.cacheKey]=b.call(this,c))}else{return b.call(this,c)
}}else{return b}}},set:function(h,f){var b=this[h],i=this.automaticallyNotifiesObserversFor(h),e=f,c,a,g,d;
if(!i&&this._kvo_cacheable&&(a=this._kvo_cache)){c=this._kvo_cachedep;if(!c||(c=c[h])===undefined){c=this._kvo_computeCachedDependentsFor(h)
}if(c){g=c.length;while(--g>=0){d=c[g];a[d.cacheKey]=a[d.lastSetValueKey]=undefined
}}}if(b&&b.isProperty){a=this._kvo_cache;if(b.isVolatile||!a||(a[b.lastSetValueKey]!==f)){if(!a){a=this._kvo_cache={}
}a[b.lastSetValueKey]=f;if(i){this.propertyWillChange(h)}e=b.call(this,h,f);if(b.isCacheable){a[b.cacheKey]=e
}if(i){this.propertyDidChange(h,e,YES)}}}else{if(b===undefined){if(i){this.propertyWillChange(h)
}this.unknownProperty(h,f);if(i){this.propertyDidChange(h,e)}}else{if(this[h]!==f){if(i){this.propertyWillChange(h)
}e=this[h]=f;if(i){this.propertyDidChange(h,e)}}}}return this},unknownProperty:function(a,b){if(!(b===undefined)){this[a]=b
}return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;
return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;
var b=this._kvo_changeLevel,a=this._kvo_changes;if((b<=0)&&a&&(a.length>0)&&!SC.Observers.isObservingSuspended){this._notifyPropertyObservers()
}return this},propertyWillChange:function(a){return this},propertyDidChange:function(l,j,c){this._kvo_revision=(this._kvo_revision||0)+1;
var b=this._kvo_changeLevel||0,g,k,h,a,d,f=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO);
if(a=this._kvo_cache){if(!c){d=this[l];if(d&&d.isProperty){a[d.cacheKey]=a[d.lastSetValueKey]=undefined
}}if(this._kvo_cacheable){g=this._kvo_cachedep;if(!g||(g=g[l])===undefined){g=this._kvo_computeCachedDependentsFor(l)
}if(g){k=g.length;while(--k>=0){h=g[k];a[h.cacheKey]=a[h.lastSetValueKey]=undefined
}}}}var e=SC.Observers.isObservingSuspended;if((b>0)||e){var i=this._kvo_changes;
if(!i){i=this._kvo_changes=SC.CoreSet.create()}i.add(l);if(e){if(f){console.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this))
}SC.Observers.objectHasPendingChanges(this)}}else{this._notifyPropertyObservers(l)
}return this},registerDependentKey:function(h,c){var e=this._kvo_dependents,b=this[h],i,g,a,f,d;
if(typeof c==="object"&&(c instanceof Array)){i=c;a=0}else{i=arguments;a=1}g=i.length;
if(!e){this._kvo_dependents=e={}}while(--g>=a){f=i[g];d=e[f];if(!d){d=e[f]=[]}d.push(h)
}},_kvo_addCachedDependents:function(b,f,h,c){var a=f.length,e,d,g;while(--a>=0){d=f[a];
c.add(d);e=this[d];if(e&&(e instanceof Function)&&e.isProperty){if(e.isCacheable){b.push(e)
}if((g=h[d])&&g.length>0){this._kvo_addCachedDependents(b,g,h,c)}}}},_kvo_computeCachedDependentsFor:function(c){var d=this._kvo_cachedep,f=this._kvo_dependents,e=f?f[c]:null,a,b;
if(!d){d=this._kvo_cachedep={}}if(!e||e.length===0){return d[c]=null}a=d[c]=[];b=SC._TMP_SEEN_SET=(SC._TMP_SEEN_SET||SC.CoreSet.create());
b.add(c);this._kvo_addCachedDependents(a,e,f,b);b.clear();if(a.length===0){a=d[c]=null
}return a},_kvo_for:function(c,b){var a=this[c];if(!this._kvo_cloned){this._kvo_cloned={}
}if(!a){a=this[c]=(b===undefined)?[]:b.create();this._kvo_cloned[c]=YES}else{if(!this._kvo_cloned[c]){a=this[c]=a.copy();
this._kvo_cloned[c]=YES}}return a},addObserver:function(c,f,h,b){var d,a,e,g;if(h===undefined){h=f;
f=this}if(!f){f=this}if(typeof h==="string"){h=f[h]}if(!h){throw"You must pass a method to addObserver()"
}c=c.toString();if(c.indexOf(".")>=0){a=SC._ChainObserver.createChain(this,c,f,h,b);
a.masterTarget=f;a.masterMethod=h;this._kvo_for(SC.keyFor("_kvo_chains",c)).push(a)
}else{if((this[c]===undefined)&&(c.indexOf("@")===0)){this.get(c)}if(f===this){f=null
}d=SC.keyFor("_kvo_observers",c);this._kvo_for(d,SC.ObserverSet).add(f,h,b);this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(c)
}if(this.didAddObserver){this.didAddObserver(c,f,h)}return this},removeObserver:function(c,f,h){var d,e,b,g,a;
if(h===undefined){h=f;f=this}if(!f){f=this}if(typeof h==="string"){h=f[h]}if(!h){throw"You must pass a method to removeObserver()"
}c=c.toString();if(c.indexOf(".")>=0){d=SC.keyFor("_kvo_chains",c);if(e=this[d]){e=this._kvo_for(d);
a=e.length;while(--a>=0){b=e[a];if(b&&(b.masterTarget===f)&&(b.masterMethod===h)){e[a]=b.destroyChain()
}}}}else{if(f===this){f=null}d=SC.keyFor("_kvo_observers",c);if(g=this[d]){g=this._kvo_for(d);
g.remove(f,h);if(g.targets<=0){this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(c)
}}}if(this.didRemoveObserver){this.didRemoveObserver(c,f,h)}return this},hasObserverFor:function(b){SC.Observers.flush(this);
var d=this[SC.keyFor("_kvo_observers",b)],c=this[SC.keyFor("_kvo_local",b)],a;if(c&&c.length>0){return YES
}if(d&&d.getMembers().length>0){return YES}return NO},initObservable:function(){if(this._observableInited){return
}this._observableInited=YES;var f,m,k,j,h,e,l,g,c,n,b,i,d,a;if(m=this._observers){g=m.length;
for(f=0;f<g;f++){k=m[f];h=this[k];e=h.propertyPaths;l=(e)?e.length:0;for(c=0;c<l;
c++){n=e[c];b=n.indexOf(".");if(b<0){this.addObserver(n,this,h)}else{if(n.indexOf("*")===0){this.addObserver(n.slice(1),this,h)
}else{i=null;if(b===0){i=this;n=n.slice(1)}else{if(b===4&&n.slice(0,5)==="this."){i=this;
n=n.slice(5)}else{if(b<0&&n.length===4&&n==="this"){i=this;n=""}}}SC.Observers.addObserver(n,this,h,i)
}}}}}this.bindings=[];if(m=this._bindings){for(f=0,a=m.length;f<a;f++){k=m[f];j=this[k];
d=k.slice(0,-7);this[k]=this.bind(d,j)}}if(m=this._properties){for(f=0,a=m.length;
f<a;f++){k=m[f];if(j=this[k]){if(j.isCacheable){this._kvo_cacheable=YES}if(j.dependentKeys&&(j.dependentKeys.length>0)){this.registerDependentKey(k,j.dependentKeys)
}}}}},observersForKey:function(a){var b=this._kvo_for("_kvo_observers",a);return b.getMembers()||[]
},_notifyPropertyObservers:function(u){if(!this._observableInited){this.initObservable()
}SC.Observers.flush(this);var g=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO),o,r,m,d,n,l,q,p,j,a,f,s,c,i,e,b,h,k;
if(g){h=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ";console.log('%@%@: notifying observers after change to key "%@"'.fmt(h,this,u))
}d=this["_kvo_observers_*"];this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while(((r=this._kvo_changes)&&(r.length>0))||u){q=++this.propertyRevision;
if(!r){r=SC.CoreSet.create()}this._kvo_changes=null;if(u==="*"){r.add("*");r.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))
}else{if(u){r.add(u)}}if(m=this._kvo_dependents){for(n=0;n<r.length;n++){u=r[n];l=m[u];
if(l&&(i=l.length)){if(g){console.log("%@...including dependent keys for %@: %@".fmt(h,u,l))
}k=this._kvo_cache;if(!k){k=this._kvo_cache={}}while(--i>=0){r.add(u=l[i]);if(e=this[u]){this[e.cacheKey]=undefined;
k[e.cacheKey]=k[e.lastSetValueKey]=undefined}}}}}while(r.length>0){u=r.pop();o=this[SC.keyFor("_kvo_observers",u)];
if(o){p=o.getMembers();j=p.length;for(f=0;f<j;f++){a=p[f];if(a[3]===q){continue}s=a[0]||this;
c=a[1];b=a[2];a[3]=q;if(g){console.log('%@...firing observer on %@ for key "%@"'.fmt(h,s,u))
}if(b!==undefined){c.call(s,this,u,null,b,q)}else{c.call(s,this,u,null,q)}}}p=this[SC.keyFor("_kvo_local",u)];
if(p){j=p.length;for(f=0;f<j;f++){a=p[f];c=this[a];if(c){if(g){console.log('%@...firing local observer %@.%@ for key "%@"'.fmt(h,this,a,u))
}c.call(this,this,u,null,q)}}}if(d&&u!=="*"){p=d.getMembers();j=p.length;for(f=0;
f<j;f++){a=p[f];s=a[0]||this;c=a[1];b=a[2];if(g){console.log('%@...firing * observer on %@ for key "%@"'.fmt(h,s,u))
}if(b!==undefined){c.call(s,this,u,null,b,q)}else{c.call(s,this,u,null,q)}}}if(this.propertyObserver){if(g){console.log('%@...firing %@.propertyObserver for key "%@"'.fmt(h,this,u))
}this.propertyObserver(this,u,null,q)}}if(r){r.destroy()}u=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;
if(g){SC.KVO_SPACES=h.slice(0,-2)}return YES},bind:function(a,c,e){var d,b;if(e!==undefined){c=[c,e]
}b=typeof c;if(b==="string"||(b==="object"&&(c instanceof Array))){d=this[a+"BindingDefault"]||SC.Binding;
d=d.beget().from(c)}else{d=c}d=d.to(a,this).connect();this.bindings.push(d);return d
},didChangeFor:function(a){var b,f,e,j,d,c,h,i,g;a=SC.hashFor(a);b=this._kvo_didChange_valueCache;
if(!b){b=this._kvo_didChange_valueCache={}}f=this._kvo_didChange_revisionCache;if(!f){f=this._kvo_didChange_revisionCache={}
}e=b[a]||{};j=f[a]||{};d=false;c=this._kvo_revision||0;h=arguments.length;while(--h>=1){i=arguments[h];
if(j[i]!=c){g=this.get(i);if(e[i]!==g){d=true;e[i]=g}}j[i]=c}b[a]=e;f[a]=j;return d
},setIfChanged:function(a,b){return(this.get(a)!==b)?this.set(a,b):this},getPath:function(b){var a=SC.tupleForPropertyPath(b,this);
if(a===null||a[0]===null){return undefined}return a[0].get(a[1])},setPath:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);
if(!a||!a[0]){return null}a[0].set(a[1],b)}else{this.set(c,b)}return this},setPathIfChanged:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);
if(!a||!a[0]){return null}if(a[0].get(a[1])!==b){a[0].set(a[1],b)}}else{this.setIfChanged(c,b)
}return this},getEach:function(){var d=SC.A(arguments),c=[],a,b;for(a=0,b=d.length;
a<b;a++){c[c.length]=this.getPath(d[a])}return c},incrementProperty:function(b,a){if(!a){a=1
}this.set(b,(this.get(b)||0)+a);return this.get(b)},decrementProperty:function(b,a){if(!a){a=1
}this.set(b,(this.get(b)||0)-a);return this.get(b)},toggleProperty:function(a,b,c){if(b===undefined){b=true
}if(c===undefined){c=false}b=(this.get(a)==b)?c:b;this.set(a,b);return this.get(a)
},notifyPropertyChange:function(a,b){this.propertyWillChange(a);this.propertyDidChange(a,b);
return this},allPropertiesDidChange:function(){this._kvo_cache=null;this._notifyPropertyObservers("*");
return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)
},logProperty:function(){var b=SC.$A(arguments),d,c,a;for(a=0,c=b.length;a<c;a++){d=b[a];
console.log("%@:%@: ".fmt(SC.guidFor(this),d),this.get(d))}},propertyRevision:1};
SC.logChange=function logChange(c,a,b){console.log("CHANGE: %@[%@] => %@".fmt(c,a,c.get(a)))
};SC.mixin(SC,{get:function(a,b){if(!a){return undefined}if(b===undefined){return this[a]
}if(a.get){return a.get(b)}return a[b]}});SC.mixin(Array.prototype,SC.Observable);
SC.Enumerator=function(a){this.enumerable=a;this.reset();return this};SC.Enumerator.prototype={nextObject:function(){var c=this._index;
var a=this._length;if(c>=a){return undefined}var b=this.enumerable.nextObject(c,this._previousObject,this._context);
this._previousObject=b;this._index=c+1;if(c>=a){this._context=SC.Enumerator._pushContext(this._context)
}return b},reset:function(){var b=this.enumerable;if(!b){throw SC.$error("Enumerator has been destroyed")
}this._length=b.get?b.get("length"):b.length;var a=this._length;this._index=0;this._previousObject=null;
this._context=(a>0)?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null
}};SC.Enumerator.create=function(a){return new SC.Enumerator(a)};SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;
return a||{}};SC.Enumerator._pushContext=function(b){this._contextCache=this._contextCache||[];
var a=this._contextCache;a.push(b);return null};require("core");require("system/enumerator");
SC.Enumerable={isEnumerable:YES,nextObject:function(a,c,b){return this.objectAt?this.objectAt(a):this[a]
},firstObject:function(){if(this.get("length")===0){return undefined}if(this.objectAt){return this.objectAt(0)
}var b=SC.Enumerator._popContext(),a;a=this.nextObject(0,null,b);b=SC.Enumerator._pushContext(b);
return a}.property(),lastObject:function(){var a=this.get("length");if(a===0){return undefined
}if(this.objectAt){return this.objectAt(a-1)}}.property(),enumerator:function(){return SC.Enumerator.create(this)
},forEach:function(g,f){if(typeof g!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;
if(f===undefined){f=null}var e=null;var c=SC.Enumerator._popContext();for(var a=0;
a<b;a++){var d=this.nextObject(a,e,c);g.call(f,d,a,this);e=d}e=null;c=SC.Enumerator._pushContext(c);
return this},getEach:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null
},this)},setEach:function(a,b){this.forEach(function(c){if(c){if(c.set){c.set(a,b)
}else{c[a]=b}}},this);return this},map:function(h,g){if(typeof h!=="function"){throw new TypeError()
}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=[];
var f=null;var d=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,d);
c[a]=h.call(g,e,a,this);f=e}f=null;d=SC.Enumerator._pushContext(d);return c},mapProperty:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null
})},filter:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;
if(g===undefined){g=null}var c=[];var f=null;var d=SC.Enumerator._popContext();for(var a=0;
a<b;a++){var e=this.nextObject(a,f,d);if(h.call(g,e,a,this)){c.push(e)}f=e}f=null;
d=SC.Enumerator._pushContext(d);return c},sortProperty:function(b){var c=(typeof b===SC.T_STRING)?arguments:b,a=c.length,d;
if(this instanceof Array){d=this}else{d=[];this.forEach(function(e){d.push(e)})}if(!d){return[]
}return d.sort(function(g,f){var e,i,k,j,h=0;for(e=0;h===0&&e<a;e++){i=c[e];k=g?(g.get?g.get(i):g[i]):null;
j=f?(f.get?f.get(i):f[i]):null;h=SC.compare(k,j)}return h})},filterProperty:function(j,f){var d=this.get?this.get("length"):this.length;
var e=[];var i=null;var b=SC.Enumerator._popContext();for(var g=0;g<d;g++){var c=this.nextObject(g,i,b);
var h=c?(c.get?c.get(j):c[j]):null;var a=(f===undefined)?!!h:SC.isEqual(h,f);if(a){e.push(c)
}i=c}i=null;b=SC.Enumerator._pushContext(b);return e},find:function(h,d){var c=this.get?this.get("length"):this.length;
if(d===undefined){d=null}var g=null,b,i=NO,e=null;var a=SC.Enumerator._popContext();
for(var f=0;f<c&&!i;f++){b=this.nextObject(f,g,a);if(i=h.call(d,b,f,this)){e=b}g=b
}b=g=null;a=SC.Enumerator._pushContext(a);return e},findProperty:function(i,f){var c=this.get?this.get("length"):this.length;
var j=NO,d=null,h=null,b,g;var a=SC.Enumerator._popContext();for(var e=0;e<c&&!j;
e++){b=this.nextObject(e,h,a);g=b?(b.get?b.get(i):b[i]):null;j=(f===undefined)?!!g:SC.isEqual(g,f);
if(j){d=b}h=b}h=b=null;a=SC.Enumerator._pushContext(a);return d},every:function(h,g){if(typeof h!=="function"){throw new TypeError()
}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=YES;
var f=null;var d=SC.Enumerator._popContext();for(var a=0;c&&(a<b);a++){var e=this.nextObject(a,f,d);
if(!h.call(g,e,a,this)){c=NO}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},everyProperty:function(i,e){var c=this.get?this.get("length"):this.length;
var d=YES;var h=null;var a=SC.Enumerator._popContext();for(var f=0;d&&(f<c);f++){var b=this.nextObject(f,h,a);
var g=b?(b.get?b.get(i):b[i]):null;d=(e===undefined)?!!g:SC.isEqual(g,e);h=b}h=null;
a=SC.Enumerator._pushContext(a);return d},some:function(h,g){if(typeof h!=="function"){throw new TypeError()
}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=NO;
var f=null;var d=SC.Enumerator._popContext();for(var a=0;(!c)&&(a<b);a++){var e=this.nextObject(a,f,d);
if(h.call(g,e,a,this)){c=YES}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},someProperty:function(i,e){var c=this.get?this.get("length"):this.length;
var d=NO;var h=null;var a=SC.Enumerator._popContext();for(var f=0;!d&&(f<c);f++){var b=this.nextObject(f,h,a);
var g=b?(b.get?b.get(i):b[i]):null;d=(e===undefined)?!!g:SC.isEqual(g,e);h=b}h=null;
a=SC.Enumerator._pushContext(a);return d},reduce:function(g,h,i){if(typeof g!=="function"){throw new TypeError()
}var c=this.get?this.get("length"):this.length;if(c===0&&h===undefined){throw new TypeError()
}var d=h;var f=null;var a=SC.Enumerator._popContext();for(var e=0;e<c;e++){var b=this.nextObject(e,f,a);
if(b!==null){if(d===undefined){d=b}else{d=g.call(null,d,b,e,this,i)}}f=b}f=null;a=SC.Enumerator._pushContext(a);
if(d===undefined){throw new TypeError()}return d},invoke:function(h){var e=this.get?this.get("length"):this.length;
if(e<=0){return[]}var i;var g=[];var c=arguments.length;if(c>1){for(i=1;i<c;i++){g.push(arguments[i])
}}var f=[];var j=null;var b=SC.Enumerator._popContext();for(i=0;i<e;i++){var d=this.nextObject(i,j,b);
var a=d?d[h]:null;if(a){f[i]=a.apply(d,g)}j=d}j=null;b=SC.Enumerator._pushContext(b);
return f},invokeWhile:function(d,i){var f=this.get?this.get("length"):this.length;
if(f<=0){return null}var j;var h=[];var c=arguments.length;if(c>2){for(j=2;j<c;j++){h.push(arguments[j])
}}var g=d;var k=null;var b=SC.Enumerator._popContext();for(j=0;(g===d)&&(j<f);j++){var e=this.nextObject(j,k,b);
var a=e?e[i]:null;if(a){g=a.apply(e,h)}k=e}k=null;b=SC.Enumerator._pushContext(b);
return g},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a
},groupBy:function(j){var d=this.get?this.get("length"):this.length,e=[],i=null,a=SC.Enumerator._popContext(),f=[],k=[];
for(var g=0;g<d;g++){var c=this.nextObject(g,i,a);var h=c?(c.get?c.get(j):c[j]):null;
if(SC.none(f[h])){f[h]=[];k.push(h)}f[h].push(c);i=c}i=null;a=SC.Enumerator._pushContext(a);
for(var g=0,b=k.length;g<b;g++){e.push(f[k[g]])}return e}};SC._buildReducerFor=function(a,b){return function(d,e){var f=this[a];
if(SC.typeOf(f)!==SC.T_FUNCTION){return this.unknownProperty?this.unknownProperty(d,e):null
}else{var c=SC.Enumerable.reduce.call(this,f,null,b);return c}}.property("[]")};SC.Reducers={"[]":function(a,b){return this
}.property(),enumerableContentDidChange:function(b,a){this.notifyPropertyChange("[]");
return this},reducedProperty:function(i,g,f){if(!i||i.charAt(0)!=="@"){return undefined
}var d=i.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!d||d.length<2){return undefined}var h=d[1];
var j=d[3];h="reduce"+h.slice(0,1).toUpperCase()+h.slice(1);var a=this[h];if(SC.typeOf(a)!==SC.T_FUNCTION){return undefined
}if(f===NO){return SC.Enumerable.reduce.call(this,a,null,j)}var c=SC._buildReducerFor(h,j);
var b=this.constructor.prototype;if(b){b[i]=c;var e=b._properties||[];e.push(i);b._properties=e;
this.registerDependentKey(i,"[]")}return SC.Enumerable.reduce.call(this,a,null,j)
},reduceMax:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}if(a===null){return d
}return(d>a)?d:a},reduceMaxObject:function(b,f,c,g,d){var a=b,h=f;if(d){if(f){h=f.get?f.get(d):f[d]
}if(b){a=b.get?b.get(d):b[d]}}if(a===null){return f}return(h>a)?f:b},reduceMin:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]
}if(a===null){return d}return(d<a)?d:a},reduceMinObject:function(b,f,c,g,d){var a=b,h=f;
if(d){if(f){h=f.get?f.get(d):f[d]}if(b){a=b.get?b.get(d):b[d]}}if(a===null){return f
}return(h<a)?f:b},reduceAverage:function(b,g,d,h,f){if(f&&g){g=g.get?g.get(f):g[f]
}var c=(b||0)+g;var a=h.get?h.get("length"):h.length;if(d>=a-1){c=c/a}return c},reduceSum:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]
}return(a===null)?d:a+d}};SC.mixin(SC.Enumerable,SC.Reducers);SC.mixin(Array.prototype,SC.Reducers);
Array.prototype.isEnumerable=YES;(function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(g){var e=this.length;
var f=[];for(var d=0;d<e;d++){var h=this[d];f[d]=h?(h.get?h.get(g):h[g]):null}return f
},filterProperty:function(h,j){var f=this.length;var g=[];for(var e=0;e<f;e++){var i=this[e];
var k=i?(i.get?i.get(h):i[h]):null;var d=(j===undefined)?!!k:SC.isEqual(k,j);if(d){g.push(i)
}}return g},groupBy:function(k){var f=this.length,g=[],h=[],l=[];for(var i=0;i<f;
i++){var e=this[i];var j=e?(e.get?e.get(k):e[k]):null;if(SC.none(h[j])){h[j]=[];l.push(j)
}h[j].push(e)}for(var i=0,d=l.length;i<d;i++){g.push(h[l[i]])}return g},find:function(j,i){if(typeof j!=="function"){throw new TypeError()
}var e=this.length;if(i===undefined){i=null}var g,f=null,h=NO;for(var d=0;d<e&&!h;
d++){g=this[d];if(h=j.call(i,g,d,this)){f=g}}g=null;return f},findProperty:function(g,j){var e=this.length;
var h,k,i=NO,f=null;for(var d=0;d<e&&!i;d++){k=(h=this[d])?(h.get?h.get(g):h[g]):null;
i=(j===undefined)?!!k:SC.isEqual(k,j);if(i){f=h}}h=null;return f},everyProperty:function(g,i){var e=this.length;
var f=YES;for(var d=0;f&&(d<e);d++){var h=this[d];var j=h?(h.get?h.get(g):h[g]):null;
f=(i===undefined)?!!j:SC.isEqual(j,i)}return f},someProperty:function(g,i){var e=this.length;
var f=NO;for(var d=0;!f&&(d<e);d++){var h=this[d];var j=h?(h.get?h.get(g):h[g]):null;
f=(i===undefined)?!!j:SC.isEqual(j,i)}return f},invoke:function(f){var e=this.length;
if(e<=0){return[]}var d;var h=[];var j=arguments.length;if(j>1){for(d=1;d<j;d++){h.push(arguments[d])
}}var g=[];for(d=0;d<e;d++){var i=this[d];var k=i?i[f]:null;if(k){g[d]=k.apply(i,h)
}}return g},invokeWhile:function(f,k){var h=this.length;if(h<=0){return null}var l;
var j=[];var e=arguments.length;if(e>2){for(l=2;l<e;l++){j.push(arguments[l])}}var i=f;
for(l=0;(i===f)&&(l<h);l++){var g=this[l];var d=g?g[k]:null;if(d){i=d.apply(g,j)}}return i
},toArray:function(){var e=this.length;if(e<=0){return[]}var f=[];for(var d=0;d<e;
d++){var g=this[d];f.push(g)}return f},getEach:function(g){var f=[];var e=this.length;
for(var d=0;d<e;d++){var h=this[d];f[d]=h?(h.get?h.get(g):h[g]):null}return f},setEach:function(f,g){var e=this.length;
for(var d=0;d<e;d++){var h=this[d];if(h){if(h.set){h.set(f,g)}else{h[f]=g}}}return this
}};var c={forEach:function(h,g){if(typeof h!=="function"){throw new TypeError()}var e=this.length;
if(g===undefined){g=null}for(var d=0;d<e;d++){var f=this[d];h.call(g,f,d,this)}return this
},map:function(i,h){if(typeof i!=="function"){throw new TypeError()}var e=this.length;
if(h===undefined){h=null}var f=[];for(var d=0;d<e;d++){var g=this[d];f[d]=i.call(h,g,d,this)
}return f},filter:function(i,h){if(typeof i!=="function"){throw new TypeError()}var e=this.length;
if(h===undefined){h=null}var f=[];for(var d=0;d<e;d++){var g=this[d];if(i.call(h,g,d,this)){f.push(g)
}}return f},every:function(i,h){if(typeof i!=="function"){throw new TypeError()}var e=this.length;
if(h===undefined){h=null}var f=YES;for(var d=0;f&&(d<e);d++){var g=this[d];if(!i.call(h,g,d,this)){f=NO
}}return f},some:function(i,h){if(typeof i!=="function"){throw new TypeError()}var e=this.length;
if(h===undefined){h=null}var f=NO;for(var d=0;(!f)&&(d<e);d++){var g=this[d];if(i.call(h,g,d,this)){f=YES
}}return f},reduce:function(j,f,i){if(typeof j!=="function"){throw new TypeError()
}var e=this.length;if(e===0&&f===undefined){throw new TypeError()}var g=f;for(var d=0;
d<e;d++){var h=this[d];if(h!==null){if(g===undefined){g=h}else{g=j.call(null,g,h,d,this,i)
}}}if(g===undefined){throw new TypeError()}return g}};for(var b in c){if(!c.hasOwnProperty(b)){continue
}if(!Array.prototype[b]||((typeof Prototype==="object")&&Prototype.Version.match(/^1\.6/))){Array.prototype[b]=c[b]
}}SC.mixin(Array.prototype,a)})();SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";
return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(d,f,e,g,c,a){var b=SC.beget(this);
b.source=d;b.indexes=f?f.frozenCopy():null;b.target=e;b.method=g;b.context=c;b.isDeep=a||NO;
b.beginObserving();return b},extend:function(e){var d=SC.beget(this),c=arguments,b=c.length,a;
for(a=0;a<b;a++){SC.mixin(d,c[a])}return d},destroy:function(a){this.endObserving();
return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b)){return this
}this.indexes=b?b.frozenCopy():null;this.endObserving().beginObserving();return this
},beginObserving:function(){if(!this.isDeep){return this}var b=this.observing;if(!b){b=this.observing=SC.CoreSet.create()
}var a=this._beginObservingForEach;if(!a){a=this._beginObservingForEach=function(c){var d=this.source.objectAt(c);
if(d&&d.addObserver){b.push(d);d._kvo_needsRangeObserver=YES}}}this.indexes.forEach(a,this);
this.isObserving=NO;SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(a){var d=this.observing;
if(this.isObserving||!d||(d.get("length")===0)){return YES}if(d.contains(a)){this.isObserving=YES;
var b=this._setupPendingForEach;if(!b){var c=this.source,e=this.objectPropertyDidChange;
b=this._setupPendingForEach=function(f){var i=this.source.objectAt(f),g=SC.guidFor(i),h;
if(i&&i.addObserver){d.push(i);i.addObserver("*",this,e);h=this[g];if(h===undefined||h===null){this[g]=f
}else{if(h.isIndexSet){h.add(f)}else{h=this[g]=SC.IndexSet.create(h).add(f)}}}}}this.indexes.forEach(b,this);
return YES}else{return NO}},endObserving:function(){if(!this.isDeep){return this}var e=this.observing;
if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,a,f,d;if(e){f=e.length;
for(a=0;a<f;a++){d=e[a];d.removeObserver("*",this,b);this[SC.guidFor(d)]=null}e.length=0
}this.isObserving=NO}if(e){e.clear()}return this},rangeDidChange:function(b){var a=this.indexes;
if(!b||!a||a.intersects(b)){this.endObserving();this.method.call(this.target,this.source,null,"[]",b,this.context);
this.beginObserving()}return this},objectPropertyDidChange:function(d,f,g,a){var e=this.context,h=this.method,c=SC.guidFor(d),b=this[c];
if(b&&!b.isIndexSet){b=this[c]=SC.IndexSet.create(b).freeze()}if(e){h.call(this.target,this.source,d,f,b,e,a)
}else{h.call(this.target,this.source,d,f,b,a)}}};sc_require("mixins/observable");
sc_require("mixins/enumerable");sc_require("system/range_observer");SC.OUT_OF_RANGE_EXCEPTION="Index out of range";
SC.Array={isSCArray:YES,replace:function(a,c,b){throw"replace() must be implemented to support SC.Array"
},objectAt:function(a){if(a<0){return undefined}if(a>=this.get("length")){return undefined
}return this.get(a)},"[]":function(a,b){if(b!==undefined){this.replace(0,this.get("length"),b)
}return this}.property(),insertAt:function(a,b){if(a>this.get("length")){throw SC.OUT_OF_RANGE_EXCEPTION
}this.replace(a,0,[b]);return this},removeAt:function(d,a){var c=0,b=[];if(typeof d===SC.T_NUMBER){if((d<0)||(d>=this.get("length"))){throw SC.OUT_OF_RANGE_EXCEPTION
}if(a===undefined){this.replace(d,1,b);return this}else{d=SC.IndexSet.create(d,a)
}}this.beginPropertyChanges();d.forEachRange(function(f,e){f-=c;c+=e;this.replace(f,e,b)
},this);this.endPropertyChanges();return this},removeObject:function(b){var c=this.get("length")||0;
while(--c>=0){var a=this.objectAt(c);if(a==b){this.removeAt(c)}}return this},removeObjects:function(a){this.beginPropertyChanges();
a.forEach(function(b){this.removeObject(b)},this);this.endPropertyChanges();return this
},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges();
a.forEach(function(b){this.pushObject(b)},this);this.endPropertyChanges();return this
},popObject:function(){var a=this.get("length");if(a===0){return null}var b=this.objectAt(a-1);
this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0){return null
}var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);
return a},unshiftObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.unshiftObject(b)
},this);this.endPropertyChanges();return this},isEqual:function(a){if(!a){return false
}if(a==this){return true}var b=a.get("length");if(b!=this.get("length")){return false
}while(--b>=0){if(!SC.isEqual(a.objectAt(b),this.objectAt(b))){return false}}return true
},compact:function(){return this.without(null)},without:function(b){if(this.indexOf(b)<0){return this
}var a=[];this.forEach(function(c){if(c!==b){a[a.length]=c}});return a},uniq:function(){var a=[];
this.forEach(function(b){if(a.indexOf(b)<0){a[a.length]=b}});return a},max:function(){return Math.max.apply(Math,this)
},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,addRangeObserver:function(d,f,h,e){var a=this._array_rangeObservers;
if(!a){a=this._array_rangeObservers=SC.CoreSet.create()}if(this._array_oldLength===undefined){this._array_oldLength=this.get("length")
}var g=this.rangeObserverClass;var b=NO;var c=g.create(this,d,f,h,e,b);a.add(c);if(!this._array_isNotifyingRangeObservers){this._array_isNotifyingRangeObservers=YES;
this.addObserver("[]",this,this._array_notifyRangeObservers)}return c},updateRangeObserver:function(b,a){return b.update(this,a)
},removeRangeObserver:function(c){var b=c.destroy(this);var a=this._array_rangeObservers;
if(a){a.remove(c)}return b},enumerableContentDidChange:function(h,g,f){var a=this._array_rangeObservers,d=this._array_oldLength,e,c,b;
this.beginPropertyChanges();this.notifyPropertyChange("length");if(a&&a.length>0){if(d===undefined){d=0
}this._array_oldLength=e=this.get("length");if(h===undefined){h=0}if(f===undefined){f=e-d
}if(f!==0||g===undefined){c=e-h;if(f<0){c-=f}}else{c=g}b=this._array_rangeChanges;
if(!b){b=this._array_rangeChanges=SC.IndexSet.create()}b.add(h,c)}this.notifyPropertyChange("[]");
this.endPropertyChanges();return this},_array_notifyRangeObservers:function(){var c=this._array_rangeObservers,d=this._array_rangeChanges,b=c?c.length:0,a,e;
if(b>0&&d&&d.length>0){for(a=0;a<b;a++){c[a].rangeDidChange(d)}d.clear()}}};SC.mixin(Array.prototype,SC.Array);
SC.Array=SC.mixin({},SC.Enumerable,SC.Array);SC.Array.slice=function(b,d){var a=[];
var c=this.get("length");if(SC.none(b)){b=0}if(SC.none(d)||(d>c)){d=c}while(b<d){a[a.length]=this.objectAt(b++)
}return a};SC.Array.indexOf=function(d,c){var b,a=this.get("length");if(c===undefined){c=0
}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this.objectAt(b)===d){return b
}}return -1};if(!Array.prototype.indexOf){Array.prototype.indexOf=SC.Array.indexOf
}SC.Array.lastIndexOf=function(d,c){var b,a=this.get("length");if(c===undefined){c=a-1
}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this.objectAt(b)===d){return b
}}return -1};if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=SC.Array.lastIndexOf
}(function(){SC.mixin(Array.prototype,{replace:function(d,g,f){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(!f||f.length===0){this.splice(d,g)}else{var e=[d,g].concat(f);this.splice.apply(this,e)
}var c=f?(f.get?f.get("length"):f.length):0;this.enumerableContentDidChange(d,g,c-g);
return this},unknownProperty:function(d,e){var c=this.reducedProperty(d,e);if((e!==undefined)&&c===undefined){c=this[d]=e
}return c}});var b=Array.prototype.indexOf;if(!b||(b===SC.Array.indexOf)){Array.prototype.indexOf=function(f,e){var d,c=this.length;
if(e===undefined){e=0}else{e=(e<0)?Math.ceil(e):Math.floor(e)}if(e<0){e+=c}for(d=e;
d<c;d++){if(this[d]===f){return d}}return -1}}var a=Array.prototype.lastIndexOf;if(!a||(a===SC.Array.lastIndexOf)){Array.prototype.lastIndexOf=function(f,e){var d,c=this.length;
if(e===undefined){e=c-1}else{e=(e<0)?Math.ceil(e):Math.floor(e)}if(e<0){e+=c}for(d=e;
d>=0;d--){if(this[d]===f){return d}}return -1}}})();SC.Comparable={isComparable:YES,compare:function(d,c){throw"%@.compare() is not implemented".fmt(this.toString())
}};SC.Copyable={isCopyable:YES,copy:function(a){throw"%@.copy() is not implemented"
},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES){return this
}else{if(a===undefined){throw"%@ does not support freezing".fmt(this)}else{return this.copy().freeze()
}}}};SC.mixin(Array.prototype,SC.Copyable);Array.prototype.copy=function(b){var c=this.slice(),a;
if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}return c};SC.DelegateSupport={delegateFor:function(c){var b=1,a=arguments.length,d;
while(b<a){d=arguments[b];if(d&&d[c]!==undefined){return d}b++}return(this[c]!==undefined)?this:null
},invokeDelegateMethod:function(c,a,b){b=SC.A(arguments);b=b.slice(2,b.length);if(!c||!c[a]){c=this
}var d=c[a];return d?d.apply(c,b):null},getDelegateProperty:function(d,e){var b=1,a=arguments.length,c;
while(b<a){c=arguments[b++];if(c&&c[d]!==undefined){return c.get?c.get(d):c[d]}}return(this[d]!==undefined)?this.get(d):undefined
}};SC.FROZEN_ERROR=new Error("Cannot modify a frozen object");SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){if(this.set){this.set("isFrozen",YES)
}else{this.isFrozen=YES}return this}};SC.mixin(Array.prototype,SC.Freezable);sc_require("mixins/enumerable");
sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");
SC.Set=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,{create:function(b){var c,a,d=SC.Set._pool,e=this.isObservable;
if(!e&&b===undefined&&d.length>0){c=d.pop()}else{c=SC.beget(this);if(e){c.initObservable()
}if(b&&b.isEnumerable&&b.get("length")>0){c.isObservable=NO;if(b.isSCArray){a=b.get?b.get("length"):b.length;
while(--a>=0){c.add(b.objectAt(a))}}else{if(b.isSet){a=b.length;while(--a>=0){c.add(b[a])
}}else{b.forEach(function(f){c.add(f)},this)}}c.isObservable=e}}return c},isSet:YES,length:0,firstObject:function(){return(this.length>0)?this[0]:undefined
}.property(),clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}this.length=0;
return this},contains:function(b){if(b===null){return NO}var a=this[SC.hashFor(b)];
return(!SC.none(a)&&(a<this.length)&&(this[a]===b))},isEqual:function(a){if(!a||!a.isSet||(a.get("length")!==this.get("length"))){return NO
}var b=this.get("length");while(--b>=0){if(!a.contains(this[b])){return NO}}return YES
},addSetObserver:function(a){if(!this.setObservers){this.setObservers=SC.CoreSet.create()
}this.setObservers.add(a)},removeSetObserver:function(a){if(!this.setObservers){return
}this.setObservers.remove(a)},add:function(e){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(e===null||e===undefined){return this}var c,d=(e&&(c=e.hash)&&(typeof c===SC.T_FUNCTION))?c.call(e):SC.guidFor(e),b=this[d],a=this.length;
if((b===null||b===undefined)||(b>=a)||(this[b]!==e)){this[a]=e;this[d]=a;this.length=a+1;
if(this.setObservers){this.didAddItem(e)}}if(this.isObservable){this.enumerableContentDidChange()
}return this},addEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)
}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");
while(--a>=0){this.add(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.add(c[a])
}}else{c.forEach(function(d){this.add(d)},this)}}if(b){this.endPropertyChanges()}return this
},remove:function(e){if(this.isFrozen){throw SC.FROZEN_ERROR}if(e===null||e===undefined){return this
}var c,d=(e&&(c=e.hash)&&(typeof c===SC.T_FUNCTION))?c.call(e):SC.guidFor(e),b=this[d],a=this.length;
if((b===null||b===undefined)||(b>=a)||(this[b]!==e)){return this}delete this[d];if(b<(a-1)){tmp=this[b]=this[a-1];
d=(tmp&&(c=tmp.hash)&&(typeof c===SC.T_FUNCTION))?c.call(tmp):SC.guidFor(tmp);this[d]=b
}this.length=a-1;if(this.isObservable){this.enumerableContentDidChange()}if(this.setObservers){this.didRemoveItem(e)
}return this},pop:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=(this.length>0)?this[this.length-1]:null;
if(a){this.remove(a)}return a},removeEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;
if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.remove(c.objectAt(a))
}}else{if(c.isSet){a=c.length;while(--a>=0){this.remove(c[a])}}else{c.forEach(function(d){this.remove(d)
},this)}}if(b){this.endPropertyChanges()}return this},copy:function(){return this.constructor.create(this)
},destroy:function(){this.isFrozen=NO;if(!this.isObservable){SC.Set._pool.push(this.clear())
}return this},forEach:function(c,d){var b=this.length;if(!d){d=this}for(var a=0;a<b;
a++){c.call(d,this[a],a,this)}return this},toString:function(){var b=this.length,a,c=[];
for(a=0;a<b;a++){c[a]=this[a]}return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(c){var d=this.setObservers;
if(!d){return}var b=d.length,a;for(a=0;a<b;a++){d[a].didAddItem(this,c)}},didRemoveItem:function(c){var d=this.setObservers;
if(!d){return}var b=d.length,a;for(a=0;a<b;a++){d[a].didRemoveItem(this,c)}},_pool:[],isObservable:YES});
SC.Set.constructor=SC.Set;SC.Set.clone=SC.Set.copy;SC.Set.push=SC.Set.unshift=SC.Set.add;
SC.Set.shift=SC.Set.pop;SC.Set.addObject=SC.Set.add;SC.Set.removeObject=SC.Set.remove;
SC.Set._pool=[];SC.CoreSet=SC.beget(SC.Set);SC.CoreSet.isObservable=NO;SC.CoreSet.constructor=SC.CoreSet;
sc_require("mixins/observable");sc_require("system/set");SC.Observers={queue:[],addObserver:function(c,d,e,b){var a;
if(typeof c==="string"){a=SC.tupleForPropertyPath(c,b)}else{a=c}if(a){a[0].addObserver(a[1],d,e)
}else{this.queue.push([c,d,e,b])}},removeObserver:function(f,g,h,d){var c,b,a,e;a=SC.tupleForPropertyPath(f,d);
if(a){a[0].removeObserver(a[1],g,h)}c=this.queue.length;b=this.queue;while(--c>=0){e=b[c];
if((e[0]===f)&&(e[1]===g)&&(e[2]==h)&&(e[3]===d)){b[c]=null}}},addPendingRangeObserver:function(a){var b=this.rangeObservers;
if(!b){b=this.rangeObservers=SC.CoreSet.create()}b.add(a);return this},_TMP_OUT:[],flush:function(a){var e=this.queue;
if(e&&e.length>0){var h=(this.queue=[]);var i=e.length;while(--i>=0){var j=e[i];if(!j){continue
}var f=SC.tupleForPropertyPath(j[0],j[3]);if(f){f[0].addObserver(f[1],j[1],j[2])}else{h.push(j)
}}}if(a._kvo_needsRangeObserver){var g=this.rangeObservers,d=g?g.get("length"):0,b=this._TMP_OUT,c;
for(i=0;i<d;i++){c=g[i];if(c.setupPending(a)){b.push(c)}}if(b.length>0){g.removeEach(b)
}b.length=0;a._kvo_needsRangeObserver=NO}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)
},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var c;
if(--this.isObservingSuspended<=0){c=this._pending;this._pending=SC.CoreSet.create();
var b,a=c.length;for(b=0;b<a;b++){c[b]._notifyPropertyObservers()}c.clear();c=null
}}};sc_require("core");sc_require("mixins/observable");sc_require("private/observer_queue");
sc_require("mixins/array");sc_require("system/set");SC.BENCHMARK_OBJECTS=NO;SC._object_extend=function _object_extend(g,f){if(!f){throw"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?"
}g._kvo_cloned=null;var x,m,s,e,h=g.concatenatedProperties,k=SC.K;var c,b;m=(h)?h.length:0;
var a=(m>0)?{}:null;while(--m>=0){x=h[m];c=g[x];b=f[x];if(c){if(!(c instanceof Array)){c=SC.$A(c)
}a[x]=(b)?c.concat(b):b}else{if(!(b instanceof Array)){b=SC.$A(b)}a[x]=b}}var w=g._bindings,l=NO;
var u=g._observers,v=NO;var i=g._properties,d=NO;var p,j,n;var r=g.outlets,q=NO;if(f.outlets){r=(r||SC.EMPTY_ARRAY).concat(f.outlets);
q=YES}for(x in f){if(x==="_kvo_cloned"){continue}if(!f.hasOwnProperty(x)){continue
}var o=(a.hasOwnProperty(x)?a[x]:null)||f[x];if(x.length>7&&x.slice(-7)==="Binding"){if(!l){w=(w||SC.EMPTY_ARRAY).slice();
l=YES}if(w===null){w=(g._bindings||SC.EMPTY_ARRAY).slice()}w[w.length]=x}else{if(o&&(o instanceof Function)){if(!o.superclass&&(o!==(e=g[x]))){o.superclass=o.base=e||k
}if(o.propertyPaths){if(!v){u=(u||SC.EMPTY_ARRAY).slice();v=YES}u[u.length]=x}if(p=o.localPropertyPaths){j=p.length;
while(--j>=0){n=g._kvo_for(SC.keyFor("_kvo_local",p[j]),SC.CoreSet);n.add(x);g._kvo_for("_kvo_observed_keys",SC.CoreSet).add(p[j])
}}if(o.dependentKeys){if(!d){i=(i||SC.EMPTY_ARRAY).slice();d=YES}i[i.length]=x}if(o.autoconfiguredOutlet){if(!q){r=(r||SC.EMPTY_ARRAY).slice();
q=YES}r[r.length]=x}}}g[x]=o}if(f.hasOwnProperty("toString")){x="toString";o=(a.hasOwnProperty(x)?a[x]:null)||f[x];
if(!o.superclass&&(o!==(e=g[x]))){o.superclass=o.base=e||k}g[x]=o}g._bindings=w||[];
g._observers=u||[];g._properties=i||[];g.outlets=r||[];return g};SC.Object=function(a){return this._object_init(a)
};SC.mixin(SC.Object,{mixin:function(b){var a=arguments.length,c;for(c=0;c<a;c++){SC.mixin(this,arguments[c])
}return this},superclass:null,extend:function(e){var d=SC.BENCHMARK_OBJECTS;if(d){SC.Benchmark.start("SC.Object.extend")
}var g,c=function(h){return this._object_init(h)};for(g in this){if(!this.hasOwnProperty(g)){continue
}c[g]=this[g]}if(this.hasOwnProperty("toString")){c.toString=this.toString}c.superclass=this;
SC.generateGuid(c);c.subclasses=SC.Set.create();this.subclasses.add(c);var f=(c.prototype=SC.beget(this.prototype));
var b,a=arguments.length;for(b=0;b<a;b++){SC._object_extend(f,arguments[b])}f.constructor=c;
if(d){SC.Benchmark.end("SC.Object.extend")}return c},create:function(){var b=this,a=new b(arguments);
if(SC.ObjectDesigner){SC.ObjectDesigner.didCreateObject(a,SC.$A(arguments))}return a
},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)
},subclassOf:function(b){if(this===b){return NO}var a=this;while(a=a.superclass){if(a===b){return YES
}}return NO},hasSubclass:function(a){return(a&&a.subclassOf)?a.subclassOf(this):NO
},kindOf:function(a){return(this===a)||this.subclassOf(a)},design:function(){if(this.isDesign){return this
}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ObjectDesigner){SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments))
}return a}});SC.Object.prototype={_kvo_enabled:YES,_object_init:function(c){var b,a=(c)?c.length:0;
for(b=0;b<a;b++){SC._object_extend(this,c[b])}SC.generateGuid(this);this.init();var d=this.initMixin;
a=(d)?d.length:0;for(b=0;b<a;b++){d[b].call(this)}return this},mixin:function(){var b,a=arguments.length;
for(b=0;b<a;b++){SC.mixin(this,arguments[b])}for(b=0;b<a;b++){var c=arguments[b].initMixin;
if(c){c.call(this)}}return this},init:function(){this.initObservable();return this
},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed")){return this}this.set("isDestroyed",YES);
var b,c=this.destroyMixin,a=(c)?c.length:0;for(b=0;b<a;b++){c[b].call(this)}this.bindings.invoke("disconnect");
this.bindings=null;return this},isObject:true,respondsTo:function(a){return !!(this[a] instanceof Function)
},tryToPerform:function(b,c,a){return this.respondsTo(b)&&(this[b](c,a)!==NO)},superclass:function(b){var a=arguments.callee.caller;
if(!a){throw"superclass cannot determine the caller method"}return a.superclass?a.superclass.apply(this,arguments):null
},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)
},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor);
var b="%@:%@".fmt(a,SC.guidFor(this));if(a){this._object_toString=b}else{return b
}}return this._object_toString},awake:function(c){var e=this.outlets,b,a,d;for(b=0,a=e.length;
b<a;++b){d=e[b];this.get(d)}this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);
return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);
return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]};
SC.Object.prototype.constructor=SC.Object;SC.mixin(SC.Object.prototype,SC.Observable);
function findClassNames(){if(SC._object_foundObjectClassNames){return}SC._object_foundObjectClassNames=true;
var b=[];var c=false;var a=function(d,e,h){h--;if(b.indexOf(e)>=0){return}b.push(e);
for(var f in e){if(f=="__scope__"){continue}if(f=="superclass"){continue}if(f=="__SC__"){f="SC"
}if(!f.match(/^[A-Z0-9]/)){continue}if(f=="SC"){if(c){continue}c=true}var i=(d)?[d,f].join("."):f;
var g=e[f];switch(SC.typeOf(g)){case SC.T_CLASS:if(!g._object_className){g._object_className=i
}if(h>=0){a(i,g,h)}break;case SC.T_OBJECT:if(h>=0){a(i,g,h)}break;case SC.T_HASH:if(((d)||(i==="SC"))&&(h>=0)){a(i,g,h)
}break;default:break}}};window.__SC__=SC;a(null,window,2)}SC.instanceOf=function(a,b){return !!(a&&a.constructor===b)
};SC.kindOf=function(a,b){if(a&&!a.isClass){a=a.constructor}return !!(a&&a.kindOf&&a.kindOf(b))
};SC._object_className=function(b){if(SC.isReady===NO){return""}if(!b._object_className){findClassNames()
}if(b._object_className){return b._object_className}var a=b;while(a&&!a._object_className){a=a.superclass
}return(a&&a._object_className)?a._object_className:"Anonymous"};require("system/object");
SC._ChainObserver=function(a){this.property=a};SC._ChainObserver.createChain=function(d,j,f,a,b){var c=j.split("."),h=new SC._ChainObserver(c[0]),g=h,e=c.length;
for(var i=1;i<e;i++){g=g.next=new SC._ChainObserver(c[i])}h.objectDidChange(d);g.target=f;
g.method=a;g.context=b;return h};SC._ChainObserver.prototype={isChainObserver:true,object:null,property:null,next:null,target:null,method:null,objectDidChange:function(a){if(a===this.object){return
}if(this.object&&this.object.removeObserver){this.object.removeObserver(this.property,this,this.propertyDidChange)
}this.object=a;if(this.object&&this.object.addObserver){this.object.addObserver(this.property,this,this.propertyDidChange)
}this.propertyDidChange()},propertyDidChange:function(){var b=this.object;var e=this.property;
var d=(b&&b.get)?b.get(e):null;if(this.next){this.next.objectDidChange(d)}var f=this.target,g=this.method,c=this.context;
if(f&&g){var a=b?b.propertyRevision:null;if(c){g.call(f,b,e,d,c,a)}else{g.call(f,b,e,d,a)
}}},destroyChain:function(){var a=this.object;if(a&&a.removeObserver){a.removeObserver(this.property,this,this.propertyDidChange)
}if(this.next){this.next.destroyChain()}this.next=this.target=this.method=this.object=this.context=null;
return null}};sc_require("system/object");SC.LOG_BINDINGS=NO;SC.BENCHMARK_BINDING_NOTIFICATIONS=NO;
SC.BENCHMARK_BINDING_SETUP=NO;SC.MULTIPLE_PLACEHOLDER="@@MULT@@";SC.NULL_PLACEHOLDER="@@NULL@@";
SC.EMPTY_PLACEHOLDER="@@EMPTY@@";SC.Binding={beget:function(b){var a=SC.beget(this);
a.parentBinding=this;if(b!==undefined){a=a.from(b)}return a},builder:function(){var b=this,a=function(c){return b.beget().from(c)
};a.beget=function(){return b.beget()};return a},from:function(b,a){if(!b){return this
}var c=(this===SC.Binding)?this.beget():this;c._fromPropertyPath=b;c._fromRoot=a;
c._fromTuple=null;return c},to:function(b,a){var c=(this===SC.Binding)?this.beget():this;
c._toPropertyPath=b;c._toRoot=a;c._toTuple=null;return c},connect:function(){if(this.isConnected){return this
}this.isConnected=YES;this._connectionPending=YES;this._syncOnConnect=YES;SC.Binding._connectQueue.add(this);
return this},_connect:function(){if(!this._connectionPending){return}this._connectionPending=NO;
var c,a,b=SC.BENCHMARK_BINDING_SETUP;if(b){SC.Benchmark.start("SC.Binding.connect()")
}c=this._fromPropertyPath;a=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);
if(!a){a=this._toRoot}}else{if(c.indexOf("*")===0){c=[this._fromRoot||this._toRoot,c.slice(1)];
a=null}}}this._fromObserverData=[c,this,this.fromPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData);
if(!this._oneWay){c=this._toPropertyPath;a=this._toRoot;this._toObserverData=[c,this,this.toPropertyDidChange,a];
SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)}if(b){SC.Benchmark.end("SC.Binding.connect()")
}if(this._syncOnConnect){this._syncOnConnect=NO;if(b){SC.Benchmark.start("SC.Binding.connect().sync")
}this.sync();if(b){SC.Benchmark.end("SC.Binding.connect().sync")}}},disconnect:function(){if(!this.isConnected){return this
}if(this._connectionPending){this._connectionPending=NO}else{SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData);
if(!this._oneWay){SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)
}}this.isConnected=NO;return this},fromPropertyDidChange:function(c,b){var a=c?c.get(b):null;
if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;
SC.Binding._changeQueue.add(this)}},toPropertyDidChange:function(c,b){if(this._oneWay){return
}var a=c.get(b);if(a!==this._transformedBindingValue){this._setBindingValue(c,b);
this._changePending=YES;SC.Binding._changeQueue.add(this)}},_setBindingValue:function(b,a){this._bindingSource=b;
this._bindingKey=a},_computeBindingValue:function(){var g=this._bindingSource,e=this._bindingKey,c,b;
this._bindingValue=c=(g?g.getPath(e):null);var f=this._transforms;if(f){var a=f.length,d;
for(b=0;b<a;b++){d=f[b];c=d(c,this)}}if(this._noError&&SC.typeOf(c)===SC.T_ERROR){c=null
}this._transformedBindingValue=c},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),_changePending:NO,flushPendingChanges:function(){if(this._isFlushing){return NO
}this._isFlushing=YES;SC.Observers.suspendPropertyObserving();var b=NO,c=SC.LOG_BINDINGS,a,d;
while((a=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue;
this._alternateConnectQueue=a;while(d=a.pop()){d._connect()}}while((a=this._changeQueue).length>0){if(c){console.log("Begin: Trigger changed bindings")
}b=YES;this._changeQueue=this._alternateChangeQueue;this._alternateChangeQueue=a;
while(d=a.pop()){d.applyBindingValue()}if(c){console.log("End: Trigger changed bindings")
}}this._isFlushing=NO;SC.Observers.resumePropertyObserving();return b},applyBindingValue:function(){this._changePending=NO;
this._computeBindingTargets();this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue,c=SC.BENCHMARK_BINDING_NOTIFICATIONS,d=SC.LOG_BINDINGS;
if(!this._oneWay&&this._fromTarget){if(d){console.log("%@: %@ -> %@".fmt(this,a,b))
}if(c){SC.Benchmark.start(this.toString()+"->")}this._fromTarget.setPathIfChanged(this._fromPropertyKey,a);
if(c){SC.Benchmark.end(this.toString()+"->")}}if(this._toTarget){if(d){console.log("%@: %@ <- %@".fmt(this,a,b))
}if(c){SC.Benchmark.start(this.toString()+"<-")}this._toTarget.setPathIfChanged(this._toPropertyKey,b);
if(c){SC.Benchmark.start(this.toString()+"<-")}}},sync:function(){if(!this.isConnected){return this
}if(this._connectionPending){this._syncOnConnect=YES}else{this._computeBindingTargets();
var c=this._fromTarget,b=this._fromPropertyKey;if(!c||!b){return this}var a=c.getPath(b);
if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;
SC.Binding._changeQueue.add(this)}}return this},_syncOnConnect:NO,_computeBindingTargets:function(){if(!this._fromTarget){var c,b,a;
c=this._fromPropertyPath;b=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);
if(!b){b=this._toRoot}}else{if(c.indexOf("*")===0){c=[b||this._toRoot,c.slice(1)];
b=null}}}a=SC.tupleForPropertyPath(c,b);if(a){this._fromTarget=a[0];this._fromPropertyKey=a[1]
}}if(!this._toTarget){c=this._toPropertyPath;b=this._toRoot;a=SC.tupleForPropertyPath(c,b);
if(a){this._toTarget=a[0];this._toPropertyKey=a[1]}}},oneWay:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;
c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._oneWay=(a===undefined)?YES:a;
return b},transform:function(b){var c=(this===SC.Binding)?this.beget():this;var a=c._transforms;
if(a&&(a===c.parentBinding._transform)){a=c._transforms=a.slice()}if(!a){a=c._transforms=[]
}a.push(b);return c},resetTransforms:function(){var a=(this===SC.Binding)?this.beget():this;
a._transforms=null;return a},noError:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;
c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._noError=(a===undefined)?YES:a;
return b},single:function(b,a){if(a===undefined){a=SC.MULTIPLE_PLACEHOLDER}return this.from(b).transform(function(e,d){if(e&&e.isEnumerable){var c=e.get("length");
e=(c>1)?a:(c<=0)?null:e.firstObject()}return e})},notEmpty:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER
}return this.from(b).transform(function(d,c){if(SC.none(d)||(d==="")||(SC.isArray(d)&&d.length===0)){d=a
}return d})},notNull:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(d,c){if(SC.none(d)){d=a
}return d})},multiple:function(a){return this.from(a).transform(function(b){if(!SC.isArray(b)){b=(b==null)?[]:[b]
}return b})},bool:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);
if(c===SC.T_ERROR){return b}return(c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b})},and:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,and:function(){return(this.get("valueA")&&this.get("valueB"))
}.property("valueA","valueB").cacheable()});return this.from("and",c).oneWay()},or:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,or:function(){return(this.get("valueA")||this.get("valueB"))
}.property("valueA","valueB").cacheable()});return this.from("or",c).oneWay()},not:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);
if(c===SC.T_ERROR){return b}return !((c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b)
})},isNull:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);
return(c===SC.T_ERROR)?b:SC.none(b)})},toString:function(){var c=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath;
var b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath;
var a=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),c,b,a)
}};SC.binding=function(b,a){return SC.Binding.from(b,a)};SC.Cookie=SC.Object.extend({name:null,value:"",expires:null,path:null,domain:null,secure:NO,isCookie:YES,destroy:function(){this.set("expires",-1);
this.write();arguments.callee.base.apply(this,arguments)},write:function(){var b=this.get("name"),i=this.get("value"),c=this.get("expires"),k=this.get("path"),e=this.get("domain"),a=this.get("secure");
var h="";if(c&&(SC.typeOf(c)===SC.T_NUMBER||(SC.DateTime&&c.get&&c.get("milliseconds"))||SC.typeOf(c.toUTCString)===SC.T_FUNCTION)){var d;
if(SC.typeOf(c)===SC.T_NUMBER){d=new Date();d.setTime(d.getTime()+(c*24*60*60*1000))
}else{if(SC.DateTime&&c.get&&c.get("milliseconds")){d=new Date(c.get("milliseconds"))
}else{if(SC.typeOf(c.toUTCString)===SC.T_FUNCTION){d=c}}}if(d){h="; expires="+d.toUTCString()
}}var j=k?"; path="+k:"";var g=e?"; domain="+e:"";var f=a?"; secure":"";document.cookie=[b,"=",encodeURIComponent(i),h,j,g,f].join("");
return this}});SC.Cookie.mixin({find:function(a){if(document.cookie&&document.cookie!=""){var d=document.cookie.split(";");
for(var c=0;c<d.length;c++){var b=String(d[c]).trim();if(b.substring(0,a.length+1)===(a+"=")){return SC.Cookie.create({name:a,value:decodeURIComponent(b.substring(a.length+1))})
}}}return null}});SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this
}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))
},isError:YES});SC.Error.desc=function(d,a,e,c){var b={message:d};if(a!==undefined){b.label=a
}if(c!==undefined){b.code=c}if(e!==undefined){b.errorValue=e}return this.create(b)
};SC.$error=function(b,a,d,e){return SC.Error.desc(b,a,d,e)};SC.ok=function(a){return(a!==false)&&!(a&&a.isError)
};SC.$ok=SC.ok;SC.val=function(a){if(a&&a.isError){return a.get?a.get("errorValue"):null
}else{return a}};SC.$val=SC.val;SC.Error.HAS_MULTIPLE_VALUES=-100;sc_require("mixins/enumerable");
sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");
SC.IndexSet=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(e){if(e.length<1000){return e.slice()
}var d=0,a=[],b=e[0];while(b!==0){a[d]=b;d=(b<0)?(0-b):b;b=e[d]}a[d]=0;this._hint(0,d,a);
return a},create:function(c,b){var a=SC.beget(this);a.initObservable();a.registerDependentKey("min","[]");
if(c&&c.isIndexSet){a._content=this._sc_sliceContent(c._content);a.max=c.max;a.length=c.length;
a.source=c.source}else{a._content=[0];if(c!==undefined){a.add(c,b)}}return a},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];
return(b===0)?-1:(b>0)?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return(this.get("length")>0)?this.get("min"):undefined
}.property(),rangeStartForIndex:function(c){var f=this._content,a=this.get("max"),b,e,d;
if(c>=a){return a}if(Math.abs(f[c])>c){return c}d=c-(c%SC.IndexSet.HINT_SIZE);b=f[d];
if(b<0||b>c){b=d}e=Math.abs(f[b]);while(e<c){b=e;e=Math.abs(f[b])}return b},isEqual:function(c){if(c===this){return YES
}if(!c||!c.isIndexSet||(c.max!==this.max)||(c.length!==this.length)){return NO}var e=this._content,b=c._content,d=0,a=e[d];
do{if(b[d]!==a){return NO}d=Math.abs(a);a=e[d]}while(d!==0);return YES},indexBefore:function(b){if(b===0){return -1
}b--;var c=this._content,a=this.get("max"),d=this.rangeStartForIndex(b);if(!c){return null
}while((d===a)||(c[d]<0)){if(d===0){return -1}b=d-1;d=this.rangeStartForIndex(b)}return b
},indexAfter:function(b){var d=this._content,a=this.get("max"),e,c;if(!d||(b>=a)){return -1
}b++;e=this.rangeStartForIndex(b);c=d[e];while(c<0){if(c===0){return -1}b=e=Math.abs(c);
c=d[e]}return b},contains:function(g,c){var b,f,a,e,d;if(c===undefined){if(g===null||g===undefined){return NO
}if(typeof g===SC.T_NUMBER){c=1}else{if(g&&g.isIndexSet){if(g===this){return YES}b=g._content;
f=0;a=b[f];while(a!==0){if((a>0)&&!this.contains(f,a-f)){return NO}f=Math.abs(a);
a=b[f]}return YES}else{c=g.length;g=g.start}}}e=this.rangeStartForIndex(g);d=this._content[e];
return(d>0)&&(e<=g)&&(d>=(g+c))},intersects:function(f,c){var b,e,a,d;if(c===undefined){if(typeof f===SC.T_NUMBER){c=1
}else{if(f&&f.isIndexSet){if(f===this){return YES}b=f._content;e=0;a=b[e];while(a!==0){if((a>0)&&this.intersects(e,a-e)){return YES
}e=Math.abs(a);a=b[e]}return NO}else{c=f.length;f=f.start}}}e=this.rangeStartForIndex(f);
b=this._content;a=b[e];d=f+c;while(e<d){if(a===0){return NO}if((a>0)&&(a>f)){return YES
}e=Math.abs(a);a=b[e]}return NO},without:function(b,a){if(b===this){return SC.IndexSet.create()
}return this.clone().remove(b,a)},replace:function(c,a){if(a===undefined){if(typeof c===SC.T_NUMBER){a=1
}else{if(c&&c.isIndexSet){this._content=this._sc_sliceContent(c._content);this.beginPropertyChanges().set("max",c.max).set("length",c.length).set("source",c.source).enumerableContentDidChange().endPropertyChanges();
return this}else{a=c.length;c=c.start}}}var b=this.length;this._content.length=1;
this._content[0]=0;this.length=this.max=0;return this.add(c,a)},add:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR
}var e,i,d;if(a&&a.isIndexSet){e=a._content;if(!e){return this}i=0;d=e[0];while(d!==0){if(d>0){this.add(i,d-i)
}i=d<0?0-d:d;d=e[i]}return this}else{if(b===undefined){if(a===null||a===undefined){return this
}else{if(typeof a===SC.T_NUMBER){b=1}else{b=a.length;a=a.start}}}else{if(b===null){b=1
}}}if(b<=0){return this}var f=this.get("max"),c=f,h,g;e=this._content;if(a===f){if(a>0){i=this.rangeStartForIndex(a-1);
d=e[i];if(d>0){delete e[f];e[i]=f=a+b;a=i}else{e[f]=f=a+b}}else{e[a]=f=b}e[f]=0;this.set("max",f);
this.set("length",this.length+b);b=f-a}else{if(a>f){e[f]=0-a;e[a]=a+b;e[a+b]=0;this.set("max",a+b);
this.set("length",this.length+b);b=a+b-f;a=f}else{i=this.rangeStartForIndex(a);d=e[i];
f=a+b;h=0;if((a>0)&&(i===a)&&(d<=0)){i=this.rangeStartForIndex(a-1);d=e[i]}if(d<0){e[i]=0-a;
if(Math.abs(d)>f){e[a]=0-f;e[f]=d}else{e[a]=d}}else{a=i;if(d>f){f=d}}i=a;while(i<f){g=e[i];
if(g===0){e[f]=0;d=f;h+=f-i}else{d=Math.abs(g);if(d>f){e[f]=g;d=f}if(g<0){h+=d-i}}delete e[i];
i=d}if((i=e[f])>0){delete e[f];f=i}e[a]=f;if(f>c){this.set("max",f)}this.set("length",this.get("length")+h);
b=f-a}}this._hint(a,b);if(h!==0){this.enumerableContentDidChange()}return this},remove:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR
}if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1
}else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}else{b=a.length;
a=a.start}}}}if(b<=0){return this}var f=this.get("max"),c=f,e=this._content,j,d,i,g,h;
if(a>=f){return this}j=this.rangeStartForIndex(a);d=e[j];h=a+b;i=0;if((a>0)&&(j===a)&&(d>0)){j=this.rangeStartForIndex(a-1);
d=e[j]}if(d>0){e[j]=a;if(d>h){e[a]=h;e[h]=d}else{e[a]=d}}else{a=j;d=Math.abs(d);if(d>h){h=d
}}j=a;while(j<h){g=e[j];if(g===0){e[h]=0;d=h}else{d=Math.abs(g);if(d>h){e[h]=g;d=h
}if(g>0){i+=d-j}}delete e[j];j=d}if((j=e[h])<0){delete e[h];h=Math.abs(j)}if(e[h]===0){delete e[h];
e[a]=0;this.set("max",a)}else{e[a]=0-h}this.set("length",this.get("length")-i);b=h-a;
this._hint(a,b);if(i!==0){this.enumerableContentDidChange()}return this},_hint:function(g,d,c){if(c===undefined){c=this._content
}var b=SC.IndexSet.HINT_SIZE,a=Math.abs(c[g]),f=g-(g%b)+b,e=g+d;while(f<e){while((a!==0)&&(a<=f)){g=a;
a=Math.abs(c[g])}if(a===0){delete c[f]}else{if(f!==g){c[f]=g}}f+=b}},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR
}var a=this.length;this._content.length=1;this._content[0]=0;this.set("length",0).set("max",0);
if(a>0){this.enumerableContentDidChange()}},addEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR
}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.add(b.objectAt(a))
}}else{if(b.isEnumerable){b.forEach(function(c){this.add(c)},this)}}this.endPropertyChanges();
return this},removeEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();
var a=b.get("length");if(b.isSCArray){while(--a>=0){this.remove(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.remove(c)
},this)}}this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)
},inspect:function(){var e=this._content,b=e.length,a=0,c=[],d;for(a=0;a<b;a++){d=e[a];
if(d!==undefined){c.push("%@:%@".fmt(a,d))}}return"SC.IndexSet<%@>".fmt(c.join(" , "))
},forEachRange:function(f,d){var b=this._content,e=0,a=b[e],c=this.source;if(d===undefined){d=null
}while(a!==0){if(a>0){f.call(d,e,a-e,this,c)}e=Math.abs(a);a=b[e]}return this},forEachIn:function(b,c,j,f){var g=this._content,i=0,h=0,d=b+c,a=this.source,e=g[i];
if(f===undefined){f=null}while(e!==0){if(i<b){i=b}while((i<e)&&(i<d)){j.call(f,i++,h++,this,a)
}if(i>=d){i=e=0}else{i=Math.abs(e);e=g[i]}}return this},lengthIn:function(g,d){var a=0;
if(d===undefined){if(g===null||g===undefined){return 0}else{if(typeof g===SC.T_NUMBER){d=1
}else{if(g.isIndexSet){g.forEachRange(function(i,h){a+=this.lengthIn(i,h)},this);
return a}else{d=g.length;g=g.start}}}}if(this.get("length")===0){return 0}var c=this._content,f=0,b=c[f],e=g+d;
while(f<e&&b!==0){if(b>0){a+=(b>e)?e-f:b-f}f=Math.abs(b);b=c[f]}return a},source:null,indexOf:function(d,c){var f=this.source;
if(!f){throw"%@.indexOf() requires source".fmt(this)}var b=f.get("length"),e=this._content,g=e[0]<0?Math.abs(e[0]):0,a;
while(g>=0&&g<b){a=f.indexOf(d,g);if(a<0){return -1}if(this.contains(a)){return a
}g=a+1}return -1},lastIndexOf:function(d,c){var e=this.source;if(!e){throw"%@.lastIndexOf() requires source".fmt(this)
}var b=e.get("length"),f=this.max-1,a;if(f>=b){f=b-1}while(f>=0){a=e.lastIndexOf(d,f);
if(a<0){return -1}if(this.contains(a)){return a}f=a+1}return -1},forEachObject:function(g,e){var d=this.source;
if(!d){throw"%@.forEachObject() requires source".fmt(this)}var c=this._content,f=0,a=0,b=c[f];
if(e===undefined){e=null}while(b!==0){while(f<b){g.call(e,d.objectAt(f),f,d,this);
f++}f=Math.abs(b);b=c[f]}return this},addObject:function(c,d){var e=this.source;if(!e){throw"%@.addObject() requires source".fmt(this)
}var b=e.get("length"),f=0,a;while(f>=0&&f<b){a=e.indexOf(c,f);if(a>=0){this.add(a);
if(d){return this}f=a++}else{return this}}return this},addObjects:function(b,a){b.forEach(function(c){this.addObject(c,a)
},this);return this},removeObject:function(c,d){var e=this.source;if(!e){throw"%@.removeObject() requires source".fmt(this)
}var b=e.get("length"),f=0,a;while(f>=0&&f<b){a=e.indexOf(c,f);if(a>=0){this.remove(a);
if(d){return this}f=a+1}else{return this}}return this},removeObjects:function(b,a){b.forEach(function(c){this.removeObject(c,a)
},this);return this},LOG_OBSERVING:NO,forEach:function(g,e){var c=this._content,f=0,a=0,d=this.source,b=c[f];
if(e===undefined){e=null}while(b!==0){while(f<b){g.call(e,f++,a++,this,d)}f=Math.abs(b);
b=c[f]}return this},nextObject:function(f,b,c){var e=this._content,d=c.next,a=this.get("max");
if(b===null){b=d=0}else{if(b>=a){delete c.next;return null}else{b++}}if(b===d){do{b=Math.abs(d);
d=e[b]}while(d<0);c.next=d}return b},toString:function(){var a=[];this.forEachRange(function(c,b){a.push(b===1?c:"%@..%@".fmt(c,c+b-1))
},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0});SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone;
SC.IndexSet.EMPTY=SC.IndexSet.create().freeze();SC.LOGGER_LOG_DELIMITER=", ";SC.LOGGER_LOG_ERROR="ERROR: ";
SC.LOGGER_LOG_INFO="INFO: ";SC.LOGGER_LOG_WARN="WARNING: ";SC.LOGGER_LOG_DEBUG="DEBUG: ";
SC.Logger=SC.Object.create({debugEnabled:NO,exists:function(){return typeof(this.get("reporter"))!=="undefined"&&this.get("reporter")!=null
}.property("reporter").cacheable(),fallBackOnAlert:NO,fallBackOnLog:YES,format:YES,reporter:console,log:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.log)==="function"){if(this.get("format")){a.log(this._argumentsToString.apply(this,arguments))
}else{a.log.apply(a,arguments)}return true}else{if(this.fallBackOnAlert){var b=this.get("format")?this._argumentsToString.apply(this,arguments):arguments;
if(this.get("exists")&&typeof(a.alert)==="function"){a.alert(b)}else{alert(b)}return true
}}return false},debug:function(){var c=this.get("reporter");if(this.get("debugEnabled")!==YES){return false
}if(this.get("exists")&&(typeof c.debug==="function")){c.debug.apply(c,arguments);
return true}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_DEBUG)
}return this.log.apply(this,b)}}return false},dir:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.dir)==="function"){a.dir.apply(a,arguments);return true
}return(this.fallBackOnLog)?this.log.apply(this,arguments):false},dirxml:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.dirxml)==="function"){a.dirxml.apply(a,arguments);
return true}return(this.fallBackOnLog)?this.log.apply(this,arguments):false},error:function(){var c=this.get("reporter");
if(this.get("exists")&&typeof(c.error)==="function"){c.error.apply(c,arguments);return true
}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_ERROR)
}return this.log.apply(this,b)}}return false},group:function(b){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.group)==="function"){a.group(b);return true}return false
},groupEnd:function(){var a=this.get("reporter");if(this.get("exists")&&typeof(a.groupEnd)==="function"){a.groupEnd();
return true}return false},info:function(){var c=this.get("reporter");if(this.get("exists")&&typeof(c.info)==="function"){c.info.apply(c,arguments);
return true}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_INFO)
}return this.log.apply(this,b)}}return false},profile:function(){var a=this.get("reporter");
if(this.get("exists")&&typeof(a.profile)==="function"){a.profile();return true}return false
},profileEnd:function(){var a=this.get("reporter");if(this.get("exists")&&typeof(a.profileEnd)==="function"){a.profileEnd();
return true}return false},time:function(b){var a=this.get("reporter");if(this.get("exists")&&typeof(a.time)==="function"){a.time(b);
return true}return false},timeEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&typeof(a.timeEnd)==="function"){a.timeEnd(b);
return true}return false},trace:function(){var a=this.get("reporter");if(this.get("exists")&&typeof(a.trace)==="function"){a.trace();
return true}return false},warn:function(){var c=this.get("reporter");if(this.get("exists")&&typeof(c.warn)==="function"){c.warn.apply(c,arguments);
return true}else{if(this.fallBackOnLog){var b=this._argumentsToArray(arguments);if(typeof(b.unshift)==="function"){b.unshift(SC.LOGGER_LOG_WARN)
}return this.log.apply(this,b)}}return false},_argumentsToArray:function(d){if(!d){return[]
}var b=[];for(var c=0;c<d.length;c++){b[c]=d[c]}return b},_argumentsToString:function(){var b="";
for(var a=0;a<arguments.length-1;a++){b+=arguments[a]+SC.LOGGER_LOG_DELIMITER}b+=arguments[arguments.length-1];
return b}});sc_require("private/observer_set");SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=new Date().getTime();
if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){console.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start))
}this._runLoopInProgress=YES;return this},isRunLoopInProgress:function(){return this._runLoopInProgress
}.property(),endRunLoop:function(){var a;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){console.log("-- SC.RunLoop.endRunLoop ~ flushing application queues")
}do{a=this.flushApplicationQueues();if(!a){a=this._flushinvokeLastQueue()}}while(a);
this._start=null;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){console.log("-- SC.RunLoop.endRunLoop ~ End")
}SC.RunLoop.lastRunLoopEnd=Date.now();this._runLoopInProgress=NO;return this},invokeOnce:function(a,b){if(b===undefined){b=a;
a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeQueue){this._invokeQueue=SC.ObserverSet.create()
}this._invokeQueue.add(a,b);return this},invokeLast:function(a,b){if(b===undefined){b=a;
a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeLastQueue){this._invokeLastQueue=SC.ObserverSet.create()
}this._invokeLastQueue.add(a,b);return this},flushApplicationQueues:function(){var b=NO,a=this._invokeQueue;
if(a&&a.targets>0){this._invokeQueue=null;b=YES;a.invokeMethods()}return SC.Binding.flushPendingChanges()||b
},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;if(a&&a.targets>0){this._invokeLastQueue=null;
b=YES;if(b){a.invokeMethods()}}return b}});SC.RunLoop.currentRunLoop=null;SC.RunLoop.runLoopClass=SC.RunLoop;
SC.RunLoop.begin=function(){var a=this.currentRunLoop;if(!a){a=this.currentRunLoop=this.runLoopClass.create()
}a.beginRunLoop();return this};SC.RunLoop.end=function(){var a=this.currentRunLoop;
if(!a){throw"SC.RunLoop.end() called outside of a runloop!"}a.endRunLoop();return this
};SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop){return this.currentRunLoop.get("isRunLoopInProgress")
}return NO};SC.run=function(f,d,b){if(b){var a=SC.RunLoop.isRunLoopInProgress();if(!a){SC.RunLoop.begin()
}f.call(d);if(!a){SC.RunLoop.end()}}else{try{SC.RunLoop.begin();if(f){f.call(d)}SC.RunLoop.end()
}catch(c){if(SC.ExceptionHandler){SC.ExceptionHandler.handleException(c)}if(!SC.browser.msie){throw c
}}}};sc_require("system/object");sc_require("mixins/enumerable");sc_require("mixins/copyable");
sc_require("mixins/freezable");SC.SelectionSet=SC.Object.extend(SC.Enumerable,SC.Freezable,SC.Copyable,{isSelectionSet:YES,length:function(){var a=0,b=this._sets,c=this._objects;
if(c){a+=c.get("length")}if(b){b.forEach(function(d){a+=d.get("length")})}return a
}.property().cacheable(),sources:function(){var c=[],d=this._sets,b=d?d.length:0,a,f,e;
for(a=0;a<b;a++){f=d[a];if(f&&f.get("length")>0&&f.source){c.push(f.source)}}return c
}.property().cacheable(),indexSetForSource:function(e){if(!e||!e.isSCArray){return null
}var b=this._indexSetCache,d=this._objects,c,a;if(!b){b=this._indexSetCache={}}c=b[SC.guidFor(e)];
if(c&&c._sourceRevision&&(c._sourceRevision!==e.propertyRevision)){c=null}if(!c){c=this._indexSetForSource(e,NO);
if(c&&c.get("length")===0){c=null}if(d){if(c){c=c.copy()}d.forEach(function(f){if((a=e.indexOf(f))>=0){if(!c){c=SC.IndexSet.create()
}c.add(a)}},this)}if(c){c=b[SC.guidFor(e)]=c.frozenCopy();c._sourceRevision=e.propertyRevision
}}return c},_indexSetForSource:function(f,g){if(g===undefined){g=YES}var d=SC.guidFor(f),c=this[d],e=this._sets,a=e?e.length:0,b=null;
if(c>=a){c=null}if(SC.none(c)){if(g&&!this.isFrozen){this.propertyWillChange("sources");
if(!e){e=this._sets=[]}b=e[a]=SC.IndexSet.create();b.source=f;this[d]=a;this.propertyDidChange("sources")
}}else{b=e?e[c]:null}return b},add:function(a,b,d){if(this.isFrozen){throw SC.FROZEN_ERROR
}var g,f,j,i,c,e,h,k;if(b===undefined&&d===undefined){if(!a){throw"Must pass params to SC.SelectionSet.add()"
}if(a.isIndexSet){return this.add(a.source,a)}if(a.isSelectionSet){g=a._sets;k=a._objects;
f=g?g.length:0;this.beginPropertyChanges();for(j=0;j<f;j++){i=g[j];if(i&&i.get("length")>0){this.add(i.source,i)
}}if(k){this.addObjects(k)}this.endPropertyChanges();return this}}i=this._indexSetForSource(a,YES);
c=this.get("length");h=i.get("length");e=c-h;i.add(b,d);this._indexSetCache=null;
e+=i.get("length");if(e!==c){this.propertyDidChange("length");this.enumerableContentDidChange();
if(h===0){this.notifyPropertyChange("sources")}}return this},remove:function(a,b,d){if(this.isFrozen){throw SC.FROZEN_ERROR
}var g,f,j,i,c,e,h,k;if(b===undefined&&d===undefined){if(!a){throw"Must pass params to SC.SelectionSet.remove()"
}if(a.isIndexSet){return this.remove(a.source,a)}if(a.isSelectionSet){g=a._sets;k=a._objects;
f=g?g.length:0;this.beginPropertyChanges();for(j=0;j<f;j++){i=g[j];if(i&&i.get("length")>0){this.remove(i.source,i)
}}if(k){this.removeObjects(k)}this.endPropertyChanges();return this}}i=this._indexSetForSource(a,YES);
c=this.get("length");e=c-i.get("length");if(i&&(k=this._objects)){if(d!==undefined){b=SC.IndexSet.create(b,d);
d=undefined}k.forEach(function(l){j=a.indexOf(l);if(b.contains(j)){k.remove(l);e--
}},this)}i.remove(b,d);h=i.get("length");e+=h;this._indexSetCache=null;if(e!==c){this.propertyDidChange("length");
this.enumerableContentDidChange();if(h===0){this.notifyPropertyChange("sources")}}return this
},contains:function(b,d,a){if(d===undefined&&a===undefined){return this.containsObject(b)
}var c=this.indexSetForSource(b);if(!c){return NO}return c.contains(d,a)},intersects:function(b,d,a){var c=this.indexSetForSource(b,NO);
if(!c){return NO}return c.intersects(d,a)},_TMP_ARY:[],addObject:function(b){var c=this._TMP_ARY,a;
c[0]=b;a=this.addObjects(c);c.length=0;return a},addObjects:function(a){var d=this._objects,b,c;
if(!d){d=this._objects=SC.CoreSet.create()}b=d.get("length");d.addEach(a);c=d.get("length");
this._indexSetCache=null;if(c!==b){this.propertyDidChange("length");this.enumerableContentDidChange()
}return this},removeObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.removeObjects(c);
c.length=0;return a},removeObjects:function(b){var e=this._objects,c,d,a;if(!e){return this
}c=e.get("length");e.removeEach(b);d=e.get("length");if(a=this._sets){a.forEach(function(f){c+=f.get("length");
f.removeObjects(b);d+=f.get("length")},this)}this._indexSetCache=null;if(d!==c){this.propertyDidChange("length");
this.enumerableContentDidChange()}return this},containsObject:function(c){var e=this._objects;
if(e&&e.contains(c)){return YES}var d=this._sets,b=d?d.length:0,a,f;for(a=0;a<b;a++){f=d[a];
if(f&&f.indexOf(c)>=0){return YES}}return NO},constrain:function(d){var e,b,a,c;this.beginPropertyChanges();
this.get("sources").forEach(function(f){if(f===d){return}var g=this._indexSetForSource(d,NO);
if(g){this.remove(d,g)}},this);e=this._indexSetForSource(d,NO);if(e&&((a=e.get("max"))>(b=d.get("length")))){this.remove(d,b,a-b)
}if(c=this._objects){c.forEach(function(f){if(d.indexOf(f)<0){this.removeObject(f)
}},this)}this.endPropertyChanges();return this},isEqual:function(g){var f,d,b,a,c,e;
if(!g||!g.isSelectionSet){return NO}if(g===this){return YES}if((this._sets===g._sets)&&(this._objects===g._objects)){return YES
}if(this.get("length")!==g.get("length")){return NO}f=this._objects;d=g._objects;
if(f||d){if((f?f.get("length"):0)!==(d?d.get("length"):0)){return NO}if(f&&!f.isEqual(d)){return NO
}}c=this.get("sources");a=c.get("length");for(b=0;b<a;b++){e=c.objectAt(b);f=this._indexSetForSource(e,NO);
d=this._indexSetForSource(e,NO);if(!!d!==!!f){return NO}if(f&&!f.isEqual(d)){return NO
}}return YES},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}if(this._sets){this._sets.length=0
}if(this._objects){this._objects=null}this._indexSetCache=null;this.propertyDidChange("length");
this.enumerableContentDidChange();this.notifyPropertyChange("sources");return this
},copy:function(){var c=this.constructor.create(),d=this._sets,b=d?d.length:0,a,e;
if(d&&b>0){d=c._sets=d.slice();for(a=0;a<b;a++){if(!(e=d[a])){continue}e=d[a]=e.copy();
c[SC.guidFor(e.source)]=a}}if(this._objects){c._objects=this._objects.copy()}return c
},freeze:function(){if(this.isFrozen){return this}var a=this._sets,b=a?a.length:0,c;
while(--b>=0){if(c=a[b]){c.freeze()}}if(this._objects){this._objects.freeze()}return arguments.callee.base.apply(this,arguments)
},toString:function(){var a=this._sets||[];a=a.map(function(b){return b.toString().replace("SC.IndexSet",SC.guidFor(b.source))
},this);if(this._objects){a.push(this._objects.toString())}return"SC.SelectionSet:%@<%@>".fmt(SC.guidFor(this),a.join(","))
},firstObject:function(){var b=this._sets,c=this._objects;if(b&&b.get("length")>0){var e=b?b[0]:null,d=e?e.source:null,a=e?e.firstObject():-1;
if(d&&a>=0){return d.objectAt(a)}}return c?c.firstObject():undefined}.property(),nextObject:function(c,e,b){var d,a;
if(c===0){d=b.objects=[];this.forEach(function(f){d.push(f)},this);b.max=d.length
}d=b.objects;a=d[c];if(c+1>=b.max){b.objects=b.max=null}return a},forEach:function(g,e){var c=this._sets,d=this._objects,b=c?c.length:0,f,a;
for(a=0;a<b;a++){f=c[a];if(f){f.forEachObject(g,e)}}if(d){d.forEach(g,e)}return this
}});SC.SelectionSet.prototype.clone=SC.SelectionSet.prototype.copy;SC.SelectionSet.EMPTY=SC.SelectionSet.create().freeze();
sc_require("mixins/enumerable");sc_require("mixins/array");sc_require("mixins/observable");
sc_require("mixins/delegate_support");SC.SparseArray=SC.Object.extend(SC.Observable,SC.Enumerable,SC.Array,SC.DelegateSupport,{_requestingLength:0,_requestingIndex:0,length:function(){var a=this.delegate;
if(a&&SC.none(this._length)&&a.sparseArrayDidRequestLength){this._requestingLength++;
a.sparseArrayDidRequestLength(this);this._requestingLength--}return this._length||0
}.property().cacheable(),provideLength:function(a){if(SC.none(a)){this._sa_content=null
}if(a!==this._length){this._length=a;if(this._requestingLength<=0){this.enumerableContentDidChange()
}}return this},rangeWindowSize:1,requestedRangeIndex:[],objectAt:function(a){var c=this._sa_content,b;
if(!c){c=this._sa_content=[]}if((b=c[a])===undefined){this.requestIndex(a);b=c[a]
}return b},definedIndexes:function(d){var c=SC.IndexSet.create(),e=this._sa_content,b,a;
if(!e){return c.freeze()}if(d){d.forEach(function(f){if(e[f]!==undefined){c.add(f)
}})}else{a=e.length;for(b=0;b<a;b++){if(e[b]!==undefined){c.add(b)}}}return c.freeze()
},_TMP_RANGE:{},requestIndex:function(b){var c=this.delegate;if(!c){return this}var a=this.get("rangeWindowSize"),e=b;
if(a>1){e=e-Math.floor(e%a)}if(a<1){a=1}this._requestingIndex++;if(c.sparseArrayDidRequestRange){var d=this._TMP_RANGE;
if(this.wasRangeRequested(e)===-1){d.start=e;d.length=a;c.sparseArrayDidRequestRange(this,d);
this.requestedRangeIndex.push(e)}}else{if(c.sparseArrayDidRequestIndex){while(--a>=0){c.sparseArrayDidRequestIndex(this,e+a)
}}}this._requestingIndex--;return this},wasRangeRequested:function(c){var b,a;for(b=0,a=this.requestedRangeIndex.length;
b<a;b++){if(this.requestedRangeIndex[b]===c){return b}}return -1},rangeRequestCompleted:function(b){var a=this.wasRangeRequested(b);
if(a>=0){this.requestedRangeIndex.removeAt(a,1);return YES}return NO},provideObjectsInRange:function(b,e){var c=this._sa_content;
if(!c){c=this._sa_content=[]}var d=b.start,a=b.length;while(--a>=0){c[d+a]=e[a]}if(this._requestingIndex<=0){this.enumerableContentDidChange()
}return this},_TMP_PROVIDE_ARRAY:[],_TMP_PROVIDE_RANGE:{length:1},provideObjectAtIndex:function(c,b){var d=this._TMP_PROVIDE_ARRAY,a=this._TMP_PROVIDE_RANGE;
d[0]=b;a.start=c;return this.provideObjectsInRange(a,d)},objectsDidChangeInRange:function(a){var b=this._sa_content;
if(b){if(a.start===0&&SC.maxRange(a)>=b.length){this._sa_content=null}else{var d=a.start,c=Math.min(d+a.length,b.length);
while(--c>=d){b[c]=undefined}}}this.enumerableContentDidChange(a);return this},indexOf:function(c){var a=this.delegate;
if(a&&a.sparseArrayDidRequestIndexOf){return a.sparseArrayDidRequestIndexOf(this,c)
}else{var b=this._sa_content;if(!b){b=this._sa_content=[]}return b.indexOf(c)}},replace:function(b,g,e){e=e||[];
var c=this.delegate;if(c){if(!c.sparseArrayShouldReplace||!c.sparseArrayShouldReplace(this,b,g,e)){return this
}}var d=this._sa_content;if(!d){d=this._sa_content=[]}d.replace(b,g,e);var a=e?(e.get?e.get("length"):e.length):0;
var f=a-g;if(!SC.none(this._length)){this.propertyWillChange("length");this._length+=f;
this.propertyDidChange("length")}this.enumerableContentDidChange(b,g,f);return this
},reset:function(){this._sa_content=null;this._length=null;this.enumerableContentDidChange();
this.invokeDelegateMethod(this.delegate,"sparseArrayDidReset",this);return this}});
SC.SparseArray.array=function(a){return this.create({_length:a||0})};if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/runtime")
}SC.Locale=SC.Object.extend({init:function(){if(!this.language){SC.Locale._assignLocales()
}if(!this.hasStrings){var c=this._deprecatedLanguageCodes||[];c.push(this.language);
var b=c.length;var a=null;while(!a&&--b>=0){a=String[c[b]]}if(a){this.hasStrings=YES;
this.strings=a}}},hasStrings:NO,strings:{},toString:function(){if(!this.language){SC.Locale._assignLocales()
}return"SC.Locale["+this.language+"]"+SC.guidFor(this)},locWithDefault:function(b,c){var a=this.strings[b];
if(SC.typeOf(a)===SC.T_STRING){return a}else{if(SC.typeOf(c)===SC.T_STRING){return c
}}return b}});SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,createCurrentLocale:function(){var c=(String.useAutodetectedLanguage!==undefined)?String.useAutodetectedLanguage:this.useAutodetectedLanguage;
var b=(String.preferredLanguage!==undefined)?String.preferredLanguage:this.preferredLanguage;
var d=((c)?SC.browser.language:null)||b||SC.browser.language||"en";d=SC.Locale.normalizeLanguage(d);
var a=this.localeClassFor(d);if(d!=this.currentLanguage){this.currentLanguage=d;this.currentLocale=a.create()
}return this.currentLocale},localeClassFor:function(c){c=SC.Locale.normalizeLanguage(c);
var b,a=this.locales[c];if(!a&&((b=c.split("-")[0])!==c)&&(a=this.locales[b])){a=this.locales[c]=a.extend()
}if(!a){a=this.locales[c]=this.locales.en.extend()}return a},define:function(b,c){var a;
if(c===undefined&&(SC.typeOf(b)!==SC.T_STRING)){a=this;c=b}else{a=SC.Locale.localeClassFor(b)
}SC.mixin(a.prototype,c);return a},options:function(){return this.prototype},addStrings:function(b){var a=this.prototype.strings;
if(a){if(!this.prototype.hasOwnProperty("strings")){this.prototype.strings=SC.clone(a)
}}else{a=this.prototype.strings={}}if(b){this.prototype.strings=SC.mixin(a,b)}this.prototype.hasStrings=YES;
return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a){return"en"
}return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales){this.locales[a].prototype.language=a
}},toString:function(){if(!this.prototype.language){SC.Locale._assignLocales()}return"SC.Locale["+this.prototype.language+"]"
},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings;
a.define=SC.Locale.define;a.options=SC.Locale.options;a.toString=SC.Locale.toString;
return a}});SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})};
SC.stringsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addStrings(b);return this
};sc_require("system/locale");SC.stringsFor("English",{"_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thu Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"});
SC.DROP_ON=1;SC.DROP_BEFORE=2;SC.DROP_AFTER=4;SC.DROP_ANY=7;SC.SAFARI_FOCUS_BEHAVIOR=YES;
SC.mixin({data:function(c,b,d){c=(c===window)?"@window":c;var e=SC.hashFor(c);var a=SC._data_cache;
if(!a){SC._data_cache=a={}}var f=a[e];if(b&&!f){a[e]=f={}}if(f&&(d!==undefined)){f[b]=d
}return(b)?f[b]:f},removeData:function(d,c){d=(d===window)?"@window":d;var e=SC.hashFor(d);
var a=SC._data_cache;if(!a){return undefined}var f=a[e];if(!f){return undefined}var b=(c)?f[c]:f;
if(c){delete f[c]}else{delete a[e]}return b}});SC.mixin(Function.prototype,{invokeLater:function(g,a){if(a===undefined){a=1
}var e=this;if(arguments.length>2){var b=SC.$A(arguments).slice(2,arguments.length);
b.unshift(g);var d=this,c=e;e=function(){return c.apply(d,b.slice(1))}}return SC.Timer.schedule({target:g,action:e,interval:a})
}});SC.Controller=SC.Object.extend({isEditable:YES});SC.SelectionSupport={hasSelectionSupport:YES,allowsSelection:YES,allowsMultipleSelection:YES,allowsEmptySelection:YES,firstSelectableObject:function(){return this.get("firstObject")
}.property(),selection:function(c,f){var b=this._scsel_selection,g=b?b.get("length"):0,d,e,a;
if((f===undefined)||!this.get("allowsSelection")){f=b}a=(f&&f.isEnumerable)?f.get("length"):0;
if((a>1)&&!this.get("allowsMultipleSelection")){if(g>1){f=SC.SelectionSet.create().addObject(b.get("firstObject")).freeze();
a=1}else{f=b;a=g}}if((a===0)&&!this.get("allowsEmptySelection")){if(g===0){f=this.get("firstSelectableObject");
if(f){f=SC.SelectionSet.create().addObject(f).freeze()}else{f=SC.SelectionSet.EMPTY
}a=f.get("length")}else{f=b;a=g}}if(a===0){f=SC.SelectionSet.EMPTY}f=f.frozenCopy();
this._scsel_selection=f;return f}.property("arrangedObjects","allowsEmptySelection","allowsMultipleSelection","allowsSelection").cacheable(),hasSelection:function(){var a=this.get("selection");
return !!a&&(a.get("length")>0)}.property("selection").cacheable(),selectObjects:function(b,c){if(!b||b.get("length")===0){if(!c){this.set("selection",SC.SelectionSet.EMPTY)
}return this}var a=this.get("selection");if(c&&a){a=a.copy()}else{a=SC.SelectionSet.create()
}a.addObjects(b).freeze();this.set("selection",a);return this},selectObject:function(a,b){if(a===null){if(!b){this.set("selection",null)
}return this}else{return this.selectObjects([a],b)}},deselectObjects:function(b){if(!b||b.get("length")===0){return this
}var a=this.get("selection");if(!a||a.get("length")===0){return this}a=a.copy().removeObjects(b).freeze();
this.set("selection",a.freeze());return this},deselectObject:function(a){if(!a){return this
}else{return this.deselectObjects([a])}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");
var b=this.get("selection");var d=this.get("allowsEmptySelection");var c;if(!b){return this
}c=b.indexSetForSource(a);if((c&&(c.get("length")!==b.get("length")))||(!c&&(b.get("length")>0))){b=b.copy().constrain(a).freeze();
this.set("selection",b)}if((b.get("length")===0)&&a&&(a.get("length")>0)&&!d){this.selectObject(this.get("firstSelectableObject"),NO)
}return this}};sc_require("controllers/controller");sc_require("mixins/selection_support");
SC.ArrayController=SC.Controller.extend(SC.Array,SC.SelectionSupport,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this
}.property().cacheable(),canRemoveContent:function(){var b=this.get("content"),a;
a=!!b&&this.get("isEditable")&&this.get("hasContent");if(a){return !b.isEnumerable||(SC.typeOf(b.removeObject)===SC.T_FUNCTION)
}else{return NO}}.property("content","isEditable","hasContent"),canReorderContent:function(){var b=this.get("content"),a;
a=!!b&&this.get("isEditable")&&!this.get("orderBy");return a&&!!b.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var b=this.get("content"),a;
a=b&&this.get("isEditable")&&b.isEnumerable;if(a){return(SC.typeOf(b.addObject)===SC.T_FUNCTION)||(SC.typeOf(b.pushObject)===SC.T_FUNCTION)
}else{return NO}}.property("content","isEditable"),hasContent:function(){var a=this.get("content");
return !!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var b=this.get("content"),a=b?b.get("status"):null;
return a?a:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent")){throw"%@ cannot add content".fmt(this)
}var b=this.get("content");if(b.isSCArray){b.pushObject(a)}else{if(b.addObject){b.addObject(a)
}else{throw"%@.content does not support addObject".fmt(this)}}return this},removeObject:function(a){if(!this.get("canRemoveContent")){throw"%@ cannot remove content".fmt(this)
}var b=this.get("content");if(b.isEnumerable){b.removeObject(a)}else{this.set("content",null)
}if(this.get("destroyOnRemoval")&&a.destroy){a.destroy()}return this},length:function(){var a=this._scac_observableContent();
return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();
return b?b.objectAt(a):undefined},replace:function(g,f,d){if(!d||d.get("length")===0){if(!this.get("canRemoveContent")){throw"%@ cannot remove objects from the current content".fmt(this)
}}else{if(!this.get("canReorderContent")){throw"%@ cannot add or reorder the current content".fmt(this)
}}var c=this.get("content");var b=[],a,e;if(this.get("destroyOnRemoval")){for(a=0;
a<f;a++){b.push(c.objectAt(a+g))}}if(c){c.replace(g,f,d)}for(a=0,e=b.length;a<e;a++){b[a].destroy()
}b=null;return this},indexOf:function(b,a){var c=this._scac_observableContent();return c?c.indexOf(b,a):-1
},init:function(){arguments.callee.base.apply(this,arguments);this._scac_contentDidChange()
},_scac_cached:NO,_scac_observableContent:function(){var b=this._scac_cached;if(b!==NO){return b
}var e=this.get("content"),f,d,c,a;if(SC.none(e)){return this._scac_cached=[]}if(!e.isEnumerable){b=this.get("allowsSingleContent")?[e]:[];
return(this._scac_cached=b)}f=this.get("orderBy");if(!f){if(e.isSCArray){return(this._scac_cached=e)
}else{throw"%@.orderBy is required for unordered content".fmt(this)}}switch(SC.typeOf(f)){case SC.T_STRING:f=[f];
break;case SC.T_FUNCTION:d=f;break;case SC.T_ARRAY:break;default:throw"%@.orderBy must be Array, String, or Function".fmt(this)
}if(!d){a=f.get("length");d=function(j,h){var g=0,i=0,k,m,l,n;for(g=0;(g<a)&&(i===0);
g++){k=f.objectAt(g);n=NO;if(k.indexOf("ASC")>-1){k=k.split("ASC ")[1]}else{if(k.indexOf("DESC")>-1){k=k.split("DESC ")[1];
n=YES}}if(!j){m=j}else{if(j.isObservable){m=j.get(k)}else{m=j[k]}}if(!h){l=h}else{if(h.isObservable){l=h.get(k)
}else{l=h[k]}}i=SC.compare(m,l);if(n){i=(-1)*i}}return i}}b=[];e.forEach(function(g){b.push(g)
});b.sort(d);d=null;return(this._scac_cached=b)},_scac_contentDidChange:function(){this._scac_cached=NO;
var h=this.get("content"),d=!!this.get("orderBy"),i=this._scac_content,a=this._scac_length||0,g=this._scac_rangeObserver,b=this._scac_rangeDidChange,f=this._scac_enumerableDidChange,c=this._scac_contentStatusDidChange,e;
if(i===h){return this}if(i){if(g&&i.isSCArray){i.removeRangeObserver(g)}else{if(i.isEnumerable){i.removeObserver("[]",this,f)
}}i.removeObserver("status",this,c)}g=null;this._scac_cached=NO;this._scac_content=h;
if(h){if(!d&&h.isSCArray){g=h.addRangeObserver(null,this,b)}else{if(h.isEnumerable){h.addObserver("[]",this,f)
}}e=h.isEnumerable?h.get("length"):1;h.addObserver("status",this,c)}else{e=SC.none(h)?0:1
}this._scac_rangeObserver=g;this._scac_length=e;this._scac_contentStatusDidChange();
this.enumerableContentDidChange(0,e,e-a);this.updateSelectionAfterContentChange()
}.observes("content"),_scac_enumerableDidChange:function(){var a=this.get("content"),c=a?a.get("length"):0,b=this._scac_length;
this._scac_length=c;this.beginPropertyChanges();this._scac_cached=NO;this.enumerableContentDidChange(0,c,c-b);
this.endPropertyChanges();this.updateSelectionAfterContentChange()}.observes("orderBy"),_scac_rangeDidChange:function(e,d,b,a){if(b!=="[]"){return
}var c=this.get("content");this._scac_length=c.get("length");this._scac_cached=NO;
if(a){this.beginPropertyChanges();a.forEachRange(function(g,f){this.enumerableContentDidChange(g,f,0)
},this);this.endPropertyChanges();this.updateSelectionAfterContentChange()}},_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")
}});require("controllers/controller");SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return !SC.none(this.get("observableContent"))
}.property("observableContent"),isEditable:YES,observableContent:function(){var b=this.get("content"),a,c;
if(b&&b.isEnumerable){a=b.get("length");c=this.get("allowsMultipleContent");if(a===1){b=b.firstObject()
}else{if(a===0||!c){b=null}}if(b&&!c&&b.isEnumerable){b=null}}return b}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");
if(a&&SC.typeOf(a.destroy)===SC.T_FUNCTION){a.destroy()}this.set("content",null);
return this},contentPropertyDidChange:function(b,a){if(a==="*"){this.allPropertiesDidChange()
}else{this.notifyPropertyChange(a)}},unknownProperty:function(b,d){if(b==="content"){if(d!==undefined){this.content=d
}return this.content}var c=this.get("observableContent"),f,e,a;if(c===null||c===undefined){return undefined
}if(d===undefined){if(c.isEnumerable){d=c.getEach(b);f=d.get("length");if(f>0){a=YES;
e=d.objectAt(0);while((--f>0)&&a){if(e!==d.objectAt(f)){a=NO}}if(a){d=e}}else{d=undefined
}}else{d=(c.isObservable)?c.get(b):c[b]}}else{if(!this.get("isEditable")){throw"%@.%@ is not editable".fmt(this,b)
}if(c.isEnumerable){c.setEach(b,d)}else{if(c.isObservable){c.set(b,d)}else{c[b]=d
}}}return d},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("content")){this._scoc_contentDidChange()
}if(this.get("observableContent")){this._scoc_observableContentDidChange()}},_scoc_contentDidChange:function(){var b=this._scoc_content,c=this.get("content");
if(b!==c){this._scoc_content=c;var a=this._scoc_enumerableContentDidChange;if(b&&b.isEnumerable){b.removeObserver("[]",this,a)
}if(c&&c.isEnumerable){c.addObserver("[]",this,a)}}}.observes("content"),_scoc_observableContentDidChange:function(){var b=this._scoc_observableContent,d=this.get("observableContent"),a=this.contentPropertyDidChange,c=this._scoc_enumerableContentDidChange;
if(b===d){return this}this._scoc_observableContent=d;if(b){if(b.isEnumerable){b.removeObserver("[]",this,c)
}else{if(b.isObservable){b.removeObserver("*",this,a)}}}if(d){if(d.isEnumerable){d.addObserver("[]",this,c)
}else{if(d.isObservable){d.addObserver("*",this,a)}}}if((b&&b.isEnumerable)||(d&&d.isEnumerable)){this._scoc_enumerableContentDidChange()
}else{this.contentPropertyDidChange(d,"*")}}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var b=this.get("observableContent"),c=this._scoc_observableContentItems,a=this.contentPropertyDidChange;
if(c){c.forEach(function(d){if(d.isObservable){d.removeObserver("*",this,a)}},this);
c.clear()}if(b&&b.isEnumerable){if(!c){c=SC.Set.create()}b.forEach(function(d){if(c.contains(d)){return
}c.add(d);if(d.isObservable){d.addObserver("*",this,a)}},this)}else{c=null}this._scoc_observableContentItems=c;
this.contentPropertyDidChange(b,"*");return this}});SC.TreeItemContent={isTreeItemContent:YES,treeItemChildren:null,treeItemIsExpanded:YES,treeItemIsGrouped:NO,treeItemDisclosureState:function(b,a){return this.get("treeItemIsExpanded")?SC.BRANCH_OPEN:SC.BRANCH_CLOSED
},treeItemCollapse:function(b,a){this.setIfChanged("treeItemIsExpanded",NO)},treeItemExpand:function(b,a){this.setIfChanged("treeItemIsExpanded",YES)
},treeItemBranchIndexes:function(e,c){var d=this.get("treeItemChildren"),b,g,a,f;
if(!d){return null}b=SC.IndexSet.create();g=d.get("length");for(a=0;a<g;a++){if(!(f=d.objectAt(a))){continue
}if(!f.get("treeItemChildren")){continue}if(f.treeItemDisclosureState(this,a)!==SC.LEAF_NODE){b.add(a)
}}return b.get("length")>0?b:null}};SC.BRANCH_OPEN=17;SC.BRANCH_CLOSED=18;SC.LEAF_NODE=32;
SC.CollectionContent={isCollectionContent:YES,contentIndexIsSelected:function(b,c,a){var d=b.get("selection");
return d?d.contains(c,a):NO},contentIndexIsEnabled:function(b,c,a){return b.get("isEnabled")
},contentGroupIndexes:function(a,b){return null},contentIndexIsGroup:function(b,c,a){return NO
},contentIndexOutlineLevel:function(b,c,a){return -1},contentIndexDisclosureState:function(b,c,a){return SC.LEAF_NODE
},contentIndexExpand:function(b,c,a){console.log("contentIndexExpand(%@, %@, %@)".fmt(b,c,a))
},contentIndexCollapse:function(b,c,a){console.log("contentIndexCollapse(%@, %@, %@)".fmt(b,c,a))
}};sc_require("mixins/tree_item_content");sc_require("mixins/collection_content");
SC.TreeItemObserver=SC.Object.extend(SC.Array,SC.CollectionContent,{item:null,delegate:null,parentObserver:null,parentItem:function(){var a=this.get("parentObserver");
return a?a.get("item"):null}.property("parentObserver").cacheable(),index:null,outlineLevel:0,children:null,disclosureState:SC.BRANCH_OPEN,branchIndexes:function(){var e=this.get("item"),b,f,a,d,c;
if(!e){return SC.IndexSet.EMPTY}else{if(e.isTreeItemContent){f=this.get("parentItem");
a=this.get("index");return e.treeItemBranchIndexes(f,a)}else{d=this.get("children");
if(!d){return null}c=SC.IndexSet.create();b=d.get("length");f=e;for(a=0;a<b;a++){if(!(e=d.objectAt(a))){continue
}if(!this._computeChildren(e,f,a)){continue}if(this._computeDisclosureState(e,f,a)!==SC.LEAF_NODE){c.add(a)
}}return c.get("length")>0?c:null}}}.property("children").cacheable(),isHeaderVisible:function(){return !!this.get("parentObserver")
}.property("parentObserver").cacheable(),length:0,objectAt:function(d){var a=this.get("length"),f=this.get("item"),b=this._objectAtCache,h=d,g=0,c,e;
if(d>=a){return undefined}if(this.get("isHeaderVisible")){if(d===0){return f}else{h--
}}f=null;if(!b){b=this._objectAtCache=[]}if((f=b[d])!==undefined){return f}e=this.get("children");
if(!e){return undefined}if(c=this.get("branchIndexes")){c.forEach(function(l){if(f||(l>h)){return
}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){f=k.objectAt(h-l);
h=-1}else{h-=j-1}},this)}if(h>=0){f=e.objectAt(h)}b[d]=f;return f},replace:function(a,b,j,d){var i=a,g=null,e,f,h;
if(d===undefined){d=SC.DROP_BEFORE}if(this.get("isHeaderVisible")){i--}if(i<0){throw"Tree Item cannot replace itself"
}if(e=this.get("branchIndexes")){e.forEach(function(k){if(g||(k>=i)){return}if(!(g=this.branchObserverAt(k))){return
}f=g.get("length");if((k+f===i)&&d===SC.DROP_AFTER){i-=k}else{if(k+f>i){i-=k}else{i-=f-1;
g=null}}},this)}if(g){g.replace(i,b,j,d);return this}h=i+b;if(b>1&&e){e.forEachIn(i,e.get("max")-i,function(k){if(k>h){return
}if(!(g=this.branchObserverAt(k))){return}f=g.get("length");h-=f-1},this)}b=h-i;var c=this.get("children");
if(!c){throw"cannot replace() tree item with no children"}if((b<0)||(h>c.get("length"))){throw"replace() range must lie within a single tree item"
}c.replace(i,b,j,d);return this},observerContentDidChange:function(g,f,e){this.invalidateBranchObserversAt(g);
this._objectAtCache=this._outlineLevelCache=null;this._disclosureStateCache=null;
this._contentGroupIndexes=NO;this.notifyPropertyChange("branchIndexes");var b=this.get("length"),c=this._computeLength(),a=this.get("parentObserver"),d;
if(b!==c){this.set("length",c)}if(!this._notifyParent){return this}if(a){d=SC.IndexSet.create(this.get("index"));
a._childrenRangeDidChange(a.get("children"),null,"[]",d)}else{if(b===c){f=this.expandChildIndex(g+f);
g=this.expandChildIndex(g);f=f-g;e=0}else{g=this.expandChildIndex(g);f=c-g;e=c-b}this.enumerableContentDidChange(g,f,e)
}},expandChildIndex:function(c){var b=c;if(this.get("isHeaderVisible")){c++}var a=this.get("branchIndexes");
if(!a||a.get("length")===0){return b}a.forEachIn(0,c,function(d){b+=this.branchObserverAt(d).get("length")-1
},this);return b},_contentGroupIndexes:NO,contentGroupIndexes:function(g,e){if(e!==this){return null
}var f=this._contentGroupIndexes;if(f!==NO){return f}if(this.get("parentObserver")){return null
}var j=this.get("item"),i,b,d,h,c,a;if(j&&j.isTreeItemContent){i=j.get("treeItemIsGrouped")
}else{i=!!this.delegate.get("treeItemIsGrouped")}if(i){f=SC.IndexSet.create();b=this.get("branchIndexes");
a=this.get("children");d=a?a.get("length"):0;h=c=0;if(b){b.forEach(function(l){f.add(h,(l+1)-c);
h+=(l+1)-c;c=l+1;var k=this.branchObserverAt(l);if(k){h+=k.get("length")-1}},this)
}if(c<d){f.add(h,d-c)}}else{f=null}this._contentGroupIndexes=f;return f},contentIndexIsGroup:function(b,d,a){var c=this.contentGroupIndexes(b,d);
return c?c.contains(a):NO},contentIndexOutlineLevel:function(j,g,e){if(g!==this){return -1
}var a=this._outlineLevelCache;if(a&&(a[e]!==undefined)){return a[e]}if(!a){a=this._outlineLevelCache=[]
}var f=this.get("length"),k=e,d=0,h=null,c,b,i;if(e>=f){return -1}if(this.get("isHeaderVisible")){if(e===0){return a[0]=this.get("outlineLevel")-1
}else{k--}}if(c=this.get("branchIndexes")){c.forEach(function(n){if((h!==null)||(n>k)){return
}var m=this.branchObserverAt(n),l;if(!m){return}l=m.get("length");if(n+l>k){h=m.contentIndexOutlineLevel(j,m,k-n);
k=-1}else{k-=l-1}},this)}if(k>=0){h=this.get("outlineLevel")}a[e]=h;return h},contentIndexDisclosureState:function(j,g,e){if(g!==this){return -1
}var a=this._disclosureStateCache;if(a&&(a[e]!==undefined)){return a[e]}if(!a){a=this._disclosureStateCache=[]
}var f=this.get("length"),k=e,d=0,h=null,c,b,i;if(e>=f){return SC.LEAF_NODE}if(this.get("isHeaderVisible")){if(e===0){return a[0]=this.get("disclosureState")
}else{k--}}if(c=this.get("branchIndexes")){c.forEach(function(n){if((h!==null)||(n>k)){return
}var m=this.branchObserverAt(n),l;if(!m){return}l=m.get("length");if(n+l>k){h=m.contentIndexDisclosureState(j,m,k-n);
k=-1}else{k-=l-1}},this)}if(k>=0){h=SC.LEAF_NODE}a[e]=h;return h},contentIndexExpand:function(b,f,a){var c,g=a,d,e;
if(f!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._expand(this.get("item"));
return}else{g--}}if(c=this.get("branchIndexes")){c.forEach(function(k){if(k>=g){return
}var j=this.branchObserverAt(k),h;if(!j){return}h=j.get("length");if(k+h>g){j.contentIndexExpand(b,j,g-k);
g=-1}else{g-=h-1}},this)}if(g>=0){d=this.get("children");e=d?d.objectAt(g):null;if(e){this._expand(e,this.get("item"),g)
}}},contentIndexCollapse:function(b,f,a){var c,d,e,g=a;if(f!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._collapse(this.get("item"));
return}else{g--}}if(c=this.get("branchIndexes")){c.forEach(function(k){if(k>=g){return
}var j=this.branchObserverAt(k),h;if(!j){return}h=j.get("length");if(k+h>g){j.contentIndexCollapse(b,j,g-k);
g=-1}else{g-=h-1}},this)}if(g>=0){d=this.get("children");e=d?d.objectAt(g):null;if(e){this._collapse(e,this.get("item"),g)
}}},branchObserverAt:function(d){var g=this._branchObserversByIndex,c=this._branchObserverIndexes,e,h,b,j,a,f,i;
if(!g){g=this._branchObserversByIndex=[]}if(!c){c=this._branchObserverIndexes=SC.IndexSet.create()
}if(e=g[d]){return e}a=this.get("children");j=a?a.objectAt(d):null;if(!j){return null
}g[d]=e=SC.TreeItemObserver.create({item:j,delegate:this.get("delegate"),parentObserver:this,index:d,outlineLevel:this.get("outlineLevel")+1});
c.add(d);return e},invalidateBranchObserversAt:function(c){var b=this._branchObserversByIndex,a=this._branchObserverIndexes;
if(!b||b.length<=c){return this}if(c<0){c=0}a.forEachIn(c,a.get("max")-c,function(e){var d=b[e];
if(d){d.destroy()}},this);b.length=c;return this},init:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("item");if(!a){throw"SC.TreeItemObserver.item cannot be null"}a.addObserver("*",this,this._itemPropertyDidChange);
this._itemPropertyDidChange(a,"*");this._notifyParent=YES},destroy:function(){this.invalidateBranchObserversAt(0);
this._objectAtCache=null;var c=this.get("item");if(c){c.removeObserver("*",this,this._itemPropertyDidChange)
}var a=this._children,b=this._childrenRangeObserver;if(a&&b){a.removeRangeObserver(b)
}arguments.callee.base.apply(this,arguments)},_itemPropertyDidChange:function(f,b){var a=this.get("children"),e=this.get("disclosureState"),d=this.get("item"),c;
this.beginPropertyChanges();c=this._computeDisclosureState(d);if(e!==c){this.set("disclosureState",c)
}c=this._computeChildren(d);if(a!==c){this.set("children",c)}this.endPropertyChanges()
},_childrenDidChange:function(){var c=this.get("disclosureState"),d=c===SC.BRANCH_OPEN?this.get("children"):null,b=this._children,a=this._childrenRangeObserver;
if(b===d){return this}if(a){b.removeRangeObserver(a)}if(d){this._childrenRangeObserver=d.addRangeObserver(null,this,this._childrenRangeDidChange)
}else{this._childrenRangeObserver=null}this._children=d;this._childrenRangeDidChange(d,null,"[]",null)
}.observes("children","disclosureState"),_childrenRangeDidChange:function(f,i,h,d){var a=this.get("children"),e=a?a.get("length"):0,c=d?d.get("min"):0,g=d?d.get("max"):e,b=this._childrenLen||0;
this._childrenLen=e;this.observerContentDidChange(c,g-c,e-b)},_computeDisclosureState:function(d,e,b){var c,a;
if(!d||!this._computeChildren(d)){return SC.LEAF_NODE}else{if(d.isTreeItemContent){if(e===undefined){e=this.get("parentItem")
}if(b===undefined){b=this.get("index")}return d.treeItemDisclosureState(e,b)}else{c=this._treeItemIsExpandedKey;
if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";
this._treeItemIsExpandedKey=c}return d.get(c)?SC.BRANCH_OPEN:SC.BRANCH_CLOSED}}},_collapse:function(d,e,b){var c,a;
if(!d||!this._computeChildren(d)){return this}else{if(d.isTreeItemContent){if(e===undefined){e=this.get("parentItem")
}if(b===undefined){b=this.get("index")}d.treeItemCollapse(e,b)}else{c=this._treeItemIsExpandedKey;
if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";
this._treeItemIsExpandedKey=c}d.setIfChanged(c,NO)}}return this},_expand:function(d,e,b){var c,a;
if(!d||!this._computeChildren(d)){return this}else{if(d.isTreeItemContent){if(e===undefined){e=this.get("parentItem")
}if(b===undefined){b=this.get("index")}d.treeItemExpand(e,b)}else{c=this._treeItemIsExpandedKey;
if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";
this._treeItemIsExpandedKey=c}d.setIfChanged(c,YES)}}return this},_computeChildren:function(c){var a,b;
if(!c){return null}else{if(c.isTreeItemContent){return c.get("treeItemChildren")}else{b=this._treeItemChildrenKey;
if(!b){a=this.get("delegate");b=a?a.get("treeItemChildrenKey"):"treeItemChildren";
this._treeItemChildrenKey=b}return c.get(b)}}},_computeLength:function(){var b=this.get("isHeaderVisible")?1:0,d=this.get("disclosureState"),c=this.get("children"),a;
if((d===SC.BRANCH_OPEN)&&c){b+=c.get("length");if(a=this.get("branchIndexes")){a.forEach(function(e){var f=this.branchObserverAt(e);
b+=f.get("length")-1},this)}}return b}});sc_require("controllers/object");sc_require("mixins/selection_support");
sc_require("private/tree_item_observer");SC.TreeController=SC.ObjectController.extend(SC.SelectionSupport,{treeItemIsGrouped:NO,treeItemIsExpandedKey:"treeItemIsExpanded",treeItemChildrenKey:"treeItemChildren",arrangedObjects:function(){var a,b=this.get("content");
if(b){a=SC.TreeItemObserver.create({item:b,delegate:this})}else{a=null}this._sctc_arrangedObjects=a;
return a}.property().cacheable(),_sctc_invalidateArrangedObjects:function(){this.propertyWillChange("arrangedObjects");
var a=this._sctc_arrangedObjects;if(a){a.destroy()}this._sctc_arrangedObjects=null;
this.propertyDidChange("arrangedObjects")}.observes("content","treeItemIsExpandedKey","treeItemChildrenKey","treeItemIsGrouped"),_sctc_arrangedObjectsContentDidChange:function(){this.updateSelectionAfterContentChange()
}.observes("*arrangedObjects.[]"),firstSelectableObject:function(){var d=this.get("arrangedObjects"),c,b,a=0;
if(!d){return null}c=d.contentGroupIndexes(null,d);b=d.get("length");while(c.contains(a)&&(a<b)){a++
}return a>=b?null:d.objectAt(a)}.property()});SC.mixin(SC.Object.prototype,{invokeLater:function(b,a){if(a===undefined){a=1
}var e=b,c,d;if(arguments.length>2){c=SC.$A(arguments).slice(2);if(SC.typeOf(e)===SC.T_STRING){e=this[b]
}d=e;e=function(){return d.apply(this,c)}}return SC.Timer.schedule({target:this,action:e,interval:a})
},invokeWith:function(b,c,d){if(d===undefined){d=c;c=this}if(!c){c=this}if(SC.typeOf(d)===SC.T_STRING){d=c[d]
}var a=this.getPath(b);d.call(c,a,this);return this}});SC.RunLoop=SC.RunLoop.extend({startTime:function(){if(!this._start){this._start=Date.now()
}return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);
this.scheduleNextTimeout();return a},scheduleTimer:function(b,a){this._timerQueue=b.removeFromTimerQueue(this._timerQueue);
this._timerQueue=b.scheduleInTimerQueue(this._timerQueue,a);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);
return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing){return NO
}var d=this.get("startTime"),e=this.TIMER_ARRAY,c,b,a;this._firing=YES;this._timerQueue=this._timerQueue.collectExpiredTimers(e,d);
b=e.length;for(c=0;c<b;c++){e[c].fire()}a=e.length>0;e.length=0;this._firing=NO;return a
},scheduleNextTimeout:function(){var d=this._timerQueue;var b=NO;if(!d){if(this._timeout){clearTimeout(this._timeout)
}}else{var c=d._timerQueueRunTime;if(this._timeoutAt!==c){if(this._timeout){clearTimeout(this._timeout)
}var a=Math.max(0,c-Date.now());this._timeout=setTimeout(this._timeoutDidFire,a);
this._timeoutAt=c}b=YES}return b},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;
a._timeout=a._timeoutAt=null;SC.run()}});SC.RunLoop.currentRunLoop=SC.RunLoop.create();
/* @license

Portions of this software are copyright Yahoo, Inc, used under the following license:

Software License Agreement (BSD License)
Copyright (c) 2009, Yahoo! Inc.
All rights reserved.
Redistribution and use of this software in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of conditions and the
following disclaimer.
Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
Neither the name of Yahoo! Inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission of Yahoo! Inc.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

Sources of Intellectual Property Included in the YUI Library
Where not otherwise indicated, all YUI content is authored by Yahoo! engineers and consists of Yahoo!-owned intellectual property. YUI is issued by Yahoo! under the BSD license above. In some specific instances, YUI will incorporate work done by developers outside of Yahoo! with their express permission.

*/
/* @license
  jQuery 1.2.6 - New Wave Javascript

  Copyright (c) 2008 John Resig (jquery.com)
  Dual licensed under the MIT (MIT-LICENSE.txt)
  and GPL (GPL-LICENSE.txt) licenses.

  $Date: 2008-05-24 14:22:17 -0400 (Sat, 24 May 2008) $
  $Rev: 5685 $
*/
SC.Button={value:null,toggleOnValue:YES,toggleOffValue:NO,localize:NO,localizeBindingDefault:SC.Binding.bool(),title:"",contentTitleKey:null,icon:null,contentIconKey:null,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");
return(a&&this.get("localize"))?a.loc():(a||"")}.property("title","localize").cacheable(),keyEquivalent:null,renderTitle:function(b,a){var g=this.get("icon"),d="",h=this.get("displayTitle"),i=(!SC.none(h)&&h.length>0),c,j,e;
if(this.get("escapeHTML")){h=SC.RenderContext.escapeHTML(h)}if(g){var f=SC.BLANK_IMAGE_URL;
if(g.indexOf("/")>=0){d='<img src="'+g+'" alt="" class="icon" />'}else{d='<img src="'+f+'" alt="" class="'+g+'" />'
}i=YES}e=d+h;if(a){if(this.get("needsEllipsis")){b.push('<label class="sc-button-label ellipsis">'+e+"</label>")
}else{b.push('<label class="sc-button-label">'+e+"</label>")}this._ImageTitleCached=e
}else{c=this.$("label");if((j=c[0])){if(i){c.setClass("ellipsis",this.get("needsEllipsis"));
if(this._ImageTitleCached!==e){this._ImageTitleCached=e;j.innerHTML=e}}else{j.innerHTML=""
}}}return b},contentPropertyDidChange:function(h,c){var b=this.get("displayDelegate"),e=this.get("content"),g;
var d=this.getDelegateProperty("contentValueKey",b);if(d&&(c===d||c==="*")){this.set("value",e?(e.get?e.get(d):e[d]):null)
}var a=this.getDelegateProperty("contentTitleKey",b);if(a&&(c===a||c==="*")){this.set("title",e?(e.get?e.get(a):e[a]):null)
}var f=this.getDelegateProperty("contentIconKey",b);if(f&&(c===f||c==="*")){this.set("icon",e?(e.get?e.get(f):e[f]):null)
}return this},_button_displayObserver:function(){this.displayDidChange()}.observes("title","icon","value"),performKeyEquivalent:function(c,b){if(!this.get("isVisibleInWindow")){return NO
}if(!this.get("isEnabled")){return NO}var a=this.get("keyEquivalent");if(a){if(a===c){return this.triggerAction(b)
}}else{if((this.get("isDefault")&&(c==="return"))||(this.get("isCancel")&&(c==="escape"))){return this.triggerAction(b)
}}return NO},triggerAction:function(a){throw"SC.Button.triggerAction() is not defined in %@".fmt(this)
},computeIsSelectedForValue:function(d){var b=this.get("toggleOnValue"),c,a;if(SC.typeOf(d)===SC.T_ARRAY){if(d.length===1){c=(d[0]==b)
}else{c=null;d.find(function(e){a=(e==b);if(c===null){c=a}else{if(a!==c){c=SC.MIXED_STATE
}}return c===SC.MIXED_STATE})}}else{if(d===SC.MIXED_STATE){c=SC.MIXED_STATE}else{c=(d===b)
}}return c},initMixin:function(){if(!SC.none(this.get("value"))){this._button_valueDidChange()
}},_button_valueDidChange:function(){var b=this.get("value"),a=this.computeIsSelectedForValue(b);
this.set("isSelected",a)}.observes("value"),_button_isSelectedDidChange:function(){var c=this.get("isSelected"),b=this.computeIsSelectedForValue(this.get("value"));
if((c!==SC.MIXED_STATE)&&(b!==c)){var a=(c)?"toggleOnValue":"toggleOffValue";this.set("value",this.get(a))
}}.observes("isSelected")};SC.ContentDisplay={concatenatedProperties:"contentDisplayProperties",displayProperties:["content"],contentDisplayProperties:[],initMixin:function(){this._display_contentDidChange()
},destroyMixin:function(){if(!this._display_content){return}this._display_stopObservingContent(this._display_content);
this._display_content=null},_display_beginObservingContent:function(a){var b=this._display_contentPropertyDidChange;
if(SC.isArray(a)){a.invoke("addObserver","*",this,b)}else{if(a.addObserver){a.addObserver("*",this,b)
}}},_display_stopObservingContent:function(a){var b=this._display_contentPropertyDidChange;
if(SC.isArray(a)){a.invoke("removeObserver","*",this,b)}else{if(a.removeObserver){a.removeObserver("*",this,b)
}}},_display_contentDidChange:function(d,a,c){if((c=this.get("content"))===this._display_content){return
}var b=this._display_content;if(b){this._display_stopObservingContent(b)}b=this._display_content=c;
if(b){this._display_beginObservingContent(b)}this.displayDidChange()}.observes("content","contentDisplayProperties"),_display_contentPropertyDidChange:function(e,c,d,b){if(c==="*"){this.displayDidChange()
}else{var a=this.get("contentDisplayProperties");if(a&&a.indexOf(c)>=0){this.displayDidChange()
}}}};sc_require("system/locale");SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);
SC.STRING_DECAMELIZE_REGEXP=(/([a-z])([A-Z])/g);SC.STRING_DASHERIZE_REGEXP=(/[ _]/g);
SC.STRING_HUMANIZE_REGEXP=(/[\-_]/g);SC.STRING_TRIM_REGEXP=(/^\s+|\s+$/g);SC.STRING_TRIM_LEFT_REGEXP=(/^\s+/g);
SC.STRING_TRIM_RIGHT_REGEXP=(/\s+$/g);SC.STRING_REGEXP_ESCAPED_REGEXP=(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g);
SC.STRING_DASHERIZE_CACHE={top:"top",left:"left",right:"right",bottom:"bottom",width:"width",height:"height",minWidth:"min-width",maxWidth:"max-width"};
SC.INFLECTION_CONSTANTS={PLURAL:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],SINGULAR:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/s$/i,""]],IRREGULAR:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],UNCOUNTABLE:["sheep","fish","series","species","money","rice","information","info","equipment"]};
SC.String={loc:function(){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()
}var a=SC.Locale.currentLocale.locWithDefault(this);if(SC.typeOf(a)!==SC.T_STRING){a=this
}return a.fmt.apply(a,arguments)},locWithDefault:function(b){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()
}var c=SC.Locale.currentLocale.locWithDefault(this,b);if(SC.typeOf(c)!==SC.T_STRING){c=this
}var a=SC.$A(arguments);a.shift();return c.fmt.apply(c,a)},capitalize:function(){return this.charAt(0).toUpperCase()+this.slice(1)
},capitalizeEach:function(){return this.replace(SC.STRING_TITLEIZE_REGEXP,function(c,a,b){return(b)?(a+b.toUpperCase()):a
}).capitalize()},titleize:function(){var a=this.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2");
return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,d,b){return(b)?(" "+b.toUpperCase()):" "
}).capitalize()},camelize:function(){var b=this.replace(SC.STRING_TITLEIZE_REGEXP,function(e,f,d){return(d)?d.toUpperCase():""
});var c=b.charAt(0),a=c.toLowerCase();return(c!==a)?(a+b.slice(1)):b},classify:function(){var a=this.replace(SC.STRING_TITLEIZE_REGEXP,function(e,f,d){return(d)?d.toUpperCase():""
});var c=a.charAt(0),b=c.toUpperCase();return(c!==b)?(b+a.slice(1)):a},decamelize:function(){return this.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()
},dasherize:function(){var a=SC.STRING_DASHERIZE_CACHE,b=a[this];if(b){return b}else{b=this.decamelize().replace(SC.STRING_DASHERIZE_REGEXP,"-");
a[this]=b}return b},humanize:function(){return this.decamelize().replace(SC.STRING_HUMANIZE_REGEXP," ")
},escapeForRegExp:function(){return this.replace(SC.STRING_REGEXP_ESCAPED_REGEXP,"\\$1")
},removeDiacritics:function(){var a=SC.diacriticMappingTable;if(!a){SC.diacriticMappingTable={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ā":"A","Ă":"A","Ą":"A","Ǎ":"A","Ǟ":"A","Ǡ":"A","Ǻ":"A","Ȁ":"A","Ȃ":"A","Ȧ":"A","Ḁ":"A","Ạ":"A","Ả":"A","Ấ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ắ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Å":"A","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ç":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ḉ":"C","Ď":"D","Ḋ":"D","Ḍ":"D","Ḏ":"D","Ḑ":"D","Ḓ":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ȩ":"E","Ḕ":"E","Ḗ":"E","Ḙ":"E","Ḛ":"E","Ḝ":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ế":"E","Ề":"E","Ể":"E","Ễ":"E","Ệ":"E","Ḟ":"F","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","Ǧ":"G","Ǵ":"G","Ḡ":"G","Ĥ":"H","Ȟ":"H","Ḣ":"H","Ḥ":"H","Ḧ":"H","Ḩ":"H","Ḫ":"H","Ì":"I","Í":"I","Î":"I","Ï":"I","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ḭ":"I","Ḯ":"I","Ỉ":"I","Ị":"I","Ĵ":"J","Ķ":"K","Ǩ":"K","Ḱ":"K","Ḳ":"K","Ḵ":"K","Ĺ":"L","Ļ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ḻ":"L","Ḽ":"L","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ñ":"N","Ń":"N","Ņ":"N","Ň":"N","Ǹ":"N","Ṅ":"N","Ṇ":"N","Ṉ":"N","Ṋ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ō":"O","Ŏ":"O","Ő":"O","Ơ":"O","Ǒ":"O","Ǫ":"O","Ǭ":"O","Ȍ":"O","Ȏ":"O","Ȫ":"O","Ȭ":"O","Ȯ":"O","Ȱ":"O","Ṍ":"O","Ṏ":"O","Ṑ":"O","Ṓ":"O","Ọ":"O","Ỏ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ṕ":"P","Ṗ":"P","Ŕ":"R","Ŗ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ṟ":"R","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṥ":"S","Ṧ":"S","Ṩ":"S","Ţ":"T","Ť":"T","Ț":"T","Ṫ":"T","Ṭ":"T","Ṯ":"T","Ṱ":"T","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","Ư":"U","Ǔ":"U","Ǖ":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ȕ":"U","Ȗ":"U","Ṳ":"U","Ṵ":"U","Ṷ":"U","Ṹ":"U","Ṻ":"U","Ụ":"U","Ủ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ṽ":"V","Ṿ":"V","Ŵ":"W","Ẁ":"W","Ẃ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẋ":"X","Ẍ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ẏ":"Y","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẑ":"Z","Ẓ":"Z","Ẕ":"Z","`":"`","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","ǎ":"a","ǟ":"a","ǡ":"a","ǻ":"a","ȁ":"a","ȃ":"a","ȧ":"a","ḁ":"a","ạ":"a","ả":"a","ấ":"a","ầ":"a","ẩ":"a","ẫ":"a","ậ":"a","ắ":"a","ằ":"a","ẳ":"a","ẵ":"a","ặ":"a","ḃ":"b","ḅ":"b","ḇ":"b","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ḉ":"c","ď":"d","ḋ":"d","ḍ":"d","ḏ":"d","ḑ":"d","ḓ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ȅ":"e","ȇ":"e","ȩ":"e","ḕ":"e","ḗ":"e","ḙ":"e","ḛ":"e","ḝ":"e","ẹ":"e","ẻ":"e","ẽ":"e","ế":"e","ề":"e","ể":"e","ễ":"e","ệ":"e","ḟ":"f","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ǧ":"g","ǵ":"g","ḡ":"g","ĥ":"h","ȟ":"h","ḣ":"h","ḥ":"h","ḧ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ǐ":"i","ȉ":"i","ȋ":"i","ḭ":"i","ḯ":"i","ỉ":"i","ị":"i","ĵ":"j","ǰ":"j","ķ":"k","ǩ":"k","ḱ":"k","ḳ":"k","ḵ":"k","ĺ":"l","ļ":"l","ľ":"l","ḷ":"l","ḹ":"l","ḻ":"l","ḽ":"l","ḿ":"m","ṁ":"m","ṃ":"m","ñ":"n","ń":"n","ņ":"n","ň":"n","ǹ":"n","ṅ":"n","ṇ":"n","ṉ":"n","ṋ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ō":"o","ŏ":"o","ő":"o","ơ":"o","ǒ":"o","ǫ":"o","ǭ":"o","ȍ":"o","ȏ":"o","ȫ":"o","ȭ":"o","ȯ":"o","ȱ":"o","ṍ":"o","ṏ":"o","ṑ":"o","ṓ":"o","ọ":"o","ỏ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","ṕ":"p","ṗ":"p","ŕ":"r","ŗ":"r","ř":"r","ȑ":"r","ȓ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ṟ":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ș":"s","ṡ":"s","ṣ":"s","ṥ":"s","ṧ":"s","ṩ":"s","ţ":"t","ť":"t","ț":"t","ṫ":"t","ṭ":"t","ṯ":"t","ṱ":"t","ẗ":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ư":"u","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ȕ":"u","ȗ":"u","ṳ":"u","ṵ":"u","ṷ":"u","ṹ":"u","ṻ":"u","ụ":"u","ủ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ṽ":"v","ṿ":"v","ŵ":"w","ẁ":"w","ẃ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẘ":"w","ẋ":"x","ẍ":"x","ý":"y","ÿ":"y","ŷ":"y","ȳ":"y","ẏ":"y","ẙ":"y","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","ź":"z","ż":"z","ž":"z","ẑ":"z","ẓ":"z","ẕ":"z"};
a=SC.diacriticMappingTable}var d,e,b="",f=this.length;for(var c=0;c<=f;++c){d=this.charAt(c);
e=a[d];if(e){b+=e}else{b+=d}}return b},trim:function(){return this.replace(SC.STRING_TRIM_REGEXP,"")
},trimLeft:function(){return this.replace(SC.STRING_TRIM_LEFT_REGEXP,"")},trimRight:function(){return this.replace(SC.STRING_TRIM_RIGHT_REGEXP,"")
},pluralize:function(){var j,e,b=this.split(/\s/).pop(),g=this.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;
b=b.toLowerCase();for(j=0,e=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;j<e;j++){var f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[j];
if(b==f){return this.toString()}}for(j=0,e=SC.INFLECTION_CONSTANTS.IRREGULAR.length;
j<e;j++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[j][0],i=SC.INFLECTION_CONSTANTS.IRREGULAR[j][1];
if((b==c)||(b==i)){if(a){i=i.capitalize()}return g+i}}for(j=0,e=SC.INFLECTION_CONSTANTS.PLURAL.length;
j<e;j++){var h=SC.INFLECTION_CONSTANTS.PLURAL[j][0],d=SC.INFLECTION_CONSTANTS.PLURAL[j][1];
if(h.test(b)){return this.replace(h,d)}}},singularize:function(){var j,e,b=this.split(/\s/).pop(),g=this.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;
b=b.toLowerCase();for(j=0,e=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;j<e;j++){var f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[j];
if(b==f){return this.toString()}}for(j=0,e=SC.INFLECTION_CONSTANTS.IRREGULAR.length;
j<e;j++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[j][0],i=SC.INFLECTION_CONSTANTS.IRREGULAR[j][1];
if((b==c)||(b==i)){if(a){c=c.capitalize()}return g+c}}for(j=0,e=SC.INFLECTION_CONSTANTS.SINGULAR.length;
j<e;j++){var h=SC.INFLECTION_CONSTANTS.SINGULAR[j][0],d=SC.INFLECTION_CONSTANTS.SINGULAR[j][1];
if(h.test(b)){return this.replace(h,d)}}}};SC.String.strip=SC.String.trim;SC.supplement(String.prototype,SC.String);
String.prototype.loc=SC.String.loc;SC.String.fmt=String.prototype.fmt;sc_require("mixins/string");
SC.MIXED_STATE="__MIXED__";SC.HUGE_CONTROL_SIZE="sc-huge-size";SC.LARGE_CONTROL_SIZE="sc-large-size";
SC.REGULAR_CONTROL_SIZE="sc-regular-size";SC.SMALL_CONTROL_SIZE="sc-small-size";SC.TINY_CONTROL_SIZE="sc-tiny-size";
SC.Control={initMixin:function(){this._control_contentDidChange()},isSelected:NO,isSelectedBindingDefault:SC.Binding.oneWay().bool(),isActive:NO,isActiveBindingDefault:SC.Binding.oneWay().bool(),value:null,content:null,contentValueKey:null,contentPropertyDidChange:function(b,a){return this.updatePropertyFromContent("value",a,"contentValueKey")
},updatePropertyFromContent:function(f,b,e,d){var c=b==="*";if(e===undefined){e="content"+f.capitalize()+"Key"
}if(d===undefined){d=this.get("content")}e=this[e]?this.get(e):this.getDelegateProperty(e,this.displayDelegate);
if(e&&(c||b===e)){var a=(d)?(d.get?d.get(e):d[e]):null;this.set(f,a)}return this},updateContentWithValueObserver:function(){var a=this.contentValueKey?this.get("contentValueKey"):this.getDelegateProperty("contentValueKey",this.displayDelegate),b=this.get("content");
if(!a||!b){return}var c=this.get("value");if(typeof b.setIfChanged===SC.T_FUNCTION){b.setIfChanged(a,c)
}else{if(b[a]!==c){b[a]=c}}}.observes("value"),fieldKey:null,fieldLabel:null,errorLabel:function(){var a,c,b;
if(a=this.get("fieldLabel")){return a}c=this.get("fieldKey")||this.constructor.toString();
b=(c||"").humanize().capitalize();return"ErrorLabel."+c.locWithDefault(("FieldKey."+c).locWithDefault(b))
}.property("fieldLabel","fieldKey").cacheable(),controlSize:SC.REGULAR_CONTROL_SIZE,displayProperties:"isEnabled isSelected isActive controlSize".w(),_CONTROL_TMP_CLASSNAMES:{},renderMixin:function(a,e){var c=this.get("isSelected"),b=!this.get("isEnabled"),d=this._CONTROL_TMP_CLASSNAMES;
d.mixed=c===SC.MIXED_STATE;d.sel=c&&(c!==SC.MIXED_STATE);d.active=this.get("isActive");
a.setClass(d).addClass(this.get("controlSize"))},_control_content:null,_control_contentDidChange:function(){var b=this.get("content");
if(this._control_content===b){return}var c=this.contentPropertyDidChange,a=this._control_content;
if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._control_content=b;if(b&&b.addObserver){b.addObserver("*",this,c)
}this.contentPropertyDidChange(b,"*")}.observes("content")};SC.Editable={isEditable:NO,isEditing:NO,beginEditing:function(){if(!this.get("isEditable")){return NO
}if(this.get("isEditing")){return YES}this.beginPropertyChanges();this.set("isEditing",YES);
this.becomeFirstResponder();this.endPropertyChanges();return YES},discardEditing:function(){return !this.get("isEditing")
},commitEditing:function(){if(!this.get("isEditing")){return YES}this.set("isEditing",NO);
this.resignFirstResponder();return YES}};SC.mixin(SC.browser,(function(){var a=window.innerWidth,c=SC.browser,b=navigator.standalone;
SC.extend(c,{isOpera:!!c.opera,isIe:!!c.msie,isIE:!!c.msie,isSafari:!!c.safari,isMobileSafari:(!!c.mobileSafari||!!c.standalone),isMozilla:!!c.mozilla,isWindows:!!c.windows,isMac:!!c.mac,isiPhone:((!!c.mobileSafari||!!c.standalone)&&(a==320||a==480)),current:c.msie?"msie":c.mozilla?"mozilla":c.safari?"safari":c.opera?"opera":"unknown",compareVersion:function(){if(this._versionSplit===undefined){var g=function(h){return Number(h.match(/^[0-9]+/))
};this._versionSplit=SC.A(this.version.split(".")).map(g)}var f=SC.A(arguments).map(Number);
for(var e=0;e<f.length;e++){var d=this._versionSplit[e]-f[e];if(isNaN(d)){return 0
}if(d!==0){return d}}return 0}});return c})());SC.Builder=function(a){return SC.Builder.create(a)
};SC.Builder.create=function create(c){var b=SC.mixin(SC.beget(this.fn),c||{});if(c.hasOwnProperty("toString")){b.toString=c.toString
}var a=function(){var d=SC.beget(b);d.defaultClass=this;d.constructor=a;return d.init.apply(d,arguments)
};a.fn=a.prototype=b;a.extend=SC.Builder.create;a.mixin=SC.Builder.mixin;return a
};SC.Builder.mixin=function(){var b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(this,arguments[a])
}return this};SC.Builder.fn={init:function(a){if(a!==undefined){if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;
while(--b>=0){this[b]=a.objectAt?a.objectAt(b):a[b]}this.length=a.length}else{this[0]=a;
this.length=1}}return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);
a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()
},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))
},mixin:SC.Builder.mixin};(function(){var a=SC.Enumerable,c=SC.Builder.fn,b,d;for(b in a){if(!a.hasOwnProperty(b)){continue
}d=Array.prototype[b]||a[b];c[b]=d}})();require("system/builder");SC.CoreQuery=(function(){var E=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,i=/^.[^:#\[\.]*$/;
var w=/ CQ\d+="(?:\d+|null)"/g,e=/(<(\w+)[^>]*?)\/>/g,p=/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i,b=/\s+/,f=/^\s+/,h=/^body|html$/i,C=/href|src|style/,j=/(button|input|object|select|textarea)/i,x=/alpha\([^)]*\)/,r=/opacity=([^)]*)/;
var B=SC.browser.msie?"styleFloat":"cssFloat";var s=(SC.browser.safari&&parseInt(SC.browser.version,0)<417)?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)";
var y=new RegExp("^("+s+"+)(#)("+s+"+)");var n=new RegExp("^([#.]?)("+s+"*)");var g=new RegExp("([#.]?)("+s+"*)","g");
var m=["Left","Right"];var d=["Top","Bottom"];var o={position:"absolute",visibility:"hidden",display:"block"};
var A=function A(H,G,M){var L=G==="width"?H.offsetWidth:H.offsetHeight;var J=0,F=0,K=M.length,I;
while(--K>=0){I=M[K];J+=parseFloat(c.curCSS(H,"padding"+I,true))||0;F+=parseFloat(c.curCSS(H,"border"+I+"Width",true))||0
}L-=Math.round(J+F);return L};var k=SC.guidKey,z=0,D={},a=/z-?index|font-?weight|opacity|zoom|line-?height/i,u=document.defaultView||{};
var q=function q(G){if(!SC.browser.safari){return false}var F=u.getComputedStyle(G,null);
return !F||F.getPropertyValue("color")===""};function l(F,G){return F[0]&&parseInt(c.curCSS(F[0],G,true),10)||0
}var v,c;c=v=SC.Builder.create({jquery:"SC.CoreQuery",init:function(F,H){F=F||document;
if(F.nodeType){this[0]=F;this.length=1;return this}else{if(typeof F==="string"){var G=E.exec(F);
if(G&&(G[1]||!H)){if(G[1]){F=c.clean([G[1]],H)}else{var I=document.getElementById(G[3]);
if(I){if(I.id!=G[3]){return c().find(F)}return c(I)}F=[]}}else{return c(H).find(F)
}}else{if(SC.typeOf(F)===SC.T_FUNCTION){return SC.ready(F)}}}return this.setArray(c.makeArray(F))
},size:function(){return this.length},get:function(F){return F===undefined?c.makeArray(this):this[F]
},find:function(F){var G=c.map(this,function(H){return c.find(F,H)});return this.pushStack(G)
},filter:function(F){return this.pushStack((SC.typeOf(F)===SC.T_FUNCTION)&&c.grep(this,function(H,G){return F.call(H,G)
})||c.multiFilter(F,this))},not:function(F){if(typeof F==="string"){if(i.test(F)){return this.pushStack(c.multiFilter(F,this,true))
}else{F=c.multiFilter(F,this)}}var G=F.length&&F[F.length-1]!==undefined&&!F.nodeType;
return this.filter(function(){return G?c.inArray(this,F)<0:this!=F})},setArray:function(F){this.length=0;
Array.prototype.push.apply(this,F);return this},map:function(F){return this.pushStack(c.map(this,function(H,G){return F.call(H,G,H)
}))},each:function(G,F){return c.each(this,G,F)},index:function(F){if(F&&F.jquery){F=F[0]
}return Array.prototype.indexOf.call(this,F)},eq:function(F){return this.slice(F,+F+1)
},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))
},add:function(F){return this.pushStack(c.merge(this.get(),typeof F==="string"?c(F):c.makeArray(F)).uniq())
},attr:function(G,I,H){var F=G;if(typeof G==="string"){if(I===undefined){return this[0]&&c[H||"attr"](this[0],G)
}else{F={};F[G]=I}}return this.each(function(J){for(G in F){c.attr((H)?this.style:this,G,c.prop(this,F[G],H,J,G))
}})},html:function(F){return F===undefined?(this[0]?this[0].innerHTML.replace(w,""):null):this.empty().append(F)
},andSelf:function(){return this.add(this.prevObject)},is:function(F){return !!F&&c.multiFilter(F,this).length>0
},hasClass:function(F){return Array.prototype.every.call(this,function(G){return(G.nodeType===1)&&c.className.has(G,F)
})},val:function(L){if(L===undefined){var F=this[0];if(F){if(c.nodeName(F,"option")){return(F.attributes.value||{}).specified?F.value:F.text
}if(c.nodeName(F,"select")){var J=F.selectedIndex,M=[],N=F.options,I=F.type==="select-one",H;
if(J<0){return null}var G,K=I?J+1:N.length;for(G=I?J:0;G<K;G++){H=N[G];if(H.selected){L=c(H).val();
if(I){return L}M.push(L)}}return M}return(F.value||"").replace(/\r/g,"")}return undefined
}else{if(typeof L==="number"){L+=""}this.each(function(){if(this.nodeType!==1){return
}if(SC.typeOf(L)===SC.T_ARRAY&&(/radio|checkbox/).test(this.type)){this.checked=(c.inArray(this.value,L)>=0||c.inArray(this.name,L)>=0)
}else{if(c.nodeName(this,"select")){var O=c.makeArray(L);c("option",this).each(function(){this.selected=(c.inArray(this.value,O)>=0||c.inArray(this.text,O)>=0)
});if(!O.length){this.selectedIndex=-1}}else{this.value=L}}})}return this},clone:function(){var F=this.map(function(){if(SC.browser.msie&&!c.isXMLDoc(this)){var I=this.cloneNode(true),H=document.createElement("div");
H.appendChild(I);return c.clean([H.innerHTML])[0]}else{return this.cloneNode(true)
}});var G=F.find("*").andSelf().each(function(){if(this[SC.guidKey]!==undefined){this[SC.guidKey]=null
}});return F},css:function(F,G){if((F==="width"||F==="height")&&parseFloat(G,0)<0){G=undefined
}return this.attr(F,G,"curCSS")},text:function(G){if(G!==undefined&&typeof G!=="object"&&G!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(G))
}var F="";c.each(G||this,function(){c.each(this.childNodes,function(){if(this.nodeType!==8){F+=this.nodeType!==1?this.nodeValue:c.fn.text([this])
}})});return F},show:function(){var F=SC.$.isVisible;this.each(function(){if(!F(this)){this.style.display=this.oldblock||"";
if(c.css(this,"display")==="none"){var G=c("<"+this.tagName+"/>");c("body").append(G);
this.style.display=G.css("display");if(this.style.display==="none"){this.style.display="block"
}G.remove();G=null}}});return this},hide:function(){var F=SC.$.isVisible;this.each(function(){if(F(this)){this.oldblock=this.oldblock||c.css(this,"display");
this.style.display="none"}});return this},domManip:function(H,I,G,K){var J=this.length>1,F;
return this.each(function(){if(!F){F=c.clean(H,this.ownerDocument);if(G){F.reverse()
}}var L=this;if(I&&c.nodeName(this,"table")&&c.nodeName(F[0],"tr")){L=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"))
}c.each(F,function(){var M=J?c(this).clone(true)[0]:this;K.call(L,M)})})},append:function(){return this.domManip(arguments,true,false,function(F){if(this.nodeType===1){this.appendChild(F)
}})},prepend:function(){return this.domManip(arguments,true,true,function(F){if(this.nodeType===1){this.insertBefore(F,this.firstChild)
}})},before:function(){return this.domManip(arguments,false,false,function(F){this.parentNode.insertBefore(F,this)
})},after:function(){return this.domManip(arguments,false,true,function(F){this.parentNode.insertBefore(F,this.nextSibling)
})},replaceWith:function(F){return this.after(F).remove()},removeData:function(F){return this.each(function(){SC.removeData(this,F)
})}});v.mixin({nodeName:function(G,F){return G.nodeName&&G.nodeName.toUpperCase()===F.toUpperCase()
},map:function(F,K){var G=[],J,H,I;for(H=0,I=F.length;H<I;H++){J=K(F[H],H);if(J!=null){G[G.length]=J
}}return G.concat.apply([],G)},each:function(H,L,G){var F,I=0,J=H.length;if(G){if(J===undefined){for(F in H){if(L.apply(H[F],G)===false){break
}}}else{for(;I<J;){if(L.apply(H[I++],G)===false){break}}}}else{if(J===undefined){for(F in H){if(L.call(H[F],F,H[F])===false){break
}}}else{for(var K=H[0];I<J&&L.call(K,I,K)!==false;K=H[++I]){}}}return H},isXMLDoc:function(F){return F.documentElement&&!F.body||F.tagName&&F.ownerDocument&&!F.ownerDocument.body
},clean:function(F,H){var G=[];H=H||document;if(typeof H.createElement=="undefined"){H=H.ownerDocument||H[0]&&H[0].ownerDocument||document
}c.each(F,function(L,N){if(typeof N==="number"){N+=""}if(!N){return}if(typeof N==="string"){N=N.replace(e,function(Q,R,P){return P.match(p)?Q:R+"></"+P+">"
});var K=N.replace(f,"").substring(0,10).toLowerCase(),O=H.createElement("div");var M=!K.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!K.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||K.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!K.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!K.indexOf("<td")||!K.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!K.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||SC.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];
O.innerHTML=M[1]+N+M[2];while(M[0]--){O=O.lastChild}if(SC.browser.msie){var J=!K.indexOf("<table")&&K.indexOf("<tbody")<0?O.firstChild&&O.firstChild.childNodes:M[1]==="<table>"&&K.indexOf("<tbody")<0?O.childNodes:[];
for(var I=J.length-1;I>=0;--I){if(c.nodeName(J[I],"tbody")&&!J[I].childNodes.length){J[I].parentNode.removeChild(J[I])
}}if(/^\s/.test(N)){O.insertBefore(H.createTextNode(N.match(/^\s*/)[0]),O.firstChild)
}}N=c.makeArray(O.childNodes)}if(N.length===0&&(!c.nodeName(N,"form")&&!c.nodeName(N,"select"))){return
}if(N[0]===undefined||c.nodeName(N,"form")||N.options){G.push(N)}else{G=c.merge(G,N)
}});return G},find:function(S,G){var N;if(typeof S!=="string"){return[S]}if(S.indexOf(",")>=0){N=S.split(",").map(function(U){return c.find(U,G)
});return N.concat.apply([],N).uniq()}if(G&&G.nodeType!==1&&G.nodeType!==9){return[]
}G=G||document;N=[G];var P,F=YES,J=S.match(g),M=J.length,I;for(var Q=0;Q<M;Q++){S=J[Q];
if(S===" "||S===""){F=YES}else{if(F){I=n.exec(S);if((I[1]==="")&&(Q<(M-1))&&(J[Q+1].charAt(0)==="#")){S=J[Q+1];
J[Q+1]=J[Q];I=n.exec(S)}var L=[],K=N.length,O,R,H=I[2],T;for(O=0;O<K;O++){R=N[O];
switch(I[1]){case"":if(!H){H="*"}if(H==="*"&&R.nodeName.toLowerCase()==="object"){H="param"
}L=c.merge(L,R.getElementsByTagName(H));break;case"#":if(R===document){T=document.getElementById(H);
if(SC.browser.msie&&T&&T.getAttribute("id")!==H){T=NO}else{if(T){L.push(T)}T=YES}}else{T=NO
}if(!T){T=R.getElementsByTagName("*");T=Array.prototype.find.call(T,function(U){return U.getAttribute&&(U.getAttribute("id")===H)
});if(T){L.push(T)}}break;case".":if(R.getElementsByClassName){L=c.merge(L,R.getElementsByClassName(H))
}else{L=c.merge(L,c.classFilter(R.getElementsByTagName("*"),H))}break;default:}}delete N;
N=L;F=NO}else{N=c.filter(S,N)}}}if(N&&N[0]==G){N.shift()}return N.uniq()},classFilter:function(K,F,J){F=" "+F+" ";
var H=[],I;for(var G=0;K[G];G++){I=(" "+K[G].className+" ").indexOf(F)>=0;if(!J&&I||J&&!I){H.push(K[G])
}}return H},filter:function(G,K,J){var F=n.exec(G),L=F[2],I=F[1],H;if(I==="."){return c.classFilter(c.makeArray(K),L,J)
}else{if(I==="#"){H=function(N){var M=N&&N.getAttribute&&(N.getAttribute("id")===L);
return(J)?!M:M}}else{H=function(N){var M=c.nodeName(N,L);return(J)?!M:M}}return Array.prototype.filter.call(c.makeArray(K),H)
}},multiFilter:function(I,F,H){I=I.indexOf(",")?I.split(","):[I];var K=I.length,J,G=[];
while(--K>=0){J=c.filter(I[K].trim(),F,H);G=H?F=J:c.merge(J,G)}return G},merge:function(I,F){var G=0,H,J=I.length;
if(SC.browser.msie){while(H=F[G++]){if(H.nodeType!==8){I[J++]=H}}}else{while(H=F[G++]){I[J++]=H
}}return I},makeArray:function(H){var F=[];if(!SC.none(H)){var G=H.length;if(G==null||typeof H==="string"||H.setInterval){F[0]=H
}else{while(G){F[--G]=H[G]}}}return F},inArray:function(F,G){return G.indexOf?G.indexOf(F):Array.prototype.indexOf.call(G,F)
},boxModel:!SC.browser.msie||document.compatMode==="CSS1Compat",props:{"for":"htmlFor","class":"className","float":B,cssFloat:B,styleFloat:B,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan"},prop:function(I,J,H,G,F){if(SC.typeOf(J)===SC.T_FUNCTION){J=J.call(I,G)
}return J&&(typeof J==="number")&&H==="curCSS"&&!a.test(F)?J+"px":J},grep:function(G,K,F){var H=[];
for(var I=0,J=G.length;I<J;I++){if(!F!=!K(G[I],I)){H.push(G[I])}}return H},className:{add:function(G,H){var F=c.className.has;
c.each((H||"").split(b),function(I,J){if(G.nodeType===1&&!F(G.className,J)){G.className+=(G.className?" ":"")+J
}})},remove:function(F,G){if(F.nodeType===1){F.className=G!==undefined?c.grep(F.className.split(b),function(H){return !c.className.has(G,H)
}).join(" "):""}},has:function(G,F){return G&&c.inArray(F,(G.className||G).toString().split(b))>-1
}},swap:function(K,J,M,L,F){var G={},I;for(I in J){G[I]=K.style[I];K.style[I]=J[I]
}var H=M(K,L,F);for(I in J){K.style[I]=G[I]}return H},css:function(H,F,I){if(F==="width"||F==="height"){var K,J=(F==="width")?m:d,G=o;
K=SC.$.isVisible(H)?A(H,F,J):c.swap(H,G,A,F,J);return Math.max(0,K)}return c.curCSS(H,F,I)
},curCSS:function(L,G,H){var Q,F=L.style;if(G==="opacity"&&SC.browser.msie){Q=c.attr(F,"opacity");
return Q===""?"1":Q}if(SC.browser.opera&&G==="display"){var R=F.outline;F.outline="0 solid black";
F.outline=R}var I=G.match(/float/i);if(I){G=B}if(!H&&F&&F[G]){Q=F[G]}else{if(u.getComputedStyle){if(I){G="float"
}G=G.replace(/([A-Z])/g,"-$1").toLowerCase();var S=u.getComputedStyle(L,null);if(S&&!q(L,u)){Q=S.getPropertyValue(G)
}else{var K=[],T=[],U=L,N=0,P,M;for(;U&&q(U);U=U.parentNode){T.unshift(U)}for(M=T.length;
N<M;N++){var V=T[N];if(V&&V.style&&q(V)){K[N]=V.style.display;V.style.display="block"
}}Q=(G==="display"&&K[T.length-1]!==null)?"none":(S&&S.getPropertyValue(G))||"";for(N=0,P=K.length;
N<P;N++){if(K[N]!==null){T[N].style.display=K[N]}}}if(G==="opacity"&&Q===""){Q="1"
}}else{if(L.currentStyle){Q=L.currentStyle[G]||L.currentStyle[G.camelize()];if(!(/^\d+(px)?$/i).test(Q)&&(/^\d/).test(Q)){var J=F.left,O=L.runtimeStyle.left;
L.runtimeStyle.left=L.currentStyle.left;F.left=Q||0;Q=F.pixelLeft+"px";F.left=J;L.runtimeStyle.left=O
}}}}return Q},dir:function(H,G){var F=[],I=H[G];while(I&&I!=document){if(I.nodeType===1){F.push(I)
}I=I[G]}return F},nth:function(J,F,H,I){F=F||1;var G=0;for(;J;J=J[H]){if(J.nodeType===1&&++G==F){break
}}return J},sibling:function(H,G){var F=[];for(;H;H=H.nextSibling){if(H.nodeType===1&&H!=G){F.push(H)
}}return F},attr:function(G,F,M){if(!G||G.nodeType===3||G.nodeType===8){return undefined
}var H=!c.isXMLDoc(G),L=M!==undefined,J=SC.browser.msie;F=H&&c.props[F]||F;if(G.tagName){var K=C.test(F);
if(F==="selected"&&G.parentNode){G.parentNode.selectedIndex}if(F in G&&H&&!K){if(L){if(F==="type"&&c.nodeName(G,"input")&&G.parentNode){throw"type property can't be changed"
}G[F]=M}if(c.nodeName(G,"form")&&G.getAttributeNode(F)){return G.getAttributeNode(F).nodeValue
}if(F==="tabIndex"){var N=G.getAttributeNode("tabIndex");return N&&N.specified?N.value:G.nodeName.match(j)?0:G.nodeName.match(/^(a|area)$/i)&&G.href?0:undefined
}return G[F]}if(J&&H&&F==="style"){return c.attr(G.style,"cssText",M)}if(L){G.setAttribute(F,""+M)
}var I=(J&&H&&K)?G.getAttribute(F,2):G.getAttribute(F);return I===null?undefined:I
}if(J&&F==="opacity"){if(L){G.zoom=1;G.filter=(G.filter||"").replace(x,"")+(parseInt(M,0)+""=="NaN"?"":"alpha(opacity="+M*100+")")
}return G.filter&&G.filter.indexOf("opacity=")>=0?(parseFloat(G.filter.match(r)[1])/100)+"":""
}F=F.camelize();if(L){G[F]=M}return G[F]}});c.fn.init.prototype=c.fn;c.each({parent:function(F){return F.parentNode
},parents:function(F){return c.dir(F,"parentNode")},next:function(F){return c.nth(F,2,"nextSibling")
},prev:function(F){return c.nth(F,2,"previousSibling")},nextAll:function(F){return c.dir(F,"nextSibling")
},prevAll:function(F){return c.dir(F,"previousSibling")},siblings:function(F){return c.sibling(F.parentNode.firstChild,F)
},children:function(F){return c.sibling(F.firstChild)},contents:function(F){return c.nodeName(F,"iframe")?F.contentDocument||F.contentWindow.document:c.makeArray(F.childNodes)
}},function(F,G){c.fn[F]=function(H){var I=c.map(this,G);if(H&&typeof H==="string"){I=c.multiFilter(H,I)
}return this.pushStack(I.uniq())}});c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(F,G){c.fn[F]=function(){var H=arguments;
return this.each(function(){for(var I=0,J=H.length;I<J;I++){c(H[I])[G](this)}})}});
c.each({removeAttr:function(F){c.attr(this,F,"");if(this.nodeType===1){this.removeAttribute(F)
}},addClass:function(F){c.className.add(this,F)},removeClass:function(F){c.className.remove(this,F)
},toggleClass:function(F){c.className[c.className.has(this,F)?"remove":"add"](this,F)
},remove:function(F){if(!F||c.filter(F,[this]).length){if(this.parentNode){this.parentNode.removeChild(this)
}}},empty:function(){while(this.firstChild){this.removeChild(this.firstChild)}}},function(F,G){c.fn[F]=function(){return this.each(G,arguments)
}});c.each(["Height","Width"],function(J,H){var K=H.toLowerCase(),G;c.fn[K]=function(L){if(this[0]===window){if(SC.browser.opera){G=document.body["client"+H]
}else{if(SC.browser.safari){G=window["inner"+H]}else{if(document.compatMode){G=documentElement["client"+H]
}else{G=document.body["client"+H]}}}}else{if(this[0]===document){G=Math.max(Math.max(document.body["scroll"+H],document.documentElement["scroll"+H]),Math.max(document.body["offset"+H],document.documentElement["offset"+H]))
}else{if(L===undefined){return this.length?c.css(this[0],K):null}else{return this.css(K,(typeof L==="string")?L:L+"px")
}}}return G};var F=J?"Left":"Top",I=J?"Right":"Bottom";c.fn["inner"+H]=function(){return this[H.toLowerCase()]()+l(this,"padding"+F)+l(this,"padding"+I)
};c.fn["outer"+H]=function(L){return this["inner"+H]()+l(this,"border"+F+"Width")+l(this,"border"+I+"Width")+(L?l(this,"margin"+F)+l(this,"margin"+I):0)
}});v.fn.offset=function(){var G=0,O=0,H=this[0],T=SC.browser,K;if(!H){return undefined
}function J(U){S(c.curCSS(U,"borderLeftWidth",true),c.curCSS(U,"borderTopWidth",true))
}function S(U,V){G+=parseInt(U,10)||0;O+=parseInt(V,10)||0}var Q=H.parentNode,N=H,F=H.offsetParent,P=H.ownerDocument,R=T.safari&&parseInt(T.version,0)<522&&!(/adobeair/i).test(T.userAgent),M=c.curCSS,I=c.css(H,"position")==="fixed";
if(!(T.mozilla&&H==document.body)&&H.getBoundingClientRect){var L=H.getBoundingClientRect();
S(L.left+Math.max(P.documentElement.scrollLeft,P.body.scrollLeft),L.top+Math.max(P.documentElement.scrollTop,P.body.scrollTop));
S(-P.documentElement.clientLeft,-P.documentElement.clientTop)}else{S(H.offsetLeft,H.offsetTop);
while(F){S(F.offsetLeft,F.offsetTop);if(T.mozilla&&!(/^t(able|d|h)$/i).test(F.tagName)||T.safari&&!R){J(F)
}if(!I&&M(F,"position")==="fixed"){I=true}N=(/^body$/i).test(F.tagName)?N:F;F=F.offsetParent
}while(Q&&Q.tagName&&!(h).test(Q.tagName)){if(!(/^inline|table.*$/i).test(M(Q,"display"))){S(-Q.scrollLeft,-Q.scrollTop)
}if(T.mozilla&&M(Q,"overflow")!=="visible"){J(Q)}Q=Q.parentNode}if((R&&(I||M(N,"position")==="absolute"))||(T.mozilla&&M(N,"position")!=="absolute")){S(-P.body.offsetLeft,-P.body.offsetTop)
}if(I){S(Math.max(P.documentElement.scrollLeft,P.body.scrollLeft),Math.max(P.documentElement.scrollTop,P.body.scrollTop))
}}K={top:O,left:G};return K};v.fn.mixin({position:function(){var J=0,I=0,G;if(this[0]){var H=this.offsetParent(),K=this.offset(),F=h.test(H[0].tagName)?{top:0,left:0}:H.offset();
K.top-=l(this,"marginTop");K.left-=l(this,"marginLeft");F.top+=l(H,"borderTopWidth");
F.left+=l(H,"borderLeftWidth");G={top:K.top-F.top,left:K.left-F.left}}return G},offsetParent:function(){var F=this[0].offsetParent||document.body;
while(F&&(!(h).test(F.tagName)&&c.css(F,"position")==="static")){F=F.offsetParent
}return c(F)}});c.each(["Left","Top"],function(G,F){var H="scroll"+F;c.fn[H]=function(I){if(!this[0]){return
}return I!==undefined?this.each(function(){this==window||this==document?window.scrollTo(!G?I:c(window).scrollLeft(),G?I:c(window).scrollTop()):this[H]=I
}):this[0]==window||this[0]==document?self[G?"pageYOffset":"pageXOffset"]||c.boxModel&&document.documentElement[H]||document.body[H]:this[0][H]
}});return v}());SC.$=(typeof jQuery=="undefined")?SC.CoreQuery:jQuery;SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var c=[],b=this.length,a=0;
for(a=0;a<b;a++){c[a]="%@: %@".fmt(a,this[a]?this[a].toString():"(null)")}return"<$:%@>(%@)".fmt(SC.guidFor(this),c.join(" , "))
},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)
})},first:function(){return this.pushStack([this[0]])},last:function(){return this.pushStack([this[this.length-1]])
},view:function(){return this.map(function(){var b=null,a=SC.viewKey,d=this,c;while(!b&&d&&(d!==document)){if(d.nodeType===1&&(c=d.getAttribute("id"))){b=SC.View.views[c]
}d=d.parentNode}d=null;return b})},setClass:function(d,c){if(SC.none(d)){return this
}var e=SC.typeOf(d)!==SC.T_STRING,a=this._fixupClass,b;this.each(function(){if(this.nodeType!==1){return
}var h=this.className.split(/\s+/),g=NO;if(e){for(var f in d){if(!d.hasOwnProperty(f)){continue
}g=a(h,f,d[f])||g}}else{g=a(h,d,c)}if(g){this.className=h.join(" ")}});return this
},_fixupClass:function(d,a,c){var b=d.indexOf(a);if(c){if(b<0){d.push(a);return YES
}}else{if(b>=0){d[b]=null;return YES}}return NO},within:function(e){e=SC.$(e);var d,c,g,b,a=e.length,f=this.length;
while(!d&&(--f>=0)){g=this[f];for(b=0;!d&&(b<a);b++){c=e[b];while(c&&(c!==g)){c=c.parentNode
}d=c===g}}g=c=null;return d}});(function(){var c={},f={find:function(i,h){return(h!==undefined)?SC.Enumerable.find.call(this,i,h):c.find.call(this,i)
},filter:function(i,h){return(h!==undefined)?this.pushStack(SC.Enumerable.filter.call(this,i,h)):c.filter.call(this,i)
},filterProperty:function(h,i){return this.pushStack(SC.Enumerable.filterProperty.call(this,h,i))
},indexOf:SC.$.index,map:function(i,h){return(h!==undefined)?SC.Enumerable.map.call(this,i,h):c.map.call(this,i)
}};var g=SC.$.jquery==="SC.CoreQuery",d=SC.$.fn,a=g?f:SC.Enumerable,e;for(var b in a){if(!a.hasOwnProperty(b)){continue
}e=a[b];if(b in f){c[b]=d[b];e=f[b]}d[b]=e}})();SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;
return("hidden"!=a.type)&&(b.css(a,"display")!="none")&&(b.css(a,"visibility")!="hidden")
}});sc_require("system/core_query");SC.Event=function(a){if(a){this.originalEvent=a;
var f=SC.Event._props,d=f.length,h=d,i;while(--h>=0){i=f[h];this[i]=a[i]}}this.timeStamp=this.timeStamp||Date.now();
if(!this.target){this.target=this.srcElement||document}if(this.target.nodeType===3){this.target=this.target.parentNode
}if(!this.relatedTarget&&this.fromElement){this.relatedTarget=(this.fromElement===this.target)?this.toElement:this.fromElement
}if(SC.none(this.pageX)&&!SC.none(this.clientX)){var g=document.documentElement,c=document.body;
this.pageX=this.clientX+(g&&g.scrollLeft||c&&c.scrollLeft||0)-(g.clientLeft||0);this.pageY=this.clientY+(g&&g.scrollTop||c&&c.scrollTop||0)-(g.clientTop||0)
}if(!this.which&&((this.charCode||a.charCode===0)?this.charCode:this.keyCode)){this.which=this.charCode||this.keyCode
}if(!this.metaKey&&this.ctrlKey){this.metaKey=this.ctrlKey}if(!this.which&&this.button){this.which=((this.button&1)?1:((this.button&2)?3:((this.button&4)?2:0)))
}if(this.type==="mousewheel"||this.type==="DOMMouseScroll"){var b=1,e=parseFloat(SC.browser.version);
if(SC.browser.safari&&a.wheelDelta!==undefined){this.wheelDelta=0-(a.wheelDeltaY||a.wheelDeltaX);
this.wheelDeltaY=0-(a.wheelDeltaY||0);this.wheelDeltaX=0-(a.wheelDeltaX||0);if(e>=533.17&&e<=533.19){b=0.004
}else{if(e<533||e>=534){b=40}}}else{if(!SC.none(a.detail)){b=10;if(a.axis&&(a.axis===a.HORIZONTAL_AXIS)){this.wheelDeltaX=a.detail;
this.wheelDeltaY=this.wheelDelta=0}else{this.wheelDeltaY=this.wheelDelta=a.detail;
this.wheelDeltaX=0}}else{this.wheelDelta=this.wheelDeltaY=SC.browser.msie?0-a.wheelDelta:a.wheelDelta;
this.wheelDeltaX=0}}this.wheelDelta*=b;this.wheelDeltaX*=b;this.wheelDeltaY*=b}return this
};SC.mixin(SC.Event,{create:function(a){return new SC.Event(a)},add:function(e,d,f,g,c){if(e&&e.isCoreQuery){if(e.length>0){e.forEach(function(h){this.add(h,d,f,g,c)
},this);return this}else{e=e[0]}}if(!e){return this}if(e.nodeType===3||e.nodeType===8){return SC.Event
}if(SC.browser.msie&&e.setInterval){e=window}if(SC.typeOf(f)===SC.T_FUNCTION){c=g;
g=f;f=null}else{if(f&&SC.typeOf(g)===SC.T_STRING){g=f[g]}}var b=SC.data(e,"events")||SC.data(e,"events",{}),a=b[d];
if(!a){a=b[d]={};this._addEventListener(e,d)}a[SC.hashFor(f,g)]=[f,g,c];SC.Event._global[d]=YES;
e=b=a=null;return this},remove:function(f,e,g,h){if(f&&f.isCoreQuery){if(f.length>0){f.forEach(function(i){this.remove(i,e,g,h)
},this);return this}else{f=f[0]}}if(!f){return this}if(f.nodeType===3||f.nodeType===8){return SC.Event
}if(SC.browser.msie&&f.setInterval){f=window}var a,d,c=SC.data(f,"events");if(!c){return this
}if(e===undefined){for(e in c){this.remove(f,e)}}else{if(a=c[e]){var b=NO;if(g||h){if(SC.typeOf(g)===SC.T_FUNCTION){h=g;
g=null}else{if(SC.typeOf(h)===SC.T_STRING){h=g[h]}}delete a[SC.hashFor(g,h)];d=null;
for(d in a){break}if(d===null){b=YES}}else{b=YES}if(b){delete c[e];this._removeEventListener(f,e)
}d=null;for(d in c){break}if(!d){SC.removeData(f,"events");delete this._elements[SC.guidFor(f)]
}}}f=c=a=null;return this},NO_BUBBLE:["blur","focus","change"],simulateEvent:function(d,c,b){var a=SC.Event.create({type:c,target:d,preventDefault:function(){this.cancelled=YES
},stopPropagation:function(){this.bubbles=NO},allowDefault:function(){this.hasCustomEventHandling=YES
},timeStamp:Date.now(),bubbles:(this.NO_BUBBLE.indexOf(c)<0),cancelled:NO,normalized:YES});
if(b){SC.mixin(a,b)}return a},trigger:function(c,b,i,j){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(m){this.trigger(m,b,i,j)
},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return undefined
}i=SC.A(i);var h,k=SC.typeOf(c[b]||null)===SC.T_FUNCTION,a,g,d,l;a=i[0];if(!a||!a.preventDefault){a=this.simulateEvent(c,b);
i.unshift(a)}a.type=b;g=c;do{h=SC.Event.handle.apply(g,i);g=(g===document)?null:(g.parentNode||document)
}while(!h&&a.bubbles&&g);g=null;d=c["on"+b];l=SC.CoreQuery.nodeName(c,"a")&&b==="click";
if((!k||l)&&d&&d.apply(c,i)===NO){h=NO}if(k&&j!==NO&&h!==NO&&!l){this.triggered=YES;
try{c[b]()}catch(f){}}this.triggered=NO;return h},handle:function(b){if((typeof SC==="undefined")||SC.Event.triggered){return YES
}var c,g,e,i,d,h,j,k,a,f;h=SC.A(arguments);h[0]=b=SC.Event.normalizeEvent(b||window.event);
d=(SC.data(this,"events")||{})[b.type];if(!d){return NO}for(j in d){k=d[j];a=k[1];
b.handler=a;b.data=b.context=k[2];f=k[0]||this;g=a.apply(f,h);if(c!==NO){c=g}if(g===NO){b.preventDefault();
b.stopPropagation()}}return c},unload:function(){var a,b=this._elements;for(a in b){this.remove(b[a])
}for(a in b){delete b[a]}delete this._elements},special:{ready:{setup:function(){SC._bindReady();
return},teardown:function(){return}},mouseenter:{setup:function(){if(SC.browser.msie){return NO
}SC.Event.add(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},teardown:function(){if(SC.browser.msie){return NO
}SC.Event.remove(this,"mouseover",SC.Event.special.mouseenter.handler);return YES
},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseenter";
return SC.Event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(SC.browser.msie){return NO
}SC.Event.add(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},teardown:function(){if(SC.browser.msie){return NO
}SC.Event.remove(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES
}a.type="mouseleave";return SC.Event.handle.apply(this,arguments)}}},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,_withinElement:function(d,c){var b=d.relatedTarget;
while(b&&b!=c){try{b=b.parentNode}catch(a){b=c}}return b===c},_addEventListener:function(d,c){var e,b=this.special[c];
if(!b||b.setup.call(d)===NO){var a=SC.guidFor(d);this._elements[a]=d;e=SC.data(d,"listener")||SC.data(d,"listener",function(){return SC.Event.handle.apply(SC.Event._elements[a],arguments)
});if(d.addEventListener){d.addEventListener(c,e,NO)}else{if(d.attachEvent){d.attachEvent("on"+c,e)
}}}d=b=e=null},_removeEventListener:function(c,b){var d,a=SC.Event.special[b];if(!a||(a.teardown.call(c)===NO)){d=SC.data(c,"listener");
if(d){if(c.removeEventListener){c.removeEventListener(b,d,NO)}else{if(c.detachEvent){c.detachEvent("on"+b,d)
}}}}c=a=d=null},_elements:{},normalizeEvent:function(a){if(a===window.event){return SC.Event.create(a)
}else{return a.normalized?a:SC.Event.create(a)}},_global:{},_props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view which touches targetTouches changedTouches animationName elapsedTime".split(" ")});
SC.Event.prototype={hasCustomEventHandling:NO,touchesForView:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)
}},averagedTouchesForView:function(a){if(this.touchContext){return this.touchContext.averagedTouchesForView(a)
}return null},allowDefault:function(){this.hasCustomEventHandling=YES;return this
},preventDefault:function(){var a=this.originalEvent;if(a){if(a.preventDefault){a.preventDefault()
}a.returnValue=NO}this.hasCustomEventHandling=YES;return this},stopPropagation:function(){var a=this.originalEvent;
if(a){if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=YES}this.hasCustomEventHandling=YES;
return this},stop:function(){return this.preventDefault().stopPropagation()},normalized:YES,getCharString:function(){if(SC.browser.msie){if(this.keyCode==8||this.keyCode==9||(this.keyCode>=37&&this.keyCode<=40)){return String.fromCharCode(0)
}else{return(this.keyCode>0)?String.fromCharCode(this.keyCode):null}}else{return(this.charCode>0)?String.fromCharCode(this.charCode):null
}},commandCodes:function(){var e=this.keyCode,b=null,c=null,a="",d;if(e){b=SC.FUNCTION_KEYS[e];
if(!b&&(this.altKey||this.ctrlKey||this.metaKey)){b=SC.PRINTABLE_KEYS[e]}if(b){if(this.altKey){a+="alt_"
}if(this.ctrlKey||this.metaKey){a+="ctrl_"}if(this.shiftKey){a+="shift_"}}}if(!b){e=this.which;
c=b=String.fromCharCode(e);d=b.toLowerCase();if(this.metaKey){a="meta_";b=d}else{b=null
}}if(b){b=a+b}return[b,c]}};SC.Event.observe=SC.Event.add;SC.Event.stopObserving=SC.Event.remove;
SC.Event.fire=SC.Event.trigger;if(SC.browser.msie){SC.Event.add(window,"unload",SC.Event.prototype,SC.Event.unload)
}SC.MODIFIER_KEYS={16:"shift",17:"ctrl",18:"alt"};SC.FUNCTION_KEYS={8:"backspace",9:"tab",13:"return",19:"pause",27:"escape",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"};
SC.PRINTABLE_KEYS={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'};
SC.SYSTEM_CURSOR="default";SC.AUTO_CURSOR=SC.DEFAULT_CURSOR="auto";SC.CROSSHAIR_CURSOR="crosshair";
SC.HAND_CURSOR=SC.POINTER_CURSOR="pointer";SC.MOVE_CURSOR="move";SC.E_RESIZE_CURSOR="e-resize";
SC.NE_RESIZE_CURSOR="ne-resize";SC.NW_RESIZE_CURSOR="nw-resize";SC.N_RESIZE_CURSOR="n-resize";
SC.SE_RESIZE_CURSOR="se-resize";SC.SW_RESIZE_CURSOR="sw-resize";SC.S_RESIZE_CURSOR="s-resize";
SC.W_RESIZE_CURSOR="w-resize";SC.IBEAM_CURSOR=SC.TEXT_CURSOR="text";SC.WAIT_CURSOR="wait";
SC.HELP_CURSOR="help";SC.Cursor=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("cursorStyle")||SC.DEFAULT_CURSOR,c=this.constructor.sharedStyleSheet(),b=SC.guidFor(this);
if(c.insertRule){c.insertRule("."+b+" {cursor: "+a+";}",c.cssRules?c.cssRules.length:0)
}else{if(c.addRule){c.addRule("."+b,"cursor: "+a)}}this.cursorStyle=a;this.className=b;
return this},className:null,cursorStyle:SC.DEFAULT_CURSOR,cursorStyleDidChange:function(){var d,f,c,e,g,b,a;
d=this.get("cursorStyle")||SC.DEFAULT_CURSOR;f=this._rule;if(f){f.style.cursor=d;
return}c="."+this.get("className");e=this.constructor.sharedStyleSheet();g=(e.cssRules?e.cssRules:e.rules)||[];
for(b=0,a=g.length;b<a;++b){f=g[b];if(f.selectorText===c){this._rule=f;f.style.cursor=d;
break}}}.observes("cursorStyle")});SC.Cursor.sharedStyleSheet=function(){var b,a=this._styleSheet;
if(!a){a=document.createElement("style");a.type="text/css";b=document.getElementsByTagName("head")[0];
if(!b){b=document.documentElement}b.appendChild(a);a=document.styleSheets[document.styleSheets.length-1];
this._styleSheet=a}return a};SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();
if(a&&this.get("acceptsFirstResponder")){if(a.get("firstResponder")!==this){a.makeFirstResponder(this)
}}return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");
if(b&&(b.get("firstResponder")===this)){b.makeFirstResponder(null,a)}return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){}});
sc_require("system/browser");sc_require("system/event");sc_require("system/cursor");
sc_require("system/responder");sc_require("mixins/string");SC.viewKey=SC.guidKey+"_view";
SC.LAYOUT_HORIZONTAL="sc-layout-horizontal";SC.LAYOUT_VERTICAL="sc-layout-vertical";
SC._VIEW_DEFAULT_DIMS="marginTop marginLeft".w();SC.ANCHOR_TOP={top:0};SC.ANCHOR_LEFT={left:0};
SC.ANCHOR_TOP_LEFT={top:0,left:0};SC.ANCHOR_BOTTOM={bottom:0};SC.ANCHOR_RIGHT={right:0};
SC.ANCHOR_BOTTOM_RIGHT={bottom:0,right:0};SC.FULL_WIDTH={left:0,right:0};SC.FULL_HEIGHT={top:0,bottom:0};
SC.ANCHOR_CENTER={centerX:0,centerY:0};SC.LAYOUT_AUTO="auto";SC.CONTEXT_MENU_ENABLED=YES;
SC.TABBING_ONLY_INSIDE_DOCUMENT=YES;SC.EMPTY_CHILD_VIEWS_ARRAY=[];SC.EMPTY_CHILD_VIEWS_ARRAY.needsClone=YES;
SC.View=SC.Responder.extend(SC.DelegateSupport,{concatenatedProperties:"outlets displayProperties layoutProperties classNames renderMixin didCreateLayerMixin willDestroyLayerMixin".w(),pane:function(){var a=this;
while(a&&!a.isPane){a=a.get("parentView")}return a}.property("parentView").cacheable(),page:null,splitView:function(){var a=this;
while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable(),parentView:null,backgroundColor:null,useStaticLayout:NO,isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay().bool(),isEnabledInPane:function(){var a=this.get("isEnabled"),b;
if(a&&(b=this.get("parentView"))){a=b.get("isEnabledInPane")}return a}.property("parentView","isEnabled"),_sc_view_isEnabledDidChange:function(){if(!this.get("isEnabled")&&this.get("isFirstResponder")){this.resignFirstResponder()
}}.observes("isEnabled"),isVisible:YES,isVisibleBindingDefault:SC.Binding.bool(),isVisibleInWindow:NO,isContextMenuEnabled:function(){return SC.CONTEXT_MENU_ENABLED
}.property(),recomputeIsVisibleInWindow:function(c){var e=this.get("isVisibleInWindow"),g=this.get("isVisible"),d;
if(g){if(c===undefined){d=this.get("parentView");c=d?d.get("isVisibleInWindow"):NO
}g=g&&c}if(e!==g){this.set("isVisibleInWindow",g);var f=this.get("childViews"),b=f.length,a;
for(a=0;a<b;a++){f[a].recomputeIsVisibleInWindow(g)}if(g){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)
}}else{if(this.get("isFirstResponder")){this.resignFirstResponder()}}}this.updateLayerIfNeeded(YES);
return this},_sc_isVisibleDidChange:function(){this.displayDidChange();this.recomputeIsVisibleInWindow()
}.observes("isVisible"),childViews:SC.EMPTY_CHILD_VIEWS_ARRAY,insertBefore:function(b,d){b.beginPropertyChanges();
if(b.get("parentView")){b.removeFromParent()}if(this.willAddChild){this.willAddChild(b,d)
}if(b.willAddToParent){b.willAddToParent(this,d)}b.set("parentView",this);var a,c=this.get("childViews");
if(c.needsClone){this.set(c=[])}a=(d)?c.indexOf(d):c.length;if(a<0){a=c.length}c.insertAt(a,b);
b.parentViewDidChange();b.layoutDidChange();var e=b.get("pane");if(e&&e.get("isPaneAttached")){b._notifyDidAppendToDocument()
}if(this.didAddChild){this.didAddChild(b,d)}if(b.didAddToParent){b.didAddToParent(this,d)
}b.endPropertyChanges();return this},removeChild:function(b){if(!b){return this}if(b.parentView!==this){throw"%@.removeChild(%@) must belong to parent".fmt(this,b)
}if(b.willRemoveFromParent){b.willRemoveFromParent()}if(this.willRemoveChild){this.willRemoveChild(b)
}b.set("parentView",null);var c=this.get("childViews"),a=c.indexOf(b);if(a>=0){c.removeAt(a)
}b.parentViewDidChange();if(this.didRemoveChild){this.didRemoveChild(b)}if(b.didRemoveFromParent){b.didRemoveFromParent(this)
}return this},removeAllChildren:function(){var b=this.get("childViews"),a;while(a=b.objectAt(b.get("length")-1)){this.removeChild(a)
}return this},removeFromParent:function(){var a=this.get("parentView");if(a){a.removeChild(this)
}return this},replaceChild:function(a,b){a.beginPropertyChanges();b.beginPropertyChanges();
this.beginPropertyChanges();this.insertBefore(a,b).removeChild(b);this.endPropertyChanges();
b.endPropertyChanges();a.endPropertyChanges();return this},replaceAllChildren:function(c){var b=c.get("length"),a;
this.beginPropertyChanges();this.destroyLayer().removeAllChildren();for(a=0;a<b;a++){this.appendChild(c.objectAt(a))
}this.replaceLayer();this.endPropertyChanges();return this},appendChild:function(a){return this.insertBefore(a,null)
},parentViewDidChange:function(){this.recomputeIsVisibleInWindow();this.set("layerLocationNeedsUpdate",YES);
this.invokeOnce(this.updateLayerLocationIfNeeded);this._invalidatePaneCacheForSelfAndAllChildViews();
return this},_invalidatePaneCacheForSelfAndAllChildViews:function(){var d,c=this.get("childViews"),b=c.length,a;
this.notifyPropertyChange("pane");for(a=0;a<b;++a){d=c[a];if(d._invalidatePaneCacheForSelfAndAllChildViews){d._invalidatePaneCacheForSelfAndAllChildViews()
}}},layer:function(a,c){if(c!==undefined){this._view_layer=c}else{c=this._view_layer;
if(!c){var b=this.get("parentView");if(b){b=b.get("layer")}if(b){this._view_layer=c=this.findLayerInParentLayer(b)
}b=null}}return c}.property("isVisibleInWindow").cacheable(),$:function(c){var a,b=this.get("layer");
a=!b?SC.$([]):(c===undefined)?SC.$(b):SC.$(c,b);b=null;return a},containerLayer:function(){return this.get("layer")
}.property("layer").cacheable(),layerId:function(a,b){if(b){this._layerId=b}if(this._layerId){return this._layerId
}return SC.guidFor(this)}.property().cacheable(),_lastLayerId:null,layerIdDidChange:function(){var a=this.get("layer"),b=this.get("layerId"),c=this._lastLayerId;
if(b!==c){if(c&&SC.View.views[c]===this){delete SC.View.views[c]}this._lastLayerId=b;
SC.View.views[b]=this;if(a){a.id=b}}}.observes("layerId"),findLayerInParentLayer:function(e){var f=this.get("layerId"),c,h,b,j,d,g;
d=document.getElementById(f);if(SC.browser.msie&&d&&d.id!==f){d=null}if(!d){d=e.firstChild;
var a=[];a.push(e);while(a.length!==0){c=a.shift();if(c.id===f){return c}j=c.childNodes;
for(h=0,b=j.length;h<b;++h){a.push(j[h])}}d=null}return d},isDescendantOf:function(a){var b=this.get("parentView");
if(this===a){return YES}else{if(b){return b.isDescendantOf(a)}else{return NO}}},displayDidChange:function(){this.set("layerNeedsUpdate",YES);
return this},layerNeedsUpdate:NO,_view_layerNeedsUpdateDidChange:function(){if(this.get("layerNeedsUpdate")){this.invokeOnce(this.updateLayerIfNeeded)
}}.observes("layerNeedsUpdate"),updateLayerIfNeeded:function(b){var c=this.get("layerNeedsUpdate"),a=c&&(b||this.get("isVisibleInWindow"));
if(a){if(this.get("layer")){this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);
this.updateLayer();this.endPropertyChanges()}}return this},updateLayer:function(){var a=this.renderContext(this.get("layer"));
this.prepareContext(a,NO);a.update();if(a._innerHTMLReplaced){var b=this.get("pane");
if(b&&b.get("isPaneAttached")){this._notifyDidAppendToDocument()}}if(this.useStaticLayout){this.viewDidResize()
}if(this.didUpdateLayer){this.didUpdateLayer()}if(this.designer&&this.designer.viewDidUpdateLayer){this.designer.viewDidUpdateLayer()
}return this},renderContext:function(a){return SC.RenderContext(a)},createLayer:function(){if(this.get("layer")){return this
}var a=this.renderContext(this.get("tagName"));this.prepareContext(a,YES);this.set("layer",a.element());
this._notifyDidCreateLayer();return this},_notifyDidCreateLayer:function(){if(this.didCreateLayer){this.didCreateLayer()
}var c=this.didCreateLayerMixin,b,a,d=this.get("childViews"),e;if(c){b=c.length;for(a=0;
a<b;++a){c[a].call(this)}}b=d.length;for(a=0;a<b;++a){e=d[a];if(!e){continue}e.notifyPropertyChange("layer");
e._notifyDidCreateLayer()}},destroyLayer:function(){var a=this.get("layer");if(a){this._notifyWillDestroyLayer();
if(a.parentNode){a.parentNode.removeChild(a)}a=null}return this},replaceLayer:function(){this.destroyLayer();
this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded)
},_notifyWillDestroyLayer:function(){if(this.willDestroyLayer){this.willDestroyLayer()
}var c=this.willDestroyLayerMixin,b,a,d=this.get("childViews");if(c){b=c.length;for(a=0;
a<b;++a){c[a].call(this)}}b=d.length;for(a=0;a<b;++a){d[a]._notifyWillDestroyLayer()
}this.set("layer",null)},prepareContext:function(c,b){var e,f,g,d,i,h,a;if(b){d=this.layerId?this.get("layerId"):SC.guidFor(this);
c.id(d).classNames(this.get("classNames"),YES);this.renderLayout(c,b)}else{c.resetClassNames();
c.classNames(this.get("classNames"),YES)}a=[];if(this.get("isTextSelectable")){a.push("allow-select")
}if(!this.get("isEnabled")){a.push("disabled")}if(!this.get("isVisible")){a.push("hidden")
}if(this.get("isFirstResponder")){a.push("focus")}if(this.get("useStaticLayout")){a.push("sc-static-layout")
}i=this.get("backgroundColor");if(i){c.addStyle("backgroundColor",i)}h=this.get("cursor");
if(!h&&this.get("shouldInheritCursor")){h=this.getPath("parentView.cursor")}if(SC.typeOf(h)===SC.T_STRING){h=SC.objectForPropertyPath(h)
}if(h instanceof SC.Cursor){a.push(h.get("className"))}c.addClass(a);this.beginPropertyChanges();
this.set("layerNeedsUpdate",NO);this.render(c,b);if(e=this.renderMixin){f=e.length;
for(g=0;g<f;++g){e[g].call(this,c,b)}}this.endPropertyChanges()},renderChildViews:function(e,f){var d=this.get("childViews"),b=d.length,a,c;
for(a=0;a<b;++a){c=d[a];if(!c){continue}e=e.begin(c.get("tagName"));c.prepareContext(e,f);
e=e.end()}return e},render:function(a,b){if(b){this.renderChildViews(a,b)}},_notifyDidAppendToDocument:function(){if(this.didAppendToDocument){this.didAppendToDocument()
}var c=0,d,a,b=this.get("childViews");for(c=0,a=b.length;c<a;c++){d=b[c];if(d._notifyDidAppendToDocument){d._notifyDidAppendToDocument()
}}},childViewsObserver:function(){var c=this.get("childViews"),b,a,d;for(b=0,a=c.length;
b<a;b++){d=c[b];if(d._notifyDidAppendToDocument){d._notifyDidAppendToDocument()}}}.observes("childViews"),tagName:"div",classNames:["sc-view"],toolTip:null,isTextSelectable:NO,displayProperties:["isFirstResponder"],cursor:null,shouldInheritCursor:YES,layerLocationNeedsUpdate:NO,updateLayerLocationIfNeeded:function(a){if(this.get("layerLocationNeedsUpdate")){this.updateLayerLocation()
}return this},updateLayerLocation:function(){var e=this.get("layer"),d=this.get("parentView"),b=d?d.get("containerLayer"):null;
if(e&&e.parentNode&&e.parentNode!==b){e.parentNode.removeChild(e)}if(!d){if(e&&e.parentNode){e.parentNode.removeChild(e)
}}else{if(!b){if(e){if(e.parentNode){e.parentNode.removeChild(e)}this.destroyLayer()
}}else{if(!e){this.createLayer();e=this.get("layer");if(!e){return}}var f=d.get("childViews"),c=f.objectAt(f.indexOf(this)+1),a=(c)?c.get("layer"):null;
if(c&&(!a||a.parentNode!==b)){c.updateLayerLocationIfNeeded();a=c.get("layer")}if((e.parentNode!==b)||(e.nextSibling!==a)){b.insertBefore(e,a)
}}}b=d=e=a=null;this.set("layerLocationNeedsUpdate",NO);return this},nextResponder:function(){return this.get("parentView")
}.property("parentView").cacheable(),acceptsFirstResponder:NO,isKeyResponder:NO,willLoseKeyResponderTo:function(a){},willBecomeKeyResponderFrom:function(a){},didLoseKeyResponderTo:function(a){},didBecomeKeyResponderFrom:function(a){},interpretKeyEvents:function(b){var a=b.commandCodes(),d=a[0],e=a[1],g;
if(!d&&!e){return null}if(d){var h=SC.MODIFIED_KEY_BINDINGS[d]||SC.BASE_KEY_BINDINGS[d.match(/[^_]+$/)[0]];
if(h){var f=this,c=this.get("pane"),i=null;while(f&&!(i=f.tryToPerform(h,b))){f=(f===c)?null:f.get("nextResponder")
}return i}}if(e&&this.respondsTo("insertText")){g=this.insertText(e,b);return g?(g===YES?this:g):null
}return null},insertText:function(a){return NO},performKeyEquivalent:function(e,c){var d=NO,f=this.get("childViews"),b=f.length,a=-1;
while(!d&&(++a<b)){d=f[a].performKeyEquivalent(e,c)}return d},nextKeyView:null,nextValidKeyView:function(){var a=[],c=this.get("pane"),b=this.get("nextKeyView");
if(!b){b=c._computeNextValidKeyView(this,a)}if(SC.TABBING_ONLY_INSIDE_DOCUMENT&&!b){b=c._computeNextValidKeyView(c,a)
}return b}.property("nextKeyView"),_computeNextValidKeyView:function(g,b){var c=this.get("nextKeyView"),e,d,a,f;
if(this!==g&&b.indexOf(g)!=-1&&this.get("acceptsFirstResponder")&&this.get("isVisibleInWindow")){return this
}b.push(this);if(!c){e=this.get("childViews");for(d=0,a=e.length;d<a;d++){f=e[d];
if(f.get("isVisibleInWindow")&&f.get("isVisible")){c=f._computeNextValidKeyView(g,b)
}if(c){return c}}c=null}return c},previousKeyView:null,previousValidKeyView:function(){var a=[],c=this.pane(),b=this.get("previousKeyView");
if(!b){b=c._computePreviousValidKeyView(this,a)}return b}.property("previousKeyView"),_computePreviousValidKeyView:function(f,a){var b=this.get("previousKeyView"),d,c,e;
if(this!==f&&a.indexOf(f)!=-1&&this.get("acceptsFirstResponder")&&this.get("isVisibleInWindow")){return this
}a.push(this);if(!b){d=this.get("childViews");for(c=d.length-1;0<=c;c--){e=d[c];if(e.get("isVisibleInWindow")&&e.get("isVisible")){b=e._computePreviousValidKeyView(f,a)
}if(b){return b}}b=null}return b},init:function(){var e,g,c,b,a,d,h;arguments.callee.base.apply(this,arguments);
SC.View.views[this.get("layerId")]=this;var f=this.get("childViews");this.childViews=f?f.slice():[];
this.createChildViews();h=this.get("displayProperties");b=h.length;while(--b>=0){this.addObserver(h[b],this,this.displayDidChange)
}if(this.get("isDropTarget")){SC.Drag.addDropTarget(this)}if(this.get("isScrollable")){SC.Drag.addScrollableView(this)
}},awake:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews"),b=c.length,a;
for(a=0;a<b;++a){if(!c[a]){continue}c[a].awake()}},destroy:function(){if(this.get("isDestroyed")){return this
}this._destroy();this.removeFromParent();if(this.get("isDropTarget")){SC.Drag.removeDropTarget(this)
}if(this.get("isScrollable")){SC.Drag.removeScrollableView(this)}arguments.callee.base.apply(this,arguments);
return this},_destroy:function(){if(this.get("isDestroyed")){return this}this.destroyLayer();
var c=this.get("childViews"),b=c.length,a;if(b){c=c.slice();for(a=0;a<b;++a){c[a].destroy()
}}delete SC.View.views[this.get("layerId")];delete this._CQ;delete this.page;return this
},createChildViews:function(){var f=this.get("childViews"),b=f.length,a,e,d,c;this.beginPropertyChanges();
for(a=0;a<b;++a){if(e=(c=f[a])){if(typeof e===SC.T_STRING){c=this[e]}else{e=null}if(!c){console.error("No view with name "+e+" has been found in "+this.toString());
continue}if(c.isClass){c=this.createChildView(c);if(e){this[e]=c}}}f[a]=c}this.endPropertyChanges();
return this},createChildView:function(a,b){if(!b){b={}}b.owner=b.parentView=this;
b.isVisibleInWindow=this.get("isVisibleInWindow");if(!b.page){b.page=this.page}a=a.create(b);
return a},propertyDidChange:function(b,d,c){var a=false;if(typeof this.layout==="function"&&this._kvo_dependents){var e=this._kvo_dependents[b];
if(e&&e.indexOf("layout")!=-1){a=true}}if(b==="layout"||a){this.layoutDidChange()
}arguments.callee.base.apply(this,arguments)},adjust:function(a,d){var b=SC.clone(this.get("layout")),c=NO,f;
if(a===undefined){return this}if(SC.typeOf(a)===SC.T_STRING){f=b[a];if(SC.none(d)){if(f!==undefined){c=YES
}delete b[a]}else{if(f!==d){c=YES}b[a]=d}}else{var e=a;for(a in e){if(!e.hasOwnProperty(a)){continue
}d=e[a];f=b[a];if(d===null){if(f!==undefined){c=YES}delete b[a]}else{if(d!==undefined){if(f!==d){c=YES
}b[a]=d}}}}if(c){this.set("layout",b)}return this},layout:{top:0,left:0,bottom:0,right:0},convertFrameToView:function(i,d){var c=0,b=0,g=0,e=0,a=this,h;
while(a){h=a.get("frame");c+=h.x;b+=h.y;a=a.get("layoutView")}if(d){a=d;while(a){h=a.get("frame");
g+=h.x;e+=h.y;a=a.get("layoutView")}}c=i.x+c-g;b=i.y+b-e;return{x:c,y:b,width:i.width,height:i.height}
},convertFrameFromView:function(i,d){var c=0,b=0,g=0,e=0,a=this,h;while(a&&(h=a.get("frame"))){c+=h.x;
b+=h.y;a=a.get("parentView")}if(d){a=d;while(a){h=a.get("frame");g+=h.x;e+=h.y;a=a.get("parentView")
}}c=i.x-c+g;b=i.y-b+e;return{x:c,y:b,width:i.width,height:i.height}},scrollToVisible:function(){var a=this.get("parentView");
while(a&&!a.get("isScrollable")){a=a.get("parentView")}if(a){a.scrollToVisible();
return a.scrollToVisible(this)}else{return NO}},frame:function(){return this.computeFrameWithParentFrame(null)
}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(h){var r=this.get("layout"),q={},o,v,n=SC.LAYOUT_AUTO,p=this.get("useStaticLayout"),m=this.get("parentView"),i,d,l,b,a=r.right,c=r.left,u=r.top,g=r.bottom,s=r.width,e=r.height,k=r.centerX,j=r.centerY;
if(s!==undefined&&s===SC.LAYOUT_AUTO&&p!==undefined&&!p){o=SC.Error.desc(("%@.layout() cannot use width:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);
console.error(o.toString());throw o}if(e!==undefined&&e===SC.LAYOUT_AUTO&&p!==undefined&&!p){o=SC.Error.desc(("%@.layout() cannot use height:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);
console.error(o.toString());throw o}if(p){if(v=this.get("layer")){q=SC.viewportOffset(v);
if(m){q=m.convertFrameFromView(q,null)}q.width=v.offsetWidth;q.height=v.offsetHeight;
return q}return null}if(!h){h=this.computeParentDimensions(r)}i=h.height;d=h.width;
if(!SC.none(c)){if(SC.isPercentage(c)){q.x=d*c}else{q.x=c}if(s!==undefined){if(s===n){q.width=n
}else{if(SC.isPercentage(s)){q.width=d*s}else{q.width=s}}}else{q.width=d-q.x;if(a&&SC.isPercentage(a)){q.width=q.width-(a*d)
}else{q.width=q.width-(a||0)}}}else{if(!SC.none(a)){if(SC.none(s)){if(SC.isPercentage(a)){q.width=d-(d*a)
}else{q.width=d-a}q.x=0}else{if(s===n){q.width=n}else{if(SC.isPercentage(s)){q.width=d*s
}else{q.width=(s||0)}}if(SC.isPercentage(s)){q.x=d-(a*d)-q.width}else{q.x=d-a-q.width
}}}else{if(!SC.none(k)){if(s===n){q.width=n}else{if(SC.isPercentage(s)){q.width=s*d
}else{q.width=(s||0)}}if(SC.isPercentage(k)){q.x=(d-q.width)/2+(k*d)}else{q.x=(d-q.width)/2+k
}}else{q.x=0;if(SC.none(s)){q.width=d}else{if(s===n){q.width=n}if(SC.isPercentage(s)){q.width=s*d
}else{q.width=(s||0)}}}}}if(!SC.none(u)){if(SC.isPercentage(u)){q.y=u*i}else{q.y=u
}if(e!==undefined){if(e===n){q.height=n}else{if(SC.isPercentage(e)){q.height=e*i}else{q.height=e
}}}else{if(g&&SC.isPercentage(g)){q.height=i-q.y-(g*i)}else{q.height=i-q.y-(g||0)
}}}else{if(!SC.none(g)){if(SC.none(e)){if(SC.isPercentage(g)){q.height=i-(g*i)}else{q.height=i-g
}q.y=0}else{if(e===n){q.height=n}if(e&&SC.isPercentage(e)){q.height=e*i}else{q.height=(e||0)
}if(SC.isPercentage(g)){q.y=i-(g*i)-q.height}else{q.y=i-g-q.height}}}else{if(!SC.none(j)){if(e===n){q.height=n
}if(e&&SC.isPercentage(e)){q.height=e*i}else{q.height=(e||0)}if(SC.isPercentage(j)){q.y=(i-q.height)/2+(j*i)
}else{q.y=(i-q.height)/2+j}}else{q.y=0;if(SC.none(e)){q.height=i}else{if(e===n){q.height=n
}if(SC.isPercentage(e)){q.height=e*i}else{q.height=e||0}}}}}q.x=Math.floor(q.x);q.y=Math.floor(q.y);
if(q.height!==n){q.height=Math.floor(q.height)}if(q.width!==n){q.width=Math.floor(q.width)
}if(q.height===n||q.width===n){v=this.get("layer");if(q.height===n){q.height=v?v.clientHeight:0
}if(q.width===n){q.width=v?v.clientWidth:0}}if(this.get("hasBorder")){l=this.get("borderTop");
b=this.get("borderLeft");q.height-=l+this.get("borderBottom");q.y+=l;q.width-=b+this.get("borderRight");
q.x+=b}if(m&&m.isScrollContainer){m=m.get("parentView");q.x-=m.get("horizontalScrollOffset");
q.y-=m.get("verticalScrollOffset")}if(!SC.none(r.maxHeight)&&(q.height>r.maxHeight)){q.height=r.maxHeight
}if(!SC.none(r.minHeight)&&(q.height<r.minHeight)){q.height=r.minHeight}if(!SC.none(r.maxWidth)&&(q.width>r.maxWidth)){q.width=r.maxWidth
}if(!SC.none(r.minWidth)&&(q.width<r.minWidth)){q.width=r.minWidth}if(q.height<0){q.height=0
}if(q.width<0){q.width=0}return q},computeParentDimensions:function(e){var b,c=this.get("parentView"),a=(c)?c.get("frame"):null;
if(a){b={width:a.width,height:a.height}}else{var d=e||{};b={width:(d.left||0)+(d.width||0)+(d.right||0),height:(d.top||0)+(d.height||0)+(d.bottom||0)}
}return b},clippingFrame:function(){var d=this.get("frame"),a=d,b,c;if(!d){return null
}b=this.get("parentView");if(b){c=b.get("contentClippingFrame");if(!c){return d}a=SC.intersectRects(c,d)
}a.x-=d.x;a.y-=d.y;return a}.property("parentView","frame").cacheable(),contentClippingFrame:function(){return this.get("clippingFrame")
}.property("clippingFrame").cacheable(),_sc_view_clippingFrameDidChange:function(){var d=this.get("childViews"),b=d.length,a,c;
for(a=0;a<b;++a){c=d[a];if(!c.hasStaticLayout){c.notifyPropertyChange("clippingFrame");
c._sc_view_clippingFrameDidChange()}}},parentViewDidResize:function(){var b,c,d,a,e;
if(this.useStaticLayout){b=YES}else{c=this.get("layout");d=((c.left!==undefined)&&(c.top!==undefined)&&(c.width!==undefined)&&(c.height!==undefined));
if(d){a=SC.isPercentage;e=(a(c.left)||a(c.top)||a(c.width)||a(c.right)||a(c.centerX)||a(c.centerY))
}b=(!d||e)}if(b){this.viewDidResize()}},viewDidResize:function(){this._viewFrameDidChange();
var d=this.childViews,b=d.length,a,c;for(a=0;a<b;++a){c=d[a];c.parentViewDidResize()
}},_viewFrameDidChange:function(){this.notifyPropertyChange("frame");this._sc_view_clippingFrameDidChange()
},beginLiveResize:function(){if(this.willBeginLiveResize){this.willBeginLiveResize()
}var d=this.get("childViews"),b=d.length,a,c;for(a=0;a<b;++a){c=d[a];if(c.beginLiveResize){c.beginLiveResize()
}}return this},endLiveResize:function(){var d=this.get("childViews"),b=d.length,a,c;
for(a=b-1;a>=0;--a){c=d[a];if(c.endLiveResize){c.endLiveResize()}}if(this.didEndLiveResize){this.didEndLiveResize()
}return this},wantsAcceleratedLayer:NO,hasAcceleratedLayer:function(){return this.get("wantsAcceleratedLayer")&&SC.platform.supportsAcceleratedLayers
}.property("wantsAcceleratedLayer").cacheable(),layoutStyle:function(){var v=this.get("layout"),z={},j=null,r,o=SC.LAYOUT_AUTO,p=SC._VIEW_DEFAULT_DIMS,i=p.length,k,q,A,s=this.get("useStaticLayout"),a=v.right,e=v.left,y=v.top,g=v.bottom,w=v.width,f=v.height,c=v.maxWidth,h=v.maxHeight,n=v.centerX,m=v.centerY,d=this.get("hasAcceleratedLayer"),b=0,u=0;
if(w!==undefined&&w===SC.LAYOUT_AUTO&&!s){r=SC.Error.desc("%@.layout() you cannot use width:auto if "+"staticLayout is disabled".fmt(this),"%@".fmt(this),-1);
console.error(r.toString());throw r}if(f!==undefined&&f===SC.LAYOUT_AUTO&&!s){r=SC.Error.desc("%@.layout() you cannot use height:auto if "+"staticLayout is disabled".fmt(this),"%@".fmt(this),-1);
console.error(r.toString());throw r}if(!SC.none(e)){if(SC.isPercentage(e)){z.left=(e*100)+"%"
}else{if(d&&!SC.empty(w)){u=Math.floor(e);z.left=0}else{z.left=Math.floor(e)}}z.marginLeft=0;
if(w!==undefined){if(w===SC.LAYOUT_AUTO){z.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(w)){z.width=(w*100)+"%"
}else{z.width=Math.floor(w)}}z.right=null}else{z.width=null;if(a&&SC.isPercentage(a)){z.right=(a*100)+"%"
}else{z.right=Math.floor(a||0)}}}else{if(!SC.none(a)){if(SC.isPercentage(a)){z.right=Math.floor(a*100)+"%"
}else{z.right=Math.floor(a)}z.marginLeft=0;if(SC.none(w)){if(SC.none(c)){z.left=0
}z.width=null}else{z.left=null;if(w===SC.LAYOUT_AUTO){z.width=SC.LAYOUT_AUTO}else{if(w&&SC.isPercentage(w)){z.width=(w*100)+"%"
}else{z.width=Math.floor(w||0)}}}}else{if(!SC.none(n)){z.left="50%";if(w&&SC.isPercentage(w)){z.width=(w*100)+"%"
}else{z.width=Math.floor(w||0)}if(w&&SC.isPercentage(w)&&(SC.isPercentage(n)||SC.isPercentage(n*-1))){z.marginLeft=Math.floor((n-w/2)*100)+"%"
}else{if(w&&w>=1&&!SC.isPercentage(n)){z.marginLeft=Math.floor(n-z.width/2)}else{console.warn("You have to set width and centerX usign both percentages or pixels");
z.marginLeft="50%"}}z.right=null}else{if(!SC.none(w)){z.left=0;z.right=null;if(w===SC.LAYOUT_AUTO){z.width=SC.LAYOUT_AUTO
}else{if(SC.isPercentage(w)){z.width=(w*100)+"%"}else{z.width=Math.floor(w)}}z.marginLeft=0
}else{z.left=0;z.right=0;z.width=null;z.marginLeft=0}}}}z.minWidth=(v.minWidth===undefined)?null:v.minWidth;
z.maxWidth=(v.maxWidth===undefined)?null:v.maxWidth;if(!SC.none(y)){if(SC.isPercentage(y)){z.top=(y*100)+"%"
}else{if(d&&!SC.empty(f)){b=Math.floor(y);z.top=0}else{z.top=Math.floor(y)}}if(f!==undefined){if(f===SC.LAYOUT_AUTO){z.height=SC.LAYOUT_AUTO
}else{if(SC.isPercentage(f)){z.height=(f*100)+"%"}else{z.height=Math.floor(f)}}z.bottom=null
}else{z.height=null;if(g&&SC.isPercentage(g)){z.bottom=(g*100)+"%"}else{z.bottom=Math.floor(g||0)
}}z.marginTop=0}else{if(!SC.none(g)){z.marginTop=0;if(SC.isPercentage(g)){z.bottom=(g*100)+"%"
}else{z.bottom=Math.floor(g)}if(SC.none(f)){if(SC.none(h)){z.top=0}z.height=null}else{z.top=null;
if(f===SC.LAYOUT_AUTO){z.height=SC.LAYOUT_AUTO}else{if(f&&SC.isPercentage(f)){z.height=(f*100)+"%"
}else{z.height=Math.floor(f||0)}}}}else{if(!SC.none(m)){z.top="50%";z.bottom=null;
if(f&&SC.isPercentage(f)){z.height=(f*100)+"%"}else{z.height=Math.floor(f||0)}if(f&&SC.isPercentage(f)&&(SC.isPercentage(m)||SC.isPercentage(m*-1))){z.marginTop=Math.floor((m-f/2)*100)+"%"
}else{if(f&&f>=1&&!SC.isPercentage(m)){z.marginTop=Math.floor(m-z.height/2)}else{console.warn("You have to set height and centerY to use both percentages or pixels");
z.marginTop="50%"}}}else{if(!SC.none(f)){z.top=0;z.bottom=null;if(f===SC.LAYOUT_AUTO){z.height=SC.LAYOUT_AUTO
}else{if(f&&SC.isPercentage(f)){z.height=(f*100)+"%"}else{z.height=Math.floor(f||0)
}}z.marginTop=0}else{z.top=0;z.bottom=0;z.height=null;z.marginTop=0}}}}z.minHeight=(v.minHeight===undefined)?null:v.minHeight;
z.maxHeight=(v.maxHeight===undefined)?null:v.maxHeight;z.zIndex=SC.none(v.zIndex)?null:v.zIndex.toString();
z.backgroundPosition=SC.none(v.backgroundPosition)?null:v.backgroundPosition.toString();
while(--i>=0){k=p[i];if(z[k]===0){z[k]=null}}if(d){var l="translateX("+u+"px) translateY("+b+"px)";
if(SC.platform.supportsCSS3DTransforms){l+=" translateZ(0px)"}z[SC.platform.domCSSPrefix+"Transform"]=l
}for(A in z){q=z[A];if(typeof q===SC.T_NUMBER){z[A]=(q+"px")}}return z}.property().cacheable(),layoutView:function(){return this.get("parentView")
}.property("parentView").cacheable(),layoutDidChange:function(){var c=this._previousLayout,e=this.get("layout"),a=YES,h,f,d,g;
if(c&&c!==e){h=c.width;if(h!==undefined){d=e.width;if(h===d){f=c.height;if(c!==undefined){g=e.height;
if(f===g){a=NO}}}}}this.beginPropertyChanges();this.notifyPropertyChange("layoutStyle");
if(a){this.viewDidResize()}else{this._viewFrameDidChange()}this.endPropertyChanges();
var b=this.get("layoutView");if(b){b.set("childViewsNeedLayout",YES);b.layoutDidChangeFor(this);
if(b.get("childViewsNeedLayout")){b.invokeOnce(b.layoutChildViewsIfNeeded)}}return this
},childViewsNeedLayout:NO,layoutDidChangeFor:function(b){var a=this._needLayoutViews;
if(!a){a=this._needLayoutViews=SC.CoreSet.create()}a.add(b)},layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")
}if(a&&this.get("childViewsNeedLayout")){this.set("childViewsNeedLayout",NO);this.layoutChildViews()
}return this},layoutChildViews:function(){var c=this._needLayoutViews,a=c?c.length:0,b;
for(b=0;b<a;++b){c[b].updateLayout()}c.clear()},updateLayout:function(){var b=this.get("layer"),a;
if(b){a=this.renderContext(b);this.renderLayout(a);a.update();if(this.useStaticLayout){this.viewDidResize()
}}b=null;return this},renderLayout:function(a,b){a.addStyle(this.get("layoutStyle"))
},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(!this.get("isContextMenuEnabled")){a.stop()
}return true},touchBoundary:{left:50,right:50,top:50,bottom:50},_touchBoundaryFrame:function(){return this.get("parentView").convertFrameToView(this.get("frame"),null)
}.property("frame","parentView").cacheable(),touchIsInBoundary:function(h){var c=this.get("_touchBoundaryFrame"),d=0,b=0,g=this.get("touchBoundary");
var a=h.pageX,e=h.pageY;if(a<c.x){a=c.x-a;d=g.left}else{if(a>c.x+c.width){a=a-(c.x+c.width);
d=g.right}else{a=0;d=1}}if(e<c.y){e=c.y-e;b=g.top}else{if(e>c.y+c.height){e=e-(c.y+c.height);
b=g.bottom}else{e=0;b=1}}if(a>100||e>100){return NO}return YES}});SC.View.mixin({isViewClass:YES,design:function(){if(this.isDesign){return this
}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ViewDesigner){SC.ViewDesigner.didLoadDesign(a,this,SC.A(arguments))
}return a},layout:function(a){this.prototype.layout=a;return this},convertLayoutToAnchoredLayout:function(f,m){var h={top:0,left:0,width:m.width,height:m.height},d=m.width,k=m.height,l=f.right,a=f.left,j=f.top,g=f.bottom,i=f.width,e=f.height,c=f.centerX,b=f.centerY;
if(!SC.none(a)){if(SC.isPercentage(a)){h.left=a*d}else{h.left=a}if(i!==undefined){if(i===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO
}else{if(SC.isPercentage(i)){h.width=i*d}else{h.width=i}}}else{if(l&&SC.isPercentage(l)){h.width=d-h.left-(l*d)
}else{h.width=d-h.left-(l||0)}}}else{if(!SC.none(l)){if(SC.none(i)){h.left=0;if(l&&SC.isPercentage(l)){h.width=d-(l*d)
}else{h.width=d-(l||0)}}else{if(i===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(i)){h.width=i*d
}else{h.width=i}if(SC.isPercentage(l)){h.left=d-(h.width+l)}else{h.left=d-(h.width+l)
}}}}else{if(!SC.none(c)){if(i&&SC.isPercentage(i)){h.width=(i*d)}else{h.width=(i||0)
}h.left=((d-h.width)/2);if(SC.isPercentage(c)){h.left=h.left+c*d}else{h.left=h.left+c
}}else{if(!SC.none(i)){h.left=0;if(i===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(i)){h.width=i*d
}else{h.width=i}}}else{h.left=0;h.width=0}}}}if(f.minWidth!==undefined){h.minWidth=f.minWidth
}if(f.maxWidth!==undefined){h.maxWidth=f.maxWidth}if(!SC.none(j)){if(SC.isPercentage(j)){h.top=j*k
}else{h.top=j}if(e!==undefined){if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*k
}else{h.height=e}}}else{h.height=k-h.top;if(g&&SC.isPercentage(g)){h.height=h.height-(g*k)
}else{h.height=h.height-(g||0)}}}else{if(!SC.none(g)){if(SC.none(e)){h.top=0;if(g&&SC.isPercentage(g)){h.height=k-(g*k)
}else{h.height=k-(g||0)}}else{if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*k
}else{h.height=e}h.top=k-h.height;if(SC.isPercentage(g)){h.top=h.top-(g*k)}else{h.top=h.top-g
}}}}else{if(!SC.none(b)){if(e&&SC.isPercentage(e)){h.height=(e*k)}else{h.height=(e||0)
}h.top=((k-h.height)/2);if(SC.isPercentage(b)){h.top=h.top+b*k}else{h.top=h.top+b
}}else{if(!SC.none(e)){h.top=0;if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*k
}else{h.height=e}}}else{h.top=0;h.height=0}}}}if(h.top){h.top=Math.floor(h.top)}if(h.bottom){h.bottom=Math.floor(h.bottom)
}if(h.left){h.left=Math.floor(h.left)}if(h.right){h.right=Math.floor(h.right)}if(h.width!==SC.LAYOUT_AUTO){h.width=Math.floor(h.width)
}if(h.height!==SC.LAYOUT_AUTO){h.height=Math.floor(h.height)}if(f.minHeight!==undefined){h.minHeight=f.minHeight
}if(f.maxHeight!==undefined){h.maxHeight=f.maxHeight}return h},convertLayoutToCustomLayout:function(b,a,c){},classNames:function(a){a=(this.prototype.classNames||[]).concat(a);
this.prototype.classNames=a;return this},tagName:function(a){this.prototype.tagName=a;
return this},childView:function(a){var b=this.prototype.childViews||[];if(b===this.superclass.prototype.childViews){b=b.slice()
}b.push(a);this.prototype.childViews=b;return this},bind:function(b,d){var c=this.prototype,a=this.superclass.prototype;
var e=c._bindings;if(!e||e===a._bindings){e=c._bindings=(e||[]).slice()}b=b+"Binding";
c[b]=d;e.push(b);return this},prop:function(a,b){this.prototype[a]=b;return this},localization:function(b,a){if(a){b.rootElement=SC.$(a)[0]
}return b},viewFor:function(d,c){var b=SC.$A(arguments);if(SC.none(d)){b.shift()}else{b[0]={rootElement:SC.$(d)[0]}
}var a=this.create.apply(this,arguments);b=b[0]=null;return a},create:function(){var b=this,a=new b(arguments);
if(SC.ViewDesigner){SC.ViewDesigner.didCreateView(a,SC.$A(arguments))}return a},loc:function(e){var b=e.childViews;
delete e.childViews;this.applyLocalizedAttributes(e);if(SC.ViewDesigner){SC.ViewDesigner.didLoadLocalization(this,SC.$A(arguments))
}var d=this.prototype.childViews,a=d.length,c;while(--a>=0){c=d[a];e=b[a];if(e&&c&&c.loc){c.loc(e)
}}return this},applyLocalizedAttributes:function(a){SC.mixin(this.prototype,a)},views:{}});
SC.outlet=function(b,a){return function(c){return(this[c]=SC.objectForPropertyPath(b,(a!==undefined)?a:this))
}.property()};SC.View.unload=function(){var a=SC.View.views;if(a){for(var b in a){if(!a.hasOwnProperty(b)){continue
}delete a[b]}}};if(SC.browser.msie){SC.Event.add(window,"unload",SC.View,SC.View.unload)
}SC.Validatable={initMixin:function(){this._validatable_validatorDidChange()},validator:null,errorLabel:null,isValid:function(){return SC.typeOf(this.get("value"))!==SC.T_ERROR
}.property("value"),ownerForm:null,performValidate:function(c){var a=SC.VALIDATE_OK;
if(this._validator){var b=this.get("ownerForm");if(c){a=this._validator.validatePartial(b,this);
if((a==SC.VALIDATE_NO_CHANGE)&&(this._validator.validateChange(b,this)==SC.VALIDATE_OK)){a=SC.VALIDATE_OK
}}else{a=this._validator.validateChange(b,this)}}return a},performValidateSubmit:function(){return this._validator?this._validator.validateSubmit(this.get("ownerForm"),this):SC.VALIDATE_OK
},performValidateKeyDown:function(a){var b=a.getCharString();if(!b){return YES}return this._validator?this._validator.validateKeyDown(this.get("ownerForm"),this,b):YES
},validatorObject:function(){return this._validator}.property(),validateSubmit:function(){return this.performValidateSubmit()
},objectForFieldValue:function(b,a){return this._validator?this._validator.objectForFieldValue(b,this.get("ownerForm"),this):b
},fieldValueForObject:function(a){return this._validator?this._validator.fieldValueForObject(a,this.get("ownerForm"),this):a
},_validatable_displayObserver:function(){this.displayDidChange()}.observes("isValid"),renderMixin:function(a){a.setClass("invalid",!this.get("isValid"))
},_validatable_validatorDidChange:function(){var a=this.get("ownerForm");var b=SC.Validator.findFor(a,this,this.get("validator"));
if(b!=this._validator){this.propertyWillChange("validatorObject");if(this._validator){this._validator.detachFrom(a,this)
}this._validator=b;if(this._validator){this._validator.attachTo(a,this)}this.propertyDidChange("validatorObject")
}}.observes("validator","ownerForm")};sc_require("views/view");sc_require("mixins/control");
sc_require("mixins/validatable");SC.FieldView=SC.View.extend(SC.Control,SC.Validatable,{isTextArea:NO,_field_isMouseDown:NO,fieldValue:function(){var a=this.get("value");
if(SC.typeOf(a)===SC.T_ERROR){a=a.get("errorValue")}return this.fieldValueForObject(a)
}.property("value","validator").cacheable(),$input:function(){if(this.get("isTextArea")){return this.$("textarea").andSelf().filter("textarea")
}else{return this.$("input").andSelf().filter("input")}},setFieldValue:function(b){if(SC.none(b)){b=""
}var a=this.$input();if(a.val()!==b){a.val(b)}return this},getFieldValue:function(){return this.$input().val()
},_field_fieldValueDidChange:function(a){SC.run(function(){this.fieldValueDidChange(NO)
},this)},fieldValueDidChange:function(a){var c=this.getFieldValue();var b=this.objectForFieldValue(c,a);
this.setIfChanged("value",b)},_field_valueDidChange:function(){this.setFieldValue(this.get("fieldValue"))
}.observes("fieldValue"),didCreateLayer:function(){this.setFieldValue(this.get("fieldValue"));
SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)},didAppendToDocument:function(){if(this.get("isTextArea")){this.setFieldValue(this.get("fieldValue"));
SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)}},willDestroyLayer:function(){SC.Event.remove(this.$input(),"change",this,this._field_fieldValueDidChange)
},mouseDown:function(a){this._field_isMouseDown=YES;a.allowDefault();return YES},mouseExited:function(a){if(this._field_isMouseDown){this.set("isActive",NO)
}a.allowDefault();return YES},mouseEntered:function(a){this.set("isActive",this._field_isMouseDown);
a.allowDefault();return YES},mouseUp:function(a){if(this._field_isMouseDown){this.set("isActive",NO)
}this._field_isMouseDown=NO;a.allowDefault();return YES},keyDown:function(b){if(b.which===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(this.performValidateKeyDown(b)){this._isKeyDown=YES;
b.allowDefault()}else{b.stop()}return YES},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$input()[0].focus()
}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},_field_setFieldValue:function(b){this.propertyWillChange("fieldValue");
if(this.fieldValueForObject){b=this.fieldValueForObject(b)}var a=this.setFieldValue(b);
this.propertyDidChange("fieldValue");return a},_field_getFieldValue:function(){var a=this.getFieldValue();
if(this.objectForFieldValue){a=this.objectForFieldValue(a)}return a}});SC.TextSelection=SC.Object.extend(SC.Copyable,SC.Freezable,{start:-1,end:-1,length:function(){var b=this.get("start");
var a=this.get("end");if((b)===-1||(a===-1)){return -1}else{return a-b}}.property("start","end").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.freeze()},copy:function(){return SC.TextSelection.create({start:this.get("start"),end:this.get("end")})
},toString:function(){var a=this.get("length");if(a&&a>0){if(a===1){return"[%@ character selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))
}else{return"[%@ characters selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))
}}else{return"[no text selected; caret at %@]".fmt(this.get("start"))}}});SC.StaticLayout={hasStaticLayout:YES};
sc_require("views/field");sc_require("system/text_selection");sc_require("mixins/static_layout");
sc_require("mixins/editable");SC.TextFieldView=SC.FieldView.extend(SC.StaticLayout,SC.Editable,{tagName:"label",classNames:["sc-text-field-view"],isTextField:YES,applyImmediately:YES,isPassword:NO,isTextArea:NO,hint:"",isEditing:NO,hintON:YES,defaultTabbingEnabled:YES,isContextMenuEnabled:YES,leftAccessoryView:null,rightAccessoryView:null,spellCheckEnabled:YES,maxLength:5096,_isFocused:NO,init:function(){var a=this.get("hintON"),b=this.get("value");
if(!b||b&&b.length===0){this.set("hintON",YES)}else{this.set("hintON",NO)}return arguments.callee.base.apply(this,arguments)
},isEditable:function(){return this.get("isEnabled")}.property("isEnabled").cacheable(),selection:function(j,h){var d=this.$input()[0],e,a,c;
if(h===undefined){if(d){a=null;c=null;if(!d.value){a=c=0}else{if("selectionStart" in d){a=d.selectionStart
}if("selectionEnd" in d){c=d.selectionEnd}if(a===null||c===null){var i=document.selection;
if(i){var g=i.type;if(g&&(g==="None"||g==="Text")){e=i.createRange();if(!this.get("isTextArea")){var b=e.text.length;
a=Math.abs(e.moveStart("character",0-(d.value.length+1)));c=a+b}else{var f=e.duplicate();
f.moveToElementText(d);f.setEndPoint("EndToStart",e);a=f.text.length;c=a+e.text.length
}}}}}return SC.TextSelection.create({start:a,end:c})}else{return null}}else{if(!h||!h.kindOf||!h.kindOf(SC.TextSelection)){throw"When setting the selection, you must specify an SC.TextSelection instance."
}if(d){if(d.setSelectionRange){d.setSelectionRange(h.get("start"),h.get("end"))}else{e=d.createTextRange();
a=h.get("start");e.move("character",a);e.moveEnd("character",h.get("end")-a);e.select()
}}return h}}.property("fieldValue").cacheable(),displayProperties:"hint fieldValue isEditing leftAccessoryView rightAccessoryView isTextArea".w(),createChildViews:function(){arguments.callee.base.apply(this,arguments);
this.accessoryViewObserver()},acceptsFirstResponder:function(){return this.get("isEnabled")
}.property("isEnabled"),accessoryViewObserver:function(){var f,h=["leftAccessoryView","rightAccessoryView"],a=h.length,b,e,d,g;
for(b=0;b<a;b++){e=h[b];d=this["_"+e];g=this.get(e);if(!(d&&g&&(d===g))){if(d){f=d.get("classNames");
f=f.without("sc-text-field-accessory-view");d.set("classNames",f);this.removeChild(d);
d=null;this["_"+e]=null}if(g){if(g.isClass){g=g.create({layoutView:this})}f=g.get("classNames");
var c="sc-text-field-accessory-view";if(f.indexOf(c)<0){f=SC.clone(f);f.push(c);g.set("classNames",f)
}this.appendChild(g);this["_"+e]=g}}}}.observes("leftAccessoryView","rightAccessoryView"),layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")
}if(a&&this.get("childViewsNeedLayout")){var b=this.get("rightAccessoryView");if(b&&b.get){var c=b.get("layout");
if(c){c.left=null;if(!c.right){c.right=0}b.adjust({layout:c})}}}arguments.callee.base.apply(this,arguments)
},render:function(e,f){arguments.callee.base.apply(this,arguments);var a,d,c,b;a=this.get("fieldValue");
if(SC.none(a)){a=""}a=String(a);e.setClass("not-empty",a.length>0);d=this._getAccessoryViewWidths();
c=d.left;b=d.right;if(c){c+="px"}if(b){b+="px"}this._renderField(e,f,a,c,b);if(SC.browser.mozilla){this.invokeLast(this._applyFirefoxCursorFix)
}},_forceRenderFirstTime:NO,_renderFieldLikeFirstTime:function(){this.set("_forceRenderFirstTime",YES)
}.observes("isTextArea"),_renderField:function(c,i,o,g,l){var m=this.get("hint"),e,u,p,d,q,b,j,f,n=this.get("spellCheckEnabled"),s,h=this.get("maxLength"),a;
c.setClass("text-area",this.get("isTextArea"));a=(parseInt(SC.browser.safari,0)<532);
c.setClass("oldWebKitFieldPadding",a);s=n?' spellcheck="true"':' spellcheck="false"';
if(i||this._forceRenderFirstTime){this._forceRenderFirstTime=NO;e=this.get("isEnabled")?"":'disabled="disabled"';
u=this.get("layerId");c.push('<span class="border"></span>');p="";if(g||l){p='style="';
if(g){p+="left: "+g+"; "}if(l){p+="right: "+l+";"}p+='"'}c.push('<span class="padding" '+p+">");
o=this.get("escapeHTML")?SC.RenderContext.escapeHTML(o):o;if(!this.get("_supportsPlaceHolder")&&(!o||(o&&o.length===0))){o=this.get("hint");
c.setClass("sc-hint",YES)}f=(SC.browser.mozilla&&(parseFloat(SC.browser.mozilla)<1.9||SC.browser.mozilla.match(/1\.9\.0|1\.9\.1/)))?"field oldGecko":"field";
if(this.get("isTextArea")){c.push('<textarea class="',f,'" name="',u,'" ',e,' placeholder="',m,'"',s,' maxlength="',h,'">',o,"</textarea></span>")
}else{d=this.get("isPassword")?"password":"text";c.push('<input class="',f,'" type="',d,'" name="',u,'" ',e,' value="',o,'" placeholder="',m,'"',s,' maxlength="',h,'" /></span>')
}}else{var k=this.$input();if(!this.get("_supportsPlaceHolder")){var r=this.get("value");
if((!r||(r&&r.length===0))){if(this.get("hintON")&&!this.get("isFirstResponder")){c.setClass("sc-hint",YES);
k.val(m)}else{c.setClass("sc-hint",NO);k.val("")}}}else{k.attr("placeholder",m)}b=k[0];
if(b){if(!this.get("isEnabled")){b.disabled="true"}else{b.disabled=null}j=b.parentNode.style;
if(g){if(j.left!==g){j.left=g}}else{j.left=null}if(l){if(j.right!==l){j.right=l}}else{j.right=null
}}}},_getAccessoryViewWidths:function(){var c={},k=["left","right"],d=k.length,f,g,l,j,a,h,e,b;
for(f=0;f<d;f++){g=k[f];l=this.get(g+"AccessoryView");if(l){if(l.isClass){l=l.create({layoutView:this})
}if(l.get){b=l.get("frame");if(b){a=b.width;if(a){h=l.get("layout");if(h){e=h[g];
a+=e}c[g]=a}}}}}return c},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);
if(!this.get("_supportsPlaceHolder")&&this.get("hintON")){var b=this.$input().val();
if(!b||(b&&b.length===0)){this.$input().val(this.get("hint"))}}if(this.get("isTextArea")){this.invokeLast(this._addTextAreaEvents)
}else{this._addTextAreaEvents();if(SC.browser.mozilla){var a=this.$input();SC.Event.add(a,"keypress",this,this._firefox_dispatch_keypress)
}}},_addTextAreaEvents:function(){var a=this.$input();SC.Event.add(a,"focus",this,this._textField_fieldDidFocus);
SC.Event.add(a,"blur",this,this._textField_fieldDidBlur);SC.Event.add(a,"select",this,this._textField_selectionDidChange);
if(SC.browser.mozilla){this._cacheInputElement=this.$input();this._cachePaddingElement=this.$(".padding")
}},willDestroyLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$input();
SC.Event.remove(a,"focus",this,this._textField_fieldDidFocus);SC.Event.remove(a,"blur",this,this._textField_fieldDidBlur);
SC.Event.remove(a,"select",this,this._textField_selectionDidChange);SC.Event.remove(a,"focus",this,this._firefox_dispatch_keypress)
},_textField_fieldDidFocus:function(a){SC.run(function(){this.set("focused",YES);
this.fieldDidFocus(a);var b=this.get("value");if(!this.get("_supportsPlaceHolder")&&((!b)||(b&&b.length===0))){this.set("hintON",NO)
}},this)},_textField_fieldDidBlur:function(a){SC.run(function(){this.set("focused",NO);
this.fieldDidBlur(this._origEvent);var b=this.get("value");if(!this.get("_supportsPlaceHolder")&&((!b)||(b&&b.length===0))){this.set("hintON",YES)
}},this)},fieldDidFocus:function(a){this.beginEditing(a);if(this._didHideInterceptForPane){this._didHideInterceptForPane.showTouchIntercept();
this._didHideInterceptForPane=null}var b=this.get("pane");if(b&&b.get("usingTouchIntercept")){b.hideTouchIntercept();
this._didHideInterceptForPane=this.get("pane")}},fieldDidBlur:function(a){this.commitEditing(a);
var b=this._didHideInterceptForPane;if(b){b.showTouchIntercept();b=null}},_field_fieldValueDidChange:function(a){if(this.get("focused")){SC.run(function(){this.fieldValueDidChange(NO)
},this)}},_topOffsetForFirefoxCursorFix:3,_applyFirefoxCursorFix:function(){if(parseFloat(SC.browser.mozilla)<1.9&&!this.get("useStaticLayout")){var h,d,c,i,b,g,e,f;
e=this._cacheInputElement;f=this._cachePaddingElement;if(f&&f[0]){g=f[0];b=SC.$(g).offset();
if(SC.browser.compareVersion(1,9,2)<0&&e[0].tagName.toLowerCase()==="input"){h=b.top+this._topOffsetForFirefoxCursorFix
}else{h=b.top}d=b.left;c=g.offsetWidth;i=g.offsetHeight;var a="position: fixed; top: %@px; left: %@px; width: %@px; height: %@px;".fmt(h,d,c,i);
if(!this._prevStyle||this._prevStyle!=a){e.attr("style",a)}this._prevStyle=a}}return this
},_firefox_dispatch_keypress:function(a){var d=this.get("selection"),e=this.get("value"),c=e?e.length:0,b;
if(!d||((d.get("length")===0&&(d.get("start")===0)||d.get("end")===c))){b=SC.RootResponder.responder;
b.keypress.call(b,a);a.stopPropagation()}},_textField_selectionDidChange:function(){this.notifyPropertyChange("selection")
},willBecomeKeyResponderFrom:function(a){if(this.get("isVisibleInWindow")){var b=this.$input()[0];
try{if(b){b.focus()}}catch(c){}if(!this._txtFieldMouseDown){this.invokeLast(this._selectRootElement)
}}},willLoseKeyResponderTo:function(a){},_selectRootElement:function(){var a=this.$input()[0];
if(a){a.select()}else{this._textField_selectionDidChange()}},didLoseKeyResponderTo:function(a){var b=this.$input()[0];
if(b){b.blur()}this.invokeLater("scrollToOriginIfNeeded",100)},scrollToOriginIfNeeded:function(){var b=this.get("pane");
if(!b){return}var a=b.get("firstResponder");if(!a||!a.get("isTextField")){document.body.scrollTop=document.body.scrollLeft=0
}},parentViewDidResize:function(){if(SC.browser.mozilla){this.invokeLast(this._applyFirefoxCursorFix)
}arguments.callee.base.apply(this,arguments)},keyDown:function(b){var e=b.which,c=false;
if((e===13&&!b.isIMEInput)&&!this.get("isTextArea")){return NO}if(e===27){return NO
}if(e===9&&this.get("defaultTabbingEnabled")){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(!SC.browser.safari&&this.get("isTextArea")){var d=this.get("value");
if(d&&b.which>47&&(d.length>=this.get("maxLength"))){c=true}}if((this.performValidateKeyDown(b)||SC.platform.touch)&&!c){this._isKeyDown=YES;
b.allowDefault()}else{b.stop()}if(this.get("applyImmediately")){this.invokeLater(this.fieldValueDidChange,1)
}return YES},keyUp:function(a){if(SC.browser.mozilla&&a.keyCode===13){this.fieldValueDidChange()
}this.notifyPropertyChange("selection");this._isKeyDown=NO;a.allowDefault();return YES
},mouseDown:function(a){var b=this.get("fieldValue");this._txtFieldMouseDown=YES;
if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)
}},mouseUp:function(a){this._txtFieldMouseDown=NO;this.notifyPropertyChange("selection");
if(!this.get("isEnabled")){a.stop();return YES}return arguments.callee.base.apply(this,arguments)
},mouseWheel:function(a){a.allowDefault();return YES},selectStart:function(a){return YES
},_supportsPlaceHolder:function(){return SC.browser.safari&&!this.get("isTextArea")
}.property("isTextArea").cacheable(),valueObserver:function(){var a=this.get("value");
if(a&&a.length>0){this.set("hintON",NO)}else{this.set("hintON",YES)}}.observes("value")});
sc_require("views/text_field");SC.InlineTextFieldView=SC.TextFieldView.extend(SC.DelegateSupport,{_topOffsetForFirefoxCursorFix:0,beginEditing:function(b){if(!b){throw"InlineTextField.beginEditing() requires options"
}if(this.get("isEditing")){return NO}var d={},f,c,e,a;a=this._delegate=b.delegate;
this.set("delegate",a);if(!this.invokeDelegateMethod(a,"inlineEditorShouldBeginEditing",this)){SC.Logger.warn("InlineTextField.beginEditing() cannot begin without inlineEditorShouldBeginEditing() on the delegate.");
return NO}this.beginPropertyChanges();this.set("isEditing",YES);this.set("escapeHTML",b.escapeHTML);
this._optframe=b.frame;this._optIsCollection=b.isCollection;this._exampleElement=b.exampleElement;
if(!this._optframe||!a){throw"At least frame and delegate options are required for inline editor"
}this._originalValue=b.value;if(SC.none(this._originalValue)){this._originalValue=""
}this._multiline=(b.multiline!==undefined)?b.multiline:NO;if(this._multiline){this.set("isTextArea",YES)
}else{this.set("isTextArea",NO)}this._commitOnBlur=(b.commitOnBlur!==undefined)?b.commitOnBlur:YES;
this.set("validator",b.validator);this.set("value",this._originalValue);f=a.get("pane");
d.height=this._optframe.height;d.width=this._optframe.width;c=this._delegate.get("layout");
e=f.$()[0];if(this._optIsCollection&&c.left){d.left=this._optframe.x-c.left-e.offsetLeft-1;
if(SC.browser.msie==7){d.left--}}else{d.left=this._optframe.x-e.offsetLeft-1;if(SC.browser.msie==7){d.left--
}}if(this._optIsCollection&&c.top){d.top=this._optframe.y-c.top-e.offsetTop;if(SC.browser.msie==7){d.top=d.top-2
}}else{d.top=this._optframe.y-e.offsetTop;if(SC.browser.msie==7){d.top=d.top-2}}this.set("layout",d);
this.set("parentNode",f);f.appendChild(this);this._className=this.getDelegateProperty(a,"inlineEditorClassName");
if(this._className&&!this.hasClassName(this._className)){this.setClassName(this._className,true)
}this.invokeDelegateMethod(a,"inlineEditorWillBeginEditing",this);this._previousFirstResponder=f?f.get("firstResponder"):null;
this.becomeFirstResponder();this.endPropertyChanges();this.invokeLast(function(){this.invokeDelegateMethod(a,"inlineEditorDidBeginEditing",this)
});return this},commitEditing:function(a){if(!SC.$ok(this.validateSubmit())){return NO
}return this._endEditing(this.get("value"),a)},discardEditing:function(){return this._endEditing(this._originalValue,null,YES)
},blurEditor:function(a){if(!this.get("isEditing")){return YES}return this._commitOnBlur?this.commitEditing(a):this.discardEditing(a)
},_endEditing:function(d,b,c){if(!this.get("isEditing")){return YES}var a=this._delegate;
if(!this.invokeDelegateMethod(a,"inlineEditorShouldEndEditing",this,d,b,c)){SC.Logger.warn("InlineTextField._endEditing() cannot end without inlineEditorShouldEndEditing() on the delegate.");
return NO}this.invokeDelegateMethod(a,"inlineEditorDidEndEditing",this,d,b,c);if(this._className){this.setClassName(this._className,false)
}this._originalValue=this._delegate=this._exampleElement=this._optframe=this._className=null;
this.set("isEditing",NO);if(this.get("isFirstResponder")){var e=this.get("pane");
if(e&&this._previousFirstResponder){e.makeFirstResponder(this._previousFirstResponder)
}else{this.resignFirstResponder()}}this._previousFirstResponder=null;if(this.get("parentNode")){this.removeFromParent()
}return YES},isEditing:NO,mouseDown:function(a){arguments.callee.base.call(this,a);
return this.get("isEditing")},touchStart:function(a){this.mouseDown(a)},keyDown:function(a){var b=this.interpretKeyEvents(a);
this.fieldValueDidChange(true);return !b?NO:b},insertText:null,_scitf_blurInput:function(){var a=this.$input()[0];
if(a){a.blur()}a=null},willRemoveFromParent:function(){return this._scitf_blurInput()
},willLoseFirstResponder:function(b,a){if(b!==this){return}this._previousFirstResponder=null;
this._origEvent=a;this._scitf_blurInput();return this.blurEditor(a)},cancel:function(){this.discardEditing();
return YES},fieldValueDidChange:function(a){arguments.callee.base.call(this,a)},insertNewline:function(a){if(this._multiline){a.allowDefault();
return arguments.callee.base.call(this,a)}else{if(this.get("value")!=this.$input().val()){this.set("value",this.$input().val())
}this.commitEditing();return YES}},insertTab:function(a){var c=this._delegate;this.resignFirstResponder();
this.commitEditing();if(c){var b=c.get("nextValidKeyView");if(b&&b.beginEditing){b.beginEditing()
}}return YES},insertBacktab:function(a){var b=this._delegate;this.resignFirstResponder();
this.commitEditing();if(b){var c=b.get("previousValidKeyView");if(c&&c.beginEditing){c.beginEditing()
}}return YES},deleteForward:function(a){a.allowDefault();return YES},deleteBackward:function(a){a.allowDefault();
return YES}});SC.InlineTextFieldView.mixin({beginEditing:function(b){this._exampleElement=b.exampleElement;
var a=b.exampleInlineTextFieldView?b.exampleInlineTextFieldView:this,f=b.delegate.get("layout"),e=this.updateViewStyle(),g=this.updateViewPaddingStyle();
var h=".inline-editor input{"+e+"} ";h=h+".inline-editor textarea{"+e+"} .inline-editor .padding{"+g+"}";
var d=document.getElementsByTagName("head")[0],c=document.createElement("style");
c.type="text/css";c.media="screen";if(c.styleSheet){c.styleSheet.cssText=h}else{c.appendChild(document.createTextNode(h))
}d.appendChild(c);this.editor=a.create({classNames:"inline-editor",layout:f});return this.editor.beginEditing(b)
},commitEditing:function(){return this.editor?this.editor.commitEditing():YES},discardEditing:function(){return this.editor?this.editor.discardEditing():YES
},updateViewStyle:function(){var b=this._exampleElement[0],c="",a=SC.getStyle(b,"font-size");
if(a&&a.length>0){c=c+"font-size: "+a+" !important; "}a=SC.getStyle(b,"font-family");
if(a&&a.length>0){c=c+"font-family: "+a+" !important; "}a=SC.getStyle(b,"font-weight");
if(a&&a.length>0){c=c+"font-weight: "+a+" !important; "}a=SC.getStyle(b,"z-index");
if(a&&a.length>0){c=c+"z-index: "+a+" !important; "}a=SC.getStyle(b,"line-height");
if(a&&a.length>0){c=c+"line-height: "+a+" !important; "}a=SC.getStyle(b,"text-align");
if(a&&a.length>0){c=c+"text-align: "+a+" !important; "}a=SC.getStyle(b,"top-margin");
if(a&&a.length>0){c=c+"top-margin: "+a+" !important; "}a=SC.getStyle(b,"bottom-margin");
if(a&&a.length>0){c=c+"bottom-margin: "+a+" !important; "}a=SC.getStyle(b,"left-margin");
if(a&&a.length>0){c=c+"left-margin: "+a+" !important; "}a=SC.getStyle(b,"right-margin");
if(a&&a.length>0){c=c+"right-margin: "+a+" !important; "}return c},updateViewPaddingStyle:function(){var b=this._exampleElement[0];
var c="";var a=SC.getStyle(b,"padding-top");if(a&&a.length>0){c=c+"top: "+a+" !important; "
}a=SC.getStyle(b,"padding-bottom");if(a&&a.length>0){c=c+"bottom: "+a+" !important; "
}a=SC.getStyle(b,"padding-left");if(a&&a.length>0){c=c+"left: "+a+" !important; "
}a=SC.getStyle(b,"padding-right");if(a&&a.length>0){c=c+"right: "+a+" !important; "
}return c},editor:null});sc_require("system/responder");SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")
}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");
if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b,this)}else{if(!b&&(a!==this)){b=this
}}return b},responderNameFor:function(a){if(!a){return"(No Responder)"}else{if(a._scrc_name){return a._scrc_name
}}var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);
return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,e,d){var b,c;
for(b in a){if(b==="nextResponder"){continue}c=a[b];if(c&&c.isResponder){if(c._scrc_name){continue
}d.push(b);c._scrc_name=d.join(".");if(e>0){this._findResponderNamesFor(c,e-1,d)}d.pop()
}}},makeFirstResponder:function(b,a){var f=this.get("firstResponder"),d=this.get("nextResponder"),e=this.get("trace"),c;
if(this._locked){if(e){console.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))
}this._pendingResponder=b;return}if(e){console.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))
}if(b){b.set("becomingFirstResponder",YES)}this._locked=YES;this._pendingResponder=null;
c=b?b:null;while(c){if(c.get("hasFirstResponder")){break}c=(c===d)?null:this.nextResponderFor(c)
}if(!c){c=d}this._notifyWillLoseFirstResponder(f,f,c,a);if(f){f.set("isFirstResponder",NO)
}this.beginPropertyChanges();this.set("firstResponder",b);if(b){b.set("isFirstResponder",YES)
}this._notifyDidBecomeFirstResponder(b,b,c);this.endPropertyChanges();this._locked=NO;
if(this._pendingResponder){this.makeFirstResponder(this._pendingResponder);this._pendingResponder=null
}if(b){b.set("becomingFirstResponder",NO)}return this},_notifyWillLoseFirstResponder:function(c,e,b,a){if(e===b){return
}e.willLoseFirstResponder(c,a);e.set("hasFirstResponder",NO);var d=this.nextResponderFor(e);
if(d){this._notifyWillLoseFirstResponder(c,d,b)}},_notifyDidBecomeFirstResponder:function(b,d,a){if(d===a){return
}var c=this.nextResponderFor(d);if(c){this._notifyDidBecomeFirstResponder(b,c,a)}d.set("hasFirstResponder",YES);
d.didBecomeFirstResponder(b)},resetFirstResponder:function(){var a=this.get("firstResponder");
if(!a){return}a.willLoseFirstResponder();a.didBecomeFirstResponder()},sendAction:function(g,d,c){var a=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),h=NO,b;
this._locked=YES;if(f){console.log("%@: begin action '%@' (%@, %@)".fmt(this,g,d,c))
}if(!h&&!a&&this.tryToPerform){h=this.tryToPerform(g,d,c)}while(!h&&a){if(a.tryToPerform){h=a.tryToPerform(g,d,c)
}if(!h){a=(a===e)?null:this.nextResponderFor(a)}}if(f){if(!h){console.log("%@:  action '%@' NOT HANDLED".fmt(this,g))
}else{console.log("%@: action '%@' handled by %@".fmt(this,g,this.responderNameFor(a)))
}}this._locked=NO;if(b=this._pendingResponder){this._pendingResponder=null;this.makeFirstResponder(b)
}return a}};sc_require("views/view");sc_require("mixins/responder_context");SC.Pane=SC.View.extend(SC.ResponderContext,{isPane:YES,page:null,rootResponder:null,currentWindowSize:null,computeParentDimensions:function(g){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}var d=this.get("currentWindowSize"),h={x:0,y:0,width:1000,height:1000},f=this.get("layout");
if(d){h.width=d.width;h.height=d.height}else{if(SC.RootResponder.responder){var b=SC.RootResponder.responder.get("currentWindowSize");
if(b){h.width=b.width;h.height=b.height}}else{var e,a,c;if(!this._bod||!this._docElement){a=document.body;
c=document.documentElement;this._body=a;this._docElement=c}else{a=this._body;c=this._docElement
}if(window.innerHeight){h.width=window.innerWidth;h.height=window.innerHeight}else{if(c&&c.clientHeight){h.width=c.clientWidth;
h.height=c.clientHeight}else{if(a){h.width=a.clientWidth;h.height=a.clientHeight}}}this.windowSizeDidChange(null,h)
}}if(f.minHeight||f.minWidth){if(f.minHeight){h.height=Math.max(h.height,f.minHeight)
}if(f.minWidth){h.width=Math.max(h.width,f.minWidth)}}return h},frame:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}return this.computeFrameWithParentFrame(null)}.property(),windowSizeDidChange:function(b,a){this.set("currentWindowSize",a);
this.parentViewDidResize();return this},paneLayoutDidChange:function(){this.invokeOnce(this.updateLayout)
}.observes("layout"),sendEvent:function(c,a,d){var b;if(!d){d=this.get("firstResponder")
}while(d&&!d.tryToPerform(c,a)){d=(d===this)?null:d.get("nextResponder")}if(!d&&(d=this.get("defaultResponder"))){if(typeof d===SC.T_STRING){d=SC.objectForPropertyPath(d)
}if(!d){d=null}else{d=d.tryToPerform(c,a)?d:null}}else{if(!d&&!(d=this.get("defaultResponder"))){d=this.tryToPerform(c,a)?this:null
}}return a.mouseHandler||d},performKeyEquivalent:function(c,a){var b=arguments.callee.base.apply(this,arguments);
if(!b){var d=this.get("defaultResponder");if(d){if(d.performKeyEquivalent){b=d.performKeyEquivalent(c,a)
}if(!b&&d.tryToPerform){b=d.tryToPerform(c,a)}}}return b},nextResponder:function(){return null
}.property().cacheable(),firstResponder:null,acceptsKeyPane:YES,isKeyPane:NO,becomeKeyPane:function(){if(this.get("isKeyPane")){return this
}if(this.rootResponder){this.rootResponder.makeKeyPane(this)}return this},resignKeyPane:function(){if(!this.get("isKeyPane")){return this
}if(this.rootResponder){this.rootResponder.makeKeyPane(null)}return this},makeFirstResponder:function(b,a){var d=this.get("firstResponder"),c=this.get("isKeyPane");
if(d===b){return this}if(SC.platform.touch&&b&&b.kindOf(SC.TextFieldView)&&!b.get("focused")){return this
}if(d){d.willLoseFirstResponder(d,a)}if(c){if(d){d.willLoseKeyResponderTo(b)}if(b){b.willBecomeKeyResponderFrom(d)
}}if(d){d.beginPropertyChanges().set("isFirstResponder",NO).set("isKeyResponder",NO).endPropertyChanges()
}this.set("firstResponder",b);if(b){b.beginPropertyChanges().set("isFirstResponder",YES).set("isKeyResponder",c).endPropertyChanges()
}if(c){if(b){b.didBecomeKeyResponderFrom(d)}if(d){d.didLoseKeyResponderTo(b)}}if(b){b.didBecomeFirstResponder(b)
}return this},keyDown:function(a){var b;if(a.which===9&&!this.get("firstResponder")){if(a.shiftKey){b=this.get("previousValidKeyView")
}else{b=this.get("nextValidKeyView")}if(b){this.makeFirstResponder(b);return YES}}return NO
},_forwardKeyChange:function(d,b,g,f){var c,a,e;if(d&&(a=this.get("firstResponder"))){e=(g)?g.get("firstResponder"):null;
c=this.get("firstResponder");if(c){c[b](e)}if((f!==undefined)&&a){a.set("isKeyResponder",f)
}}},willLoseKeyPaneTo:function(a){this._forwardKeyChange(this.get("isKeyPane"),"willLoseKeyResponderTo",a,NO);
return this},willBecomeKeyPaneFrom:function(a){this._forwardKeyChange(!this.get("isKeyPane"),"willBecomeKeyResponderFrom",a,YES);
return this},didLoseKeyPaneTo:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",NO);
this._forwardKeyChange(a,"didLoseKeyResponderTo",b);return this},didBecomeKeyPaneFrom:function(b){var a=this.get("isKeyPane");
this.set("isKeyPane",YES);this._forwardKeyChange(!a,"didBecomeKeyResponderFrom",b,YES);
return this},isMainPane:NO,focusFrom:function(a){},blurTo:function(a){},blurMainTo:function(a){this.set("isMainPane",NO)
},focusMainFrom:function(a){this.set("isMainPane",YES)},append:function(){return this.appendTo(document.body)
},remove:function(){if(!this.get("isVisibleInWindow")){return this}if(!this.get("isPaneAttached")){return this
}var b=this.get("layer");if(b&&b.parentNode){b.parentNode.removeChild(b)}b=null;this._removeIntercept();
this.resignKeyPane();var a=this.rootResponder;if(this.get("isMainPane")){a.makeMainPane(null)
}a.panes.remove(this);this.rootResponder=null;this.set("isPaneAttached",NO);this.parentViewDidChange();
return this},appendTo:function(b){var a=this.get("layer");if(!a){a=this.createLayer().get("layer")
}if(this.get("isPaneAttached")&&(a.parentNode===b)){return this}b.insertBefore(a,null);
b=a=null;return this.paneDidAttach()},prependTo:function(b){if(this.get("isPaneAttached")){return this
}var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}if(this.get("isPaneAttached")&&(a.parentNode===b)){return this
}b.insertBefore(a,b.firstChild);b=a=null;return this.paneDidAttach()},before:function(c){if(this.get("isPaneAttached")){return this
}var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}var b=c.parentNode;
if(this.get("isPaneAttached")&&(a.parentNode===b)){return this}b.insertBefore(a,c);
b=c=a=null;return this.paneDidAttach()},after:function(c){var a=this.get("layer");
if(!a){a=this.createLayer().get("layer")}var b=c.parentNode;if(this.get("isPaneAttached")&&(a.parentNode===b)){return this
}b.insertBefore(a,c.nextSibling);b=c=a=null;return this.paneDidAttach()},removeFromParent:function(){},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);
a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);
this.parentViewDidChange();this._notifyDidAppendToDocument();this._addIntercept();
return this},isPaneAttached:NO,hasTouchIntercept:NO,zIndex:0,touchZ:99,_addIntercept:function(){if(this.get("hasTouchIntercept")&&SC.platform.touch){this.set("usingTouchIntercept",YES);
var b=document.createElement("div");var a=b.style;a.position="absolute";a.left="0px";
a.top="0px";a.right="0px";a.bottom="0px";a.webkitTransform="translateZ(0px)";a.zIndex=this.get("zIndex")+this.get("touchZ");
b.className="touch-intercept";b.id="touch-intercept-"+SC.guidFor(this);this._touchIntercept=b;
document.body.appendChild(b)}},_removeIntercept:function(){if(this._touchIntercept){document.body.removeChild(this._touchIntercept);
this._touchIntercept=null}},hideTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="none"
}},showTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="block"
}},recomputeIsVisibleInWindow:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}var c=this.get("isVisibleInWindow"),e=this.get("isVisible")&&this.get("isPaneAttached");
if(c!==e){this.set("isVisibleInWindow",e);var d=this.get("childViews"),b=d.length,a;
for(a=0;a<b;a++){d[a].recomputeIsVisibleInWindow(e)}if(e){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)
}}else{if(this.get("isKeyPane")){this.resignKeyPane()}}}this.updateLayerIfNeeded(YES);
return this},updateLayerLocation:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)
}return this},init:function(){var a=!!this.get("layer");arguments.callee.base.apply(this,arguments);
if(a){this.paneDidAttach()}},classNames:"sc-pane".w()});sc_require("mixins/responder_context");
SC.Application=SC.Responder.extend(SC.ResponderContext,{});sc_require("core");SC.Benchmark={verbose:NO,enabled:YES,stats:{},globalStartTime:null,start:function(b,a,e,d){if(!this.enabled){return
}var f=(e||Date.now()),c;if(a){c=this._subStatFor(b,a)}else{c=this._statFor(b)}if(d&&c._starts.length>0){c._starts.push("ignore")
}else{c._starts.push(f)}c._times.push({start:f,_subStats:{}});return b},end:function(c,b,f){var e;
if(!this.enabled){return}if(b){e=this._subStatFor(c,b)}else{e=this._statFor(c)}var g=e._starts.pop();
if(!g){console.log('SC.Benchmark "%@" ended without a matching start.  No information was saved.'.fmt(c));
return}if(g=="ignore"){return}var a=(f||Date.now());var d=a-g;e._times[e._times.length-1].end=a;
e._times[e._times.length-1].dur=d;e.amt+=d;e.runs++;if(this.verbose){this.log(c)}},setGlobalStartTime:function(a){this.globalStartTime=a
},bench:function(e,d,a){if(!d){d="bench%@".fmt(this._benchCount++)}if(!a){a=1}var b;
while(--a>=0){var c=SC.Benchmark.start(d);b=e();SC.Benchmark.end(c)}return b},install:function(a,d,b){a["b__"+d]=a[d];
var c=a["b__"+d];a[d]=function(){var f="%@(%@)".fmt(d,$A(arguments).join(", "));SC.Benchmark.start(f,b);
var e=c.apply(this,arguments);SC.Benchmark.end(f);return e}},restore:function(a,b){a[b]=a["b__"+b]
},report:function(c){if(c){return this._genReport(c)}var b=[];for(var a in this.stats){if(!this.stats.hasOwnProperty(a)){continue
}b.push(this._genReport(a))}return b.join("\n")},timelineReport:function(a){a=(a)?"SproutCore Application":a;
var b=[a,"User-Agent: %@".fmt(navigator.userAgent),"Report Generated: %@ (%@)".fmt(new Date().toString(),Date.now()),""];
var d=this._compileChartData(true);for(var c=0;c<d.length;c++){if(d[c][4]){b.push(this._timelineGenSubReport(d[c]))
}else{b.push(this._timelineGenReport(d[c]))}}return b.join("\n")},timelineChart:function(s){var o=0;
this.hideChart();var m=this._compileChartData(false);var j=m.length;if(j===0){return
}var b=this.globalStartTime?this.globalStartTime:m[0][1];var d=m[j-1][2]-b;var n=50+j*30;
var p=Math.ceil(d/200)+1;var r=p*50;var c=document.createElement("div");c.className="sc-benchmark-graph";
document.body.appendChild(c);var u=document.createElement("div");u.innerHTML=((s)?s:"SproutCore Application")+(" - Total Captured Time: "+d+" ms - Points Captured: "+j)+' [<a href="javascript:SC.Benchmark.hideChart();">Hide Chart</a>]';
u.className="sc-benchmark-title";c.appendChild(u);var f=document.createElement("div");
f.className="sc-benchmark-top";f.style.width=r+"px";c.appendChild(f);for(o=0;o<p;
o++){var q=document.createElement("div");q.className="sc-benchmark-tick";q.style.left=(o*50)+"px";
q.style.height=n+"px";var e=document.createElement("div");e.className="sc-benchmark-tick-label";
e.style.left=(o*50)+"px";e.innerHTML=o*200+" ms";c.appendChild(q);c.appendChild(e)
}for(o=0;o<j;o++){var k=document.createElement("div");k.style.top=(75+(o*30))+"px";
k.style.width=r+"px";k.className=(o%2===0)?"sc-benchmark-row even":"sc-benchmark-row";
c.appendChild(k);var l=document.createElement("div");var h=m[o][1];var g=m[o][2];
var a=m[o][3];l.innerHTML="&nbsp;"+(m[o][0]+" <span class='sc-benchmark-emphasis'>"+a+"ms</span>");
l.className="sc-benchmark-bar";l.style.cssText="left:"+(((h-b)/4))+"px; width: "+((a/4))+"px; top: "+(53+(o*30))+"px;";
l.title="start: "+(h-b)+" ms, end: "+(g-b)+" ms, duration: "+a+" ms";c.appendChild(l)
}this._graph=c},hideChart:function(){if(this._graph){try{document.body.removeChild(this._graph)
}catch(a){}}},log:function(d){var c=this.report(d).split("\n"),b=c.length,a;for(a=0;
a<b;a++){console.log(c[a])}},startProfile:function(a){if(!this.enabled){return}if(console&&console.profile){console.profile(a)
}},endProfile:function(a){if(!this.enabled){return}if(console&&console.profileEnd){console.profileEnd(a)
}},_compileChartData:function(g){var l=[],a;for(var m in this.stats){var e=this.stats[m];
for(var f=0;f<e._times.length;f++){var n=e._times[f];a=(e._times.length>1)?(f+1)+" - "+m:m;
l.push([a,n.start,n.end,n.dur,false]);if(g){var b=n._subStats;for(var c in b){var h=b[c];
for(var d=0;d<h._times.length;d++){var o=h._times[d];a=(h._times.length>1)?(d+1)+" - "+c:c;
l.push([a,o.start,o.end,o.dur,true])}}}}}l.sort(function(j,i){if(j[1]<i[1]){return -1
}else{if(j[1]==i[1]){if(j[3]&&!i[3]){return -1}if(!j[3]&&i[3]){return 1}return 0}}return 1
});return l},_genReport:function(a){var b=this._statFor(a);var c=(b.runs>0)?(Math.floor(b.amt*1000/b.runs)/1000):0;
return"BENCH %@ msec: %@ (%@x)".fmt(c,(b.name||a),b.runs)},_timelineGenReport:function(a){if(this.globalStartTime){return"BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])
}else{return"BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_timelineGenSubReport:function(a){if(this.globalStartTime){return"   CHECKPOINT BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])
}else{return"   CHECKPOINT BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_subStatFor:function(d,c){var e=this.stats[c]._times.length;
if(e===0){return}var a=this.stats[c]._times[this.stats[c]._times.length-1]._subStats;
var b=a[d];if(!b){a[d]={runs:0,amt:0,name:d,_starts:[],_times:[]};b=a[d]}return b
},_statFor:function(b){var a=this.stats[b];if(!a){a=this.stats[b]={runs:0,amt:0,name:b,_starts:[],_times:[]};
a=this.stats[b]}return a},reset:function(){this.stats={}},_bench:function(b,a){SC.Benchmark.bench(b,a,1)
},_benchCount:1};SC.Benchmark=SC.Benchmark;SC.mixin({logBundleLoading:NO,bundleIsLoaded:function(a){var b=SC.BUNDLE_INFO[a];
return b?!!b.loaded:NO},_scb_bundleDidLoad:function(b,h,a,j){var d=a,n=h;if(SC.typeOf(h)===SC.T_STRING){n=SC.objectForPropertyPath(h)
}if(SC.typeOf(a)===SC.T_STRING){d=SC.objectForPropertyPath(a,n)}if(!d){if(SC.LAZY_INSTANTIATION[b]){var l=SC.LAZY_INSTANTIATION[b];
if(SC.logBundleLoading){console.log("SC.loadBundle(): Bundle '%@' is marked for lazy instantiation, instantiating it now…".fmt(b))
}for(var f=0,c=l.length;f<c;f++){try{l[f]()}catch(g){console.error("SC.loadBundle(): Failted to lazily instatiate entry for  '%@'".fmt(b))
}}delete SC.LAZY_INSTANTIATION[b];if(SC.typeOf(h)===SC.T_STRING){n=SC.objectForPropertyPath(h)
}if(SC.typeOf(a)===SC.T_STRING){d=SC.objectForPropertyPath(a,n)}if(!a){throw"SC.loadBundle(): could not find callback for lazily instantiated bundle '%@'".fmt(b)
}}else{throw"SC.loadBundle(): could not find callback for '%@'".fmt(b)}}if(!j){j=[]
}j.push(b);var k=!!SC.RunLoop.currentRunLoop;if(k){SC.run(function(){d.apply(n,j)
})}else{d.apply(n,j)}},tryToLoadBundle:function(d,e,f,b){var a,c;if(SC.typeOf(e)===SC.T_STRING){c=SC.objectForPropertyPath(e)
}if(SC.typeOf(f)===SC.T_STRING){a=SC.objectForPropertyPath(f,c)}if(a||SC.LAZY_INSTANTIATION[d]){if(SC.logBundleLoading){console.log("SC.loadBundle(): Bundle '%@' found through other means, will attempt to load…".fmt(d))
}SC.BUNDLE_INFO[d]={loaded:YES};return SC.BUNDLE_INFO[d]}return NO},loadBundle:function(u,y,d){var r,v;
if(d===undefined&&SC.typeOf(y)===SC.T_FUNCTION){d=y;y=null}var n=SC.BUNDLE_INFO[u],x,w,c=SC.A(arguments).slice(3),j=SC.logBundleLoading;
if(j){console.log("SC.loadBundle(): Attempting to load '%@'".fmt(u))}if(!n){if(j){console.log("SC.loadBundle(): Attemping to load %@ without SC.BUNDLE_INFO entry… could be loaded through other means.".fmt(u))
}n=this.tryToLoadBundle(u,y,d,c)}if(!n){throw"SC.loadBundle(): could not find bundle '%@'".fmt(u)
}else{if(n.loaded){if(j){console.log("SC.loadBundle(): Bundle '%@' already loaded, skipping.".fmt(u))
}if(d){if(SC.isReady){SC._scb_bundleDidLoad(u,y,d,c)}else{SC.ready(SC,function(){SC._scb_bundleDidLoad(u,y,d,c)
})}}}else{if(j){console.log("SC.loadBundle(): Bundle '%@' is not loaded, loading now.".fmt(u))
}x=n.callbacks||[];if(d){x.push(function(){SC._scb_bundleDidLoad(u,y,d,c)});n.callbacks=x
}if(!n.loading){var b=n.requires||[];var g=YES;for(r=0,v=b.length;r<v;++r){var o=b[r];
var k=SC.BUNDLE_INFO[o];if(!k){throw"SC.loadBundle(): could not find required bundle '%@' for bundle '%@'".fmt(o,u)
}else{if(k.loading){g=NO;break}else{if(k.loaded){continue}else{g=NO;var p=k.dependents;
if(!p){k.dependents=p=[]}p.push(u);if(j){console.log("SC.loadBundle(): '%@' depends on '%@', loading dependency…".fmt(u,o))
}SC.loadBundle(o);break}}}}if(g){var l,e,f,a,h,m;h=document.getElementsByTagName("head")[0];
if(!h){h=document.documentElement}l=n.styles||[];for(r=0,v=l.length;r<v;++r){f=l[r];
if(f.length>0){a=document.createElement("link");a.setAttribute("href",f);a.setAttribute("rel","stylesheet");
a.setAttribute("type","text/css");h.appendChild(a)}}var i=this._jsBundleLoadQueue;
if(!i){this._jsBundleLoadQueue=i={}}i[u]=[];var s=i[u];e=n.scripts||[];for(r=0,v=e.length;
r<v;++r){f=e[r];if(f.length>0){s.push(f)}}n.loading=YES;this.scriptDidLoad(u)}}}}},scriptDidLoad:function(c){var a=this._jsBundleLoadQueue;
if(a){var e=a[c];if(e){var b=e.shift();if(SC.logBundleLoading){console.log("SC.scriptDidLoad(): Loading next file in '%@' -> '%@'".fmt(c,b))
}var d=document.createElement("script");d.setAttribute("type","text/javascript");
d.setAttribute("src",b);document.body.appendChild(d)}}},bundleDidLoad:function(d){var g=SC.BUNDLE_INFO[d],e=SC.logBundleLoading,f,c;
if(!g){g=SC.BUNDLE_INFO[d]={loaded:YES};return}if(g.loaded&&e){console.log("SC.bundleDidLoad() called more than once for bundle '%@'. Skipping.".fmt(d));
return}delete g.loading;g.loaded=YES;if(SC.isReady){SC._invokeCallbacksForBundle(d)
}else{SC.ready(SC,function(){SC._invokeCallbacksForBundle(d)})}var h=g.dependents||[];
for(var b=0,a=h.length;b<a;++b){if(e){console.log("SC.loadBundle(): Bundle '%@' has completed loading, loading '%@' that depended on it.".fmt(d,h[b]))
}SC.loadBundle(h[b])}},_invokeCallbacksForBundle:function(c){var e=SC.BUNDLE_INFO[c],d;
if(!e){return}if(SC.logBundleLoading){console.log("SC.loadBundle(): Bundle '%@' has completed loading, invoking callbacks.".fmt(c))
}d=e.callbacks||[];SC.RunLoop.begin();for(var b=0,a=d.length;b<a;++b){d[b]()}SC.RunLoop.end()
}});SC.SCANNER_OUT_OF_BOUNDS_ERROR=new Error("Out of bounds.");SC.SCANNER_INT_ERROR=new Error("Not an int.");
SC.SCANNER_SKIP_ERROR=new Error("Did not find the string to skip.");SC.SCANNER_SCAN_ARRAY_ERROR=new Error("Did not find any string of the given array to scan.");
SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR=new Error("Can't compare the dates of two DateTimes that don't have the same timezone.");
SC.DATETIME_ISO8601="%Y-%m-%dT%H:%M:%S%Z";SC.Scanner=SC.Object.extend({string:null,scanLocation:0,scan:function(a){if(this.scanLocation+a>this.length){throw SC.SCANNER_OUT_OF_BOUNDS_ERROR
}var b=this.string.substr(this.scanLocation,a);this.scanLocation+=a;return b},scanInt:function(c,e){if(e===undefined){e=c
}var d=this.scan(e);var b=new RegExp("^\\d{"+c+","+e+"}");var a=d.match(b);if(!a){throw SC.SCANNER_INT_ERROR
}if(a[0].length<e){this.scanLocation+=a[0].length-e}return parseInt(a[0],10)},skipString:function(a){if(this.scan(a.length)!==a){throw SC.SCANNER_SKIP_ERROR
}return YES},scanArray:function(c){for(var b=0,a=c.length;b<a;b++){if(this.scan(c[b].length)===c[b]){return b
}this.scanLocation-=c[b].length}throw SC.SCANNER_SCAN_ARRAY_ERROR}});SC.DateTime=SC.Object.extend(SC.Freezable,SC.Copyable,{_ms:0,timezone:0,isFrozen:YES,adjust:function(b,a){var c;
b=b?SC.clone(b):{};c=(b.timezone!==undefined)?b.timezone:(this.timezone!==undefined)?this.timezone:0;
return this.constructor._adjust(b,this._ms,c,a)._createFromCurrentState()},advance:function(a){return this.constructor._advance(a,this._ms,this.timezone)._createFromCurrentState()
},unknownProperty:function(a){return this.constructor._get(a,this._ms,this.timezone)
},toFormattedString:function(a){return this.constructor._toFormattedString(a,this._ms,this.timezone)
},toISO8601:function(){return this.constructor._toFormattedString(SC.DATETIME_ISO8601,this._ms,this.timezone)
},toString:function(){return"UTC: "+new Date(this._ms).toUTCString()+", timezone: "+this.timezone
},isEqual:function(a){return SC.DateTime.compare(this,a)===0},copy:function(){return this
},toTimezone:function(a){if(a===undefined){a=0}return this.advance({timezone:a-this.timezone})
}});SC.DateTime.mixin(SC.Comparable,{recordFormat:SC.DATETIME_ISO8601,dayNames:"_SC.DateTime.dayNames".loc().w(),_englishDayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".w(),abbreviatedDayNames:"_SC.DateTime.abbreviatedDayNames".loc().w(),monthNames:"_SC.DateTime.monthNames".loc().w(),abbreviatedMonthNames:"_SC.DateTime.abbreviatedMonthNames".loc().w(),_date:new Date(),_tz:0,timezone:new Date().getTimezoneOffset(),_dt_cache:{},_dt_cache_index:-1,_DT_CACHE_MAX_LENGTH:1000,_setCalcState:function(a,c){var b={milliseconds:this._date.getTime(),timezone:this._tz};
if(a!==undefined){this._date.setTime(a)}if(c!==undefined){this._tz=c}return b},_setCalcStateFromHash:function(c,b){var d=(b!==undefined)?b:this._tz;
var a=this._toMilliseconds(c,this._ms,d);return this._setCalcState(a,d)},_get:function(w,b,n){var l,s,h,o,e,j,k,f,p,a;
var c,i;var r=this._date;var q,g=null;q=this._setCalcState(b,n);if(w==="milliseconds"){g=r.getTime()
}else{if(w==="timezone"){g=this._tz}}if(g===null){p=w.slice(0,4);a=w.slice(4);if(p==="last"||p==="next"){c=this._get("dayOfWeek",b,n);
i=this._englishDayNames.indexOf(a);if(i>=0){var u=i-c;if(p==="last"&&u>=0){u-=7}if(p==="next"&&u<0){u+=7
}this._advance({day:u},b,n);g=this._createFromCurrentState()}}}if(g===null){if(n!==undefined){this._setCalcState(r.getTime()-(n*60000),0)
}switch(w){case"year":g=r.getUTCFullYear();break;case"month":g=r.getUTCMonth()+1;
break;case"day":g=r.getUTCDate();break;case"dayOfWeek":g=r.getUTCDay();break;case"hour":g=r.getUTCHours();
break;case"minute":g=r.getUTCMinutes();break;case"second":g=r.getUTCSeconds();break;
case"millisecond":g=r.getUTCMilliseconds();break}if((g===null)&&(w==="isLeapYear")){e=this._get("year");
g=(e%4===0&&e%100!==0)||e%400===0}if((g===null)&&(w==="daysInMonth")){switch(this._get("month")){case 4:case 6:case 9:case 11:g=30;
break;case 2:g=this._get("isLeapYear")?29:28;break;default:g=31;break}}if((g===null)&&(w==="dayOfYear")){l=r.getTime();
h=this._get("day");this._setCalcStateFromHash({day:1});for(o=this._get("month")-1;
o>0;o--){this._setCalcStateFromHash({month:o});h+=this._get("daysInMonth")}r.setTime(l);
g=h}if((g===null)&&(w.slice(0,4)==="week")){j=w.length===4?1:parseInt(w.slice("4"),10);
k=this._get("dayOfWeek");f=this._get("dayOfYear")-1;if(j===0){g=parseInt((f-k+7)/7,10)
}else{g=parseInt((f-(k-1+7)%7+7)/7,10)}}}this._setCalcState(q.milliseconds,q.timezone);
return g},_adjust:function(c,f,e,a){var d=c?SC.clone(c):{};var b=this._toMilliseconds(c,f,e,a);
this._setCalcState(b,e);return this},_advance:function(a,f,d){var c=a?SC.clone(a):{};
var e;for(var b in c){c[b]+=this._get(b,f,d)}e=(c.timezone!==undefined)?c.timezone:d;
return this._adjust(c,f,e,NO)},_toMilliseconds:function(j,c,h,f){var a=j?SC.clone(j):{};
var i=this._date;var g=i.getTime();var b,e;if(!SC.none(c)){i.setTime(c)}e=(h!==undefined)?h:(this.timezone!==undefined)?this.timezone:0;
i.setTime(i.getTime()-(e*60000));if(f===undefined||f===YES){if(!SC.none(a.hour)&&SC.none(a.minute)){a.minute=0
}if(!(SC.none(a.hour)&&SC.none(a.minute))&&SC.none(a.second)){a.second=0}if(!(SC.none(a.hour)&&SC.none(a.minute)&&SC.none(a.second))&&SC.none(a.millisecond)){a.millisecond=0
}}if(SC.none(a.year)){a.year=i.getUTCFullYear()}if(SC.none(a.month)){a.month=i.getUTCMonth()+1
}if(SC.none(a.day)){a.day=i.getUTCDate()}if(SC.none(a.hour)){a.hour=i.getUTCHours()
}if(SC.none(a.minute)){a.minute=i.getUTCMinutes()}if(SC.none(a.second)){a.second=i.getUTCSeconds()
}if(SC.none(a.millisecond)){a.millisecond=i.getUTCMilliseconds()}b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);
i.setTime(b+(e*60000));b=i.getTime();i.setTime(g);return b},create:function(){var i=arguments.length===0?{}:arguments[0];
var d;if(SC.typeOf(i)===SC.T_NUMBER){i={milliseconds:i}}d=(i.timezone!==undefined)?i.timezone:this.timezone;
if(d===undefined){d=0}if(!SC.none(i.milliseconds)){var h="nu"+i.milliseconds+d,a=this._dt_cache;
var e=a[h];if(!e){var f,g=this._dt_cache_index,b=this;e=a[h]=new b([{_ms:i.milliseconds,timezone:d}]);
g=this._dt_cache_index=(g+1)%this._DT_CACHE_MAX_LENGTH;f=a[g];if(f!==undefined&&a[f]){delete a[f]
}a[g]=h}return e}else{var c=new Date();return this.create({milliseconds:this._toMilliseconds(i,c.getTime(),d,i.resetCascadingly),timezone:d})
}},_createFromCurrentState:function(){return this.create({milliseconds:this._date.getTime(),timezone:this._tz})
},parse:function(o,c){var p=new RegExp("(?:%([aAbBcdHIjmMpSUWwxXyYZ%])|(.))","g");
var n,j,a={},b={},i=SC.Scanner.create({string:o});if(SC.none(c)){c=SC.DATETIME_ISO8601
}try{while((j=p.exec(c))!==null){switch(j[1]){case"a":b.dayOfWeek=i.scanArray(this.abbreviatedDayNames);
break;case"A":b.dayOfWeek=i.scanArray(this.dayNames);break;case"b":a.month=i.scanArray(this.abbreviatedMonthNames)+1;
break;case"B":a.month=i.scanArray(this.monthNames)+1;break;case"c":throw"%c is not implemented";
case"d":a.day=i.scanInt(1,2);break;case"H":a.hour=i.scanInt(1,2);break;case"I":a.hour=i.scanInt(1,2);
break;case"j":throw"%j is not implemented";case"m":a.month=i.scanInt(1,2);break;case"M":a.minute=i.scanInt(1,2);
break;case"p":a.meridian=i.scanArray(["AM","PM"]);break;case"S":a.second=i.scanInt(1,2);
break;case"U":throw"%U is not implemented";case"W":throw"%W is not implemented";case"w":throw"%w is not implemented";
case"x":throw"%x is not implemented";case"X":throw"%X is not implemented";case"y":a.year=i.scanInt(2);
a.year+=(a.year>70?1900:2000);break;case"Y":a.year=i.scanInt(4);break;case"Z":var g=i.scan(1);
if(g==="Z"){a.timezone=0}else{if(g==="+"||g==="-"){var k=i.scanInt(2);if(i.scan(1)!==":"){i.scan(-1)
}var f=i.scanInt(2);a.timezone=(g==="+"?-1:1)*(k*60+f)}}break;case"%":i.skipString("%");
break;default:i.skipString(j[0]);break}}}catch(l){console.log("SC.DateTime.createFromString "+l.toString());
return null}if(!SC.none(a.meridian)&&!SC.none(a.hour)){if(a.meridian===1){a.hour=(a.hour+12)%24
}delete a.meridian}n=SC.DateTime.create(a);if(!SC.none(b.dayOfWeek)&&n.get("dayOfWeek")!==b.dayOfWeek){return null
}return n},_pad:function(b,a){var c=""+b;if(a===undefined){a=2}while(c.length<a){c="0"+c
}return c},__toFormattedString:function(b,e,c){var a,d;switch(b[1]){case"a":return this.abbreviatedDayNames[this._get("dayOfWeek")];
case"A":return this.dayNames[this._get("dayOfWeek")];case"b":return this.abbreviatedMonthNames[this._get("month")-1];
case"B":return this.monthNames[this._get("month")-1];case"c":return this._date.toString();
case"d":return this._pad(this._get("day"));case"D":return this._get("day");case"h":return this._get("hour");
case"H":return this._pad(this._get("hour"));case"i":a=this._get("hour");return(a===12||a===0)?12:(a+12)%12;
case"I":a=this._get("hour");return this._pad((a===12||a===0)?12:(a+12)%12);case"j":return this._pad(this._get("dayOfYear"),3);
case"m":return this._pad(this._get("month"));case"M":return this._pad(this._get("minute"));
case"p":return this._get("hour")>11?"PM":"AM";case"S":return this._pad(this._get("second"));
case"u":return this._pad(this._get("utc"));case"U":return this._pad(this._get("week0"));
case"W":return this._pad(this._get("week1"));case"w":return this._get("dayOfWeek");
case"x":return this._date.toDateString();case"X":return this._date.toTimeString();
case"y":return this._pad(this._get("year")%100);case"Y":return this._get("year");
case"Z":d=-1*c;return(d>=0?"+":"-")+this._pad(parseInt(Math.abs(d)/60,10))+":"+this._pad(Math.abs(d)%60);
case"%":return"%"}},_toFormattedString:function(c,e,b){var a=this;var d=(b!==undefined)?b:(this.timezone!==undefined)?this.timezone:0;
this._setCalcState(e-(b*60000),0);return c.replace(/\%([aAbBcdDHiIjmMpSUWwxXyYZ\%])/g,function(){var f=a.__toFormattedString.call(a,arguments,e,b);
return f})},compare:function(d,c){var f=d.get("milliseconds");var e=c.get("milliseconds");
return f<e?-1:f===e?0:1},compareDate:function(d,c){if(d.get("timezone")!==c.get("timezone")){throw SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR
}var f=d.adjust({hour:0}).get("milliseconds");var e=c.adjust({hour:0}).get("milliseconds");
return f<e?-1:f===e?0:1}});SC.Binding.dateTime=function(a){return this.transform(function(b,c){return b?b.toFormattedString(a):null
})};if(SC.RecordAttribute&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c
}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b
}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})
}SC.BENCHMARK_LOG_READY=YES;sc_require("system/event");SC.mixin({_isReadyBound:NO,_bindReady:function(){if(this._isReadyBound){return
}this._isReadyBound=YES;if(document.addEventListener&&!SC.browser.opera){document.addEventListener("DOMContentLoaded",SC._didBecomeReady,NO)
}if(SC.browser.msie&&(window===top)){(function(){if(SC.isReady){return}try{document.documentElement.doScroll("left")
}catch(a){setTimeout(arguments.callee,0);return}SC._didBecomeReady()})()}if(SC.browser.opera){document.addEventListener("DOMContentLoaded",function(){if(SC.isReady){return
}for(var a=0;a<document.styleSheets.length;a++){if(document.styleSheets[a].disabled){setTimeout(arguments.callee,0);
return}}SC._didBecomeReady()},NO)}if(SC.browser.safari&&SC.browser.safari<530){console.error("ready() is not yet supported on Safari 3.1 and earlier")
}SC.Event.add(window,"load",SC._didBecomeReady)},_readyQueue:[],_afterReadyQueue:[],isReady:NO,_didBecomeReady:function(){if(SC.isReady){return
}if(typeof SC.mapDisplayNames===SC.T_FUNCTION){SC.mapDisplayNames()}if(typeof SC.addInvokeOnceLastDebuggingInfo===SC.T_FUNCTION){SC.addInvokeOnceLastDebuggingInfo()
}SC.Locale.createCurrentLocale();if(document&&document.getElementsByTagName){var a=document.getElementsByTagName("body")[0];
if(a){var b=a.className;var c=SC.Locale.currentLanguage.toLowerCase();a.className=(b&&b.length>0)?[b,c].join(" "):c
}}SC.Benchmark.start("ready");SC.run(function(){var g,f,e,d;do{f=SC._readyQueue;SC._readyQueue=[];
for(e=0,d=f.length;e<d;e++){g=f[e];var h=g[0]||document;var i=g[1];if(i){i.call(h)
}}}while(SC._readyQueue.length>0);SC.isReady=YES;SC._readyQueue=null;SC.Event.trigger(document,"ready",null,NO);
if(SC.removeLoading){SC.$("#loading").remove()}if(SC.userDefaults.get("ready")){if((SC.mode===SC.APP_MODE)&&(typeof main!="undefined")&&(main instanceof Function)&&!SC.suppressMain){main()
}}else{SC.userDefaults.readyCallback(window,main)}},this);SC.Benchmark.end("ready");
if(SC.BENCHMARK_LOG_READY){SC.Benchmark.log()}},ready:function(b,c){var a=this._readyQueue;
if(c===undefined){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(!c){return this
}if(this.isReady){return c.call(b||document)}a.push([b,c]);return this}});SC._bindReady();
SC.removeLoading=YES;SC.APP_MODE="APP_MODE";SC.TEST_MODE="TEST_MODE";SC.mode=SC.APP_MODE;
require("system/ready");SC.CAPTURE_BACKSPACE_KEY=NO;SC.RootResponder=SC.Object.extend({panes:null,init:function(){arguments.callee.base.apply(this,arguments);
this.panes=SC.Set.create()},mainPane:null,makeMainPane:function(b){var a=this.get("mainPane");
if(a===b){return this}this.beginPropertyChanges();if(this.get("keyPane")===a){this.makeKeyPane(b)
}this.set("mainPane",b);if(a){a.blurMainTo(b)}if(b){b.focusMainFrom(a)}this.endPropertyChanges();
return this},menuPane:null,makeMenuPane:function(b){if(b&&!b.get("acceptsMenuPane")){return this
}else{var a=this.get("menuPane");if(a===b){return this}this.set("menuPane",b)}return this
},keyPane:null,previousKeyPanes:[],makeKeyPane:function(f){var e,a,d;if(f){if(!f.get("acceptsKeyPane")){return this
}else{a=this.get("keyPane");if(a===f){return this}else{if(a){d=this.get("previousKeyPanes");
d.push(a)}e=f}}}else{a=this.get("keyPane");d=this.get("previousKeyPanes");e=null;
while(d.length>0){var c=d.pop();if(c.get("isPaneAttached")&&c.get("acceptsKeyPane")){e=c;
break}}}if(!e){var b=this.get("mainPane");if(b&&b.get("acceptsKeyPane")){e=b}}if(a){a.willLoseKeyPaneTo(e)
}if(e){e.willBecomeKeyPaneFrom(a)}this.set("keyPane",e);if(e){e.didBecomeKeyPaneFrom(a)
}if(a){a.didLoseKeyPaneTo(e)}return this},currentWindowSize:null,computeWindowSize:function(){var c,b,a;
if(!this._bod||!this._docElement){b=document.body;a=document.documentElement;this._bod=b;
this._docElement=a}else{b=this._bod;a=this._docElement}if(window.innerHeight){c={width:window.innerWidth,height:window.innerHeight}
}else{if(a&&a.clientHeight){c={width:a.clientWidth,height:a.clientHeight}}else{if(b){c={width:b.clientWidth,height:b.clientHeight}
}}}return c},resize:function(){this._resize();return YES},_resize:function(){var b=this.computeWindowSize(),c=this.get("currentWindowSize");
this.set("currentWindowSize",b);if(!SC.rectsEqual(b,c)){if(SC.platform.touch){var a=SC.$(document.body);
if(b.height>=b.width){SC.device.set("orientation","portrait")}else{SC.device.set("orientation","landscape")
}}if(this.panes){SC.run(function(){this.panes.invoke("windowSizeDidChange",c,b)},this)
}}},hasFocus:NO,focus:function(){if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");
SC.run(function(){this.set("hasFocus",YES)},this)}return YES},focusin:function(){this.focus()
},focusout:function(){this.blur()},blur:function(){if(this.get("hasFocus")){SC.$("body").addClass("sc-blur").removeClass("sc-focus");
SC.run(function(){this.set("hasFocus",NO)},this)}return YES},dragDidStart:function(a){this._mouseDownView=a;
this._drag=a},defaultResponder:null,sendAction:function(c,d,b,e,a){d=this.targetForAction(c,d,b,e);
if(d&&d.isResponderContext){return !!d.sendAction(c,b,a)}else{return d&&d.tryToPerform(c,b)
}},_responderFor:function(c,a){var b=c?c.get("defaultResponder"):null;if(c){c=c.get("firstResponder")||c;
do{if(c.respondsTo(a)){return c}}while((c=c.get("nextResponder")))}if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b)
}if(!b){return null}else{if(b.isResponderContext){return b}else{if(b.respondsTo(a)){return b
}else{return null}}}},targetForAction:function(b,e,d,f){if(!b||(SC.typeOf(b)!==SC.T_STRING)){return null
}if(e){if(SC.typeOf(e)===SC.T_STRING){e=SC.objectForPropertyPath(e)||SC.objectForPropertyPath(e,d)
}if(e&&!e.isResponderContext){if(e.respondsTo&&!e.respondsTo(b)){e=null}else{if(SC.typeOf(e[b])!==SC.T_FUNCTION){e=null
}}}return e}if(f){return this._responderFor(f,b)}var a=this.get("keyPane"),c=this.get("mainPane");
if(a&&(a!==f)){e=this._responderFor(a,b)}if(!e&&c&&(c!==a)){e=this._responderFor(c,b)
}if(!e&&(e=this.get("defaultResponder"))){if(SC.typeOf(e)===SC.T_STRING){e=SC.objectForPropertyPath(e);
if(e){this.set("defaultResponder",e)}}if(e&&!e.isResponderContext){if(e.respondsTo&&!e.respondsTo(b)){e=null
}else{if(SC.typeOf(e[b])!==SC.T_FUNCTION){e=null}}}}return e},targetViewForEvent:function(a){return a.target?SC.$(a.target).view()[0]:null
},sendEvent:function(c,a,d){var e,b;SC.run(function(){if(d){e=d.get("pane")}else{e=this.get("menuPane")||this.get("keyPane")||this.get("mainPane")
}b=(e)?e.sendEvent(c,a,d):null},this);return b},listenFor:function(c,b,a){a=a?a:this;
c.forEach(function(d){var e=a[d];if(e){SC.Event.add(b,d,a,e)}},this);b=null;return a
},setup:function(){this.listenFor("touchstart touchmove touchend touchcancel".w(),document);
this.listenFor("keydown keyup beforedeactivate mousedown mouseup click dblclick mousemove selectstart contextmenu".w(),document).listenFor("resize".w(),window);
if(SC.browser.msie){this.listenFor("focusin focusout".w(),document)}else{this.listenFor("focus blur".w(),window)
}this.listenFor("webkitAnimationStart webkitAnimationIteration webkitAnimationEnd".w(),document);
if(this.keypress){if(SC.CAPTURE_BACKSPACE_KEY&&SC.browser.mozilla){var d=this;document.onkeypress=function(f){f=SC.Event.normalizeEvent(f);
return d.keypress.call(d,f)}}else{SC.Event.add(document,"keypress",this,this.keypress)
}}"drag selectstart".w().forEach(function(h){var i=this[h];if(i){if(SC.browser.msie){var f=this;
document.body["on"+h]=function(j){return i.call(f,SC.Event.normalizeEvent(event||window.event))
};SC.Event.add(window,"unload",this,function(){document.body["on"+h]=null})}else{SC.Event.add(document,h,this,i)
}}},this);var b=SC.browser.mozilla?"DOMMouseScroll":"mousewheel";SC.Event.add(document,b,this,this.mousewheel);
if(SC.browser&&SC.platform&&SC.browser.mobileSafari&&!SC.platform.touch){SC.platform.simulateTouchEvents()
}this.set("currentWindowSize",this.computeWindowSize());this.focus();if(SC.browser.mobileSafari){var e=SC.RunLoop.prototype.endRunLoop,g;
g=function(){if(e){e.apply(this,arguments)}var k=SC.RootResponder.responder._touches,j,f,l,h,n,o=NO;
if(k){for(j in k){if(k[j]._rescuedElement){continue}l=f=k[j].target;while(f&&(f=f.parentNode)&&!o){o=(f===document.body)
}if(!o&&l){if(l.parentNode&&l.cloneNode){var m=l.cloneNode(true);l.parentNode.replaceChild(m,l);
l.swapNode=m}var i=SC.touchHoldingPen;if(!i){i=SC.touchHoldingPen=document.createElement("div");
i.style.display="none";document.body.appendChild(i)}i.appendChild(l);k[j]._rescuedElement=l
}}}};SC.RunLoop.prototype.endRunLoop=g}if(SC.platform.touch){var c=this.computeWindowSize(),a=SC.$(document.body);
if(c.height>=c.width){SC.device.set("orientation","portrait")}else{SC.device.set("orientation","landscape")
}}},_touchedViews:{},_touches:{},touchesForView:function(a){if(this._touchedViews[SC.guidFor(a)]){return this._touchedViews[SC.guidFor(a)].touches
}},averagedTouchesForView:function(f,e){var j=this.touchesForView(f);if((!j||j.length===0)&&!e){return{x:0,y:0,d:0,touchCount:0}
}var c;if(j){c=j.toArray()}else{c=[]}if(e){c.push(e)}var g,d=c.length,b,a=0,l=0,k,i,h=0;
for(g=0;g<d;g++){b=c[g];a+=b.pageX;l+=b.pageY}a/=d;l/=d;for(g=0;g<d;g++){b=c[g];k=Math.abs(b.pageX-a);
i=Math.abs(b.pageY-l);h+=Math.pow(k*k+i*i,0.5)}h/=d;return{x:a,y:l,d:h,touchCount:d}
},assignTouch:function(b,a){if(b.hasEnded){throw"Attemt to assign a touch that is already finished."
}if(b.view===a){return}if(b.view){this.unassignTouch(b)}if(!this._touchedViews[SC.guidFor(a)]){this._touchedViews[SC.guidFor(a)]={view:a,touches:SC.CoreSet.create([]),touchCount:0};
a.set("hasTouch",YES)}b.view=a;this._touchedViews[SC.guidFor(a)].touches.add(b);this._touchedViews[SC.guidFor(a)].touchCount++
},unassignTouch:function(c){var a,b;if(!c.view){return}a=c.view;b=this._touchedViews[SC.guidFor(a)];
b.touches.remove(c);b.touchCount--;if(b.touchCount<1){a.set("hasTouch",NO);b.view=null;
delete this._touchedViews[SC.guidFor(a)]}c.view=undefined},makeTouchResponder:function(f,d,c,k){var h=f.touchResponders,b;
if(f.touchResponder===d){return}var a;if(d){a=d.get("pane")}else{a=this.get("keyPane")||this.get("mainPane")
}if(h.indexOf(d)<0){if(k){try{d=(a)?a.sendEvent("touchStart",f,d):null}catch(g){SC.Logger.error("Error in touchStart: "+g);
d=null}}else{if((d.get?d.get("acceptsMultitouch"):d.acceptsMultitouch)||!d.hasTouch){if(!d.touchStart(f)){d=null
}}else{}}}if(!c||(h.indexOf(d)>-1&&h[h.length-1]!==d)){this.unassignTouch(f);var i=h.length-1,j=h[i];
while(j&&j!==d){b=this.touchesForView(j);if((j.get?j.get("acceptsMultitouch"):j.acceptsMultitouch)||!b){if(j.touchCancelled){j.touchCancelled(f)
}}i--;j=h[i];h.pop();f.touchResponder=h[i];f.nextTouchResponder=h[i-1]}}if(d){this.assignTouch(f,d);
if(d!==f.touchResponder){h.push(d);f.touchResponder=d;f.nextTouchResponder=h[h.length-2]
}}},captureTouch:function(h,e,g){if(!e){e=this}var f=h.targetView,c=f,d=[],b,a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Received one touch on %@".fmt(f.toString()))
}while(c&&(c!==e)){d.unshift(c);c=c.get("nextResponder")}for(a=d.length,b=0;b<a;b++){c=d[b];
if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Checking %@ for captureTouch response…".fmt(c.toString()))
}if(c.tryToPerform("captureTouch",h)){if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Making %@ touch responder because it returns YES to captureTouch".fmt(c.toString()))
}this.makeTouchResponder(h,c,g,YES);return}}if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Didn't find a view that returned YES to captureTouch, so we're calling touchStart")
}this.makeTouchResponder(h,f,g,YES)},endMissingTouches:function(e){var b,a=e.length,d={},c=[];
for(b=0;b<a;b++){d[e[b].identifier]=YES}for(b in this._touches){var f=this._touches[b].identifier;
if(!d[f]){c.push(this._touches[b])}}for(b=0,a=c.length;b<a;b++){this.endTouch(c[b]);
this.finishTouch(c[b])}},_touchCount:0,endTouch:function(b,h,c){if(!h){h="touchEnd"
}var a,g,d,f;this.unassignTouch(b);if(b.touchResponder){f=b.touchResponder;g=b.touchResponders;
a=g.length-1;d=g[a];while(d){try{if(d[h]){d[h](b,c)}}catch(i){console.error("crashed on endTouch")
}if(b.touchResponder!==f){break}a--;d=g[a];h="touchCancelled"}}},finishTouch:function(b){var a;
this.unassignTouch(b);if(a=b._rescuedElement){if(a.swapNode&&a.swapNode.parentNode){a.swapNode.parentNode.replaceChild(a,a.swapNode)
}else{if(a.parentNode===SC.touchHoldingPen){SC.touchHoldingPen.removeChild(a)}}delete b._rescuedElement;
a.swapNode=null;a=null}b.touchResponders=null;b.touchResponder=null;b.nextTouchResponder=null;
b.hasEnded=YES;if(this._touches[b.identifier]){delete this._touches[b.identifier]
}},touchstart:function(a){var b=NO;SC.run(function(){this.endMissingTouches(a.touches);
var e,h=a.changedTouches,d=h.length,g,f,i,c;a.touchContext=this;for(e=0;e<d;e++){i=h[e];
c=SC.Touch.create(i,this);if(!c.targetView){continue}if(c.hidesTouchIntercept){b=YES
}c.timeStamp=a.timeStamp;this._touches[i.identifier]=c;c.event=a;this.captureTouch(c,this);
c.event=null}},this);if(b){return YES}return a.hasCustomEventHandling},touchmove:function(a){SC.run(function(){var c=a.changedTouches,b,n,l,f=c.length,k,j,i,m,g={},e,h,d=NO;
if(this._drag){b=SC.Touch.create(a.changedTouches[0],this);this._drag.tryToPerform("mouseDragged",b)
}for(l=0;l<f;l++){b=c[l];n=this._touches[b.identifier];if(!n){continue}if(n.hidesTouchIntercept){d=YES
}n.pageX=b.pageX;n.pageY=b.pageY;n.timeStamp=a.timeStamp;n.event=a;if(n.touchResponder){k=n.touchResponder;
h=SC.guidFor(k);if(!g[h]){g[h]={view:k,touches:[]}}g[h].touches.push(n)}}if(d){a.allowDefault();
return YES}for(l in g){k=g[l].view;j=g[l].touches;a.viewChangedTouches=j;i=this.touchesForView(k);
m=i.firstObject();a.pageX=m.pageX;a.pageY=m.pageY;a.touchContext=this;k.tryToPerform("touchesDragged",a,i)
}c=a.changedTouches;f=c.length;for(l=0;l<f;l++){b=c[l];n=this._touches[b.identifier];
n.event=null}},this);return a.hasCustomEventHandling},touchend:function(a){var b=NO;
SC.run(function(){var h=a.changedTouches,g,n,l,i=h.length,j,c,f=a.isCancel?"touchCancelled":"touchEnd",k,m,d,e;
for(l=0;l<i;l++){g=h[l];g.type="touchend";n=this._touches[g.identifier];if(!n){continue
}n.timeStamp=a.timeStamp;n.pageX=g.pageX;n.pageY=g.pageY;n.type="touchend";n.event=a;
if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("-- Received touch end")}if(n.hidesTouchIntercept){n.unhideTouchIntercept();
b=YES}if(this._drag){this._drag.tryToPerform("mouseUp",g);this._drag=null}this.endTouch(n,f,a);
this.finishTouch(n)}},this);if(b){return YES}return a.hasCustomEventHandling},touchcancel:function(a){a.isCancel=YES;
this.touchend(a)},attemptKeyEquivalent:function(b){var d=null;var c=b.commandCodes()[0];
if(!c){return NO}var f=this.get("menuPane"),a=this.get("keyPane"),e=this.get("mainPane");
if(f){d=f.performKeyEquivalent(c,b);if(d){return d}}if(a){d=a.performKeyEquivalent(c,b);
if(d||a.get("isModal")){return d}}if(!d&&e&&(e!==a)){d=e.performKeyEquivalent(c,b);
if(d||e.get("isModal")){return d}}return d},_lastModifiers:null,_handleModifierChanges:function(b){var a;
a=this._lastModifiers=(this._lastModifiers||{alt:false,ctrl:false,shift:false});var c=false;
if(b.altKey!==a.alt){a.alt=b.altKey;c=true}if(b.ctrlKey!==a.ctrl){a.ctrl=b.ctrlKey;
c=true}if(b.shiftKey!==a.shift){a.shift=b.shiftKey;c=true}b.modifiers=a;return(c)?(this.sendEvent("flagsChanged",b)?b.hasCustomEventHandling:YES):YES
},_isFunctionOrNonPrintableKey:function(a){return !!(a.altKey||a.ctrlKey||a.metaKey||((a.charCode!==a.which)&&SC.FUNCTION_KEYS[a.which]))
},_isModifierKey:function(a){return !!SC.MODIFIER_KEYS[a.charCode]},keydown:function(a){if(SC.none(a)){return YES
}var e=a.keyCode;if(e===229){this._IMEInputON=YES;return this.sendEvent("keyDown",a)
}if(e===27&&this._drag){this._drag.cancelDrag();this._drag=null;this._mouseDownView=null;
return YES}if(SC.browser.mozilla&&(a.which===8)){return true}var b=this._handleModifierChanges(a),d=a.target||a.srcElement,c=(a.which===8)&&!SC.allowsBackspaceToPreviousPage&&(d===document.body);
if(this._isModifierKey(a)){return(c?NO:b)}b=YES;if(this._isFunctionOrNonPrintableKey(a)){if(e>=37&&e<=40&&SC.browser.mozilla){return YES
}b=this.sendEvent("keyDown",a);if(!b){b=!this.attemptKeyEquivalent(a)}else{b=a.hasCustomEventHandling;
if(b){c=NO}}}return c?NO:b},keypress:function(b){var c,e=b.keyCode,f=!!SC.browser.mozilla;
if(f&&(b.which===8)){b.which=e;c=this.sendEvent("keyDown",b);return c?(SC.allowsBackspaceToPreviousPage||b.hasCustomEventHandling):YES
}else{var d=(e>=37&&e<=40&&f),a=b.charCode;if((a!==undefined&&a===0)&&!d){return YES
}if(d){b.which=e}return this.sendEvent("keyDown",b)?b.hasCustomEventHandling:YES}},keyup:function(a){if(this._ffevt){this._ffevt=null
}var b=this._handleModifierChanges(a);if(this._isModifierKey(a)){return b}if(this._IMEInputON&&a.keyCode===13){a.isIMEInput=YES;
this.sendEvent("keyDown",a);this._IMEInputON=NO}return this.sendEvent("keyUp",a)?a.hasCustomEventHandling:YES
},beforedeactivate:function(c){var b=c.toElement;if(b&&b.tagName&&b.tagName!=="IFRAME"){var a=SC.$(b).view()[0];
if(a&&a.get("blocksIEDeactivate")){return NO}}return YES},mousedown:function(e){if(SC.platform.touch){e.allowDefault();
return YES}if(!SC.browser.msie){window.focus()}this._clickCount+=1;if(!this._lastMouseUpAt||((Date.now()-this._lastMouseUpAt)>200)){this._clickCount=1
}else{var d=this._lastMouseDownX-e.clientX,a=this._lastMouseDownY-e.clientY,f=Math.sqrt(d*d+a*a);
if(f>8){this._clickCount=1}}e.clickCount=this._clickCount;this._lastMouseDownX=e.clientX;
this._lastMouseDownY=e.clientY;var c,b=this.targetViewForEvent(e);if(b){c=b.getPath("pane.firstResponder")
}if(c&&c.kindOf(SC.InlineTextFieldView)&&c!==b){c.resignFirstResponder()}b=this._mouseDownView=this.sendEvent("mouseDown",e,b);
if(b&&b.respondsTo("mouseDragged")){this._mouseCanDrag=YES}return b?e.hasCustomEventHandling:YES
},mouseup:function(b){if(SC.platform.touch){b.allowDefault();return YES}this.targetViewForEvent(b);
if(this._drag){this._drag.tryToPerform("mouseUp",b);this._drag=null}var d=null,a=this._mouseDownView,c=this.targetViewForEvent(b);
this._lastMouseUpAt=Date.now();b.clickCount=this._clickCount;if(a){d=this.sendEvent("mouseUp",b,a);
if(!d&&(this._clickCount===2)){d=this.sendEvent("doubleClick",b,a)}if(!d){d=this.sendEvent("click",b,a)
}}if(!d){if(this._clickCount===2){d=this.sendEvent("doubleClick",b,c)}if(!d){d=this.sendEvent("click",b,c)
}}this._mouseCanDrag=NO;this._mouseDownView=null;return(d)?b.hasCustomEventHandling:YES
},dblclick:function(a){if(SC.browser.isIE){this._clickCount=2;this.mouseup(a)}},mousewheel:function(b){var a=this.targetViewForEvent(b),c=this.sendEvent("mouseWheel",b,a);
return(c)?b.hasCustomEventHandling:YES},_lastHovered:null,mousemove:function(a){if(SC.platform.touch){a.allowDefault();
return YES}if(SC.browser.msie){if(this._lastMoveX===a.clientX&&this._lastMoveY===a.clientY){return
}}this._lastMoveX=a.clientX;this._lastMoveY=a.clientY;SC.run(function(){if(this._drag){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX||this._lastMouseDownY!==a.clientY){this._drag.tryToPerform("mouseDragged",a)
}}else{this._drag.tryToPerform("mouseDragged",a)}}else{var d=this._lastHovered||[],e=[],g,f,b,c=this.targetViewForEvent(a);
while(c&&(c!==this)){e.push(c);c=c.get("nextResponder")}for(f=0,b=d.length;f<b;f++){c=d[f];
g=c.respondsTo("mouseExited");if(g&&e.indexOf(c)===-1){c.tryToPerform("mouseExited",a)
}}for(f=0,b=e.length;f<b;f++){c=e[f];if(d.indexOf(c)!==-1){c.tryToPerform("mouseMoved",a)
}else{c.tryToPerform("mouseEntered",a)}}this._lastHovered=e;if(this._mouseDownView){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX&&this._lastMouseDownY!==a.clientY){this._mouseDownView.tryToPerform("mouseDragged",a)
}}else{this._mouseDownView.tryToPerform("mouseDragged",a)}}}},this)},_mouseCanDrag:YES,selectstart:function(b){var c=this.targetViewForEvent(b),a=this.sendEvent("selectStart",b,c);
if(c&&c.respondsTo("mouseDragged")){return(a!==null?YES:NO)&&!this._mouseCanDrag}else{return(a!==null?YES:NO)
}},drag:function(){return false},contextmenu:function(b){var a=this.targetViewForEvent(b);
return this.sendEvent("contextMenu",b,a)},webkitAnimationStart:function(b){try{var a=this.targetViewForEvent(b);
this.sendEvent("animationDidStart",b,a)}catch(c){console.warn("Exception during animationDidStart: %@".fmt(c));
throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationIteration:function(b){try{var a=this.targetViewForEvent(b);
this.sendEvent("animationDidIterate",b,a)}catch(c){console.warn("Exception during animationDidIterate: %@".fmt(c));
throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationEnd:function(b){try{var a=this.targetViewForEvent(b);
this.sendEvent("animationDidEnd",b,a)}catch(c){console.warn("Exception during animationDidEnd: %@".fmt(c));
throw c}return a?b.hasCustomEventHandling:YES}});SC.Touch=function(d,a){this.touchContext=a;
this.identifier=d.identifier;var c=d.target,b;if(c&&SC.$(c).hasClass("touch-intercept")){d.target.style.webkitTransform="translate3d(0px,-5000px,0px)";
c=document.elementFromPoint(d.pageX,d.pageY);if(c){b=SC.$(c).view()[0]}this.hidesTouchIntercept=NO;
if(c.tagName==="INPUT"){this.hidesTouchIntercept=d.target}else{d.target.style.webkitTransform="translate3d(0px,0px,0px)"
}}else{b=d.target?SC.$(d.target).view()[0]:null}this.targetView=b;this.target=c;this.hasEnded=NO;
this.type=d.type;this.clickCount=1;this.view=undefined;this.touchResponder=this.nextTouchResponder=undefined;
this.touchResponders=[];this.startX=this.pageX=d.pageX;this.startY=this.pageY=d.pageY
};SC.Touch.prototype={unhideTouchIntercept:function(){var a=this.hidesTouchIntercept;
if(a){setTimeout(function(){a.style.webkitTransform="translate3d(0px,0px,0px)"},500)
}},allowDefault:function(){if(this.event){this.event.hasCustomEventHandling=YES}},preventDefault:function(){if(this.event){this.event.preventDefault()
}},stopPropagation:function(){if(this.event){this.event.stopPropagation()}},stop:function(){if(this.event){this.event.stop()
}},end:function(){this.touchContext.endTouch(this)},makeTouchResponder:function(b,c,a){this.touchContext.makeTouchResponder(this,b,c,a)
},captureTouch:function(a,b){this.touchContext.captureTouch(this,a,b)},touchesForView:function(a){return this.touchContext.touchesForView(a)
},touchesForResponder:function(a){return this.touchContext.touchesForView(a)},averagedTouchesForView:function(a,b){return this.touchContext.averagedTouchesForView(a,(b?this:null))
}};SC.mixin(SC.Touch,{create:function(b,a){return new SC.Touch(b,a)}});SC.ready(SC.RootResponder,SC.RootResponder.ready=function(){var a;
a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()});SC.platform={touch:("createTouch" in document)&&!navigator.userAgent.match("Chrome/9"),bounceOnScroll:(/iPhone|iPad|iPod/).test(navigator.platform),pinchToZoom:(/iPhone|iPad|iPod/).test(navigator.platform),input:function(d){var e={},c=d.length,f=document.createElement("input"),b,a;
for(a=0;a<c;a++){b=d[a];e[b]=!!(b in f)}return e}(("autocomplete readonly list size required multiple maxlength pattern min max step placeholder").w()),standalone:!!navigator.standalone,cssPrefix:null,domCSSPrefix:null,simulateTouchEvents:function(){if(this.touch){SC.Logger.info("Can't simulate touch events in an environment that supports them.");
return}SC.platform.touch=YES;document.body.className=document.body.className+" touch";
this._simtouch_counter=1;this.removeEvents("click dblclick mouseout mouseover mousewheel".w());
this.replaceEvent("mousemove",this._simtouch_mousemove);this.replaceEvent("mousedown",this._simtouch_mousedown);
this.replaceEvent("mouseup",this._simtouch_mouseup)},removeEvents:function(d){var b,a=d.length,c;
for(b=0;b<a;b++){c=d[b];SC.Event.remove(document,c,SC.RootResponder.responder,SC.RootResponder.responder[c])
}},replaceEvent:function(a,b){SC.Event.remove(document,a,SC.RootResponder.responder,SC.RootResponder.responder[a]);
SC.Event.add(document,a,this,b)},_simtouch_mousemove:function(a){if(!this._mousedown){return NO
}var b=this.manufactureTouchEvent(a,"touchmove");return SC.RootResponder.responder.touchmove(b)
},_simtouch_mousedown:function(a){this._mousedown=YES;var b=this.manufactureTouchEvent(a,"touchstart");
return SC.RootResponder.responder.touchstart(b)},_simtouch_mouseup:function(a){var c=this.manufactureTouchEvent(a,"touchend"),b=SC.RootResponder.responder.touchend(c);
this._mousedown=NO;this._simtouch_counter++;return b},manufactureTouchEvent:function(a,c){var d,b=this._simtouch_counter;
d={type:c,target:a.target,identifier:b,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY};
a.changedTouches=a.touches=[d];return a},supportsCSSTransitions:NO,supportsCSSTransforms:NO,understandsCSS3DTransforms:NO,supportsCSS3DTransforms:NO,supportsAcceleratedLayers:NO,supportsHashChange:function(){return("onhashchange" in window)&&(document.documentMode===undefined||document.documentMode>7)
}()};(function(){var a=navigator.userAgent.toLowerCase();if((/webkit/).test(a)){SC.platform.cssPrefix="webkit";
SC.platform.domCSSPrefix="Webkit"}else{if((/opera/).test(a)){SC.platform.cssPrefix="opera";
SC.platform.domCSSPrefix="O"}else{if((/msie/).test(a)&&!(/opera/).test(a)){SC.platform.cssPrefix="ms";
SC.platform.domCSSPrefix="ms"}else{if((/mozilla/).test(a)&&!(/(compatible|webkit)/).test(a)){SC.platform.cssPrefix="moz";
SC.platform.domCSSPrefix="Moz"}}}}})();(function(){var d=document.createElement("div");
var e=["-moz-","-moz-","-o-","-ms-","-webkit-"];var a=["moz","Moz","o","ms","webkit"];
var c="",b=null;for(b=0;b<e.length;b++){c+=e[b]+"transition:all 1s linear;";c+=e[b]+"transform: translate(1px, 1px);";
c+=e[b]+"perspective: 500px;"}d.style.cssText=c;for(b=0;b<a.length;b++){if(d.style[a[b]+"TransitionProperty"]!==undefined){SC.platform.supportsCSSTransitions=YES
}if(d.style[a[b]+"Transform"]!==undefined){SC.platform.supportsCSSTransforms=YES}if(d.style[a[b]+"Perspective"]!==undefined||d.style[a[b]+"PerspectiveProperty"]!==undefined){SC.platform.understandsCSS3DTransforms=YES;
SC.platform.supportsCSS3DTransforms=YES}}if(window.media&&window.media.matchMedium){if(!window.media.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO
}}else{if(window.styleMedia&&window.styleMedia.matchMedium){if(!window.styleMedia.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO
}}}if(SC.platform.supportsCSSTransforms&&SC.platform.cssPrefix==="webkit"){SC.platform.supportsAcceleratedLayers=YES
}})();require("system/ready");require("system/root_responder");require("system/platform");
SC.device=SC.Object.create({orientation:"desktop",isOffline:NO,mouseLocation:function(){var a=SC.RootResponder.responder,c=a._lastMoveX,b=a._lastMoveY;
if(SC.empty(c)||SC.empty(b)){return null}return{x:c,y:b}}.property(),init:function(){arguments.callee.base.apply(this,arguments);
if(SC.platform.touch){this.orientationchange()}if(navigator&&navigator.onLine===false){this.set("isOffline",YES)
}this.panes=SC.Set.create()},setup:function(){var a=SC.RootResponder.responder;a.listenFor("orientationchange".w(),window,this);
a.listenFor("online offline".w(),document,this)},orientationchange:function(a){if(window.orientation===0||window.orientation===180){this.set("orientation","portrait")
}else{this.set("orientation","landscape")}},orientationObserver:function(){var a=SC.$(document.body),b=this.get("orientation");
if(b==="portrait"){a.setClass("portrait",YES);a.setClass("landscape",NO)}if(b==="landscape"){a.setClass("portrait",NO);
a.setClass("landscape",YES)}}.observes("orientation"),online:function(a){this.set("isOffline",NO)
},offline:function(a){this.set("isOffline",YES)}});SC.ready(function(){SC.device.setup()
});SC.ExceptionHandler={handleException:function(a){if(this.isShowingErrorDialog){return
}this._displayErrorDialog(a)},_displayErrorDialog:function(b){var a=this._errorDialogHTMLForException(b),c=document.createElement("div");
c.style.cssText="left: 0px; right: 0px; top: 0px; bottom: 0px; position: absolute; background-color: white; background-color: rgba(255,255,255,0.6); z-index:100;";
c.innerHTML=a;document.body.appendChild(c);this.isShowingErrorDialog=YES},_errorDialogHTMLForException:function(b){var a;
a=['<div id="sc-error-dialog" style="position: absolute; width: 500px; left: 50%; top: 50%; margin-left: -250px; background-color: white; border: 1px solid black; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; padding: 10px">',"An error has occurred which prevents the application from running:","<br><br>",b.message,'<div id="sc-error-dialog-reload-button" onclick="window.location.reload();" style="float: right; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; border: 1px solid black; padding: 3px; clear: both; margin-top: 20px; cursor: pointer;">',"Reload","</div>","</div>"];
return a.join("")},isShowingErrorDialog:NO};sc_require("system/locale");SC.IMAGE_ABORTED_ERROR=SC.$error("SC.Image.AbortedError","Image",-100);
SC.IMAGE_FAILED_ERROR=SC.$error("SC.Image.FailedError","Image",-101);SC.imageCache=SC.Object.create({loadLimit:4,activeRequests:0,loadImage:function(a,e,f,d){var b=SC.typeOf(e);
if(SC.none(f)&&SC.typeOf(e)===SC.T_FUNCTION){e=null;f=e}if(SC.typeOf(f)===SC.T_STRING){f=e[f]
}if(SC.none(d)){d=SC.none(e)&&SC.none(f)}var c=this._imageEntryFor(a);if(c.status===this.IMAGE_LOADED){if(f){f.call(e||c.image,c.url,c.image)
}}else{if(e||f){this._addCallback(c,e,f)}c.retainCount++;this._scheduleImageEntry(c,d)
}},releaseImage:function(a,d,e){var c=this._imageEntryFor(a,NO);if(!c){return this
}if(--c.retainCount<=0){this._deleteEntry(c)}else{if(d||e){var b=SC.typeOf(d);if(SC.none(e)&&SC.typeOf(d)===SC.T_FUNCTION){d=null;
e=d}if(SC.typeOf(e)===SC.T_STRING){e=d[e]}this._removeCallback(c,d,e)}}},reloadImage:function(a){var b=this._imageEntryFor(a,NO);
if(b&&b.status===this.IMAGE_LOADED){b.status=this.IMAGE_WAITING}},loadNextImage:function(){var c=null,a;
if(this.get("activeRequests")>=this.get("loadLimit")){return}a=this._foregroundQueue;
while(a.length>0&&!c){c=a.shift()}if(!c){a=this._backgroundQueue;while(a.length>0&&!c){c=a.shift()
}}this.set("isLoading",!!c);if(c){var b=c.image;b.onabort=this._imageDidAbort;b.onerror=this._imageDidError;
b.onload=this._imageDidLoad;b.src=c.url;this._loading.push(c);this.incrementProperty("activeRequests");
this.loadNextImage()}},_imageEntryFor:function(c,a){if(a===undefined){a=YES}var d=this._images[c];
if(!d&&a){var b=new Image();d=this._images[c]={url:c,status:this.IMAGE_WAITING,callbacks:[],retainCount:0,image:b};
b.entry=d}return d},_deleteEntry:function(a){this._unscheduleImageEntry(a);delete this._images[a.url]
},_addCallback:function(c,d,e){var b=c.callbacks;var a=b.find(function(f){return f[0]===d&&f[1]===e
},this);if(!a){b.push([d,e])}b=null;return this},_removeCallback:function(b,c,d){var a=b.callbacks;
a.forEach(function(f,e){if(f[0]===c&&f[1]===d){a[e]=null}},this);a=null;return this
},_scheduleImageEntry:function(d,c){var b=this._backgroundQueue;var e=this._foregroundQueue;
if(d.status===this.IMAGE_LOADED){return this}if((d.status===this.IMAGE_QUEUED)&&!c&&d.isBackground){b[b.indexOf(d)]=null;
d.status=this.IMAGE_WAITING}if(d.status!==this.IMAGE_QUEUED){var a=(c)?b:e;a.push(d);
d.status=this.IMAGE_QUEUED;d.isBackground=c}if(!this.isLoading){this.invokeLater(this.loadNextImage,100)
}this.set("isLoading",YES);return this},_unscheduleImageEntry:function(b){if(b.status!==this.IMAGE_QUEUED){return this
}var a=b.isBackground?this._backgroundQueue:this._foregroundQueue;a[a.indexOf(b)]=null;
if(this._loading.indexOf(b)>=0){if(a.image){a.image.abort()}this.imageStatusDidChange(b,this.ABORTED)
}return this},_imageDidAbort:function(){SC.run(function(){SC.imageCache.imageStatusDidChange(this.entry,SC.imageCache.ABORTED)
},this)},_imageDidError:function(){SC.run(function(){SC.imageCache.imageStatusDidChange(this.entry,SC.imageCache.ERROR)
},this)},_imageDidLoad:function(){SC.run(function(){SC.imageCache.imageStatusDidChange(this.entry,SC.imageCache.LOADED)
},this)},imageStatusDidChange:function(c,a){if(!c){return}var b=c.url;var d;switch(a){case this.LOADED:d=c.image;
break;case this.ABORTED:d=SC.IMAGE_ABORTED_ERROR;break;case this.ERROR:d=SC.IMAGE_FAILED_ERROR;
break;default:d=SC.IMAGE_FAILED_ERROR;break}c.callbacks.forEach(function(f){var g=f[0],h=f[1];
h.call(g,b,d)},this);c.callbacks=[];c.status=(a===this.LOADED)?this.IMAGE_LOADED:this.IMAGE_WAITING;
var e=c.image;if(e){e.onload=e.onerror=e.onabort=null;if(a!==this.LOADED){c.image=null
}}this._loading[this._loading.indexOf(c)]=null;if(this._loading.length>this.loadLimit*2){this._loading=this._loading.compact()
}this.decrementProperty("activeRequests");this.loadNextImage()},init:function(){arguments.callee.base.apply(this,arguments);
this._images={};this._loading=[];this._foregroundQueue=[];this._backgroundQueue=[]
},IMAGE_LOADED:"loaded",IMAGE_QUEUED:"queued",IMAGE_WAITING:"waiting",ABORTED:"aborted",ERROR:"error",LOADED:"loaded"});
SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)
}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()
}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)
}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);
case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;
i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space
}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")
}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)
}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")
}}}());SC.Math=SC.Object.create({near:function(c,b,a){if(!a){a=0.00001}return Math.abs(c-b)<=a
},round:function(d,a){if(!a){a=0}var b=Math.pow(10,a);if(a<0){var c=b.toString();
b=c.substring(0,c.indexOf("1")+1)}d=d.valueOf();return Math.round(d*b)/b}});SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];
if(b&&b.isClass){this[a]=b=b.create({page:this});if(!this.get("inDesignMode")){b.awake()
}return b}else{return arguments.callee.base.apply(this,arguments)}},awake:function(){var b,a;
for(a in this){if(!this.hasOwnProperty(a)){continue}b=this[a];if(b&&b.isViewClass){this[a]=b=b.create({page:this})
}}return this},getIfConfigured:function(b){var a=this[b];return(a&&a.isViewClass)?null:this.get(b)
},loc:function(c){var a,b;for(b in c){if(!c.hasOwnProperty(b)){continue}a=this[b];
if(!a||!a.isViewClass){continue}a.loc(c[b])}return this}});SC.Page.design=SC.Page.create;
SC.Page.localization=function(a){return a};sc_require("system/builder");SC.MODE_REPLACE="replace";
SC.MODE_APPEND="append";SC.MODE_PREPEND="prepend";SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach("area base basefront br hr input img link meta".w()),init:function(e,d){var b,a;
if(d){this.prevObject=d;this.strings=d.strings;this.offset=d.length+d.offset}if(!this.strings){this.strings=[]
}if(e===undefined){e="div";a=YES}else{if(e==="div"||e==="label"||e==="a"){a=YES}else{if(SC.typeOf(e)===SC.T_STRING){e=e.toLowerCase();
a=YES}}}if(a){this._tagName=e;this._needsTag=YES;this.needsContent=YES;var f=this;
while(f){f.length++;f=f.prevObject}this.strings.push(null);this._selfClosing=this.SELF_CLOSING.contains(e)
}else{this._elem=e;this._needsTag=NO;this.length=0;this.needsContent=NO}return this
},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(b){var a=this.strings||[];
return(b===undefined)?a.slice(this.offset,this.length):a[b+this.offset]},push:function(d){var b=this.strings,a=arguments.length;
if(!b){this.strings=b=[]}if(a>1){b.push.apply(b,arguments)}else{b.push(d)}var e=this;
while(e){e.length+=a;e=e.prevObject}this.needsContent=YES;return this},text:function(c){var b=arguments.length,a=0;
for(a=0;a<b;a++){this.push(SC.RenderContext.escapeHTML(arguments[a]))}return this
},join:function(b){if(this._needsTag){this.end()}var a=this.strings;return a?a.join(b||""):""
},begin:function(a){return SC.RenderContext(a,this)},element:function(){if(this._elem){return this._elem
}var a=SC.RenderContext,b=a.factory,c,d;if(!b){b=a.factory=document.createElement("div")
}b.innerHTML=this.join();if(SC.browser.msie){if(b.innerHTML.length>0){d=b.firstChild.cloneNode(true);
b.innerHTML=""}else{d=null}}else{d=b.firstChild}return d},remove:function(a){if(!a){return
}var b,c=this._elem;if(!c||!c.removeChild){return}b=document.getElementById(a);if(b){b=c.removeChild(b);
b=null}},update:function(){var a=this._elem,e=this.updateMode,g,k,i,f,m,c,j,d,h;this._innerHTMLReplaced=NO;
if(!a){return}g=SC.$(a);if(this.length>0){this._innerHTMLReplaced=YES;if(e===SC.MODE_REPLACE){a.innerHTML=this.join()
}else{c=a.cloneNode(false);c.innerHTML=this.join();h=(e===SC.MODE_APPEND)?null:a.firstChild;
j=c.firstChild;while(j){d=j.nextSibling;a.insertBefore(j,d);j=d}j=d=c=h=null}}if(this._attrsDidChange&&(i=this._attrs)){for(k in i){if(!i.hasOwnProperty(k)){continue
}f=i[k];if(f===null){a.removeAttribute(k)}else{g.attr(k,f)}}}if(this._classNamesDidChange&&(i=this._classNames)){g.attr("class",i.join(" "))
}if(this._idDidChange&&(i=this._id)){g.attr("id",i)}if(this._stylesDidChange&&(m=this._styles)){var b=this._STYLE_PAIR_ARRAY,l=this._JOIN_ARRAY;
for(k in m){if(!m.hasOwnProperty(k)){continue}i=m[k];if(i===null){continue}if(typeof i===SC.T_NUMBER&&k!=="zIndex"){i+="px"
}b[0]=this._dasherizeStyleName(k);b[1]=i;l.push(b.join(": "))}g.attr("style",l.join("; "));
l.length=0}a=this._elem=null;return this.prevObject||this},_DEFAULT_ATTRS:{},_TAG_ARRAY:[],_JOIN_ARRAY:[],_STYLE_PAIR_ARRAY:[],end:function(){var m=this._TAG_ARRAY,b,k,i,g,j=this._attrs,d=this._classNames,a=this._id,l=this._styles;
m[0]="<";m[1]=this._tagName;if(j||d||l||a){if(!j){j=this._DEFAULT_ATTRS}if(a){j.id=a
}if(d){j["class"]=d.join(" ")}if(l){k=this._JOIN_ARRAY;b=this._STYLE_PAIR_ARRAY;for(i in l){if(!l.hasOwnProperty(i)){continue
}g=l[i];if(g===null){continue}if(!isNaN(g)&&i!=="zIndex"){g+="px"}b[0]=this._dasherizeStyleName(i);
b[1]=g;k.push(b.join(": "))}j.style=k.join("; ");k.length=0}m.push(" ");for(i in j){if(!j.hasOwnProperty(i)){continue
}g=j[i];if(g===null){continue}m.push(i,'="',g,'" ')}if(j===this._DEFAULT_ATTRS){delete j.style;
delete j["class"];delete j.id}}var h=this.strings;var f=(this._selfClosing===NO)?NO:(this.length===1);
m.push(f?" />":">");h[this.offset]=m.join("");m.length=0;if(!f){m[0]="</";m[1]=this._tagName;
m[2]=">";h.push(m.join(""));var e=this;while(e){e.length++;e=e.prevObject}m.length=0
}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()
},tagName:function(a){if(a===undefined){if(!this._tagName&&this._elem){this._tagName=this._elem.tagName
}return this._tagName}else{this._tagName=a;this._tagNameDidChange=YES;return this
}},id:function(a){if(a===undefined){if(!this._id&&this._elem){this._id=this._elem.id
}return this._id}else{this._id=a;this._idDidChange=YES;return this}},classNames:function(b,a){if(b===undefined){if(!this._classNames&&this._elem){this._classNames=(SC.$(this._elem).attr("class")||"").split(" ")
}if(this._cloneClassNames){this._classNames=(this._classNames||[]).slice();this._cloneClassNames=NO
}if(!this._classNames){this._classNames=[]}return this._classNames}else{this._classNames=b;
this._cloneClassNames=a||NO;this._classNamesDidChange=YES;return this}},hasClass:function(a){return this.classNames().indexOf(a)>=0
},addClass:function(d){if(d===undefined||d===null){console.warn("You are adding an undefined or empty class"+this.toString());
return this}var e=this.classNames();if(SC.typeOf(d)===SC.T_STRING){if(e.indexOf(d)<0){e.push(d);
this._classNamesDidChange=YES}}else{for(var c=0,a=d.length;c<a;c++){var b=d[c];if(e.indexOf(b)<0){e.push(b);
this._classNamesDidChange=YES}}}return this},removeClass:function(b){var c=this._classNames,a;
if(!c&&this._elem){c=this._classNames=(SC.$(this._elem).attr("class")||"").split(" ")
}if(c&&(a=c.indexOf(b))>=0){if(this._cloneClassNames){c=this._classNames=c.slice();
this._cloneClassNames=NO}c[a]=null;this._classNamesDidChange=YES}return this},resetClassNames:function(){this._classNames=[];
this._classNamesDidChange=YES;return this},setClass:function(d,c){var f,a,b,e;if(c!==undefined){return c?this.addClass(d):this.removeClass(d)
}else{f=this._classNames;if(!f&&this._elem){f=this._classNames=(SC.$(this._elem).attr("class")||"").split(" ")
}if(!f){f=this._classNames=[]}if(this._cloneClassNames){f=this._classNames=f.slice();
this._cloneClassNames=NO}e=NO;for(b in d){if(!d.hasOwnProperty(b)){continue}a=f.indexOf(b);
if(d[b]){if(a<0){f.push(b);e=YES}}else{if(a>=0){f[a]=null;e=YES}}}if(e){this._classNamesDidChange=YES
}}return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(d,e){var a,c,b;
if(d===undefined){if(!this._styles&&this._elem){a=SC.$(this._elem).attr("style");
if(a&&(a=a.toString()).length>0){if(SC.browser.msie){a=a.toLowerCase()}d={};c=this._STYLE_REGEX;
c.lastIndex=0;while(b=c.exec(a)){d[this._camelizeStyleName(b[1])]=b[2]}this._styles=d;
this._cloneStyles=NO}else{this._styles={}}}else{if(!this._styles){this._styles={}
}else{if(this._cloneStyles){this._styles=SC.beget(this._styles);this._cloneStyles=NO
}}}return this._styles}else{this._styles=d;this._cloneStyles=e||NO;this._stylesDidChange=YES;
return this}},addStyle:function(a,e){var b,d=NO,c=this.styles();if(typeof a===SC.T_STRING){if(e===undefined){return c[a]
}else{if(c[a]!==e){c[a]=e;this._stylesDidChange=YES}}}else{for(b in a){if(!a.hasOwnProperty(b)){continue
}e=a[b];if(c[b]!==e){c[b]=e;d=YES}}if(d){this._stylesDidChange=YES}}return this},removeStyle:function(a){if(!this._styles&&!this._elem){return this
}var b=this.styles();if(b[a]){b[a]=null;this._stylesDidChange=YES}},attr:function(a,e){var c,b=this._attrs,d=NO;
if(!b){this._attrs=b={}}if(typeof a===SC.T_STRING){if(e===undefined){return b[a]}else{if(b[a]!==e){b[a]=e;
this._attrsDidChange=YES}}}else{for(c in a){if(!a.hasOwnProperty(c)){continue}e=a[c];
if(b[c]!==e){b[c]=e;d=YES}}if(d){this._attrsDidChange=YES}}return this},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=a.camelize();
if(b){return c.substr(0,1).toUpperCase()+c.substr(1)}else{return c}},_dasherizeStyleName:function(a){var b=a.dasherize();
if(b.match(/^(webkit|moz|ms|o)-/)){b="-"+b}return b}});SC.RenderContext.fn.html=SC.RenderContext.fn.push;
SC.RenderContext.fn.css=SC.RenderContext.fn.addStyle;if(!SC.browser.isSafari||parseInt(SC.browser.version,10)<526){SC.RenderContext._safari3=YES
}SC.RenderContext.escapeHTML=function(d){var c,b,a;if(SC.none(d)){return d}c=this.escapeHTMLElement;
if(!c){c=this.escapeHTMLElement=document.createElement("div")}b=this.escapeTextNode;
if(!b){b=this.escapeTextNode=document.createTextNode("");c.appendChild(b)}b.data=d;
a=c.innerHTML;if(SC.RenderContext._safari3){a=a.replace(/>/g,"&gt;")}b=c=null;return a
};SC.Response=SC.Object.extend({isError:NO,errorValue:function(){return this}.property().cacheable(),errorObject:null,request:null,originalRequest:function(){var a=this.get("request");
while(a.get("source")){a=a.get("source")}return a}.property("request").cacheable(),type:function(){return this.getPath("request.type")
}.property("request").cacheable(),address:function(){return this.getPath("request.address")
}.property("request").cacheable(),isJSON:function(){return this.getPath("request.isJSON")||NO
}.property("request").cacheable(),isXML:function(){return this.getPath("request.isXML")||NO
}.property("request").cacheable(),listeners:function(){return this.getPath("request.listeners")
}.property("request").cacheable(),status:-100,headers:null,body:function(){var a=this.get("encodedBody");
if(a&&this.get("isJSON")){try{a=SC.json.decode(a)}catch(b){return SC.Error.create({message:b.name+": "+b.message,label:"Response",errorValue:this})
}}return a}.property("encodedBody").cacheable(),response:function(){return this.get("body")
}.property("body").cacheable(),isCancelled:NO,timedOut:null,timeoutTimer:null,fire:function(){var a=this.get("request"),c=a?a.get("source"):null;
if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport()
}var b=a.get("timeout");if(b){var d=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});
this.set("timeoutTimer",d)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)
}},invokeTransport:function(){this.receive(function(a){this.set("status",200)},this)
},receive:function(e,a){if(!this.get("timedOut")){var d=this.get("timeoutTimer");
if(d){d.invalidate()}this.set("timedOut",NO);var b=this.get("request");var c=b?b.get("source"):null;
SC.run(function(){if(c&&c.willReceive){c.willReceive(b,this)}e.call(a,!this.get("isCancelled"));
if(!this.get("isCancelled")&&c&&c.didReceive){c.didReceive(b,this)}if(!this.get("isCancelled")){this.notify()
}},this)}SC.Request.manager.transportDidClose(this);return this},cancel:function(){if(!this.get("isCancelled")){this.set("isCancelled",YES);
this.cancelTransport();SC.Request.manager.transportDidClose(this)}},timeoutReached:function(){if(this.get("timedOut")===null){this.set("timedOut",YES);
this.cancelTransport();SC.Request.manager.transportDidClose(this);var a=SC.$error("HTTP Request timed out","Request",408);
a.set("errorValue",this);this.set("isError",YES);this.set("errorObject",a);var b=this.get("request");
var c=b?b.get("source"):null;if(!this.get("isCancelled")&&c&&c.didTimeout){c.didTimeout(b,this)
}}},cancelTransport:function(){},_notifyListener:function(b,a){var e=b[a],f,d,c;if(!e){return NO
}f=(e.params||[]).copy();f.unshift(this);d=e.target;c=e.action;if(SC.typeOf(c)===SC.T_STRING){c=d[c]
}return c.apply(d,f)},notify:function(){var b=this.get("listeners"),a=this.get("status"),c=Math.floor(a/100)*100,d=NO;
if(!b){return this}d=this._notifyListener(b,a);if(!d){d=this._notifyListener(b,c)
}if(!d){d=this._notifyListener(b,0)}return this},toString:function(){var a=arguments.callee.base.apply(this,arguments);
return"%@<%@ %@, status=%@".fmt(a,this.get("type"),this.get("address"),this.get("status"))
}});SC.XHRResponse=SC.Response.extend({headers:function(){var c=this.get("rawRequest"),b=c?c.getAllResponseHeaders():null,a={};
if(!b){return a}b.split("\n").forEach(function(g){var d=g.indexOf(":"),e,f;if(d>=0){e=g.slice(0,d);
f=g.slice(d+1).trim();a[e]=f}},this);return a}.property("status").cacheable(),header:function(a){var b=this.get("rawRequest");
return b?b.getResponseHeader(a):null},encodedBody:function(){var b=this.get("rawRequest"),a;
if(!b){a=null}else{if(this.get("isXML")){a=b.responseXML}else{a=b.responseText}}return a
}.property("status").cacheable(),cancelTransport:function(){var a=this.get("rawRequest");
if(a){a.abort()}this.set("rawRequest",null)},invokeTransport:function(){var d,g,b,c,f;
function e(){for(var h=0;h<arguments.length;h++){try{var j=arguments[h]();return j
}catch(k){}}return NO}d=e(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")
},function(){return new ActiveXObject("Microsoft.XMLHTTP")});this.set("rawRequest",d);
c=!!this.getPath("request.isAsynchronous");if(c){if(!SC.browser.msie&&!SC.browser.opera){SC.Event.add(d,"readystatechange",this,this.finishRequest,d)
}else{g=this;b=function(){if(!g){return null}var h=g.finishRequest();if(h){g=null
}return h};d.onreadystatechange=b}}d.open(this.get("type"),this.get("address"),c);
f=this.getPath("request.headers");for(var a in f){d.setRequestHeader(a,f[a])}d.send(this.getPath("request.encodedBody"));
if(!c){this.finishRequest()}return d},finishRequest:function(c){var e=this.get("rawRequest"),a=e.readyState,d,b,f;
if(a===4){this.receive(function(g){if(!g){return}b=-1;try{b=e.status||0}catch(i){}if((b<200)||(b>=300)){try{f=e.statusText||""
}catch(h){f=""}d=SC.$error(f||"HTTP Request failed","Request",b);d.set("errorValue",this);
this.set("isError",YES);this.set("errorObject",d)}this.set("status",b)},this);if(!SC.browser.msie){SC.Event.remove(e,"readystatechange",this,this.finishRequest)
}else{e.onreadystatechange=null}return YES}return NO}});sc_require("system/response");
SC.Request=SC.Object.extend(SC.Copyable,SC.Freezable,{isAsynchronous:YES,isJSON:NO,isXML:NO,init:function(){arguments.callee.base.apply(this,arguments);
this.header("X-Requested-With","XMLHttpRequest");this.header("X-SproutCore-Version","1.4")
},headers:function(){var a=this._headers;if(!a){a=this._headers={}}return a}.property().cacheable(),responseClass:SC.XHRResponse,source:null,address:null,type:"GET",timeout:null,body:null,encodedBody:function(){var a=this.get("body");
if(a&&this.get("isJSON")){a=SC.json.encode(a)}return a}.property("isJSON","isXML","body").cacheable(),willSend:function(b,a){},didSend:function(b,a){},willReceive:function(b,a){},didReceive:function(b,a){},didTimeout:function(b,a){},COPY_KEYS:"isAsynchronous isJSON isXML address type timeout body responseClass willSend didSend willReceive didReceive".w(),copy:function(){var a={},d=this.COPY_KEYS,f=d.length,b,c,e;
while(--f>=0){b=d[f];if(this.hasOwnProperty(b)){a[b]=this.get(b)}}if(this.hasOwnProperty("listeners")){a.listeners=SC.copy(this.get("listeners"))
}if(this.hasOwnProperty("_headers")){a._headers=SC.copy(this._headers)}a.source=this.get("source")||this;
return this.constructor.create(a)},header:function(a,b){var c;if(SC.typeOf(a)===SC.T_STRING){c=this._headers;
if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("headers");
if(!c){c=this._headers={}}c[a]=b;this.propertyDidChange("headers");return this}}else{if(b===undefined){c=a;
this.beginPropertyChanges();for(a in c){if(!c.hasOwnProperty(a)){continue}this.header(a,c[a])
}this.endPropertyChanges();return this}}return this},async:function(a){if(a===undefined){a=YES
}return this.set("isAsynchronous",a)},json:function(a){if(a===undefined){a=YES}if(a){this.set("isXML",NO)
}return this.set("isJSON",a)},xml:function(a){if(a===undefined){a=YES}if(a){this.set("isJSON",NO)
}return this.set("isXML",a)},_prep:function(){var a=!!this.header("Content-Type");
if(this.get("isJSON")&&!a){this.header("Content-Type","application/json")}else{if(this.get("isXML")&&!a){this.header("Content-Type","text/xml")
}}return this},send:function(a){var b=this.get("timeout");if(b){if(!this.get("isAsynchronous")){throw"Timeout values cannot be used with synchronous requests"
}}else{if(b===0){throw"The timeout value must either not be specified or must be greater than 0"
}}if(a){this.set("body",a)}return SC.Request.manager.sendRequest(this.copy()._prep())
},resend:function(){var a=this.get("source")?this:this.copy()._prep();return SC.Request.manager.sendRequest(a)
},notify:function(a,e,d,f){var c=YES;if(SC.typeOf(a)!==SC.T_NUMBER){f=SC.A(arguments).slice(2);
d=e;e=a;a=0;c=NO}else{f=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})
}b[a]={target:e,action:d,params:f};return this}});SC.Request.mixin({getUrl:function(a){return this.create().set("address",a).set("type","GET")
},postUrl:function(b,a){var c=this.create().set("address",b).set("type","POST");if(a){c.set("body",a)
}return c},deleteUrl:function(a){return this.create().set("address",a).set("type","DELETE")
},putUrl:function(b,a){var c=this.create().set("address",b).set("type","PUT");if(a){c.set("body",a)
}return c}});SC.Request.manager=SC.Object.create(SC.DelegateSupport,{maxRequests:6,inflight:[],pending:[],sendRequest:function(b){if(!b){return null
}var a=b.get("responseClass").create({request:b});this.get("pending").pushObject(a);
this.fireRequestIfNeeded();return a},cancel:function(b){var d=this.get("pending"),c=this.get("inflight"),a;
if(d.indexOf(b)>=0){this.propertyWillChange("pending");d.removeObject(b);this.propertyDidChange("pending");
return YES}else{if(c.indexOf(b)>=0){b.cancel();c.removeObject(b);this.fireRequestIfNeeded();
return YES}else{return NO}}},cancelAll:function(){if(this.get("pending").length||this.get("inflight").length){this.set("pending",[]);
this.get("inflight").forEach(function(a){a.cancel()});this.set("inflight",[]);return YES
}else{return NO}},fireRequestIfNeeded:function(){var d=this.get("pending"),c=this.get("inflight"),a=this.get("maxRequests"),b;
if((d.length>0)&&(c.length<a)){b=d.shiftObject();c.pushObject(b);b.fire()}},transportDidClose:function(a){this.get("inflight").removeObject(a);
this.fireRequestIfNeeded()}});require("system/platform");SC.routes=SC.Object.create({_didSetup:NO,_location:null,_firstRoute:null,_extractParametersAndRoute:function(c){var a={},h=c.route||"",e,b,d,g,f,j;
e=(h.indexOf("?")<0&&h.indexOf("&")>=0)?"&":"?";b=h.split(e);h=b[0];if(b.length===1){b=[]
}else{if(b.length===2){b=b[1].split("&")}else{if(b.length>2){b.shift()}}}g=b.length;
for(d=0;d<g;++d){f=b[d].split("=");a[f[0]]=f[1]}for(j in c){if(c.hasOwnProperty(j)&&j!=="route"){a[j]=""+c[j]
}}b=[];for(j in a){b.push([j,a[j]].join("="))}a.params=e+b.join("&");a.route=h;return a
},location:function(b,c){var a;if(c!==undefined){if(c===null){c=""}if(typeof(c)==="object"){a=this._extractParametersAndRoute(c);
c=a.route+a.params}if(!SC.empty(c)||(this._location&&this._location!==c)){window.location.hash=encodeURI(c)
}this._location=c;return this}return this._location}.property(),ping:function(){var a;
if(!this._didSetup){this._didSetup=YES;if(SC.platform.supportsHashChange){this.hashChange();
SC.Event.add(window,"hashchange",this,this.hashChange)}else{a=this;this._invokeHashChange=function(){a.hashChange();
setTimeout(a._invokeHashChange,100)};this._invokeHashChange()}}},hashChange:function(a){var b=window.location.hash;
b=(b&&b.length>0)?b.slice(1,b.length):"";if(!SC.browser.isMozilla){b=decodeURI(b)
}if(this.get("location")!==b){SC.run(function(){this.set("location",b)},this)}},add:function(a,b,c){if(!this._didSetup){this.invokeLast(this.ping)
}if(c===undefined&&SC.typeOf(b)===SC.T_FUNCTION){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]
}}if(!this._firstRoute){this._firstRoute=this._Route.create()}this._firstRoute.add(a.split("/"),b,c);
return this},locationDidChange:function(){this.trigger()}.observes("location"),trigger:function(){var a=this._firstRoute,b=this.get("location"),d,c;
if(a){d=this._extractParametersAndRoute({route:b});b=d.route;delete d.route;delete d.params;
c=a.routeForParts(b.split("/"),d);if(c&&c.target&&c.method){c.method.call(c.target,d)
}}},_Route:SC.Object.extend({target:null,method:null,staticRoutes:null,dynamicRoutes:null,wildcardRoutes:null,add:function(c,b,e){var a,d;
c=SC.clone(c);if(!c||c.length===0){this.target=b;this.method=e}else{a=c.shift();switch(a.slice(0,1)){case":":a=a.slice(1,a.length);
if(!this.dynamicRoutes){this.dynamicRoutes={}}if(!this.dynamicRoutes[a]){this.dynamicRoutes[a]=this.constructor.create()
}d=this.dynamicRoutes[a];break;case"*":a=a.slice(1,a.length);if(!this.wildcardRoutes){this.wildcardRoutes={}
}d=this.wildcardRoutes[a]=this.constructor.create();break;default:if(!this.staticRoutes){this.staticRoutes={}
}if(!this.staticRoutes[a]){this.staticRoutes[a]=this.constructor.create()}d=this.staticRoutes[a]
}if(d){d.add(c,b,e)}}},routeForParts:function(d,e){var b,c,a;d=SC.clone(d);if(!d||d.length===0){return this.method?this:null
}else{b=d.shift();if(this.staticRoutes&&this.staticRoutes[b]){return this.staticRoutes[b].routeForParts(d,e)
}else{for(c in this.dynamicRoutes){a=this.dynamicRoutes[c].routeForParts(d,e);if(a){e[c]=b;
return a}}for(c in this.wildcardRoutes){d.unshift(b);e[c]=d.join("/");return this.wildcardRoutes[c].routeForParts(null,e)
}return null}}}})});SC.Task=SC.Object.extend({run:function(a){}});sc_require("tasks/task");
SC.TaskQueue=SC.Task.extend({runWhenIdle:NO,runLimit:50,interval:50,isRunning:NO,minimumIdleDuration:500,_tasks:[],hasTasks:function(){return this._tasks.length>0
}.property("taskCount").cacheable(),taskCount:function(){return this._tasks.length
}.property().cacheable(),push:function(a){this._tasks.push(a);this.notifyPropertyChange("taskCount")
},next:function(){if(this._tasks.length<1){return null}var a=this._tasks.shift();
this.notifyPropertyChange("taskCount");return a},_taskCountDidChange:function(){this._setupIdle()
}.observes("taskCount"),_setupIdle:function(){if(this.get("runWhenIdle")&&!this._idleIsScheduled&&this.get("taskCount")>0){var a=this;
setTimeout(function(){a._idleEntry()},this.get("interval"));this._idleIsScheduled=YES
}},_idleEntry:function(){this._idleIsScheduled=NO;var a=SC.RunLoop.lastRunLoopEnd;
if(Date.now()-a>this.get("minimumIdleDuration")){this.run()}else{SC.run(function(){this._setupIdle()
},this);SC.RunLoop.lastRunLoopEnd=a}},run:function(a){this.set("isRunning",YES);if(!a){a=this.get("runLimit")
}var b,c=Date.now();while(b=this.next()){b.run(this);if(Date.now()-c>a){break}}this._setupIdle();
this.set("isRunning",NO)}});SC.backgroundTaskQueue=SC.TaskQueue.create({runWhenIdle:YES});
SC.time=function(a){var b=SC.beget(fn);b.value=timeOffset;return b};(function(){var a=new Date();
SC.mixin(SC.time,{month:function(c,b){a.setTime(c);if(b===undefined){return a.getMonth()
}a.setMonth(b);return a.getTime()},utc:function(b){a.setTime(b);return b+(a.getTimezoneOffset()*60*1000)
},local:function(b){a.setTime(b);return b-(a.getTimezoneOffset()*60*1000)},parse:function(b){},format:function(b){}})
})();SC.time.fmt=SC.time.format;SC.time.fn={done:function(){return this.value}};"month day year".split(" ").forEach(function(a){SC.time.fn[a]=function(b){if(b===undefined){return SC.time[a](this.value)
}else{this.value=SC.time[a](this.value,b);return this}}});var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");
var DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");
function LZ(a){return(a<0||a>9?"":"0")+a}SC.Locale.define("en",{longMonthNames:"January February March April May".split(" "),shortMonthNames:[],shortDateFormat:"dd/mm/yy",longDateFormat:""});
SC.mixin(Date,{isDate:function(c,b){var a=Date.getDateFromFormat(c,b);if(a==0){return false
}return true},compareDates:function(e,f,c,d){var b=Date.getDateFromFormat(e,f);var a=Date.getDateFromFormat(c,d);
if(b==0||a==0){return -1}else{if(b>a){return 1}}return 0},getDateFromFormat:function(A,q){A=A+"";
q=q+"";var z=0;var l=0;var s="";var f="";var w="";var h,g;var b=new Date();var j=b.getFullYear();
var v=b.getMonth()+1;var u=1;var d=b.getHours();var r=b.getMinutes();var n=b.getSeconds();
var k="";var o=SC.Locale.currentLocale;while(l<q.length){s=q.charAt(l);f="";while((q.charAt(l)==s)&&(l<q.length)){f+=q.charAt(l++)
}if(f=="yyyy"||f=="yy"||f=="y"){if(f=="yyyy"){h=4;g=4}if(f=="yy"){h=2;g=2}if(f=="y"){h=2;
g=4}j=Date._getInt(A,z,h,g);if(j==null){return 0}z+=j.length;if(j.length==2){if(j>70){j=1900+(j-0)
}else{j=2000+(j-0)}}}else{if(f=="MMM"||f=="NNN"){v=0;for(var p=0;p<MONTH_NAMES.length;
p++){var e=MONTH_NAMES[p];if(A.substring(z,z+e.length).toLowerCase()==e.toLowerCase()){if(f=="MMM"||(f=="NNN"&&p>11)){v=p+1;
if(v>12){v-=12}z+=e.length;break}}}if((v<1)||(v>12)){return 0}}else{if(f=="EE"||f=="E"){for(var p=0;
p<DAY_NAMES.length;p++){var m=DAY_NAMES[p];if(A.substring(z,z+m.length).toLowerCase()==m.toLowerCase()){z+=m.length;
break}}}else{if(f=="MM"||f=="M"){v=Date._getInt(A,z,f.length,2);if(v==null||(v<1)||(v>12)){return 0
}z+=v.length}else{if(f=="dd"||f=="d"){u=Date._getInt(A,z,f.length,2);if(u==null||(u<1)||(u>31)){return 0
}z+=u.length}else{if(f=="hh"||f=="h"){d=Date._getInt(A,z,f.length,2);if(d==null||(d<1)||(d>12)){return 0
}z+=d.length}else{if(f=="HH"||f=="H"){d=Date._getInt(A,z,f.length,2);if(d==null||(d<0)||(d>23)){return 0
}z+=d.length}else{if(f=="KK"||f=="K"){d=Date._getInt(A,z,f.length,2);if(d==null||(d<0)||(d>11)){return 0
}z+=d.length}else{if(f=="kk"||f=="k"){d=Date._getInt(A,z,f.length,2);if(d==null||(d<1)||(d>24)){return 0
}z+=d.length;d--}else{if(f=="mm"||f=="m"){r=Date._getInt(A,z,f.length,2);if(r==null||(r<0)||(r>59)){return 0
}z+=r.length}else{if(f=="ss"||f=="s"){n=Date._getInt(A,z,f.length,2);if(n==null||(n<0)||(n>59)){return 0
}z+=n.length}else{if(f=="a"){if(A.substring(z,z+2).toLowerCase()=="am"){k="AM"}else{if(A.substring(z,z+2).toLowerCase()=="pm"){k="PM"
}else{return 0}}z+=2}else{if(A.substring(z,z+f.length)!=f){return 0}else{z+=f.length
}}}}}}}}}}}}}}if(z!=A.length){return 0}if(v==2){if(((j%4==0)&&(j%100!=0))||(j%400==0)){if(u>29){return 0
}}else{if(u>28){return 0}}}if((v==4)||(v==6)||(v==9)||(v==11)){if(u>30){return 0}}if(d<12&&k=="PM"){d=d-0+12
}else{if(d>11&&k=="AM"){d-=12}}var a=new Date(j,v-1,u,d,r,n);return a.getTime()},parseDate:function(k){var g=(arguments.length==2)?arguments[1]:false;
generalFormats=new Array("E NNN dd HH:mm:ss UTC yyyy","y-M-d","y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","d MMM y","d.MMM.y","y MMM d","y.MMM.d");
monthFirst=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");dateFirst=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");
var b=new Array("generalFormats",g?"dateFirst":"monthFirst",g?"monthFirst":"dateFirst");
var h=null;h=0;var e=new Date().getTime();switch(k.toLowerCase()){case"yesterday".loc():h=e-(24*60*60*1000);
break;case"today".loc():case"now".loc():h=e;break;case"tomorrow".loc():h=e+(24*60*60*1000);
break}if(h>0){return new Date(h)}for(var f=0;f<b.length;f++){var a=window[b[f]];for(var c=0;
c<a.length;c++){h=Date.getDateFromFormat(k,a[c]);if(h==0){h=Date.getDateFromFormat(k,a[c]+" H:m:s")
}if(h==0){h=Date.getDateFromFormat(k,a[c]+" h:m:s a")}if(h!=0){return new Date(h)
}}}return null},_isInteger:function(c){var b="1234567890";for(var a=0;a<c.length;
a++){if(b.indexOf(c.charAt(a))==-1){return false}}return true},_getInt:function(f,d,e,c){for(var a=c;
a>=e;a--){var b=f.substring(d,d+a);if(b.length<e){return null}if(Date._isInteger(b)){return b
}}return null}});SC.mixin(Date.prototype,{format:function(F){F=F+"";var J=this;var l="";
var w=0;var I="";var f="";var j=J.getFullYear()+"";var g=J.getMonth()+1;var G=J.getDate();
var o=J.getDay();var n=J.getHours();var z=J.getMinutes();var q=J.getSeconds();var u,v,b,r,L,e,D,C,A,p,O,n,N,i,a,B;
var x=new Object();if(j.length<4){j=""+(j-0+1900)}x.y=""+j;x.yyyy=j;x.yy=j.substring(2,4);
x.M=g;x.MM=LZ(g);x.MMM=MONTH_NAMES[g-1];x.NNN=MONTH_NAMES[g+11];x.d=G;x.dd=LZ(G);
x.E=DAY_NAMES[o+7];x.EE=DAY_NAMES[o];x.H=n;x.HH=LZ(n);if(n==0){x.h=12}else{if(n>12){x.h=n-12
}else{x.h=n}}x.hh=LZ(x.h);if(n>11){x.K=n-12}else{x.K=n}x.k=n+1;x.KK=LZ(x.K);x.kk=LZ(x.k);
if(n>11){x.a="PM"}else{x.a="AM"}x.m=z;x.mm=LZ(z);x.s=q;x.ss=LZ(q);while(w<F.length){I=F.charAt(w);
f="";while((F.charAt(w)==I)&&(w<F.length)){f+=F.charAt(w++)}if(x[f]!=null){l=l+x[f]
}else{l=l+f}}return l},utcFormat:function(){return(new Date(this.getTime()+(this.getTimezoneOffset()*60*1000))).format("E NNN dd HH:mm:ss UTC yyyy")
}});SC.Timer=SC.Object.extend({target:null,action:null,isPooled:NO,interval:0,startTime:null,repeats:NO,until:null,isPaused:NO,isScheduled:NO,isValid:YES,lastFireTime:0,fireTime:function(){if(!this.get("isValid")){return -1
}var e=this.get("startTime");if(!e||e===0){return -1}var a=this.get("interval"),c=this.get("lastFireTime");
if(c<e){c=e}var b;if(this.get("repeats")){if(a===0){b=c}else{b=e+(Math.floor((c-e)/a)+1)*a
}}else{b=e+a}var d=this.get("until");if(d&&d>0&&b>d){b=d}return b}.property("interval","startTime","repeats","until","isValid","lastFireTime").cacheable(),schedule:function(){if(!this.get("isValid")){return this
}this.beginPropertyChanges();if(!this.startTime){this.set("startTime",SC.RunLoop.currentRunLoop.get("startTime"))
}var a=this.get("fireTime"),b=this.get("lastFireTime");if(a>=b){this.set("isScheduled",YES);
SC.RunLoop.currentRunLoop.scheduleTimer(this,a)}this.endPropertyChanges();return this
},invalidate:function(){this.beginPropertyChanges();this.set("isValid",NO);SC.RunLoop.currentRunLoop.cancelTimer(this);
this.action=this.target=null;this.endPropertyChanges();if(this.get("isPooled")){SC.Timer.returnTimerToPool(this)
}return this},fire:function(){var b=Date.now();this.set("lastFireTime",b);var a=this.get("fireTime");
if(!this.get("isPaused")){this.performAction()}if(a>b){this.schedule()}else{this.invalidate()
}},performAction:function(){var a=SC.typeOf(this.action);if(a==SC.T_FUNCTION){this.action.call((this.target||this),this)
}else{if(a===SC.T_STRING){if(this.action.indexOf(".")>=0){var e=this.action.split(".");
var c=e.pop();var d=SC.objectForPropertyPath(e,window);var b=d.get?d.get(c):d[c];
if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(d,this)}else{throw"%@: Timer could not find a function at %@".fmt(this,this.action)
}}else{SC.RootResponder.responder.sendAction(this.action,this.target,this)}}}},init:function(){arguments.callee.base.apply(this,arguments);
if(this.startTime instanceof Date){this.startTime=this.startTime.getTime()}if(this.until instanceof Date){this.until=this.until.getTime()
}},RESET_DEFAULTS:{target:null,action:null,isPooled:NO,isPaused:NO,isScheduled:NO,isValid:YES,interval:0,repeats:NO,until:null,startTime:null,lastFireTime:0},reset:function(b){if(!b){b=SC.EMPTY_HASH
}this.propertyWillChange("fireTime");var c=this.RESET_DEFAULTS;for(var a in c){if(!c.hasOwnProperty(a)){continue
}this[a]=SC.none(b[a])?c[a]:b[a]}this.propertyDidChange("fireTime");return this},removeFromTimerQueue:function(c){var b=this._timerQueuePrevious,a=this._timerQueueNext;
if(!b&&!a&&c!==this){return c}if(b){b._timerQueueNext=a}if(a){a._timerQueuePrevious=b
}this._timerQueuePrevious=this._timerQueueNext=null;return(c===this)?a:c},scheduleInTimerQueue:function(c,b){this._timerQueueRunTime=b;
var a=c;var d=null;while(a&&a._timerQueueRunTime<b){d=a;a=a._timerQueueNext}if(d){d._timerQueueNext=this;
this._timerQueuePrevious=d}if(a){a._timerQueuePrevious=this;this._timerQueueNext=a
}return(a===c)?this:c},collectExpiredTimers:function(c,a){if(this._timerQueueRunTime>a){return this
}c.push(this);var b=this._timerQueueNext;this._timerQueueNext=null;if(b){b._timerQueuePrevious=null
}return b?b.collectExpiredTimers(c,a):null}});SC.Timer.schedule=function(a){var b;
if(!a||SC.none(a.isPooled)||a.isPooled){b=this.timerFromPool(a)}else{b=this.create(a)
}return b.schedule()};SC.Timer.timerFromPool=function(a){var b=this._timerPool;if(!b){b=this._timerPool=[]
}var c=b.pop();if(!c){c=this.create()}return c.reset(a)};SC.Timer.returnTimerToPool=function(a){if(!this._timerPool){this._timerPool=[]
}this._timerPool.push(a);return this};SC.UserDefaults=SC.Object.extend({ready:NO,userDomain:null,appDomain:null,_defaults:null,_safari3DB:null,defaults:function(a){this._defaults=a;
this.allPropertiesDidChange()},readDefault:function(h){var c=undefined,a,i,g,j,f;
h=this._normalizeKeyName(h);a=this._userKeyName(h);if(this._written){c=this._written[a]
}if(SC.browser.msie=="7.0"){i=document.body;try{i.load("SC.UserDefaults")}catch(b){console.err("Couldn't load userDefaults in IE7: "+b.description)
}}else{if(this.HTML5DB_noLocalStorage){f=this._safari3DB}else{i=window.localStorage;
if(!i&&window.globalStorage){i=window.globalStorage[window.location.hostname]}}}if(i||f){g=["SC.UserDefaults",a].join("-at-");
if(SC.browser.msie=="7.0"){c=i.getAttribute(g.replace(/\W/gi,""))}else{if(f){c=this.dataHash[g]
}else{c=i[g]}}if(!SC.none(c)){try{c=SC.json.decode(c)}catch(d){c=undefined}}else{c=undefined
}}j=this.delegate;if(j&&j.userDefaultsNeedsDefault){c=j.userDefaultsNeedsDefault(this,h,a)
}if((c===undefined)&&this._defaults){c=this._defaults[a]||this._defaults[h]}return c
},writeDefault:function(j,h){var d,b,k,i,l,g;j=this._normalizeKeyName(j);d=this._userKeyName(j);
b=this._written;if(!b){b=this._written={}}b[d]=h;if(SC.browser.msie=="7.0"){k=document.body
}else{if(this.HTML5DB_noLocalStorage){g=this._safari3DB}else{k=window.localStorage;
if(!k&&window.globalStorage){k=window.globalStorage[window.location.hostname]}}}i=["SC.UserDefaults",d].join("-at-");
if(k||g){var a=SC.json.encode(h);if(SC.browser.msie=="7.0"){k.setAttribute(i.replace(/\W/gi,""),a);
k.save("SC.UserDefaults")}else{if(g){var c=this;g.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[i],function(){e.executeSql("insert into SCLocalStorage(key, value) VALUES ('"+i+"', '"+a+"');",[],c._nullDataHandler,c.killTransaction)
})});this.dataHash[i]=a}else{try{k[i]=a}catch(f){console.error("Failed using localStorage. "+f)
}}}}l=this.delegate;if(l&&l.userDefaultsDidChange){l.userDefaultsDidChange(this,j,h,d)
}return this},resetDefault:function(g){var f,a,b,d,e,c;f=this._normalizeKeyName(g);
a=this._userKeyName(f);this.propertyWillChange(g);this.propertyWillChange(f);b=this._written;
if(b){delete b[a]}if(SC.browser.msie=="7.0"){d=document.body}else{if(this.HTML5DB_noLocalStorage){c=this._safari3DB
}else{d=window.localStorage;if(!d&&window.globalStorage){d=window.globalStorage[window.location.hostname]
}}}e=["SC.UserDefaults",a].join("-at-");if(d){if(SC.browser.msie=="7.0"){d.setAttribute(e.replace(/\W/gi,""),null);
d.save("SC.UserDefaults")}else{if(c){var h=this;c.transaction(function(i){i.executeSql("delete from SCLocalStorage where key = ?",[e],null)
});delete this.dataHash[e]}else{delete d[e]}}}this.propertyDidChange(g);this.propertyDidChange(f);
return this},unknownProperty:function(a,b){if(b===undefined){return this.readDefault(a)
}else{this.writeDefault(a,b);return b}},_normalizeKeyName:function(a){if(a.indexOf(":")<0){var b=this.get("appDomain")||"app";
a=[b,a].join(":")}return a},_userKeyName:function(b){var a=this.get("userDomain")||"(anonymous)";
return[a,b].join("-at-")},_domainDidChange:function(){var a=NO;if(this.get("userDomain")!==this._scud_userDomain){this._scud_userDomain=this.get("userDomain");
a=YES}if(this.get("appDomain")!==this._scud_appDomain){this._scud_appDomain=this.get("appDomain");
a=YES}if(a){this.allPropertiesDidChange()}}.observes("userDomain","appDomain"),init:function(){arguments.callee.base.apply(this,arguments);
if(SC.userDefaults&&SC.userDefaults.get("dataHash")){var f=SC.userDefaults.get("dataHash");
if(f){this.dataHash=SC.userDefaults.get("dataHash")}}this._scud_userDomain=this.get("userDomain");
this._scud_appDomain=this.get("appDomain");if(SC.browser.msie=="7.0"){document.body.addBehavior("#default#userData")
}this.HTML5DB_noLocalStorage=((parseInt(SC.browser.safari,0)>523)&&(parseInt(SC.browser.safari,0)<528));
if(this.HTML5DB_noLocalStorage){var d;try{if(!window.openDatabase){console.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");
return}else{var a="scdb",c="1.0",b="SproutCore database",i=65536;d=openDatabase(a,c,b,i)
}}catch(h){console.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");
return}if(d){var g=this;d.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS SCLocalStorage(key TEXT NOT NULL PRIMARY KEY, value TEXT NOT NULL);",[],g._nullDataHandler,g.killTransaction)
});d.transaction(function(e){e.parent=g;e.executeSql("SELECT * from SCLocalStorage;",[],function(o,l){var m={},n;
for(var k=0,j=l.rows.length;k<j;k++){n=l.rows.item(k);m[n.key]=n.value}o.parent.dataHash=m;
SC.run(function(){SC.userDefaults.set("ready",YES)})},g.killTransaction)});this._safari3DB=d
}}else{this.set("ready",YES)}},_killTransaction:function(b,a){return true},_nullDataHandler:function(b,a){},readyCallback:function(a,b){this.func=b;
this.ob=a},readyChanged:function(){if(this.ready===YES){var a=this.func;if(a){a.apply(this.ob)
}}}.observes("ready")});SC.userDefaults=SC.UserDefaults.create();sc_require("system/browser");
SC.mixin({_downloadFrames:0,_copy_computed_props:["maxWidth","maxHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","fontFamily","fontSize","fontStyle","fontWeight","fontVariant","lineHeight","whiteSpace"],download:function(d){var a=document.createElement("iframe"),c="DownloadFrame_"+this._downloadFrames;
SC.$(a).attr("id",c);a.style.border="10px";a.style.width="0px";a.style.height="0px";
a.style.position="absolute";a.style.top="-10000px";a.style.left="-10000px";if(!SC.browser.isSafari){SC.$(a).attr("src",d)
}document.getElementsByTagName("body")[0].appendChild(a);if(SC.browser.isSafari){SC.$(a).attr("src",d)
}this._downloadFrames=this._downloadFrames+1;if(!SC.browser.isSafari){var b=function(){document.body.removeChild(document.getElementById(c));
c=null};b.invokeLater(null,2000)}a=null},normalizeURL:function(a){if(a.slice(0,1)=="/"){a=window.location.protocol+"//"+window.location.host+a
}else{if((a.slice(0,5)=="http:")||(a.slice(0,6)=="https:")){}else{a=window.location.href+"/"+a
}}return a},isPercentage:function(a){return(a<1&&a>0)},minX:function(a){return a.x||0
},maxX:function(a){return(a.x||0)+(a.width||0)},midX:function(a){return(a.x||0)+((a.width||0)/2)
},minY:function(a){return a.y||0},maxY:function(a){return(a.y||0)+(a.height||0)},midY:function(a){return(a.y||0)+((a.height||0)/2)
},centerX:function(b,a){return(a.width-b.width)/2},centerY:function(b,a){return(a.height-b.height)/2
},pointInRect:function(a,b){return(a.x>=SC.minX(b))&&(a.y>=SC.minY(b))&&(a.x<=SC.maxX(b))&&(a.y<=SC.maxY(b))
},rectsEqual:function(b,a,c){if(!b||!a){return(b==a)}if(!c&&c!==0){c=0.1}if((b.y!=a.y)&&(Math.abs(b.y-a.y)>c)){return NO
}if((b.x!=a.x)&&(Math.abs(b.x-a.x)>c)){return NO}if((b.width!=a.width)&&(Math.abs(b.width-a.width)>c)){return NO
}if((b.height!=a.height)&&(Math.abs(b.height-a.height)>c)){return NO}return YES},intersectRects:function(b,a){var c={x:Math.max(SC.minX(b),SC.minX(a)),y:Math.max(SC.minY(b),SC.minY(a)),width:Math.min(SC.maxX(b),SC.maxX(a)),height:Math.min(SC.maxY(b),SC.maxY(a))};
c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},unionRects:function(b,a){var c={x:Math.min(SC.minX(b),SC.minX(a)),y:Math.min(SC.minY(b),SC.minY(a)),width:Math.max(SC.maxX(b),SC.maxX(a)),height:Math.max(SC.maxY(b),SC.maxY(a))};
c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},cloneRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}
},stringFromRect:function(a){if(!a){return"(null)"}else{return"{x:"+a.x+", y:"+a.y+", width:"+a.width+", height:"+a.height+"}"
}},stringFromLayout:function(e){var d=["maxHeight","maxWidth","minHeight","minWidth","centerY","centerX","width","height","bottom","right","top","left"],a=[],c,b=d.length;
while(--b>=0){c=d[b];if(e.hasOwnProperty(c)){a.push(c+":"+e[c])}}return"{"+a.join(", ")+"}"
},heightForString:function(h,c,b,a,g){var e=this._heightCalcElement,f,i;if(!g){h=SC.RenderContext.escapeHTML(h)
}f=(a&&SC.typeOf(a)===SC.T_ARRAY)?a.join(" "):"";if(!c){c=100}if(!e){e=this._heightCalcElement=document.createElement("div");
document.body.insertBefore(e,null)}b=b+"; width: "+c+"px; left: "+(-1*c)+"px; position: absolute";
var d=SC.$(e);d.attr("style",b);if(f!==""){d.attr("class",f)}e.innerHTML=h;i=e.clientHeight;
e=null;return i},prepareStringMeasurement:function(n,a){var k=this._metricsCalculationElement,h,o,c,d;
h=SC.A(a).join(" ");if(!k){k=this._metricsCalculationElement=document.createElement("div");
document.body.insertBefore(k,null)}d=SC.$(k);if(SC.typeOf(n)!=SC.T_STRING){var g=null;
if(document.defaultView&&document.defaultView.getComputedStyle){g=document.defaultView.getComputedStyle(n,null)
}else{g=n.currentStyle}c=g.cssText;if(!c||c.trim()===""){var m=this._copy_computed_props;
for(var j=0;j<m.length;j++){var b=m[j],f=g[b];k.style[b]=f}var l=k.style;if(l.font===""){var e="";
if(l.fontStyle){e+=l.fontStyle+" "}if(l.fontVariant){e+=l.fontVariant+" "}if(l.fontWeight){e+=l.fontWeight+" "
}if(l.fontSize){e+=l.fontSize}else{e+="10px"}if(l.lineHeight){e+="/"+l.lineHeight
}e+=" ";if(l.fontFamily){e+=l.fontFamily}else{l+="sans-serif"}k.style.font=e}SC.mixin(k.style,{left:"0px",top:"0px",position:"absolute",bottom:"auto",right:"auto",width:"auto",height:"auto"})
}else{d.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")
}g=null}else{c=n;d.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")
}k.className=h;k=null},teardownStringMeasurement:function(){var a=this._metricsCalculationElement;
a.innerHTML="";a.className="";a.setAttribute("style","");a=null},measureString:function(c,b){if(!b){c=SC.RenderContext.escapeHTML(c)
}var d=this._metricsCalculationElement;if(!d){throw"measureString requires a string measurement environment to be set up. Did you mean metricsForString?"
}if(typeof d.innerText!="undefined"){d.innerText=c}else{d.textContent=c}var a={width:d.clientWidth,height:d.clientHeight};
d=null;return a},metricsForString:function(c,d,e,b){if(!b){c=SC.RenderContext.escapeHTML(c)
}SC.prepareStringMeasurement(d,e);var a=SC.measureString(c);SC.teardownStringMeasurement();
return a},viewportOffset:function(c){if(c.getBoundingClientRect){var d=c.getBoundingClientRect();
return{x:d.left,y:d.top}}var i=0,e=0,j,g,f,k,b,h=c,a=SC.browser.mozilla>=3;while(h){j=SC.$(h);
e+=(h.offsetTop||0);if(!a||(h!==c)){e+=(h.clientTop||0)}i+=(h.offsetLeft||0);if(!a||(h!==c)){i+=(h.clientLeft||0)
}if(SC.browser.mozilla){g=j.attr("overflow");if(g!=="visible"){f=parseInt(j.attr("borderLeftWidth"),0)||0;
k=parseInt(j.attr("borderTopWidth"),0)||0;if(c!==h){f*=2;k*=2}i+=f;e+=k}b=h.offsetParent;
if(SC.browser.mozilla.match(/1[.]9/)&&b){e-=b.clientTop;i-=b.clientLeft}}if(h.offsetParent==document.body&&j.attr("position")==="absolute"){break
}h=h.offsetParent}h=c;while(h){if(!SC.browser.isOpera||h.tagName==="BODY"){e-=h.scrollTop||0;
i-=h.scrollLeft||0}h=h.parentNode}return{x:i,y:e}},ZERO_POINT:{x:0,y:0},ZERO_RANGE:{start:0,length:0},RANGE_NOT_FOUND:{start:0,length:-1},valueInRange:function(b,a){return(b>=0)&&(b>=a.start)&&(b<(a.start+a.length))
},minRange:function(a){return a.start},maxRange:function(a){return(a.length<0)?-1:(a.start+a.length)
},unionRanges:function(c,b){if((c==null)||(c.length<0)){return b}if((b==null)||(b.length<0)){return c
}var d=Math.min(c.start,b.start),a=Math.max(SC.maxRange(c),SC.maxRange(b));return{start:d,length:a-d}
},intersectRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND
}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var d=Math.max(SC.minRange(c),SC.minRange(b)),a=Math.min(SC.maxRange(c),SC.maxRange(b));
if(a<d){return SC.RANGE_NOT_FOUND}return{start:d,length:a-d}},subtractRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND
}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var a=Math.max(SC.minRange(c),SC.minRange(b)),d=Math.min(SC.maxRange(c),SC.maxRange(b));
if(a<d){return SC.RANGE_NOT_FOUND}return{start:d,length:a-d}},cloneRange:function(a){return{start:a.start,length:a.length}
},rangesEqual:function(b,a){if(b===a){return true}if(b==null){return a.length<0}if(a==null){return b.length<0
}return(b.start==a.start)&&(b.length==a.length)},convertHsvToHex:function(j,w,o){var a=0,k=0,n=0;
if(o>0){var e=(j==1)?0:Math.floor(j*6),l=(j==1)?0:(j*6)-e,d=o*(1-w),c=o*(1-(w*l)),u=o*(1-(w*(1-l))),m=[[o,u,d],[c,o,d],[d,o,u],[d,c,o],[u,d,o],[o,d,c]];
a=Math.round(255*m[e][0]);k=Math.round(255*m[e][1]);n=Math.round(255*m[e][2])}return this.parseColor("rgb("+a+","+k+","+n+")")
},convertHexToHsv:function(g){var c=this.expandColor(g),a=Math.max(Math.max(c[0],c[1]),c[2]),d=Math.min(Math.min(c[0],c[1]),c[2]),f=(a===0)?0:(1-d/a),b=a/255,e=(a==d)?0:((a==c[0])?((c[1]-c[2])/(a-d)/6):((a==c[1])?((c[2]-c[0])/(a-d)/6+1/3):((c[0]-c[1])/(a-d)/6+2/3)));
e=(e<0)?(e+1):((e>1)?(e-1):e);return[e,f,b]},PARSE_COLOR_RGBRE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEXRE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,expandColor:function(b){var c,e,d,a;
c=this.parseColor(b);if(c){e=parseInt(c.slice(1,3),16);d=parseInt(c.slice(3,5),16);
a=parseInt(c.slice(5,7),16);return[e,d,a]}},parseColor:function(d){var e=0,a="#",c,b;
if(c=this.PARSE_COLOR_RGBRE.exec(d)){for(e=1;e<=3;e++){b=Math.max(0,Math.min(255,parseInt(c[e],0)));
a+=this.toColorPart(b)}return a}if(c=this.PARSE_COLOR_HEXRE.exec(d)){if(c[1].length==3){for(e=0;
e<3;e++){a+=c[1].charAt(e)+c[1].charAt(e)}return a}return"#"+c[1]}return false},toColorPart:function(a){if(a>255){a=255
}var b=a.toString(16);if(a<16){return"0"+b}return b},getStyle:function(a,b){var c="";
if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)
}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()
});c=a.currentStyle[b]}}return c},uniJapaneseConvert:function(e){var a,c="",b,d;for(b=0,d=e.length;
b<d;b++){a=e.charCodeAt(b);a=((a>=65281&&a<=65392)?a-65248:a);a=(a===12540?45:a);
c=c+String.fromCharCode(a)}return c}});require("tasks/task");SC.didPreloadBundle=function(){};
SC.PreloadBundleTask=SC.Task.extend({bundle:null,target:"SC",action:"preloaded",run:function(a){var b;
if(b=this.get("bundle")){var c=Date.now();SC.loadBundle(this.get("bundle"),this.get("target"),this.get("action"))
}}});SC.VALIDATE_OK=YES;SC.VALIDATE_NO_CHANGE=NO;SC.Validator=SC.Object.extend({fieldValueForObject:function(b,c,a){return b
},objectForFieldValue:function(c,b,a){return c},validate:function(a,b){return true
},validateError:function(a,b){return SC.$error("Invalid.General(%@)".loc(b.get("fieldValue")),b.get("fieldKey"))
},validateChange:function(b,c,a){return this.validate(b,c)?SC.VALIDATE_OK:this.validateError(b,c)
},validateSubmit:function(a,b){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)
},validatePartial:function(a,b){if(!b.get("isValid")){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)
}else{return SC.VALIDATE_NO_CHANGE}},validateKeyDown:function(b,c,a){return true},attachTo:function(a,b){},detachFrom:function(a,b){}});
SC.Validator.mixin({OK:true,NO_CHANGE:false,findFor:function(e,g,f){var c;if(!f){return
}if(f instanceof SC.Validator){c=f}else{if(f.isClass){c=f.create()}else{if(SC.typeOf(f)===SC.T_STRING){var b=null;
var a=f.match(/^(.+)\[(.*)\]/);if(a){f=a[1];b=a[2]}f=f.classify();var d=SC.Validator[f];
if(SC.none(d)){throw"validator %@ not found for %@".fmt(f,g)}else{if(b){if(!e){throw"named validator (%@) could not be found for field %@ because the field does not belong to a form".fmt(b,g)
}if(!e._validatorHash){e._validatorHash={}}c=(b)?e._validatorHash[b]:null;if(!c){c=d.create()
}if(b){e._validatorHash[b]=c}}else{c=d.create()}}}}}return c},fieldValueForObject:function(a,b,c){if(this.prototype&&this.prototype.fieldValueForObject){return this.prototype.fieldValueForObject(a,b,c)
}else{return null}},objectForFieldValue:function(b,a,c){if(this.prototype&&this.prototype.objectForFieldValue){return this.prototype.objectForFieldValue(b,a,c)
}else{return null}}});sc_require("validators/validator");SC.Validator.CreditCard=SC.Validator.extend({fieldValueForObject:function(a,b,c){if(typeof(a)=="string"&&a.length==16){a=[a.slice(0,4),a.slice(4,8),a.slice(8,12),a.slice(12,16)].join(" ")
}return a},objectForFieldValue:function(b,a,c){return b.replace(/[\s-\.\:]/g,"")},validate:function(a,b){return this.checkNumber(b.get("fieldValue"))
},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.CreditCard(%@)".loc(a),a)
},validateKeyDown:function(b,c,a){return !!a.match(/[0-9\- ]/)},checkNumber:function(h){if(!h||h.length===0){return YES
}h=h.replace(/[^0-9]/g,"");var a="0123456789";var g=h.length;var f=parseInt(h,0);
var l=h.toString();l=l.replace(/^\s+|\s+$/g,"");var k=0;var n=true;var b=false;var m;
var d;for(var c=0;c<g;c++){m=""+l.substring(c,c+1);if(a.indexOf(m)=="-1"){n=false
}}if(!n){b=false}if((g===0)&&(b)){b=false}else{if(g>=15){for(var e=g;e>0;e--){d=parseInt(f,0)%10;
d=parseInt(d,0);k+=d;e--;f=f/10;d=parseInt(f,0)%10;d=d*2;switch(d){case 10:d=1;break;
case 12:d=3;break;case 14:d=5;break;case 16:d=7;break;case 18:d=9;break;default:d=d
}f=f/10;k+=d}if((k%10)===0){b=true}else{b=false}}}return b}});sc_require("validators/validator");
SC.Validator.Date=SC.Validator.extend({format:"NNN d, yyyy h:mm:ss a",fieldValueForObject:function(b,c,d){var a;
if(typeof(b)==="number"){a=new Date(b)}else{if(b instanceof Date){a=b}}if(a){b=a.format(this.get("format"))
}return b},objectForFieldValue:function(c,b,d){if(c){var a=Date.parseDate(c);c=(a)?a.getTime():null
}return c}});require("validators/validator");SC.Validator.DateTime=SC.Validator.extend({format:"%d/%m/%Y",fieldValueForObject:function(a,b,c){if(SC.kindOf(a,SC.DateTime)){a=a.toFormattedString(this.get("format"))
}else{a=null}return a},objectForFieldValue:function(b,a,c){if(b){b=SC.DateTime.parse(b,this.get("format"))
}return b}});sc_require("validators/validator");SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return(b.get("fieldValue")||"").match(/.+@.+\...+/)
},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.Email(%@)".loc(a),a)
}});SC.Validator.EmailOrEmpty=SC.Validator.Email.extend({validate:function(a,c){var b=c.get("fieldValue");
return(b&&b.length>0)?b.match(/.+@.+\...+/):true}});sc_require("validators/validator");
SC.Validator.NotEmpty=SC.Validator.extend({validate:function(a,c){var b=c.get("fieldValue");
if(SC.none(b)){return NO}if(!SC.none(b.length)){return b.length>0}return YES},validateError:function(b,c){var a=c.get("errorLabel")||"Field";
return SC.$error("Invalid.NotEmpty(%@)".loc(a.capitalize()),c.get("errorLabel"))}});
sc_require("validators/validator");SC.Validator.Number=SC.Validator.extend({places:0,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(this.get("places"));
break;case SC.T_NULL:case SC.T_UNDEFINED:a="";break}return a},objectForFieldValue:function(c,b,d){var a;
c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null
}else{if(this.get("places")>0){c=parseFloat(c)}else{if(c.length==1&&c.match(/-/)){c=null
}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""
}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c},validate:function(a,c){var b=c.get("fieldValue");
return(b==="")||!(isNaN(b)||isNaN(parseFloat(b)))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";
return SC.$error("Invalid.Number(%@)".loc(a),a)},validateKeyDown:function(b,c,a){var d=c.$input().val();
if(!d){d=""}d+=a;if(this.get("places")===0){if(a.length===0){return true}else{return d.match(/^[\-{0,1}]?[0-9,\0]*/)[0]===d
}}else{if(a.length===0){return true}else{return d.match(/^[\-{0,1}]?[0-9,\0]*\.?[0-9\0]+/)===d
}}}});sc_require("validators/validator");SC.Validator.Password=SC.Validator.extend({attachTo:function(a,b){arguments.callee.base.apply(this,arguments);
if(!this.fields){this.fields=[]}this.fields.push(b)},validate:function(e){if(!this.fields||this.fields.length===0){return true
}var d=false;var b=false;var a=true;var c=this.fields[0].get("fieldValue");this.fields.forEach(function(g){var f=g.get("fieldValue");
if(f!=c){a=false}if(!f||f.length===0){d=true}if(f&&f.length>0){b=true}});if(e){return(b===false)?false:a
}else{return(d===true)?true:a}},updateFields:function(c,b){if(!this.fields||this.fields.length===0){return true
}var a="Invalid.Password".loc();var d=this._field;this.fields.forEach(function(e){var g=(b)?null:((e==d)?a:"");
c.setErrorFor(e,g)});return(b)?SC.VALIDATE_OK:a},validateChange:function(b,c,a){return this.updateFields(b,this.validate(false))
},validateSubmit:function(a,b){return this.updateFields(a,this.validate(true))},validatePartial:function(b,c){var a=!this._field.get("isValid");
if(a){return this.updateFields(b,this.validate(false))}else{return SC.VALIDATE_NO_CHANGE
}}});sc_require("validators/validator");SC.Validator.PositiveInteger=SC.Validator.extend({defaultValue:null,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(0);
break;case SC.T_NULL:case SC.T_UNDEFINED:a=this.get("defaultValue");break}return a
},objectForFieldValue:function(b,a,c){b=b.replace(/,/g,"");switch(SC.typeOf(b)){case SC.T_STRING:if(b.length===0){b=this.get("defaultValue")
}else{b=parseInt(b,0)}break;case SC.T_NULL:case SC.T_UNDEFINED:b=this.get("defaultValue");
break}return b},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!isNaN(b)
},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.Number(%@)".loc(a),a)
},validateKeyDown:function(b,c,a){var d=c.$input().val();if(!d){d=""}d+=a;if(a.length===0){return true
}else{return d.match(/^[0-9\0]*/)[0]===d}}});sc_require("views/view");SC.ContainerView=SC.View.extend({classNames:["sc-container-view"],nowShowing:null,contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();
if(a){this.appendChild(a)}},createChildViews:function(){var a=this.get("contentView");
if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},awake:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("nowShowing");if(a&&a.length>0){this.nowShowingDidChange()}},nowShowingDidChange:function(){var a=this.get("nowShowing");
if(a===SC.CONTENT_SET_DIRECTLY){return}if(SC.typeOf(a)===SC.T_STRING&&a.length>0){if(a.indexOf(".")>0){a=SC.objectForPropertyPath(a)
}else{a=SC.objectForPropertyPath(a,this.get("page"))}}if(SC.typeOf(a)===SC.T_CLASS){if(a.kindOf(SC.View)){a=a.create()
}else{a=null}}if(a&&!(a instanceof SC.View)){a=null}this.set("contentView",a)}.observes("nowShowing"),contentViewDidChange:function(){this.replaceContent(this.get("contentView"))
}.observes("contentView")});sc_require("views/view");sc_require("mixins/control");
SC.IMAGE_STATE_NONE="none";SC.IMAGE_STATE_LOADING="loading";SC.IMAGE_STATE_LOADED="loaded";
SC.IMAGE_STATE_FAILED="failed";SC.IMAGE_STATE_SPRITE="sprite";SC.BLANK_IMAGE_DATAURL="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";
SC.BLANK_IMAGE_URL=SC.browser.msie&&SC.browser.msie<8?"/static/sproutcore/foundation/en/760e3e0dd716bca963274213a64ff4ff49ea4636/blank.gif":SC.BLANK_IMAGE_DATAURL;
SC.ImageView=SC.View.extend(SC.Control,{classNames:"sc-image-view",tagName:"img",status:SC.IMAGE_STATE_NONE,value:null,useImageCache:YES,canLoadInBackground:NO,localize:YES,displayProperties:"status toolTip".w(),render:function(c,f){var a=this.get("status"),d=this.get("value");
if(a===SC.IMAGE_STATE_NONE&&d){this._image_valueDidChange()}a=this.get("status");
var e=(a===SC.IMAGE_STATE_LOADED)?d:SC.BLANK_IMAGE_URL;if(a===SC.IMAGE_STATE_SPRITE){c.addClass(d)
}c.attr("src",e);var b=this.get("toolTip");if(SC.typeOf(b)===SC.T_STRING){if(this.get("localize")){b=b.loc()
}c.attr("title",b);c.attr("alt",b)}},_image_valueDidChange:function(){var b=this.get("value"),c;
if(b&&b.isEnumerable){b=b.firstObject()}c=SC.ImageView.valueIsUrl(b);if(c&&this.get("useImageCache")){var a=this.get("isVisibleInWindow")||this.get("canLoadInBackground");
this._loadingUrl=b;SC.imageCache.loadImage(b,this,this.imageDidLoad,a);if(this._loadingUrl){this.set("status",SC.IMAGE_STATE_LOADING)
}}else{this._loadingUrl=null;this.set("status",(c)?SC.IMAGE_STATE_LOADED:SC.IMAGE_STATE_SPRITE);
this.displayDidChange()}}.observes("value"),imageDidLoad:function(a,b){if(a===this._loadingUrl){this._loadingUrl=null
}if(this.get("value")===a){this.set("status",SC.$ok(b)?SC.IMAGE_STATE_LOADED:SC.IMAGE_STATE_FAILED);
this.displayDidChange()}}});SC.ImageView.valueIsUrl=function(a){return a?a.indexOf("/")>=0:NO
};sc_require("views/view");sc_require("mixins/control");SC.ALIGN_LEFT="left";SC.ALIGN_RIGHT="right";
SC.ALIGN_CENTER="center";SC.REGULAR_WEIGHT="normal";SC.BOLD_WEIGHT="bold";SC.LabelView=SC.View.extend(SC.Control,{classNames:["sc-label-view"],fontWeight:SC.REGULAR_WEIGHT,escapeHTML:true,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),localize:false,localizeBindingDefault:SC.Binding.oneWay().bool(),formatter:null,value:"",hint:null,exampleInlineTextFieldView:SC.InlineTextFieldView,icon:null,textAlign:SC.ALIGN_LEFT,isInlineEditorMultiline:NO,displayValue:function(){var g,e;
g=this.get("value");e=this.getDelegateProperty("formatter",this.displayDelegate);
if(e){var f=(SC.typeOf(e)===SC.T_FUNCTION)?e(g,this):e.fieldValueForObject(g,this);
if(!SC.none(f)){g=f}}if(SC.typeOf(g)===SC.T_ARRAY){var d=[];for(var b=0,c=g.get("length");
b<c;b++){var a=g.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}d.push(a)
}g=d.join(",")}if(!SC.none(g)&&g.toString){g=g.toString()}if(g&&this.getDelegateProperty("localize",this.displayDelegate)){g=g.loc()
}if(this.get("escapeHTML")){g=SC.RenderContext.escapeHTML(g)}return g}.property("value","localize","formatter","escapeHTML").cacheable(),hintValue:function(){var a=this.get("hint");
if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}return a}.property("hint","escapeHTML").cacheable(),isEditable:NO,isEditableBindingDefault:SC.Binding.bool(),isEditing:NO,validator:null,doubleClick:function(a){return this.beginEditing()
},beginEditing:function(){if(this.get("isEditing")){return YES}if(!this.get("isEditable")){return NO
}var b=this.$(),d=this.get("value"),c=SC.viewportOffset(b[0]),a=this.convertFrameFromView(this.get("frame"),null);
c.width=a.width;c.height=a.height;SC.InlineTextFieldView.beginEditing({frame:c,delegate:this,exampleElement:b,value:d,multiline:this.get("isInlineEditorMultiline"),isCollection:NO,validator:this.get("validator"),exampleInlineTextFieldView:this.get("exampleInlineTextFieldView")})
},discardEditing:function(){if(!this.get("isEditing")){return YES}return SC.InlineTextFieldView.discardEditing()
},commitEditing:function(){if(!this.get("isEditing")){return YES}return SC.InlineTextFieldView.commitEditing()
},inlineEditorWillBeginEditing:function(a){this.set("isEditing",YES)},inlineEditorDidBeginEditing:function(b){var a=this.$();
this._oldOpacity=a.css("opacity");a.css("opacity",0)},inlineEditorShouldBeginEditing:function(){return this.get("isEditable")
},inlineEditorShouldEndEditing:function(a,b){return YES},inlineEditorDidEndEditing:function(a,b){this.setIfChanged("value",b);
this.$().css("opacity",this._oldOpacity);this._oldOpacity=null;this.set("isEditing",NO)
},displayProperties:"displayValue textAlign fontWeight icon".w(),_TEMPORARY_CLASS_HASH:{},render:function(d,a){var k=this.get("displayValue"),j=this.get("icon"),g=this.get("hintValue"),f,e,l,h=false,c=false;
if(j){var b=(j.indexOf("/")>=0)?j:SC.BLANK_IMAGE_URL,i=(b===j)?"":j;j='<img src="'+b+'" alt="" class="icon '+i+'" />';
if(j!==this._iconCache){this._iconCache=j;h=true}}if(g&&(!k||k==="")){l='<span class="sc-hint">'+g+"</span>"
}else{l=k}if(l!==this._textCache){this._textCache=l;c=true}if(a||c||h){d.push(j,l)
}e={"text-align":this.get("textAlign"),"font-weight":this.get("fontWeight")};if(this.get("isEditing")){e.opacity=0
}d.addStyle(e);f=this._TEMPORARY_CLASS_HASH;f.icon=!!this.get("icon");d.setClass(f)
}});require("panes/pane");SC.MainPane=SC.Pane.extend({layout:{top:0,left:0,bottom:0,right:0,minHeight:200,minWidth:200},paneDidAttach:function(){var b=arguments.callee.base.apply(this,arguments);
var a=this.rootResponder;a.makeMainPane(this);if(!a.get("keyRootView")){a.makeKeyPane(this)
}return b},acceptsKeyPane:YES,classNames:["sc-main"]});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/foundation")
}SC.stringsFor("English",{"Invalid.CreditCard(%@)":"%@ is not a valid credit card number","Invalid.Email(%@)":"%@ is not a valid email address","Invalid.NotEmpty(%@)":"%@ must not be empty","Invalid.Password":"Your passwords do not match.  Please try typing them again.","Invalid.General(%@)":"%@ is invalid.  Please try again.","Invalid.Number(%@)":"%@ is not a number."});
SC.allowsBackspaceToPreviousPage=NO;SC.BORDER_BEZEL="sc-bezel-border";SC.BORDER_BLACK="sc-black-border";
SC.BORDER_GRAY="sc-gray-border";SC.BORDER_TOP="sc-top-border";SC.BORDER_BOTTOM="sc-bottom-border";
SC.BORDER_NONE=null;SC.Border={borderTop:0,borderRight:0,borderBottom:0,borderLeft:0,borderStyle:SC.BORDER_GRAY,hasBorder:YES,displayProperties:["borderStyle"],_BORDER_REGEXP:(/-border$/),initMixin:function(){this._sc_border_borderStyleDidChange()
},renderMixin:function(a,c){var b=this.get("borderStyle");if(b){if(this._BORDER_REGEXP.exec(b)){a.addClass(b)
}else{a.addStyle("border","1px "+b+" solid")}}},_sc_border_borderStyleDidChange:function(){var a=this.get("borderStyle"),b=SC.Border.dimensions[a];
if(b){this.borderTop=b;this.borderRight=b;this.borderBottom=b;this.borderLeft=b}}};
SC.mixin(SC.Border,{dimensions:{"sc-bezel-border":1,"sc-black-border":1,"sc-gray-border":1,"sc-top-border":1,"sc-bottom-border":1}});
SC.CollectionFastPath={initMixin:function(){this._indexMap={}},poolForExampleView:function(a){var b="_pool_"+SC.guidFor(a);
if(!this[b]){this[b]=[]}return this[b]},createItemViewFromExampleView:function(c,b){var a=c.create(b);
if(a.isPoolable){a.owningPool=this.poolForExampleView(c)}a.createdFromExampleView=c;
return a},configureItemView:function(b,a){b.beginPropertyChanges();b.setIfChanged("content",a.content);
b.setIfChanged("contentIndex",a.contentIndex);b.setIfChanged("parentView",a.parentView);
b.setIfChanged("layerId",a.layerId);b.setIfChanged("isEnabled",a.isEnabled);b.setIfChanged("isSelected",a.isSelected);
b.setIfChanged("outlineLevel",a.outlineLevel);b.setIfChanged("layout",a.layout);b.setIfChanged("disclosureState",a.disclosureState);
b.setIfChanged("isVisibleInWindow",a.isVisibleInWindow);b.setIfChanged("isGroupView",a.isGroupView);
b.setIfChanged("page",this.page);b.endPropertyChanges()},wakePooledView:function(b,a){this.configureItemView(b,a);
if(b.awakeFromPool){b.awakeFromPool(b.owningPool,this)}},allocateItemView:function(d,b){var a;
if(d.prototype.isPoolable){var c=this.poolForExampleView(d);if(c.length>0){a=c.pop();
this.wakePooledView(a,b)}}if(!a){a=this.createItemViewFromExampleView(d,b)}return a
},releaseItemView:function(b){if(!b.isPoolable){b.destroy();return}var a=b.owningPool;
a.push(b);if(b.hibernateInPool){b.hibernateInPool(a,this)}},contentIndexIsGroup:function(a,d,c){var e=this.get("contentDelegate");
var b=this.get("_contentGroupIndexes"),f=NO;f=b&&b.contains(c);if(f){f=e.contentIndexIsGroup(this,this.get("content"),c)
}return f},exampleViewForItem:function(f,d){var b=this.get("contentDelegate"),c=this.get("_contentGroupIndexes"),e,a,g=this.contentIndexIsGroup(this,this.get("content"),d);
if(g){e=this.get("contentGroupExampleViewKey");if(e&&f){a=f.get(e)}if(!a){a=this.get("groupExampleView")||this.get("exampleView")
}}else{e=this.get("contentExampleViewKey");if(e&&f){a=f.get(e)}if(!a){a=this.get("exampleView")
}}return a},setAttributesForItem:function(f,d,c){var b=this.get("contentDelegate"),g=this.contentIndexIsGroup(this,this.get("content"),d),a=this.exampleViewForItem(f,d),e=this.get("content");
c.createdFromExampleView=a;c.parentView=this.get("containerView")||this;c.contentIndex=d;
c.owner=c.displayDelegate=this;c.content=f;c.page=this.page;c.layerId=this.layerIdFor(d);
c.isEnabled=b.contentIndexIsEnabled(this,e,d);c.isSelected=b.contentIndexIsSelected(this,e,d);
c.outlineLevel=b.contentIndexOutlineLevel(this,e,d);c.disclosureState=b.contentIndexDisclosureState(this,e,d);
c.isVisibleInWindow=this.get("isVisibleInWindow");c.isGroupView=g;c.layout=this.layoutForContentIndex(d);
if(!c.layout){c.layout=a.prototype.layout}},mappedViewsForItem:function(a,b){if(!b){b=this._viewMap
}return b[SC.guidFor(a)]},mappedViewForItem:function(c,b,d){if(!d){d=this._viewMap
}var a=d[SC.guidFor(c)];if(!a){return undefined}return a[b]},mapView:function(e,c,b,f){if(!f){f=this._viewMap
}var d=SC.guidFor(e),a=f[d];if(!a){a=f[d]={_length:0}}a[c]=b;a._length++},unmapView:function(e,c,f){if(!f){f=this._viewMap
}var d=SC.guidFor(e),a=f[d];if(!a){return}if(a[c]){var b=a[c];delete a[c];a._length--;
if(a._length<=0){delete f[d]}}},itemViewForContentIndex:function(b){var d=this.get("content");
if(!d){return}var c=d.objectAt(b);if(!c){return null}var e=this.exampleViewForItem(c,b),a=this._indexMap[b];
if(a&&a.createdFromExampleView!==e){this.removeItemView(a);this.unmapView(c,b);a=null
}if(!a){a=this.addItemView(e,c,b)}return a},nearestMappedViewIndexForItem:function(e,c,f){var b=this.mappedViewsForItem(e,f);
if(!b){return null}var d=null,h=-1,g=0;for(var a in b){a=parseInt(a,10);if(isNaN(a)){continue
}g=Math.abs(c-a);if(h<0||g<h){h=g;d=a}}return d},remapItemViews:function(b){var j=this._viewMap||{},a=(this._viewMap={}),i=(this._indexMap={}),k=[],h=this.get("content"),n;
if(!h){return}var f=this._itemsToAdd;b.forEach(function(o){n=h.objectAt(o);var q=this.mappedViewsForItem(n,j);
if(q){if(q[o]){var p=q[o];this.unmapView(n,o,j);this.mapView(n,o,p,a);i[o]=p}else{k.push(o)
}}else{f.push(o)}},this);for(var m=0,g=k.length;m<g;m++){var l=k[m];n=h.objectAt(l);
var e=this.nearestMappedViewIndexForItem(n,l,j),c;if(!SC.none(e)){c=this.mappedViewForItem(n,e,j);
var d=this.exampleViewForItem(n,l);if(d===c.createdFromExampleView){this.unmapView(n,e,j);
this.mapView(n,l,c,a);i[l]=c}else{f.push(l)}}else{f.push(l)}}return j},reloadIfNeeded:function(f,b){var d=this.get("content"),e;
if(!f||!f.isIndexSet){f=this.get("nowShowing")}if(!b){e=this._invalidIndexes;if(!e||!this.get("isVisibleInWindow")){return this
}this._invalidIndexes=NO;if(e.isIndexSet&&e.contains(f)){e=YES}if(this.willReload){this.willReload(e===YES?null:e)
}}var g=this._itemsToAdd||(this._itemsToAdd=[]);var a=this.remapItemViews(f);this.processRemovals(a);
if(e){this.processUpdates(e===YES?f:e)}this.processAdds();if(!b){this.clearDOMPools()
}g.length=0;if(!b){var c=this.computeLayout();if(c){this.adjust(c)}if(this.didReload){this.didReload(e===YES?null:e)
}}return this},processRemovals:function(c){var f=this.get("content");for(var d in c){var b=c[d];
for(var e in b){e=parseInt(e,10);if(isNaN(e)){continue}var a=b[e];if(this._indexMap[e]===a){delete this._indexMap[e]
}a._isInCollection=NO;this.removeItemView(a)}}},processUpdates:function(e){var b=this._itemsToUpdate,d=this.get("content"),c,a;
e.forEach(function(f){c=d.objectAt(f);if(a=this.mappedViewForItem(c,f)){if(!a._isInCollection){return
}var g=this.exampleViewForItem(c,f);this.updateItemView(a,g,c,f)}},this)},processAdds:function(){var f=this.get("content");
var g=this._itemsToAdd,b,a=g.length,e,d;for(b=0;b<a;b++){e=g[b];d=f.objectAt(e);var h=this.exampleViewForItem(d,e);
var c=this.addItemView(h,d,e)}},clearDOMPools:function(){var a=this._domPools||(this._domPools={});
for(var b in a){this.clearDOMPool(a[b])}},domPoolSize:10,clearDOMPool:function(c){var b,a=c.length,d;
for(b=this.domPoolSize;b<a;b++){d=c[b];this.removeChild(d);this.releaseItemView(d)
}c.length=Math.min(c.length,this.domPoolSize)},domPoolForExampleView:function(d){var c=this._domPools||(this._domPools={}),a=SC.guidFor(d);
var b=c[a];if(!b){b=c[a]=[]}return b},itemFromDOMPool:function(c){var b=this.domPoolForExampleView(c);
if(b.length<1){return null}var a=b.shift();if(a.wakeFromDOMPool){a.wakeFromDOMPool()
}return a},sendToDOMPool:function(a){var b=this.domPoolForExampleView(a.createdFromExampleView);
b.push(a);var c=a.get("frame");a.adjust({top:-c.height});a.set("layerId",SC.guidFor(a));
if(a.sleepInDOMPool){a.sleepInDOMPool()}},addItemView:function(e,d,c){var a,b=this._TMP_ATTRS||(this._TMP_ATTRS={});
this.setAttributesForItem(d,c,b);if(a=this.itemFromDOMPool(e)){this.configureItemView(a,b);
a._isInCollection=YES;this.mapView(d,c,a);this._indexMap[c]=a;return a}a=this.allocateItemView(e,b);
this.appendChild(a);a._isInCollection=YES;this.mapView(d,c,a);this._indexMap[c]=a;
return a},removeItemView:function(a){if(a.get("layerIsCacheable")){this.sendToDOMPool(a)
}else{this.removeChild(a)}a._isInCollection=NO},updateItemView:function(d,e,c,b){if(!d.get("layerIsCacheable")||d.createdFromExampleView!==e){this.unmapView(d,b);
delete this._indexMap[b];this.removeItemView(d,c,b);var f=this.addItemView(e,c,b)
}else{var a=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(c,b,a);
this.configureItemView(d,a)}},_lastTopUpdate:0,_lastLeftUpdate:0,_tolerance:100,touchScrollDidChange:function(g,f){if(Date.now()-this._lastTouchScrollTime<25){return
}var h=this.get("clippingFrame");var e=this._inScrollClippingFrame||(this._inScrollClippingFrame={x:0,y:0,width:0,height:0});
e.x=h.x;e.y=h.y;e.width=h.width;e.height=h.height;e.x=g;e.y=f;var d=this.contentIndexesInRect(e);
if(!d){return}var b=this.get("length"),a=d.get("max"),c=d.get("min");if(a>b||c<0){d=d.copy();
d.remove(b,a-b).remove(c,0-c).freeze()}if(this._lastNowShowing){if(d.contains(this._lastNowShowing)&&this._lastNowShowing.contains(d)){return
}}this._lastNowShowing=d;this.reloadIfNeeded(d,YES);this._lastTouchScrollTime=Date.now()
}};SC.CollectionGroup={classNames:["sc-collection-group"]};SC.CollectionRowDelegate={isCollectionRowDelegate:YES,rowHeight:18,customRowHeightIndexes:null,contentIndexRowHeight:function(a,b,c){return this.get("rowHeight")
}};SC.CollectionViewDelegate={isCollectionViewDelegate:YES,collectionViewSelectionForProposedSelection:function(a,b){return b
},collectionViewShouldSelectIndexes:function(a,b,c){return b},collectionViewShouldDeselectIndexes:function(a,b){return b
},collectionViewShouldDeleteIndexes:function(a,b){return b},collectionViewDeleteContent:function(a,c,b){if(!c){return NO
}if(SC.typeOf(c.destroyAt)===SC.T_FUNCTION){c.destroyAt(b);a.selectPreviousItem(NO,1);
return YES}else{if(SC.typeOf(c.removeAt)===SC.T_FUNCTION){c.removeAt(b);a.selectPreviousItem(NO,1);
return YES}else{return NO}}},collectionViewShouldBeginDrag:function(a){return YES
},collectionViewDragDataTypes:function(a){return[]},collectionViewDragDataForType:function(a,c,b){return null
},collectionViewComputeDragOperations:function(a,b,c){return c},collectionViewValidateDragOperation:function(b,d,e,c,a){return(a&SC.DROP_ON)?SC.DRAG_NONE:e
},collectionViewPerformDragOperation:function(b,d,e,c,a){return SC.DRAG_NONE},collectionViewDragViewFor:function(a,b){return null
},ghostActsLikeCursor:NO};SC.Scrollable={initMixin:function(){console.warn("SC.Scrollable is deprecated and will be removed in a future version of SproutCore.  Consider pulling the mixin into your own app if you want to keep using it.")
},isScrollable:true,verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("innerFrame").height
}.property("innerFrame"),horizontalPageScroll:function(){return this.get("innerFrame").width
}.property("innerFrame"),hasVerticalScroller:function(){return this.get("scrollFrame").height>this.get("innerFrame").height
}.property("scrollFrame"),hasHorizontalScroller:function(){return this.get("scrollFrame").width>this.get("innerFrame").width
}.property("scrollFrame"),scrollBy:function(a){var b=this.get("scrollFrame");var c=this.get("innerFrame");
if(!this.get("hasVerticalScroller")){a.y=0}if(b.height<=c.height){a.y=0}if(!this.get("hasHorizontalScroller")){a.x=0
}if(b.width<=c.width){a.x=0}var d={x:b.x-(a.x||0),y:b.y-(a.y||0)};this.set("scrollFrame",d);
d=this.get("scrollFrame");return{x:d.x-b.x,y:d.y-b.y}},scrollTo:function(a,b){this.set("scrollFrame",{x:0-a,y:0-b})
},scrollToVisible:function(b){var e=this.get("innerFrame");var d=this.get("scrollFrame");
var a=this.convertFrameFromView(b.get("frame"),b);a.x-=(e.x+d.x);a.y-=(e.y+d.y);var c={x:0-d.x,y:0-d.y,width:e.width,height:e.height};
c.y-=Math.max(0,SC.minY(c)-SC.minY(a));c.x-=Math.max(0,SC.minX(c)-SC.minX(a));c.y+=Math.max(0,SC.maxY(a)-SC.maxY(c));
c.x+=Math.max(0,SC.maxX(a)-SC.maxX(c));this.scrollTo(c.x,c.y)},scrollDownLine:function(a){if(a===undefined){a=1
}return this.scrollBy({y:this.get("verticalLineScroll")*a}).y},scrollUpLine:function(a){if(a===undefined){a=1
}return 0-this.scrollBy({y:0-this.get("verticalLineScroll")*a}).y},scrollRightLine:function(a){if(a===undefined){a=1
}return this.scrollTo({y:this.get("horizontalLineScroll")*a}).x},scrollLeftLine:function(a){if(a===undefined){a=1
}return 0-this.scrollTo({y:0-this.get("horizontalLineScroll")*a}).x},scrollDownPage:function(a){if(a===undefined){a=1
}return this.scrollBy({y:this.get("verticalPageScroll")*a}).y},scrollUpPage:function(a){if(a===undefined){a=1
}return 0-this.scrollBy({y:0-this.get("verticalPageScroll")*a}).y},scrollRightPage:function(a){if(a===undefined){a=1
}return this.scrollTo({y:this.get("horizontalPageScroll")*a}).x},scrollLeftPage:function(a){if(a===undefined){a=1
}return 0-this.scrollTo({y:0-this.get("horizontalPageScroll")*a}).x}};SC.ModalPane=SC.Pane.extend({classNames:"sc-modal",layout:{top:0,left:0,bottom:0,right:0},_openPaneCount:0,paneWillAppend:function(a){this._openPaneCount++;
if(!this.get("isVisibleInWindow")){this.append()}return this},paneDidRemove:function(a){this._openPaneCount--;
if(this._openPaneCount<=0){this._openPaneCount=0;if(this.get("isVisibleInWindow")){this.remove()
}}},mouseDown:function(b){var a=this.get("owner");if(a&&a.modalPaneDidClick){a.modalPaneDidClick(b)
}},touchStart:function(a){this.mouseDown(a)}});sc_require("panes/modal");SC.PanelPane=SC.Pane.extend({layout:{left:0,right:0,top:0,bottom:0},classNames:["sc-panel"],acceptsKeyPane:YES,isModal:YES,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),contentView:null,contentViewBindingDefault:SC.Binding.single(),render:function(a,b){if(a.needsContent){this.renderChildViews(a,b);
a.push("<div class='top-left-edge'></div>","<div class='top-edge'></div>","<div class='top-right-edge'></div>","<div class='right-edge'></div>","<div class='bottom-right-edge'></div>","<div class='bottom-edge'></div>","<div class='bottom-left-edge'></div>","<div class='left-edge'></div>")
}},replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.contentView;
if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},contentViewDidChange:function(){this.replaceContent(this.get("contentView"))
}.observes("contentView"),_modalPane:function(){var a=this.get("modalPane");if(a&&a.isClass){a=a.create({owner:this});
this.set("modalPane",a)}return a},appendTo:function(a){var b;if(!this.get("isVisibleInWindow")&&this.get("isModal")&&(b=this._modalPane())){this._isShowingModal=YES;
b.paneWillAppend(this)}return arguments.callee.base.apply(this,arguments)},remove:function(){var b,a=arguments.callee.base.apply(this,arguments);
if(this._isShowingModal){this._isShowingModal=NO;if(b=this._modalPane()){b.paneDidRemove(this)
}}return a},_isModalDidChange:function(){var b,a=this.get("isModal");if(a){if(!this._isShowingModal&&this.get("isVisibleInWindow")&&(b=this._modalPane())){this._isShowingModal=YES;
b.paneWillAppend(this)}}else{if(this._isShowingModal&&(b=this._modalPane())){this._isShowingModal=NO;
b.paneDidRemove(this)}}}.observes("isModal"),paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);
this.becomeKeyPane();return a}});SC.ButtonView=SC.View.extend(SC.Control,SC.Button,SC.StaticLayout,{tagName:"div",classNames:["sc-button-view"],theme:"square",buttonBehavior:SC.PUSH_BEHAVIOR,holdInterval:100,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),isCancel:NO,isCancelBindingDefault:SC.Binding.oneWay().bool(),href:"",action:null,target:null,supportFocusRing:NO,_labelMinWidthIE7:0,triggerAction:function(a){if(!this.get("isEnabled")){return NO
}this.set("isActive",YES);this.invokeLater("_triggerActionAfterDelay",200,a);return YES
},_triggerActionAfterDelay:function(a){this._action(a,YES);this.didTriggerAction();
this.set("isActive",NO)},didTriggerAction:function(){},titleMinWidth:80,init:function(){arguments.callee.base.apply(this,arguments);
if(this.get("keyEquivalent")){this._defaultKeyEquivalent=this.get("keyEquivalent")
}},_TEMPORARY_CLASS_HASH:{},displayProperties:["href","icon","title","value","toolTip"],renderStyle:"renderDefault",render:function(d,f){var a,b,c,e;
if(this.get("tagName")==="a"){a=this.get("href");if(!a||(a.length===0)){a="javascript:;"
}d.attr("href",a)}b=this.get("toolTip");if(SC.typeOf(b)===SC.T_STRING){if(this.get("localize")){b=b.loc()
}d.attr("title",b);d.attr("alt",b)}c=this._TEMPORARY_CLASS_HASH;c.def=this.get("isDefault");
c.cancel=this.get("isCancel");c.icon=!!this.get("icon");d.attr("role","button").setClass(c);
e=this.get("theme");if(e&&!d.hasClass(e)){d.addClass(e)}this[this.get("renderStyle")](d,f)
},renderDefault:function(a,b){if(b){a=a.push("<span class='sc-button-inner' style = 'min-width:",this.get("titleMinWidth"),"px'>");
this.renderTitle(a,b);a.push("</span>");if(this.get("supportFocusRing")){a.push('<div class="focus-ring">','<div class="focus-left"></div>','<div class="focus-middle"></div>','<div class="focus-right"></div></div>')
}}else{this.renderTitle(a,b)}},renderImage:function(a,c){var b=this.get("icon");a.addClass("no-min-width");
if(b){a.push("<div class='img "+b+"'></div>")}else{a.push("<div class='img'></div>")
}},_defaultKeyEquivalent:null,_isDefaultOrCancelDidChange:function(){var a=!!this.get("isDefault"),b=!a&&this.get("isCancel");
if(this.didChangeFor("defaultCancelChanged","isDefault","isCancel")){this.displayDidChange();
if(a){this.set("keyEquivalent","return")}else{if(b){this.setIfChanged("keyEquivalent","escape")
}else{this.set("keyEquivalent",this._defaultKeyEquivalent)}}}}.observes("isDefault","isCancel"),isMouseDown:false,mouseDown:function(a){var b=this.get("buttonBehavior");
if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;
if(b===SC.HOLD_BEHAVIOR){this._action(a)}else{if(!this._isFocused&&(b!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$()[0].focus()
}}}return YES},mouseExited:function(a){if(this._isMouseDown){this.set("isActive",NO)
}return YES},mouseEntered:function(a){if(this._isMouseDown){this.set("isActive",YES)
}return YES},mouseUp:function(b){if(this._isMouseDown){this.set("isActive",NO)}this._isMouseDown=false;
if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){var a=this.$().within(b.target);
if(a&&this.get("isEnabled")){this._action(b)}}return YES},touchStart:function(b){var a=this.get("buttonBehavior");
if(!this.get("isEnabled")){return YES}this.set("isActive",YES);if(a===SC.HOLD_BEHAVIOR){this._action(b)
}else{if(!this._isFocused&&(a!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder();
if(this.get("isVisibleInWindow")){this.$()[0].focus()}}}b.preventDefault();return YES
},touchesDragged:function(a,b){if(!this.touchIsInBoundary(a)){if(!this._touch_exited){this.set("isActive",NO)
}this._touch_exited=YES}else{if(this._touch_exited){this.set("isActive",YES)}this._touch_exited=NO
}a.preventDefault();return YES},touchEnd:function(a){this._touch_exited=NO;this.set("isActive",NO);
if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.touchIsInBoundary(a)){this._action()
}}a.preventDefault();return YES},keyDown:function(b){if(b.which===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13){this.triggerAction(b);
return YES}return NO},_action:function(a,c){switch(this.get("buttonBehavior")){case SC.TOGGLE_BEHAVIOR:var b=this.get("isSelected");
if(b){this.set("value",this.get("toggleOffValue"))}else{this.set("value",this.get("toggleOnValue"))
}break;case SC.TOGGLE_ON_BEHAVIOR:this.set("value",this.get("toggleOnValue"));break;
case SC.TOGGLE_OFF_BEHAVIOR:this.set("value",this.get("toggleOffValue"));break;case SC.HOLD_BEHAVIOR:this._runHoldAction(a,c);
break;default:this._runAction(a)}},_runAction:function(a){var c=this.get("action"),d=this.get("target")||null,b=this.getPath("pane.rootResponder");
if(c){if(this._hasLegacyActionHandler()){this._triggerLegacyActionHandler(a)}else{if(b){b.sendAction(c,d,this,this.get("pane"))
}}}},_runHoldAction:function(a,b){if(this.get("isActive")){this._runAction();if(!b){SC.RunLoop.begin();
this.invokeLater("_runHoldAction",this.get("holdInterval"),a);SC.RunLoop.end()}}},_hasLegacyActionHandler:function(){var a=this.get("action");
if(a&&(SC.typeOf(a)===SC.T_FUNCTION)){return true}if(a&&(SC.typeOf(a)===SC.T_STRING)&&(a.indexOf(".")!=-1)){return true
}return false},_triggerLegacyActionHandler:function(evt){if(!this._hasLegacyActionHandler()){return false
}var action=this.get("action");if(SC.typeOf(action)===SC.T_FUNCTION){this.action(evt)
}if(SC.typeOf(action)===SC.T_STRING){eval("this.action = function(e) { return "+action+"(this, e); };");
this.action(evt)}},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){var b=this.$()[0];if(b){b.focus()
}}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},didAppendToDocument:function(){if(parseInt(SC.browser.msie,0)===7&&this.get("useStaticLayout")){var e=this.get("layout"),d=this.$(),a=0;
if(d&&d[0]&&(a=d[0].clientWidth)&&a!==0&&this._labelMinWidthIE7===0){var c=this.$(".sc-button-label"),h=parseInt(c.css("paddingRight"),0),b=parseInt(c.css("paddingLeft"),0),g=parseInt(c.css("marginRight"),0),f=parseInt(c.css("marginLeft"),0);
if(g=="auto"){console.log(g+","+f+","+h+","+b)}if(!h&&isNaN(h)){h=0}if(!b&&isNaN(b)){b=0
}if(!g&&isNaN(g)){g=0}if(!f&&isNaN(f)){f=0}this._labelMinWidthIE7=a-(h+b)-(g+f);c.css("minWidth",this._labelMinWidthIE7+"px")
}else{this.invokeLater(this.didAppendToDocument,1)}}}});SC.TOGGLE_BEHAVIOR="toggle";
SC.PUSH_BEHAVIOR="push";SC.TOGGLE_ON_BEHAVIOR="on";SC.TOGGLE_OFF_BEHAVIOR="off";SC.HOLD_BEHAVIOR="hold";
SC.ButtonView.CLICK_AND_HOLD_DELAY=SC.browser.msie?600:300;SC.REGULAR_BUTTON_HEIGHT=24;
sc_require("panes/panel");sc_require("views/button");SC.BUTTON1_STATUS="button1";
SC.BUTTON2_STATUS="button2";SC.BUTTON3_STATUS="button3";SC.AlertPane=SC.PanelPane.extend({classNames:"sc-alert",delegate:null,icon:"sc-icon-alert-48",message:"",description:"",displayDescription:function(){var a=this.get("description");
if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"
}.property("description").cacheable(),caption:"",displayCaption:function(){var a=this.get("caption");
if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="caption">'+a.split("\n").join('</p><p class="caption">')+"</p>"
}.property("caption").cacheable(),buttonOne:SC.outlet("contentView.childViews.1.childViews.1"),buttonTwo:SC.outlet("contentView.childViews.1.childViews.0"),buttonThree:SC.outlet("contentView.childViews.2.childViews.0"),buttonThreeWrapper:SC.outlet("contentView.childViews.2"),layout:{top:0.3,centerX:0,width:500},contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:[SC.View.extend(SC.StaticLayout,{classNames:["info"],render:function(a,d){var c=this.get("pane");
var b=SC.BLANK_IMAGE_URL;if(c.get("icon")=="blank"){a.addClass("plain")}a.push('<img src="'+b+'" class="icon '+c.get("icon")+'" />');
a.begin("h1").attr("class","header").text(c.get("message")||"").end();a.push(c.get("displayDescription")||"");
a.push(c.get("displayCaption")||"");a.push('<div class="separator"></div>')}}),SC.View.extend({layout:{bottom:13,height:24,right:18,width:466},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,titleMinWidth:64,layout:{right:5,height:"auto",width:"auto",bottom:0},theme:"capsule",title:"Cancel",isCancel:YES,action:"dismiss",isVisible:NO}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},theme:"capsule",title:"OK",isDefault:YES,action:"dismiss"})}),SC.View.extend({layout:{bottom:13,height:24,left:18,width:150},isVisible:NO,childViews:[SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},theme:"capsule",title:"Extra",action:"dismiss",isVisible:NO})]})]}),dismiss:function(b){var a=this.delegate;
if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}this.remove()
},alertInfoDidChange:function(){var a=this.getPath("contentView.childViews.0");if(a){a.displayDidChange()
}}.observes("icon","message","displayDescription","displayCaption")});SC.AlertPane._normalizeArguments=function(b){b=SC.A(b);
var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[7]=c;
return b};SC.AlertPane.show=function(p,l,n,b,c,o,a,g){var f=this._normalizeArguments(arguments);
var e=this.create({message:f[0]||"",description:f[1]||null,caption:f[2]||null,icon:f[6]||"sc-icon-alert-48",delegate:f[7]});
var k="buttonOne buttonTwo buttonThree".w(),d,h;for(var j=0;j<3;j++){d=e.get(k[j]);
h=f[j+3];if(h){d.set("title",h).set("isVisible",YES);if(h=="?"){d.set("titleMinWidth",0)
}if(j==2){var m=e.get("buttonThreeWrapper");m.set("isVisible",YES)}}}var i=e.append();
e.adjust("height",e.childViews[0].$().height());e.updateLayout();return i};SC.AlertPane.warn=function(e,d,a,h,f,g,c){var b=this._normalizeArguments(arguments);
b[6]="sc-icon-alert-48";return this.show.apply(this,b)};SC.AlertPane.info=function(e,d,a,h,f,g,c){var b=this._normalizeArguments(arguments);
b[6]="sc-icon-info-48";return this.show.apply(this,b)};SC.AlertPane.error=function(e,d,a,h,f,g,c){var b=this._normalizeArguments(arguments);
b[6]="sc-icon-error-48";return this.show.apply(this,b)};SC.AlertPane.plain=function(e,d,a,h,f,g,c){var b=this._normalizeArguments(arguments);
b[6]="blank";return this.show.apply(this,b)};sc_require("panes/panel");SC.PalettePane=SC.PanelPane.extend({classNames:"sc-palette",isModal:NO,modalPane:SC.ModalPane,isAnchored:NO,_mouseOffsetX:null,_mouseOffsetY:null,mouseDown:function(a){var b=this.get("frame");
this._mouseOffsetX=b?(b.x-a.pageX):0;this._mouseOffsetY=b?(b.y-a.pageY):0;return YES
},mouseDragged:function(a){if(!this.isAnchored){this.set("layout",{width:this.layout.width,height:this.layout.height,left:this._mouseOffsetX+a.pageX,top:this._mouseOffsetY+a.pageY});
this.updateLayout()}return YES},touchStart:function(a){return this.mouseDown(a)},touchesDragged:function(a){return this.mouseDragged(a)
}});sc_require("panes/palette");SC.PICKER_MENU="menu";SC.PICKER_FIXED="fixed";SC.PICKER_POINTER="pointer";
SC.PICKER_MENU_POINTER="menu-pointer";SC.POINTER_LAYOUT=["perfectRight","perfectLeft","perfectTop","perfectBottom"];
SC.PickerPane=SC.PalettePane.extend({classNames:"sc-picker",isAnchored:YES,isModal:YES,pointerPos:"perfectRight",pointerPosX:0,pointerPosY:0,anchorElement:null,anchorCached:null,preferType:null,preferMatrix:null,pointerOffset:null,extraRightOffset:0,popup:function(d,c,e,a){var b;
if(d){b=d.isView?d.get("layer"):d}this.beginPropertyChanges();this.set("anchorElement",b);
if(c){this.set("preferType",c)}if(e){this.set("preferMatrix",e)}if(a){this.set("pointerOffset",a)
}this.endPropertyChanges();this.positionPane();return this.append()},positionPane:function(f){var f=f&&this.get("anchorCached"),b=f?this.get("anchorCached"):this.get("anchorElement"),c=this.get("preferType"),d=this.get("preferMatrix"),e=this.get("layout"),a;
if(b){if(!f){b=this.computeAnchorRect(b);this.set("anchorCached",b)}if(b.x===0&&b.y===0){return
}a=SC.cloneRect(b);if(c){switch(c){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!d||d.length!==3){this.set("preferMatrix",[1,4,3])
}a.x+=((this.preferMatrix[2]===0)?a.width:0)+this.preferMatrix[0];a.y+=((this.preferMatrix[2]===3)?a.height:0)+this.preferMatrix[1];
break;default:a.y+=a.height;break}}else{a.y+=a.height}a=this.fitPositionToScreen(a,this.get("frame"),b);
this.adjust({width:a.width,height:a.height,left:a.x,top:a.y})}else{this.adjust({width:e.width,height:e.height,centerX:0,centerY:0})
}this.updateLayout();return this},computeAnchorRect:function(c){var e,b,d,a=SC.RootResponder.responder.computeWindowSize();
if(c.getBoundingClientRect){e=c.getBoundingClientRect();b={x:e.left,y:e.top,width:e.width,height:e.height};
if(b.width===undefined||b.height===undefined){d=SC.$(c);b.width=d.outerWidth();b.height=d.outerHeight()
}}else{b=SC.viewportOffset(c);d=SC.$(c);b.width=d.outerWidth();b.height=d.outerHeight()
}b.height=(a.height-b.y)<b.height?(a.height-b.y):b.height;if(!SC.browser.msie&&window.scrollX>0||window.scrollY>0){b.x+=window.scrollX;
b.y+=window.scrollY}else{if(SC.browser.msie&&(document.documentElement.scrollTop>0||document.documentElement.scrollLeft>0)){b.x+=document.documentElement.scrollLeft;
b.y+=document.documentElement.scrollTop}}return b},fitPositionToScreen:function(e,c,b){var a=SC.RootResponder.responder.computeWindowSize(),d={x:0,y:0,width:a.width,height:a.height};
c.x=e.x;c.y=e.y;if(this.preferType){switch(this.preferType){case SC.PICKER_MENU:c=this.fitPositionToScreenMenu(d,c,this.get("isSubMenu"));
break;case SC.PICKER_MENU_POINTER:this.setupPointer(b);c=this.fitPositionToScreenMenuPointer(d,c,b);
break;case SC.PICKER_POINTER:this.setupPointer(b);c=this.fitPositionToScreenPointer(d,c,b);
break;case SC.PICKER_FIXED:break;default:break}}else{c=this.fitPositionToScreenDefault(d,c,b)
}this.displayDidChange();this._hideOverflow();return c},fitPositionToScreenDefault:function(c,d,b){if(SC.maxX(d)>c.width){var e=Math.max(SC.maxX(b),d.width);
d.x=Math.min(e,c.width)-d.width}if(SC.minX(d)<0){d.x=SC.minX(Math.max(b,0));if(SC.maxX(d)>c.width){d.x=Math.max(0,c.width-d.width)
}}if(SC.maxY(d)>c.height){e=Math.max((b.y-d.height),0);if(e>c.height){d.y=Math.max(0,c.height-d.height)
}else{d.y=e}}if(SC.minY(d)<0){e=Math.min(SC.maxY(b),(c.height-b.height));d.y=Math.max(e,0)
}return d},fitPositionToScreenMenu:function(c,b,a){if(a){b.x-=this.get("submenuOffsetX");
b.y-=Math.floor(this.get("menuHeightPadding")/2)}if((b.x+b.width)>(c.width-20)){if(a){b.x=b.x-(b.width*2)
}else{b.x=c.width-b.width-20}}if(b.x<7){b.x=7}if(b.y<7){b.height+=b.y;b.y=7}if(b.height+b.y+35>=c.height){if(b.height+50>=c.height){b.y=SC.MenuPane.VERTICAL_OFFSET;
b.height=c.height-(SC.MenuPane.VERTICAL_OFFSET*2)}else{b.y+=(c.height-(b.height+b.y+35))
}}return b},fitPositionToScreenMenuPointer:function(c,d,b){d=this.fitPositionToScreenPointer(c,d,b);
if(d.height+d.y+35>=c.height){d.height=c.height-d.y-(SC.MenuPane.VERTICAL_OFFSET*2)
}return d},fitPositionToScreenPointer:function(o,l,n){var h=[this.pointerOffset[0],this.pointerOffset[1],this.pointerOffset[2],this.pointerOffset[3]];
var e=[[n.x+n.width+h[0],n.y+parseInt(n.height/2,0)-40],[n.x-l.width+h[1],n.y+parseInt(n.height/2,0)-40],[n.x+parseInt((n.width/2)-(l.width/2),0),n.y-l.height+h[2]],[n.x+parseInt((n.width/2)-(l.width/2),0),n.y+n.height+h[3]]];
var c=[[n.x+n.width+l.width+h[0],n.y+parseInt(n.height/2,0)+l.height-24],[n.x+h[1],n.y+parseInt(n.height/2,0)+l.height-24],[n.x+parseInt((n.width/2)-(l.width/2),0)+l.width,n.y+h[2]],[n.x+parseInt((n.width/2)-(l.width/2),0)+l.width,n.y+n.height+l.height+h[3]]];
var g=[[e[0][1]>0?0:0-e[0][1],c[0][0]<o.width?0:c[0][0]-o.width,c[0][1]<o.height?0:c[0][1]-o.height,e[0][0]>0?0:0-e[0][0]],[e[1][1]>0?0:0-e[1][1],c[1][0]<o.width?0:c[1][0]-o.width,c[1][1]<o.height?0:c[1][1]-o.height,e[1][0]>0?0:0-e[1][0]],[e[2][1]>0?0:0-e[2][1],c[2][0]<o.width?0:c[2][0]-o.width,c[2][1]<o.height?0:c[2][1]-o.height,e[2][0]>0?0:0-e[2][0]],[e[3][1]>0?0:0-e[3][1],c[3][0]<o.width?0:c[3][0]-o.width,c[3][1]<o.height?0:c[3][1]-o.height,e[3][0]>0?0:0-e[3][0]]];
var d=this.preferMatrix;if(d[4]===-1){l.x=n.x+parseInt(n.width/2,0);l.y=n.y+parseInt(n.height/2,0)-parseInt(l.height/2,0);
this.set("pointerPos",SC.POINTER_LAYOUT[0]+" fallback");this.set("pointerPosY",parseInt(l.height/2,0)-40)
}else{l.x=e[d[4]][0];l.y=e[d[4]][1];this.set("pointerPos",SC.POINTER_LAYOUT[d[4]]);
this.set("pointerPosY",0)}this.set("pointerPosX",0);for(var j=0,b,k=SC.POINTER_LAYOUT.length;
j<k;j++){b=d[j];if(g[b][0]===0&&g[b][1]===0&&g[b][2]===0&&g[b][3]===0){if(d[4]!==b){l.x=e[b][0];
l.y=e[b][1];this.set("pointerPosY",0);this.set("pointerPos",SC.POINTER_LAYOUT[b])
}j=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&g[b][0]===0&&g[b][1]===0&&g[b][2]<l.height-91&&g[b][3]===0){if(d[4]!==b){l.x=e[b][0];
this.set("pointerPos",SC.POINTER_LAYOUT[b])}l.y=e[b][1]-g[b][2];this.set("pointerPosY",g[b][2]);
j=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&g[b][0]===0&&g[b][1]===0&&g[b][2]<=l.height-51&&g[b][3]===0){if(d[4]!==b){l.x=e[b][0]
}l.y=e[b][1]-(l.height-51);this.set("pointerPosY",(l.height-53));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-low");
j=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&g[b][0]===0&&g[b][1]<=parseInt(l.width/2,0)-this.get("extraRightOffset")&&g[b][2]===0&&g[b][3]===0){if(d[4]!==b){l.y=e[b][1]
}l.x=e[b][0]-(parseInt(l.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-right");
j=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&g[b][0]===0&&g[b][1]===0&&g[b][2]===0&&g[b][3]<=parseInt(l.width/2,0)-this.get("extraRightOffset")){if(d[4]!==b){l.y=e[b][1]
}l.x=e[b][0]+(parseInt(l.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-left");
j=SC.POINTER_LAYOUT.length}}}}}}return l},setupPointer:function(f){var g=this.pointerOffset,e=SC.PickerPane;
if(!g||g.length!==4){if(this.get("preferType")==SC.PICKER_MENU_POINTER){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("pointerOffset",e.TINY_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",e.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.SMALL_CONTROL_SIZE:this.set("pointerOffset",e.SMALL_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",e.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.REGULAR_CONTROL_SIZE:this.set("pointerOffset",e.REGULAR_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",e.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.LARGE_CONTROL_SIZE:this.set("pointerOffset",e.LARGE_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",e.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.HUGE_CONTROL_SIZE:this.set("pointerOffset",e.HUGE_PICKER_MENU_POINTER_OFFSET);
this.set("extraRightOffset",e.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break}}else{var d=(f.width<16)?((f.width<4)?9:6):0,b=(f.height<16)?((f.height<4)?9:6):0,c=e.PICKER_POINTER_OFFSET;
var h=[c[0]+d,c[1]-d,c[2]-b,c[3]+b];this.set("pointerOffset",h);this.set("extraRightOffset",e.PICKER_EXTRA_RIGHT_OFFSET)
}}if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",this.get("preferType")==SC.PICKER_MENU_POINTER?[3,0,1,2,3]:[0,1,2,3,2])
}},displayProperties:["pointerPosY"],render:function(b,d){var a=arguments.callee.base.apply(this,arguments);
if(b.needsContent){if(this.get("preferType")==SC.PICKER_POINTER||this.get("preferType")==SC.PICKER_MENU_POINTER){b.push('<div class="sc-pointer '+this.get("pointerPos")+'" style="margin-top: '+this.get("pointerPosY")+'px"></div>');
b.addClass(this.get("pointerPos"))}}else{if(this.get("preferType")==SC.PICKER_POINTER||this.get("preferType")==SC.PICKER_MENU_POINTER){var c=this.$(".sc-pointer");
c.attr("class","sc-pointer "+this.get("pointerPos"));c.attr("style","margin-top: "+this.get("pointerPosY")+"px");
b.addClass(this.get("pointerPos"))}}return a},modalPaneDidClick:function(a){var b=this.get("frame");
if(!this.clickInside(b,a)){this.remove()}return YES},mouseDown:function(a){return this.modalPaneDidClick(a)
},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},windowSizeDidChange:function(b,a){this.positionPane()
},remove:function(){this._showOverflow();return arguments.callee.base.apply(this,arguments)
},_hideOverflow:function(){var b=SC.$(document.body),a=SC.$(".sc-main"),d=parseInt(a.css("minWidth"),0),e=parseInt(a.css("minHeight"),0),c=SC.RootResponder.responder.get("currentWindowSize");
if(c.width>=d&&c.height>=e){b.css("overflow","hidden")}},_showOverflow:function(){var a=SC.$(document.body);
a.css("overflow","visible")}});SC.PickerPane.PICKER_POINTER_OFFSET=[9,-9,-18,18];
SC.PickerPane.PICKER_EXTRA_RIGHT_OFFSET=20;SC.PickerPane.TINY_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];
SC.PickerPane.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.SMALL_PICKER_MENU_POINTER_OFFSET=[9,-9,-8,8];
SC.PickerPane.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET=11;SC.PickerPane.REGULAR_PICKER_MENU_POINTER_OFFSET=[9,-9,-12,12];
SC.PickerPane.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET=13;SC.PickerPane.LARGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-16,16];
SC.PickerPane.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=17;SC.PickerPane.HUGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];
SC.PickerPane.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.SeparatorView=SC.View.extend({classNames:["sc-separator-view"],tagName:"span",layoutDirection:SC.LAYOUT_HORIZONTAL,render:function(a,b){if(b){a.push("<span></span>")
}a.addClass(this.get("layoutDirection"))}});sc_require("views/button");sc_require("views/separator");
SC.MenuItemView=SC.View.extend(SC.ContentDisplay,{displayProperties:["title","isEnabled","isSeparator"],classNames:["sc-menu-item"],escapeHTML:YES,acceptsFirstResponder:YES,blocksIEDeactivate:YES,isContextMenuEnabled:NO,content:null,isSeparator:function(){return this.getContentProperty("itemSeparatorKey")===YES
}.property("content").cacheable(),isEnabled:function(){return this.getContentProperty("itemIsEnabledKey")!==NO&&this.getContentProperty("itemSeparatorKey")!==YES
}.property("content.isEnabled").cacheable(),subMenu:function(){var c=this.get("content"),b,a;
if(!c){return null}a=this.get("parentMenu");b=c.get(a.itemSubMenuKey);if(b){if(SC.kindOf(b,SC.MenuPane)){b.set("isModal",NO);
b.set("isSubMenu",YES);b.set("parentMenu",a);return b}else{return SC.MenuPane.create({layout:{width:200},items:b,isModal:NO,isSubMenu:YES,parentMenu:a,controlSize:a.get("controlSize")})
}}return null}.property("content").cacheable(),hasSubMenu:function(){return !!this.get("subMenu")
}.property("subMenu").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this.contentDidChange()},render:function(b,h){var c=this.get("content"),a,f,e=this.get("parentMenu"),d=this.get("itemWidth")||e.layout.width,g=this.get("itemHeight")||SC.DEFAULT_MENU_ITEM_HEIGHT;
this.set("itemWidth",d);this.set("itemHeight",g);b=b.begin("a").addClass("menu-item");
if(c.get(e.itemSeparatorKey)){b.push('<span class="separator"></span>');b.addClass("disabled")
}else{f=c.get(e.itemIconKey);if(f){this.renderImage(b,f);b.addClass("has-icon")}f=this.get("title");
if(SC.typeOf(f)!==SC.T_STRING){f=f.toString()}this.renderLabel(b,f);if(this.getContentProperty("itemCheckboxKey")){b.push('<div class="checkbox"></div>')
}if(this.get("hasSubMenu")){this.renderBranch(b)}f=this.getContentProperty("itemShortCutKey");
if(f){this.renderShortcut(b,f)}}b=b.end()},renderImage:function(b,d){var a,c;if(d&&SC.ImageView.valueIsUrl(d)){a=d;
c=""}else{c=d;a=SC.BLANK_IMAGE_URL}b.begin("img").addClass("image").addClass(c).attr("src",a).end()
},renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)
}b.push("<span class='value ellipsis'>"+a+"</span>")},renderBranch:function(a){a.push('<span class="has-branch"></span>')
},renderShortcut:function(b,a){b.push('<span class = "shortcut">'+a+"</span>")},showSubMenu:function(){var a=this.get("subMenu");
if(a){a.set("mouseHasEntered",NO);a.popup(this,[0,0,0])}this._subMenuTimer=null},title:function(){var b=this.getContentProperty("itemTitleKey"),a=this.getPath("parentMenu.localize");
if(a&&b){b=b.loc()}return b||""}.property("content.title").cacheable(),getContentProperty:function(b){var a=this.get("content"),c=this.get("parentMenu");
if(a){return a.get(c.get(b))}},mouseUp:function(b){var a;a=this.getPath("parentMenu.rootMenu.targetMenuItem");
if(a){a.performAction()}return YES},performAction:function(){if(!this.get("isEnabled")||this.get("hasSubMenu")){return NO
}var b=this.getContentProperty("itemDisableMenuFlashKey"),a;if(b){this.sendAction()
}else{this._flashCounter=0;a=this.getPath("parentMenu.rootMenu");a._isFlashing=YES;
this.invokeLater(this.flashHighlight,25);this.invokeLater(this.sendAction,150)}return YES
},sendAction:function(){var c=this.getContentProperty("itemActionKey"),d=this.getContentProperty("itemTargetKey"),b=this.getPath("parentMenu.rootMenu"),a;
this.getPath("parentMenu.rootMenu").remove();b._isFlashing=NO;c=(c===undefined)?b.get("action"):c;
d=(d===undefined)?b.get("target"):d;b.set("selectedItem",this.get("content"));if(SC.typeOf(c)===SC.T_FUNCTION){c.apply(d,[b]);
SC.Logger.warn("Support for menu item action functions has been deprecated. Please use target and action.")
}else{a=this.getPath("pane.rootResponder")||SC.RootResponder.responder;if(a){a.sendAction(c,d,this)
}}},flashHighlight:function(){var a=this._flashCounter,b=this.$();if(a%2===0){b.addClass("focus")
}else{b.removeClass("focus")}if(a<=2){this.invokeLater(this.flashHighlight,50);this._flashCounter++
}},mouseDown:function(a){return YES},mouseEntered:function(a){var c=this.get("parentMenu"),b=c.get("rootMenu");
if(b._isFlashing){return}c.set("mouseHasEntered",YES);this.set("mouseHasEntered",YES);
c.set("currentMenuItem",this);if(this.get("isEnabled")){this.becomeFirstResponder()
}if(this.get("hasSubMenu")){this._subMenuTimer=this.invokeLater(this.showSubMenu,100)
}return YES},mouseExited:function(a){var b,c;if(this.get("hasSubMenu")){c=this._subMenuTimer;
if(c){c.invalidate()}else{this.invokeLater(this.checkMouseLocation,100)}}else{b=this.get("parentMenu");
if(b.get("currentMenuItem")===this){b.set("currentMenuItem",null)}}return YES},touchStart:function(a){this.mouseEntered(a);
return YES},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)
},touchExited:function(a){return this.mouseExited(a)},checkMouseLocation:function(){var b=this.get("subMenu"),c=this.get("parentMenu"),a,d;
if(!b.get("mouseHasEntered")){a=c.get("currentMenuItem");if(a===this||a===null){d=c.get("previousMenuItem");
if(d){d.resignFirstResponder()}this.resignFirstResponder();b.remove()}}},moveUp:function(b,a){var c=this.get("parentMenu");
if(c){c.moveUp(this)}return YES},moveDown:function(b,a){var c=this.get("parentMenu");
if(c){c.moveDown(this)}return YES},moveRight:function(b,a){this.showSubMenu();return YES
},insertText:function(b,a){var c=this.get("parentMenu");if(c){c.insertText(b,a)}},keyDown:function(a){return this.interpretKeyEvents(a)
},keyUp:function(a){return YES},cancel:function(a){this.getPath("parentMenu.rootMenu").remove();
return YES},didBecomeFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");
if(b){b.set("currentSelectedMenuItem",this)}},willLoseFirstResponder:function(a){if(a!==this){return
}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",null);b.set("previousSelectedMenuItem",this)
}},insertNewline:function(b,a){this.mouseUp(a)},closeParent:function(){this.$().removeClass("focus");
var a=this.get("parentMenu");if(a){a.remove()}},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)
},contentDidChange:function(){var b=this.get("content"),a=this._content;if(b===a){return
}var c=this.contentPropertyDidChange;if(a&&a.removeObserver){a.removeObserver("*",this,c)
}this._content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")
}.observes("content"),contentPropertyDidChange:function(g,j){var b=this.get("parentMenu");
if(!b){return}var a=SC.MenuItemView._contentPropertyToMenuItemPropertyMapping,h=SC.keys(a),e,f,d,c;
if(j==="*"){for(e=0,f=h.length;e<f;++e){d=h[e];c=a[d];this.notifyPropertyChange(c)
}}else{for(e=0,f=h.length;e<f;++e){d=h[e];if(b.get(d)===j){c=a[d];this.notifyPropertyChange(c)
}}}}});SC.MenuItemView._contentPropertyToMenuItemPropertyMapping={itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemSeparatorKey:"isSeparator",itemSubMenuKey:"subMenu"};
require("panes/picker");require("views/menu_item");SC.MenuPane=SC.PickerPane.extend({classNames:["sc-menu"],items:[],controlSize:SC.REGULAR_CONTROL_SIZE,itemHeight:null,itemSeparatorHeight:null,menuHeight:0,menuHeightPadding:null,submenuOffsetX:null,selectedItem:null,exampleView:SC.MenuItemView,anchor:null,isSubMenu:NO,localize:YES,acceptsMenuPane:YES,isContextMenuEnabled:NO,popup:function(b,c){var a;
this.beginPropertyChanges();if(b){a=b.isView?b.get("layer"):b}this.set("anchorElement",a);
this.set("anchor",b);if(c){this.set("preferMatrix",c)}this.adjust("height",this.get("menuHeight"));
this.positionPane();this.set("defaultResponder",this);this.endPropertyChanges();this.append()
},remove:function(){var a=this.get("parentMenu");this.set("currentMenuItem",null);
this.closeOpenMenus();this.resignMenuPane();if(a){a.becomeMenuPane()}return arguments.callee.base.apply(this,arguments)
},itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemValueKey:"value",itemIconKey:"icon",itemHeightKey:"height",itemSubMenuKey:"subMenu",itemSeparatorKey:"separator",itemTargetKey:"target",itemActionKey:"action",itemCheckboxKey:"checkbox",itemShortCutKey:"shortcut",itemKeyEquivalentKey:"keyEquivalent",itemDisableMenuFlashKey:"disableMenuFlash",menuItemKeys:"itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemSeparatorKey itemActionKey itemCheckboxKey itemShortCutKey itemHeightKey itemSubMenuKey itemKeyEquivalentKey itemTargetKey".w(),preferType:SC.PICKER_MENU,isModal:YES,_menuView:null,init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.TINY_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.TINY_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.TINY_SUBMENU_OFFSET_X);
break;case SC.SMALL_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.SMALL_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.SMALL_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.SMALL_SUBMENU_OFFSET_X);
break;case SC.REGULAR_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.REGULAR_SUBMENU_OFFSET_X);
break;case SC.LARGE_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.LARGE_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.LARGE_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.LARGE_SUBMENU_OFFSET_X);
break;case SC.HUGE_CONTROL_SIZE:this.setIfNull("itemHeight",SC.MenuPane.HUGE_MENU_ITEM_HEIGHT);
this.setIfNull("itemSeparatorHeight",SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT);
this.setIfNull("menuHeightPadding",SC.MenuPane.HUGE_MENU_HEIGHT_PADDING);this.setIfNull("submenuOffsetX",SC.MenuPane.HUGE_SUBMENU_OFFSET_X);
break}return arguments.callee.base.apply(this,arguments)},setIfNull:function(a,b){if(this.get(a)===null){this.set(a,b)
}},render:function(a,b){a.addClass(this.get("controlSize"));return arguments.callee.base.apply(this,arguments)
},createChildViews:function(){var b,a,c;b=this.createChildView(SC.MenuScrollView,{borderStyle:SC.BORDER_NONE,controlSize:this.get("controlSize")});
a=this._menuView=SC.View.create();c=this.get("menuItemViews");a.set("layout",{top:0,left:0,height:this.get("menuHeight")});
a.replaceAllChildren(c);b.set("contentView",a);this.childViews=[b];return this},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);
a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);
this.parentViewDidChange();this._notifyDidAppendToDocument();this.becomeMenuPane();
return this},becomeMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(this)
}return this},resignMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(null)
}return this},menuItemViews:function(){var o=[],l=this.get("displayItems"),j=this.get("exampleView"),q,m,p,c,k,b,f,e,h,a,g,d,n,i;
if(!l){return o}c=this.get("itemHeightKey");k=this.get("itemSeparatorKey");b=this.get("itemHeight");
a=this.get("itemKeyEquivalentKey");f=this.get("itemSeparatorHeight");h=Math.floor(this.get("menuHeightPadding")/2);
e=h;d=this.menuItemKeys.map(SC._menu_fetchKeys,this);i=l.get("length");for(n=0;n<i;
n++){q=l[n];p=q.get(c);if(!p){p=q.get(k)?f:b}m=this._menuView.createChildView(j,{layout:{height:p,top:e},contentDisplayProperties:d,content:q,parentMenu:this});
o[n]=m;e+=p;g=q.get(a);if(g){this._keyEquivalents[g]=m}}this.set("menuHeight",e+h);
return o}.property("displayItems").cacheable(),menuItemViewForContentIndex:function(a){var b=this.get("menuItemViews");
if(!b){return undefined}return b.objectAt(a)},_keyEquivalents:{},rootMenu:function(){if(this.get("isSubMenu")){return this.getPath("parentMenu.rootMenu")
}return this}.property("isSubMenu").cacheable(),windowSizeDidChange:function(b,a){this.remove();
return arguments.callee.base.apply(this,arguments)},displayItems:function(){var d=this.get("items"),c=this.get("localize"),h=this.get("itemHeight"),b,e=[],a,f,g;
if(!d){return null}b=d.get("length");for(a=0;a<b;a++){f=d.objectAt(a);if(!f){continue
}g=SC.typeOf(f);if(g===SC.T_STRING){f=SC.Object.create({title:f,value:f,isEnabled:YES})
}else{if(g===SC.T_HASH){f=SC.Object.create(f)}else{if(g===SC.T_ARRAY){f=this.convertArrayMenuItemToObject(f)
}}}f.contentIndex=a;e.push(f)}return e}.property("items").cacheable(),_sc_menu_itemsDidChange:function(){var a=this.get("menuItemViews");
this._menuView.replaceAllChildren(a);this._menuView.adjust("height",this.get("menuHeight"))
}.observes("items"),convertArrayMenuItemToObject:function(f){SC.Logger.warn("Support for Array-based menu items has been deprecated.  Please update your menus to use a hash.");
var e,c=SC._menu_fetchKeys,b=SC._menu_fetchItem,h,d=SC.Object.create(),a,g;e=this.menuItemKeys.map(c,this);
d[e[0]]=f[0];d[e[1]]=f[1];d[e[2]]=f[2];d[e[3]]=f[3];d[e[4]]=f[4];d[e[5]]=f[5];d[e[6]]=f[6];
d[e[7]]=f[7];d[e[8]]=f[8];d[e[9]]=f[9];d[e[10]]=f[10];d[e[11]]=f[11];d[e[12]]=f[12];
return d},currentMenuItem:function(a,b){if(b!==undefined){if(this._currentMenuItem!==null){this.set("previousMenuItem",this._currentMenuItem)
}this._currentMenuItem=b;this.setPath("rootMenu.targetMenuItem",b);return b}return this._currentMenuItem
}.property().cacheable(),_sc_menu_currentMenuItemDidChange:function(){var a=this.get("currentMenuItem"),b=this.get("previousMenuItem");
if(b){if(b.get("hasSubMenu")&&a===null){}else{b.resignFirstResponder();this.closeOpenMenusFor(b)
}}if(a&&a.get("isEnabled")){a.scrollToVisible()}}.observes("currentMenuItem"),closeOpenMenusFor:function(a){if(!a){return
}var b=a.get("parentMenu");while(b&&a){b=a.get("subMenu");if(b){b.remove();a.resignFirstResponder();
a=b.get("previousMenuItem")}}},closeOpenMenus:function(){this.closeOpenMenusFor(this.get("previousMenuItem"))
},mouseDown:function(a){this.modalPaneDidClick(a);return YES},mouseEntered:function(a){this.set("mouseHasEntered",YES)
},keyUp:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},moveUp:function(){var c=this.get("currentMenuItem"),d=this.get("menuItemViews"),b,e,a;
if(!c){a=d.get("length")-1}else{b=c.getPath("content.contentIndex");if(b===0){return YES
}a=b-1}while(a>=0){if(d[a].get("isEnabled")){this.set("currentMenuItem",d[a]);d[a].becomeFirstResponder();
break}a--}return YES},moveDown:function(){var d=this.get("currentMenuItem"),e=this.get("menuItemViews"),b=e.get("length"),c,f,a;
if(!d){a=0}else{c=d.getPath("content.contentIndex");if(c===b){return YES}a=c+1}while(a<b){if(e[a].get("isEnabled")){this.set("currentMenuItem",e[a]);
e[a].becomeFirstResponder();break}a++}return YES},insertText:function(b,a){var d=this._timer,c=this._keyBuffer;
if(d){d.invalidate()}d=this._timer=SC.Timer.schedule({target:this,action:"clearKeyBuffer",interval:500,isPooled:NO});
c=c||"";c+=b.toUpperCase();this.selectMenuItemForString(c);this._keyBuffer=c;return YES
},performKeyEquivalent:function(b){if(!this.get("isVisibleInWindow")){return NO}var a=this._keyEquivalents[b];
if(a){a.performAction(YES);return YES}if(b==="escape"||b==="return"){this.remove();
return YES}return NO},selectMenuItemForString:function(c){var d=this.get("menuItemViews"),f,g,b,a,e;
if(!d){return}e=c.length;a=d.get("length");for(b=0;b<a;b++){f=d.objectAt(b);g=f.get("title");
if(!g){continue}g=g.replace(/ /g,"").substr(0,e).toUpperCase();if(g===c){this.set("currentMenuItem",f);
f.becomeFirstResponder();break}}},clearKeyBuffer:function(){this._keyBuffer=""},modalPaneDidClick:function(a){this.remove();
return YES}});SC._menu_fetchKeys=function(a){return this.get(a)};SC._menu_fetchItem=function(a){if(!a){return null
}return this.get?this.get(a):this[a]};SC.MenuPane.TINY_MENU_ITEM_HEIGHT=10;SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT=2;
SC.MenuPane.TINY_MENU_HEIGHT_PADDING=2;SC.MenuPane.TINY_SUBMENU_OFFSET_X=0;SC.MenuPane.SMALL_MENU_ITEM_HEIGHT=16;
SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT=7;SC.MenuPane.SMALL_MENU_HEIGHT_PADDING=4;
SC.MenuPane.SMALL_SUBMENU_OFFSET_X=2;SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT=20;SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT=9;
SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING=6;SC.MenuPane.REGULAR_SUBMENU_OFFSET_X=2;
SC.MenuPane.LARGE_MENU_ITEM_HEIGHT=60;SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT=20;
SC.MenuPane.LARGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.LARGE_SUBMENU_OFFSET_X=4;SC.MenuPane.HUGE_MENU_ITEM_HEIGHT=20;
SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.HUGE_MENU_HEIGHT_PADDING=0;
SC.MenuPane.HUGE_SUBMENU_OFFSET_X=0;SC.MenuPane.VERTICAL_OFFSET=23;sc_require("views/button");
SC.SelectButtonView=SC.ButtonView.extend({escapeHTML:YES,objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,iconKey:null,isEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["select-button"],menu:null,itemList:[],itemIdx:null,value:null,checkboxEnabled:YES,separatorPostion:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","objects"],preferMatrix:null,SELECT_BUTTON_SPRITE_WIDTH:28,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,customView:null,customViewClassName:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,supportFocusRing:YES,isContextMenuEnabled:NO,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectButtonView.TINY_OFFSET_X;
case SC.SMALL_CONTROL_SIZE:return SC.SelectButtonView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectButtonView.REGULAR_OFFSET_X;
case SC.LARGE_CONTROL_SIZE:return SC.SelectButtonView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectButtonView.HUGE_OFFSET_X
}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");
b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)
})}return b},render:function(b,e){arguments.callee.base.apply(this,arguments);var c,a,n,q,u,f,s,g,l,o,k,d,i,v,p,m,r,j,h;
c=this.layout.width;if(e&&c){this.adjust({width:c-this.SELECT_BUTTON_SPRITE_WIDTH})
}a=this.get("objects");a=this.sortObjects(a);n=a.length;q=this.get("nameKey");u=this.get("iconKey");
f=this.get("valueKey");h=this.get("isEnabledKey");s=this.get("checkboxEnabled");g=this.get("value");
l=this.get("localize");o=this.get("separatorPostion");k=[];d=YES;i=0;a.forEach(function(w){if(w){v=q?(w.get?w.get(q):w[q]):w.toString();
v=l?v.loc():v;p=u?(w.get?w.get(u):w[u]):null;if(SC.none(w[u])){p=null}m=(f)?(w.get?w.get(f):w[f]):w;
if(!SC.none(g)&&!SC.none(m)){if(g===m){this.set("title",v);this.set("icon",p)}}if(m===this.get("value")){this.set("itemIdx",i);
d=!s?NO:YES}else{d=NO}j=(h)?(w.get?w.get(h):w[h]):w;if(NO!==j){j=YES}if(i===0){this._defaultVal=m;
this._defaultTitle=v;this._defaultIcon=p}var x=SC.Object.create({title:v,icon:p,value:m,isEnabled:j,checkbox:d,target:this,action:"displaySelectedItem"});
k.push(x)}i+=1;if(o&&i===(n-o)){var y=SC.Object.create({separator:YES});k.push(y)
}this.set("itemList",k)},this);if(e){this.invokeLast(function(){var w=this.get("value");
if(SC.none(w)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);
this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this.itemIdx)
},_action:function(o){var i,a,l,m,u,q,B,e,A,c,p,v,r,y,f,g,n,b,z,h,k,C,j;i=this.$(".sc-button-label")[0];
C=SC.SelectButtonView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:C+=SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET;
break;case SC.SMALL_CONTROL_SIZE:C+=SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET;
break;case SC.REGULAR_CONTROL_SIZE:C+=SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET;
break;case SC.LARGE_CONTROL_SIZE:C+=SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET;
break;case SC.HUGE_CONTROL_SIZE:C+=SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET;
break}}a=this.get("layer").offsetWidth+C;l=i.scrollWidth;m=this.get("lastMenuWidth");
if(l){u=i.offsetWidth;if(l&&u){a=a+l-u}}if(!m||(a>m)){m=a}q=this.get("itemList");
var w=this.get("customViewClassName"),s=this.get("customViewMenuOffsetWidth"),d="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";
d=w?(d+" "+w):d;h=(this.get("customView")||SC.MenuItemView).create();k=h.get("escapeHTML");
var j=document.body;for(p=0,z=q.length;p<z;++p){A=q.objectAt(p);c=document.createElement("div");
c.style.cssText="top:-10000px; left: -10000px;  position: absolute;";c.className=d;
c.innerHTML=k?SC.RenderContext.escapeHTML(A.title):A.title;j.appendChild(c);B=c.offsetWidth+s;
if(!e||(B>e)){e=B}j.removeChild(c)}e=(e>m)?e:m;var x=SC.RootResponder.responder.get("currentWindowSize").width;
if(e>x){e=(x-25)}this.set("lastMenuWidth",m);v=this.get("value");r=this.get("itemList");
y=this.get("controlSize");g=this.get("customView");n=g?g:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:r,exampleView:n,isEnabled:YES,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:e},controlSize:y,itemWidth:m,performKeyEquivalent:function(E,D){switch(E){case"tab":case"shift_tab":return YES;
default:return arguments.callee.base.apply(this,arguments)}}});if(!b){return NO}b.popup(this,this.preferMatrix);
this.set("menu",b);g=b.menuItemViewForContentIndex(this.get("itemIdx"));b.set("currentMenuItem",g);
if(g){g.becomeFirstResponder()}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=this.getPath("menu.selectedItem");
if(!b){return NO}this.set("value",b.get("value"));this.set("title",b.get("title"));
this.set("itemIdx",b.get("contentIndex"));return YES},changeSelectButtonPreferMatrix:function(){var c=0,g=0;
switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:c=SC.SelectButtonView.TINY_OFFSET_Y;
g=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:c=SC.SelectButtonView.SMALL_OFFSET_Y;
g=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:c=SC.SelectButtonView.REGULAR_OFFSET_Y;
g=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:c=SC.SelectButtonView.LARGE_OFFSET_Y;
g=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:c=SC.SelectButtonView.HUGE_OFFSET_Y;
g=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;break}var e=c,b=this.get("itemIdx"),a=this.get("leftAlign"),f,d;
if(this.get("isDefaultPosition")){f=[1,0,3];this.set("preferMatrix",f)}else{if(b){e=b*g+c
}d=[a,-e,2];this.set("preferMatrix",d)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();
this.invokeLast(this._recordMouseDownTimestamp);return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()
},mouseUp:function(b){var d=new Date().getTime(),c=this._menuRenderedTimestamp,e=this.get("menu"),f=SC.platform.touch,a;
if(e){a=e.getPath("rootMenu.targetMenuItem");if(a&&a.get("mouseHasEntered")){if(!a.performAction()){e.remove()
}}else{if(!f&&(d-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){if(!e.get("mouseHasEntered")&&!this.get("isDefaultPosition")){a=e.get("currentMenuItem");
if(a&&!a.performAction()){e.remove()}}else{e.remove()}}}}this._isMouseDown=NO;return YES
},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES
}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()
}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)
},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),_button_isSelectedDidChange:function(){}.observes("isSelected"),didAppendToDocument:function(){}});
SC.SelectButtonView.TINY_OFFSET_X=0;SC.SelectButtonView.TINY_OFFSET_Y=0;SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET=0;
SC.SelectButtonView.SMALL_OFFSET_X=-18;SC.SelectButtonView.SMALL_OFFSET_Y=3;SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;
SC.SelectButtonView.REGULAR_OFFSET_X=-17;SC.SelectButtonView.REGULAR_OFFSET_Y=3;SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;
SC.SelectButtonView.LARGE_OFFSET_X=-17;SC.SelectButtonView.LARGE_OFFSET_Y=6;SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;
SC.SelectButtonView.HUGE_OFFSET_X=0;SC.SelectButtonView.HUGE_OFFSET_Y=0;SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;
SC.SelectButtonView.MENU_WIDTH_OFFSET=-2;sc_require("panes/panel");SC.SheetPane=SC.PanelPane.extend({classNames:"sc-sheet",modalPane:SC.ModalPane,transitionDuration:200,_state:"NO_VIEW",init:function(){arguments.callee.base.apply(this,arguments);
if(SC.Animatable){SC.SheetPane.ANIMATABLE_AVAILABLE=YES;this.mixin(SC.Animatable);
if(!this.transitions){this.transitions={}}if(!this.transitions.top){this.transitions.top={duration:this.transitionDuration===200?0.3:this.transitionDuration/1000,action:"_complete",target:this}
}}},append:function(){var a=this.get("layout");if(!a.height||!a.top){a=SC.View.convertLayoutToAnchoredLayout(a,this.computeParentDimensions())
}a.top=-1*a.height;if(this.disableAnimation){this.disableAnimation()}this.adjust(a);
this.updateLayout();if(this.enableAnimation){this.enableAnimation()}return arguments.callee.base.apply(this,arguments)
},remove:function(){var b=this,a=arguments;this.invokeLater(function(){a.callee.base.apply(b,a)
},this.transitionDuration);this.slideUp();return this},paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);
this.slideDown();return a},slideDown:function(){this._state=SC.SheetPane.ANIMATING;
this._direction=SC.SheetPane.SLIDE_DOWN;if(SC.SheetPane.ANIMATABLE_AVAILABLE){this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_OUT;
this.adjust("top",0)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");
this.tick()}},slideUp:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_UP;
if(SC.SheetPane.ANIMATABLE_AVAILABLE){var a=this.get("layout");this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_IN;
this.adjust("top",-1*a.height)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");
this.tick()}},_complete:function(){var a=this._direction;if(a===SC.SheetPane.SLIDE_DOWN){if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",0)
}this.adjust({centerX:0,left:null});if(SC.browser.mozilla){this.parentViewDidChange()
}}else{var b=this.get("layout");if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",-1*b.height)
}}this._state=SC.SheetPane.READY;this.updateLayout()},blurTo:function(a){this.setFirstResponder("")
},tick:function(){this._timer=null;var b=Date.now();var e=(b-this._start)/(this._end-this._start),g=this,a=this._direction,c=this.get("layout"),d,f;
if(e<0){e=0}if(e>=1){this._complete();return this}f=Math.floor(c.height*e);if(a==SC.SheetPane.SLIDE_DOWN){g.adjust("top",0-(c.height-f))
}else{if(a==SC.SheetPane.SLIDE_UP){g.adjust("top",0-f)}}this._timer=this.invokeLater(this.tick,20);
g.updateLayout();return this}});SC.SheetPane.mixin({ANIMATABLE_AVAILABLE:NO,NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",SLIDE_DOWN:"SLIDEDOWN",SLIDE_UP:"SLIDEUP"});
SC.DRAG_LINK=4;SC.DRAG_COPY=1;SC.DRAG_MOVE=2;SC.DRAG_NONE=0;SC.DRAG_ANY=7;SC.DRAG_AUTOSCROLL_ZONE_THICKNESS=20;
SC.Drag=SC.Object.extend({source:null,ghostView:null,ghostActsLikeCursor:NO,dragView:null,ghost:YES,slideBack:YES,mouseDownEvent:null,ghostOffset:{x:0,y:0},location:{},dataTypes:function(){if(this.dataSource){return this.dataSource.get("dragDataTypes")||[]
}var d=this.data;if(d){var a=[];for(var b in d){if(d.hasOwnProperty(b)){a.push(b)
}}return a}var c=this.get("source");if(c&&c.dragDataTypes){return c.get("dragDataTypes")||[]
}return[]}.property().cacheable(),hasDataType:function(a){return(this.get("dataTypes").indexOf(a)>=0)
},dataForType:function(a){if(this.dataSource){return this.dataSource.dragDataForType(this,a)
}else{if(this.data){return this.data[a]}else{var b=this.get("source");if(b&&SC.typeOf(b.dragDataForType)==SC.T_FUNCTION){return b.dragDataForType(this,a)
}else{return null}}}},dataSource:null,data:null,allowedDragOperations:SC.DRAG_ANY,_dragInProgress:YES,_dragViewWasVisible:null,startDrag:function(){this._createGhostView();
var h=this.event;var e={x:h.pageX,y:h.pageY};this.set("location",e);var b=this._getDragView();
var i=b.get("parentView");var f=i?i.convertFrameToView(b.get("frame"),null):b.get("frame");
if(this.get("ghost")){this._dragViewWasVisible=b.get("isVisible");b.set("isVisible",NO)
}if(this.ghostActsLikeCursor){this.ghostOffset={x:14,y:14}}else{this.ghostOffset={x:(e.x-f.x),y:(e.y-f.y)}
}if(!this._ghostViewHidden){this._positionGhostView(h)}this.ghostView.rootResponder.dragDidStart(this);
var a=this.source;if(a&&a.dragDidBegin){a.dragDidBegin(this,e)}var c=this._dropTargets();
for(var g=0,d=c.length;g<d;g++){c[g].tryToPerform("dragStarted",this,h)}},cancelDrag:function(){var b=this._lastTarget,c=this.get("location");
if(b&&b.dragExited){b.dragExited(this,this._lastMouseDraggedEvent)}this._destroyGhostView();
if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)
}this._dragViewWasVisible=null}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,c,SC.DRAG_NONE)
}this._lastTarget=null;this._dragInProgress=NO},mouseDragged:function(a){var b=this._autoscroll(a);
var f=this.get("location");if(!b&&(a.pageX===f.x)&&(a.pageY===f.y)){return}f={x:a.pageX,y:a.pageY};
this.set("location",f);this._lastMouseDraggedEvent=a;var d=this.source;var c=this._lastTarget;
var e=this._findDropTarget(a);var g=SC.DRAG_NONE;while(e&&(e!==c)&&(g===SC.DRAG_NONE)){if(e&&d&&d.dragSourceOperationMaskFor){g=d.dragSourceOperationMaskFor(this,e)
}else{g=SC.DRAG_ANY}if((g!==SC.DRAG_NONE)&&e&&e.computeDragOperations){g=g&e.computeDragOperations(this,a,g)
}else{g=SC.DRAG_NONE}this.allowedDragOperations=g;if(g===SC.DRAG_NONE){e=this._findNextDropTarget(e)
}}if(e!==c){if(c&&c.dragExited){c.dragExited(this,a)}if(e){if(e.dragEntered){e.dragEntered(this,a)
}if(e.dragUpdated){e.dragUpdated(this,a)}}this._lastTarget=e}else{if(e&&e.dragUpdated){e.dragUpdated(this,a)
}}if(d&&d.dragDidMove){d.dragDidMove(this,f)}if(!this._ghostViewHidden){this._positionGhostView(a)
}},mouseUp:function(l){var g={x:l.pageX,y:l.pageY},h=this._lastTarget,d=this.allowedDragOperations;
this.set("location",g);try{if(h&&h.acceptDragOperation&&h.acceptDragOperation(this,d)){d=h.performDragOperation?h.performDragOperation(this,d):SC.DRAG_NONE
}else{d=SC.DRAG_NONE}}catch(i){console.error("Exception in SC.Drag.mouseUp(acceptDragOperation|performDragOperation): %@".fmt(i))
}try{if(h&&h.dragExited){h.dragExited(this,l)}}catch(j){console.error("Exception in SC.Drag.mouseUp(target.dragExited): %@".fmt(j))
}var c=this._dropTargets();for(var k=0,f=c.length;k<f;k++){try{c[k].tryToPerform("dragEnded",this,l)
}catch(b){console.error("Exception in SC.Drag.mouseUp(dragEnded on %@): %@".fmt(c[k],b))
}}this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)
}this._dragViewWasVisible=null}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,g,d)
}this._lastTarget=null;this._dragInProgress=NO},_getDragView:function(){if(!this.dragView){if(!this.source||!this.source.isView){throw"Source can't be used as dragView, because it's not a view."
}this.dragView=this.source}return this.dragView},_createGhostView:function(){var c=this,b=this._getDragView(),d=b.get("frame"),a;
a=this.ghostView=SC.Pane.create({classNames:["sc-ghost-view"],layout:{top:d.y,left:d.x,width:d.width,height:d.height},owner:this,didCreateLayer:function(){if(b){var e=b.get("layer");
if(e){e=e.cloneNode(true);e.style.top="0px";e.style.left="0px";this.get("layer").appendChild(e)
}}}});a.append()},_positionGhostView:function(a){var c=this.get("location");c.x-=this.ghostOffset.x;
c.y-=this.ghostOffset.y;var b=this.ghostView;if(b){b.adjust({top:c.y,left:c.x});b.invokeOnce("updateLayout")
}},_ghostViewHidden:NO,hideGhostView:function(){if(this.ghostView&&!this._ghostViewHidden){this.ghostView.remove();
this._ghostViewHidden=YES}},unhideGhostView:function(){if(this._ghostViewHidden){this._ghostViewHidden=NO;
this._createGhostView()}},_destroyGhostView:function(){if(this.ghostView){this.ghostView.remove();
this.ghostView=null;this._ghostViewHidden=NO}},_dropTargets:function(){if(this._cachedDropTargets){return this._cachedDropTargets
}var b=[];var d=SC.Drag._dropTargets;for(var c in d){if(d.hasOwnProperty(c)){b.push(d[c])
}}var f={};var e=SC.Drag._dropTargets;var a=function(g){if(!g){return 0}var i=SC.guidFor(g);
var h=f[i];if(!h){h=1;while(g=g.get("parentView")){if(e[SC.guidFor(g)]!==undefined){h++
}}f[i]=h}return h};b.sort(function(h,g){if(h===g){return 0}h=a(h);g=a(g);return(h>g)?-1:1
});this._cachedDropTargets=b;return b},_findDropTarget:function(c){var g={x:c.pageX,y:c.pageY};
var e,f;var d=this._dropTargets();for(var b=0,a=d.length;b<a;b++){e=d[b];if(!e.get("isVisibleInWindow")){continue
}f=e.convertFrameToView(e.get("clippingFrame"),null);if(SC.pointInRect(g,f)){return e
}}return null},_findNextDropTarget:function(a){var b=SC.Drag._dropTargets;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a
}}return null},_autoscroll:function(l){if(!l){l=this._lastAutoscrollEvent}if(!this._dragInProgress){return NO
}var g=l?{x:l.pageX,y:l.pageY}:this.get("location"),h=this._findScrollableView(g),m=null,k,c,d,i,b,a,e;
while(h&&!m){k=h.get("canScrollVertical")?1:0;c=h.get("canScrollHorizontal")?1:0;
if(k||c){a=h.get("containerView");if(a){e=h.convertFrameToView(a.get("frame"),null)
}else{k=c=0}}if(k){i=SC.maxY(e);d=i-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.y>=d&&g.y<=i){k=1
}else{d=SC.minY(e);i=d+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.y>=d&&g.y<=i){k=-1}else{k=0
}}}if(c){i=SC.maxX(e);d=i-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.x>=d&&g.x<=i){c=1
}else{d=SC.minX(e);i=d+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.x>=d&&g.x<=i){c=-1}else{c=0
}}}if(k||c){m=h}else{h=this._findNextScrollableView(h)}}if(m&&(this._lastScrollableView===m)){if((Date.now()-this._hotzoneStartTime)>100){this._horizontalScrollAmount*=1.05;
this._verticalScrollAmount*=1.05}}else{this._lastScrollableView=m;this._horizontalScrollAmount=15;
this._verticalScrollAmount=15;this._hotzoneStartTime=(m)?Date.now():null;c=k=0}if(m&&(c||k)){var j={x:c*this._horizontalScrollAmount,y:k*this._verticalScrollAmount};
m.scrollBy(j)}if(m){if(l){this._lastAutoscrollEvent={pageX:l.pageX,pageY:l.pageY}
}this.invokeLater(this._autoscroll,100,null);return YES}else{this._lastAutoscrollEvent=null;
return NO}},_scrollableViews:function(){if(this._cachedScrollableView){return this._cachedScrollableView
}var a=[];var c=SC.Drag._scrollableViews;for(var b in c){if(c.hasOwnProperty(b)){a.push(c[b])
}}a=a.sort(function(f,d){var e=f;while(e=e.get("parentView")){if(d==e){return -1}}return 1
});this._cachedScrollableView=a;return a},_findScrollableView:function(f){var c=this._scrollableViews(),b=c?c.length:0,d,e,a;
for(a=0;a<b;a++){d=c[a];if(!d.get("isVisibleInWindow")){continue}e=d.convertFrameToView(d.get("clippingFrame"),null);
if(SC.pointInRect(f,e)){return d}}return null},_findNextScrollableView:function(a){var b=SC.Drag._scrollableViews;
while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null}});SC.Drag.mixin({start:function(b){var a=this.create(b);
a.startDrag();return a},_dropTargets:{},_scrollableViews:{},addDropTarget:function(a){this._dropTargets[SC.guidFor(a)]=a
},removeDropTarget:function(a){delete this._dropTargets[SC.guidFor(a)]},addScrollableView:function(a){this._scrollableViews[SC.guidFor(a)]=a
},removeScrollableView:function(a){delete this._scrollableViews[SC.guidFor(a)]}});
SC.MODIFIED_KEY_BINDINGS={"ctrl_.":"cancel",shift_tab:"insertBacktab",shift_left:"moveLeftAndModifySelection",shift_right:"moveRightAndModifySelection",shift_up:"moveUpAndModifySelection",shift_down:"moveDownAndModifySelection",alt_left:"moveLeftAndModifySelection",alt_right:"moveRightAndModifySelection",alt_up:"moveUpAndModifySelection",alt_down:"moveDownAndModifySelection",ctrl_a:"selectAll"};
SC.BASE_KEY_BINDINGS={escape:"cancel",backspace:"deleteBackward","delete":"deleteForward","return":"insertNewline",tab:"insertTab",left:"moveLeft",right:"moveRight",up:"moveUp",down:"moveDown",home:"moveToBeginningOfDocument",end:"moveToEndOfDocument",pagedown:"pageDown",pageup:"pageUp"};
require("core");SC.UndoManager=SC.Object.extend({undoActionName:function(){return this.undoStack?this.undoStack.name:null
}.property("undoStack"),redoActionName:function(){return this.redoStack?this.redoStack.name:null
}.property("redoStack"),canUndo:function(){return this.undoStack!=null}.property("undoStack"),canRedo:function(){return this.redoStack!=null
}.property("redoStack"),undo:function(){this._undoOrRedo("undoStack","isUndoing")
},redo:function(){this._undoOrRedo("redoStack","isRedoing")},isUndoing:false,isRedoing:false,groupingLevel:0,registerUndo:function(b,a){this.beginUndoGroup(a);
this._activeGroup.actions.push(b);this.endUndoGroup(a)},beginUndoGroup:function(b){if(this._activeGroup){this.groupingLevel++
}else{var a=this.isUndoing?"redoStack":"undoStack";this._activeGroup={name:b,actions:[],prev:this.get(a)};
this.set(a,this._activeGroup);this.groupingLevel=1}},endUndoGroup:function(a){if(!this._activeGroup){raise("endUndoGroup() called outside group.")
}if(this.groupingLevel>1){this.groupingLevel--}else{this._activeGroup=null;this.groupingLevel=0
}this.propertyDidChange(this.isUndoing?"redoStack":"undoStack")},setActionName:function(a){if(!this._activeGroup){raise("setActionName() called outside group.")
}this._activeGroup.name=a},_activeGroup:null,undoStack:null,redoStack:null,_undoOrRedo:function(a,c){if(this._activeGroup){return false
}if(this.get(a)==null){return true}this.set(c,true);var e=this.get(a);this.set(a,e.prev);
var b;var d=e.actions.length>1;if(d){this.beginUndoGroup(e.name)}while(b=e.actions.pop()){b()
}if(d){this.endUndoGroup(e.name)}this.set(c,false)}});SC.CheckboxView=SC.ButtonView.extend(SC.StaticLayout,SC.Button,{classNames:["sc-checkbox-view"],tagName:"label",needsEllipsis:NO,render:function(b,a){var c,d,i=this.get("value"),h=i===SC.MIXED_MODE?"mixed":(i===this.get("toggleOnValue")?"true":"false");
if(a){var f=SC.BLANK_IMAGE_URL,e=this.get("isEnabled")?"":'disabled="disabled"',g=SC.guidFor(this);
b.attr("role","checkbox");c=this._field_currentDisplayTitle=this.get("displayTitle");
if(SC.browser.msie){b.attr("for",g)}b.push('<span class="button" ></span>');if(this.get("needsEllipsis")){b.push('<span class="label ellipsis">',c,"</span>")
}else{b.push('<span class="label">',c,"</span>")}b.attr("name",g)}else{c=this.get("displayTitle");
if(c!==this._field_currentDisplayTitle){this._field_currentDisplayTitle=c;this.$("span.label").text(c)
}}b.attr("aria-checked",h)},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;if(a){a.allowDefault()}return YES
},mouseUp:function(a){if(!this.get("isEnabled")||(a&&a.target&&!this.$().within(a.target))){return YES
}var b=this.get("value");if(b===this.get("toggleOnValue")){this.$().attr("aria-checked","false");
this.set("value",this.get("toggleOffValue"))}else{this.$().attr("aria-checked","true");
this.set("value",this.get("toggleOnValue"))}this.set("isActive",NO);this._isMouseDown=NO;
return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
}});SC.LIST_ITEM_ACTION_CANCEL="sc-list-item-cancel-action";SC.LIST_ITEM_ACTION_REFRESH="sc-list-item-cancel-refresh";
SC.LIST_ITEM_ACTION_EJECT="sc-list-item-cancel-eject";SC.ListItemView=SC.View.extend(SC.Control,{classNames:["sc-list-item-view"],content:null,hasContentIcon:NO,hasContentRightIcon:NO,hasContentBranch:NO,contentCheckboxKey:null,contentIconKey:null,contentRightIconKey:null,contentValueKey:null,escapeHTML:YES,contentUnreadCountKey:null,contentIsBranchKey:null,isEditing:NO,outlineIndent:16,outlineLevel:0,disclosureState:SC.LEAF_NODE,validator:null,contentPropertyDidChange:function(){if(this.get("contentIsEditable")!==this.contentIsEditable()){this.notifyPropertyChange("contentIsEditable")
}this.displayDidChange()},contentIsEditable:function(){var a=this.get("content");
return a&&(a.get?a.get("isEditable")!==NO:NO)}.property("content").cacheable(),render:function(c,a){var f=this.get("content"),m=this.displayDelegate,b=this.get("outlineLevel"),e=this.get("outlineIndent"),l,j,i,n=[];
n.push((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));
i=c.begin("div").addClass("sc-outline");if(b>=0&&e>0){i.addStyle("left",e*(b+1))}j=this.get("disclosureState");
if(j!==SC.LEAF_NODE){this.renderDisclosure(i,j);n.push("has-disclosure")}l=this.getDelegateProperty("contentCheckboxKey",m);
if(l){j=f?(f.get?f.get(l):f[l]):NO;this.renderCheckbox(i,j);n.push("has-checkbox")
}if(this.getDelegateProperty("hasContentIcon",m)){l=this.getDelegateProperty("contentIconKey",m);
j=(l&&f)?(f.get?f.get(l):f[l]):null;this.renderIcon(i,j);n.push("has-icon")}l=this.getDelegateProperty("contentValueKey",m);
j=(l&&f)?(f.get?f.get(l):f[l]):f;if(j&&SC.typeOf(j)!==SC.T_STRING){j=j.toString()
}if(this.get("escapeHTML")){j=SC.RenderContext.escapeHTML(j)}this.renderLabel(i,j);
if(this.getDelegateProperty("hasContentRightIcon",m)){l=this.getDelegateProperty("contentRightIconKey",m);
j=(l&&f)?(f.get?f.get(l):f[l]):null;this.renderRightIcon(i,j);n.push("has-right-icon")
}l=this.getDelegateProperty("contentUnreadCountKey",m);j=(l&&f)?(f.get?f.get(l):f[l]):null;
if(!SC.none(j)&&(j!==0)){this.renderCount(i,j);var d=["zero","one","two","three","four","five"];
var k=j.toString().length;var h=d.length;var g=(k<h)?d[k]:d[h-1];n.push("has-count "+g+"-digit")
}l=this.getDelegateProperty("listItemActionProperty",m);j=(l&&f)?(f.get?f.get(l):f[l]):null;
if(j){this.renderAction(i,j);n.push("has-action")}if(this.getDelegateProperty("hasContentBranch",m)){l=this.getDelegateProperty("contentIsBranchKey",m);
j=(l&&f)?(f.get?f.get(l):f[l]):NO;this.renderBranch(i,j);n.push("has-branch")}c.addClass(n);
c=i.end()},renderDisclosure:function(e,f){var d=(f===SC.BRANCH_OPEN)?"open":"closed",a=this._scli_disclosureHtml,c,b;
if(!a){a=this.constructor.prototype._scli_disclosureHtml={}}c=a[d];if(!c){c=a[d]='<img src="'+SC.BLANK_IMAGE_URL+'" class="disclosure button '+d+'" />'
}e.push(c)},renderCheckbox:function(f,h){var e=(h===SC.MIXED_STATE)?"mixed":h?"sel":"nosel",b=this._scli_checkboxHtml,g=this.get("contentIsEditable")&&this.get("isEnabled"),d,c,a=[];
if(!g){e=SC.keyFor("disabled",e)}if(!b){b=this.constructor.prototype._scli_checkboxHtml={}
}d=b[e];if(!d){c=SC.RenderContext("div").attr("role","button").classNames(SC.clone(SC.CheckboxView.prototype.classNames));
if(h===SC.MIXED_STATE){a.push("mixed")}else{if(h){a.push("sel")}}if(!g){a.push("disabled")
}c.addClass(a);c.push('<span class="button"></span>');d=b[e]=c.join()}f.push(d)},renderIcon:function(c,e){var b=null,d=null,a=[];
if(e&&SC.ImageView.valueIsUrl(e)){b=e;d=""}else{d=e;b=SC.BLANK_IMAGE_URL}a.push(d,"icon");
c.begin("img").addClass(a).attr("src",b).end()},renderLabel:function(b,a){b.push("<label>",a||"","</label>")
},$label:function(){return this.$("label")},renderRightIcon:function(c,e){var b=null,d=null,a=[];
if(e&&SC.ImageView.valueIsUrl(e)){b=e;d=""}else{d=e;b=SC.BLANK_IMAGE_URL}a.push("right-icon",d);
c.begin("img").addClass(a).attr("src",b).end()},renderCount:function(a,b){a.push('<span class="count"><span class="inner">',b.toString(),"</span></span>")
},renderAction:function(a,b){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="action" />')
},renderBranch:function(c,b){var a=[];a.push("branch",b?"branch-visible":"branch-hidden");
c.begin("span").addClass(a).push("&nbsp;").end()},_isInsideElementWithClassName:function(e,a){var c=this.get("layer");
if(!c){return NO}var d=SC.$(a.target);var b=NO,f;while(!b&&d.length>0&&(d[0]!==c)){if(d.hasClass(e)){b=YES
}d=d.parent()}d=c=null;return b},_isInsideCheckbox:function(b){var a=this.displayDelegate;
var c=this.getDelegateProperty("contentCheckboxKey",a);return c&&this._isInsideElementWithClassName("sc-checkbox-view",b)
},_isInsideDisclosure:function(a){if(this.get("disclosureState")===SC.LEAF_NODE){return NO
}return this._isInsideElementWithClassName("disclosure",a)},_isInsideRightIcon:function(c){var b=this.displayDelegate;
var a=this.getDelegateProperty("hasContentRightIcon",b)||!SC.none(this.rightIcon);
return a&&this._isInsideElementWithClassName("right-icon",c)},mouseDown:function(a){if(!this.get("contentIsEditable")){return NO
}if(this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseDownOnCheckbox=YES;
this._isMouseInsideCheckbox=YES;return YES}else{if(this._isInsideDisclosure(a)){this._addDisclosureActiveState();
this._isMouseDownOnDisclosure=YES;this._isMouseInsideDisclosure=YES;return YES}else{if(this._isInsideRightIcon(a)){this._addRightIconActiveState();
this._isMouseDownOnRightIcon=YES;this._isMouseInsideRightIcon=YES;return YES}}}return NO
},mouseUp:function(h){var c=NO,i,d,b,a,g,f;if(this._isMouseDownOnCheckbox){if(this._isInsideCheckbox(h)){i=this.displayDelegate;
d=this.getDelegateProperty("contentCheckboxKey",i);b=this.get("content");if(b&&b.get){var e=b.get(d);
e=(e===SC.MIXED_STATE)?YES:!e;b.set(d,e);this.displayDidChange()}}this._removeCheckboxActiveState();
c=YES}else{if(this._isMouseDownOnDisclosure){if(this._isInsideDisclosure(h)){a=this.get("disclosureState");
g=this.get("contentIndex");f=(!SC.none(g))?SC.IndexSet.create(g):null;i=this.get("displayDelegate");
if(a===SC.BRANCH_OPEN){if(f&&i&&i.collapse){i.collapse(f)}else{this.set("disclosureState",SC.BRANCH_CLOSED)
}this.displayDidChange()}else{if(a===SC.BRANCH_CLOSED){if(f&&i&&i.expand){i.expand(f)
}else{this.set("disclosureState",SC.BRANCH_OPEN)}this.displayDidChange()}}}this._removeDisclosureActiveState();
c=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();c=YES
}}}this._isMouseInsideCheckbox=this._isMouseDownOnCheckbox=NO;this._isMouseDownOnDisclosure=this._isMouseInsideDisclosure=NO;
this._isMouseInsideRightIcon=this._isMouseDownOnRightIcon=NO;return c},mouseMoved:function(a){if(this._isMouseDownOnCheckbox&&this._isInsideCheckbox(a)){this._addCheckboxActiveState();
this._isMouseInsideCheckbox=YES}else{if(this._isMouseDownOnCheckbox){this._removeCheckboxActiveState();
this._isMouseInsideCheckbox=NO}else{if(this._isMouseDownOnDisclosure&&this._isInsideDisclosure(a)){this._addDisclosureActiveState();
this._isMouseInsideDisclosure=YES}else{if(this._isMouseDownOnDisclosure){this._removeDisclosureActiveState();
this._isMouseInsideDisclosure=NO}else{if(this._isMouseDownOnRightIcon&&this._isInsideRightIcon(a)){this._addRightIconActiveState();
this._isMouseInsideRightIcon=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();
this._isMouseInsideRightIcon=NO}}}}}}return NO},touchStart:function(a){return this.mouseDown(a)
},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)
},touchExited:function(a){return this.mouseExited(a)},_addCheckboxActiveState:function(){var a=this.get("isEnabled");
this.$(".sc-checkbox-view").setClass("active",a)},_removeCheckboxActiveState:function(){this.$(".sc-checkbox-view").removeClass("active")
},_addDisclosureActiveState:function(){var a=this.get("isEnabled");this.$("img.disclosure").setClass("active",a)
},_removeDisclosureActiveState:function(){this.$("img.disclosure").removeClass("active")
},_addRightIconActiveState:function(){this.$("img.right-icon").setClass("active",YES)
},_removeRightIconActiveState:function(){this.$("img.right-icon").removeClass("active")
},contentHitTest:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentValueKey",a);
if(!c){return NO}var e=this.$label()[0];if(!e){return NO}var f=b.target,d=this.get("layer");
while(f&&(f!==d)&&(f!==window)){if(f===e){return YES}f=f.parentNode}return NO},beginEditing:function(){if(this.get("isEditing")){return YES
}return this._beginEditing(YES)},_beginEditing:function(w){var p=this.get("content"),h=this.get("displayDelegate"),g=this.getDelegateProperty("contentValueKey",h),i=this.get("parentView"),u=i?i.get("frame"):null,a=this.$label(),d=this.get("validator"),r,k,e,l,b,n,c,o,s,q,x;
if(w&&this.scrollToVisible()){var j=this.get("owner"),m=this.get("contentIndex");
this.invokeLast(function(){var f=j.itemViewForContentIndex(m);if(f&&f._beginEditing){f._beginEditing(NO)
}});return YES}if(!i||!a||a.get("length")===0){return NO}k=(g&&p&&p.get)?p.get(g):null;
r=this.computeFrameWithParentFrame(null);e=SC.viewportOffset(a[0]);l=a.css("lineHeight");
b=a.css("fontSize");n=this.$().css("top");if(n){n=parseInt(n.substring(0,n.length-2),0)
}else{n=0}c=l;s=0;if(b&&c){q=b*1.5;if(q<c){a.css({lineHeight:"1.5"});s=(c-q)/2}else{l=null
}}r.x=e.x;r.y=e.y+n+s;r.height=a[0].offsetHeight;r.width=a[0].offsetWidth;o=this.get("escapeHTML");
x=SC.InlineTextFieldView.beginEditing({frame:r,exampleElement:a,delegate:this,value:k,multiline:NO,isCollection:YES,validator:d,escapeHTML:o});
if(l){a.css({lineHeight:l})}return x},commitEditing:function(){if(!this.get("isEditing")){return YES
}return SC.InlineTextFieldView.commitEditing()},discardEditing:function(){if(!this.get("isEditing")){return YES
}return SC.InlineTextFieldView.discardEditing()},inlineEditorWillBeginEditing:function(a){this.set("isEditing",YES)
},inlineEditorDidBeginEditing:function(b){var a=this.$label();this._oldOpacity=a.css("opacity");
a.css("opacity",0)},inlineEditorShouldBeginEditing:function(a){return YES},inlineEditorShouldBeginEditing:function(a,b){return YES
},inlineEditorShouldEndEditing:function(a,b){return YES},inlineEditorDidEndEditing:function(c,e){this.set("isEditing",NO);
var d=this.get("content");var a=this.displayDelegate;var b=this.getDelegateProperty("contentValueKey",a);
if(b&&d&&d.set){d.set(b,e)}this.displayDidChange()}});sc_require("mixins/collection_view_delegate");
sc_require("views/list_item");SC.DRAG_REORDER=16;SC.HORIZONTAL_ORIENTATION="horizontal";
SC.VERTICAL_ORIENTATION="vertical";SC.BENCHMARK_RELOAD=NO;SC.CollectionView=SC.View.extend(SC.CollectionViewDelegate,SC.CollectionContent,{classNames:["sc-collection-view"],ACTION_DELAY:200,useFastPath:NO,content:null,contentBindingDefault:SC.Binding.multiple(),length:0,nowShowing:function(){return this.computeNowShowing()
}.property("length","clippingFrame").cacheable(),selection:null,isSelectable:YES,isSelectableBindingDefault:SC.Binding.bool(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),isEditable:YES,isEditableBindingDefault:SC.Binding.bool(),canReorderContent:NO,canReorderContentBindingDefault:SC.Binding.bool(),canDeleteContent:NO,canDeleteContentBindingDefault:SC.Binding.bool(),canEditContent:NO,canEditContentBindingDefault:SC.Binding.bool(),isDropTarget:NO,useToggleSelection:NO,actOnSelect:NO,selectOnMouseDown:YES,exampleView:SC.ListItemView,contentExampleViewKey:null,groupExampleView:null,contentGroupExampleViewKey:null,action:null,target:null,contentValueKey:null,acceptsFirstResponder:NO,isActive:NO,calculatedHeight:0,calculatedWidth:0,computeLayout:function(){return null
},layoutForContentIndex:function(a){return null},allContentIndexes:function(){return SC.IndexSet.create(0,this.get("length")).freeze()
}.property("length").cacheable(),contentIndexesInRect:function(a){return null},computeNowShowing:function(){var c=this.contentIndexesInRect(this.get("clippingFrame"));
if(!c){c=this.get("allContentIndexes")}else{var b=this.get("length"),a=c.get("max");
if(a>b){c=c.copy().remove(b,a-b).freeze()}}return c},showInsertionPoint:function(a,b){},hideInsertionPoint:function(){},delegate:null,selectionDelegate:function(){var a=this.get("delegate"),b=this.get("content");
return this.delegateFor("isCollectionViewDelegate",a,b)}.property("delegate","content").cacheable(),contentDelegate:function(){var a=this.get("delegate"),b=this.get("content");
return this.delegateFor("isCollectionContent",a,b)}.property("delegate","content").cacheable(),_contentGroupIndexes:function(){return this.get("contentDelegate").contentGroupIndexes(this,this.get("content"))
}.property("contentDelegate","content").cacheable(),contentRangeDidChange:function(d,b,c,a){if(!b&&(c==="[]")){this.notifyPropertyChange("_contentGroupIndexes");
this.reload(a)}else{this.contentPropertyDidChange(b,c,a)}},contentPropertyDidChange:function(c,b,a){},updateContentRangeObserver:function(){var d=this.get("nowShowing"),a=this._cv_contentRangeObserver,c=this.get("content");
if(!c){return}if(a){c.updateRangeObserver(a,d)}else{var b=this.contentRangeDidChange;
a=c.addRangeObserver(d,this,b,null);this._cv_contentRangeObserver=a}},removeContentRangeObserver:function(){var b=this.get("content"),a=this._cv_contentRangeObserver;
if(a){if(b){b.removeRangeObserver(a)}this._cv_contentRangeObserver=null}},contentLengthDidChange:function(){var a=this.get("content");
this.set("length",a?a.get("length"):0)},_cv_contentDidChange:function(){var b=this.get("content"),a=this.contentLengthDidChange;
if(b===this._content){return}this.removeContentRangeObserver();if(this._content){this._content.removeObserver("length",this,a)
}this._content=b;if(b){b.addObserver("length",this,a)}this.contentLengthDidChange();
this.contentRangeDidChange(b,null,"[]",null)}.observes("content"),_invalidIndexes:NO,reload:function(a){var b=this._invalidIndexes;
if(a&&b!==YES){if(b){b.add(a)}else{b=this._invalidIndexes=a.clone()}}else{this._invalidIndexes=YES
}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadIfNeeded)}return this
},reloadIfNeeded:function(){var y=this._invalidIndexes;if(!y||!this.get("isVisibleInWindow")){return this
}this._invalidIndexes=NO;var v=this.get("content"),w,x,n,A=this.computeLayout(),z=SC.BENCHMARK_RELOAD,c=this.get("nowShowing"),B=this._sc_itemViews,o=this.get("containerView")||this,a,r,u,s,l,p,h,q,e,m,k,C,d,b,g,j,f;
if(y.isIndexSet&&y.contains(c)){y=YES}if(this.willReload){this.willReload(y===YES?null:y)
}a=this.get("exampleView");u=a?a.isReusableInCollections:NO;r=this.get("groupExampleView");
s=r?r.isReusableInCollections:NO;if(y.isIndexSet){if(z){SC.Benchmark.start(z="%@#reloadIfNeeded (Partial)".fmt(this),YES)
}p=[];h=[];q=[];y.forEach(function(i){n=B?B[i]:null;if(c.contains(i)){if(n&&n.parentView===o){h.push(i)
}else{q.push(i)}}else{if(n&&n.parentView===o){p.push(i)}}},this);for(w=0,x=p.length;
w<x;++w){m=p[w];n=B?B[m]:null;delete B[m];g=this.get("contentDelegate");j=this.get("_contentGroupIndexes");
f=j&&j.contains(m);if(f){f=g.contentIndexIsGroup(this,v,m)}l=f?s:u;if(l){b=f?this._GROUP_VIEW_POOL:this._VIEW_POOL;
b.push(n);n.destroyLayer()}C=n.get("layer");if(C&&C.parentNode){C.parentNode.removeChild(C)
}o.removeChild(n);if(!l){n.destroy()}}for(w=0,x=h.length;w<x;++w){m=h[w];n=B?B[m]:null;
k=this.itemViewForContentIndex(m,YES);n.destroyLayer();o.replaceChild(k,n)}for(w=0,x=q.length;
w<x;++w){m=q[w];k=this.itemViewForContentIndex(m,YES);o.insertBefore(k,null)}if(z){SC.Benchmark.end(z)
}}else{if(z){SC.Benchmark.start(z="%@#reloadIfNeeded (Full)".fmt(this),YES)}if(B){B.length=0
}e=o.get("childViews");if(e){e=e.copy()}o.beginPropertyChanges();if(this.willRemoveAllChildren){this.willRemoveAllChildren()
}o.destroyLayer().removeAllChildren();if(e){for(w=0,x=e.length;w<x;++w){k=e[w];f=k.get("isGroupView");
l=f?s:u;if(l){b=f?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(k);k.destroyLayer()
}else{k.destroy()}}}e=[];c.forEach(function(i){e.push(this.itemViewForContentIndex(i,YES))
},this);o.set("childViews",e);o.replaceLayer();o.endPropertyChanges();if(z){SC.Benchmark.end(z)
}}if(A){this.adjust(A)}if(this.didReload){this.didReload(y===YES?null:y)}return this
},displayProperties:"isFirstResponder isEnabled isActive".w(),render:function(a,b){a.setClass("focus",this.get("isFirstResponder"));
a.setClass("disabled",!this.get("isEnabled"));a.setClass("active",this.get("isActive"));
return arguments.callee.base.apply(this,arguments)},_TMP_ATTRS:{},_COLLECTION_CLASS_NAMES:"sc-collection-item".w(),_GROUP_COLLECTION_CLASS_NAMES:"sc-collection-item sc-group-item".w(),_VIEW_POOL:null,_GROUP_VIEW_POOL:null,itemViewForContentIndex:function(l,a){var w;
var v=this._sc_itemViews;if(!v){v=this._sc_itemViews=[]}else{if(!a&&(w=v[l])){return w
}}var n=this.get("content"),p=n.objectAt(l),h=this.get("contentDelegate"),j=this.get("_contentGroupIndexes"),i=NO,x,k,q,f,r,d,b,c,u,g,e,o,s;
i=j&&j.contains(l);if(i){i=h.contentIndexIsGroup(this,n,l)}if(i){x=this.get("contentGroupExampleViewKey");
if(x&&p){k=p.get(x)}if(!k){k=this.get("groupExampleView")||this.get("exampleView")
}r="_GROUP_VIEW_POOL"}else{x=this.get("contentExampleViewKey");if(x&&p){k=p.get(x)
}if(!k){k=this.get("exampleView")}r="_VIEW_POOL"}c=this.get("containerView")||this;
f=this.layerIdFor(l);u=h.contentIndexIsEnabled(this,n,l);g=h.contentIndexIsSelected(this,n,l);
e=h.contentIndexOutlineLevel(this,n,l);o=h.contentIndexDisclosureState(this,n,l);
s=this.isVisibleInWindow;q=this.layoutForContentIndex(l);if(k&&k.isReusableInCollections){d=this[r];
if(!d){d=this[r]=[]}if(d.length>0){w=d.pop();b=w.prepareForReuse;if(b){b.call(w)}w.beginPropertyChanges();
w.set("contentIndex",l);w.set("layerId",f);w.set("isEnabled",u);w.set("isSelected",g);
w.set("outlineLevel",e);w.set("disclosureState",o);w.set("isVisibleInWindow",s);w.set("parentView",c);
SC.View.views[f]=w;if(q){w.set("layout",q)}else{w.set("layout",k.prototype.layout)
}w.set("content",p);w.endPropertyChanges()}}if(!w){var m=this._TMP_ATTRS;m.contentIndex=l;
m.content=p;m.owner=m.displayDelegate=this;m.parentView=c;m.page=this.page;m.layerId=f;
m.isEnabled=u;m.isSelected=g;m.outlineLevel=e;m.disclosureState=o;m.isGroupView=i;
m.isVisibleInWindow=s;if(i){m.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{m.classNames=this._COLLECTION_CLASS_NAMES
}if(q){m.layout=q}else{delete m.layout}w=this.createItemView(k,l,m)}v[l]=w;return w
},itemViewForContentObject:function(a){return this.itemViewForContentIndex(this.get("content").indexOf(a))
},_TMP_LAYERID:[],createItemView:function(c,a,b){return c.create(b)},layerIdFor:function(a){var b=this._TMP_LAYERID;
b[0]=SC.guidFor(this);b[1]=a;return b.join("-")},contentIndexForLayerId:function(c){if(!c||!(c=c.toString())){return null
}var b=this._baseLayerId;if(!b){b=this._baseLayerId=SC.guidFor(this)+"-"}if((c.length<=b.length)||(c.indexOf(b)!==0)){return null
}var a=Number(c.slice(c.lastIndexOf("-")+1));return isNaN(a)?null:a},itemViewForEvent:function(j){var d=this.getPath("pane.rootResponder");
if(!d){return null}var c=SC.guidFor(this)+"-",a=c.length,e=j.target,g=this.get("layer"),f=null,b,i,h;
while(e&&e!==document&&e!==g){b=e?SC.$(e).attr("id"):null;if(b&&(f=this.contentIndexForLayerId(b))!==null){break
}e=e.parentNode}if(f===null||(e===g)){e=g=null;return null}if(f>=this.get("length")){throw"layout for item view %@ was found when item view does not exist (%@)".fmt(b,this)
}return this.itemViewForContentIndex(f)},expand:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");
b.forEach(function(d){var e=a.contentIndexDisclosureState(this,c,d);if(e===SC.BRANCH_CLOSED){a.contentIndexExpand(this,c,d)
}},this);return this},collapse:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");
b.forEach(function(d){var e=a.contentIndexDisclosureState(this,c,d);if(e===SC.BRANCH_OPEN){a.contentIndexCollapse(this,c,d)
}},this);return this},_cv_selectionDidChange:function(){var c=this.get("selection"),b=this._cv_selection,a=this._cv_selectionContentDidChange;
if(c===b){return}if(b){b.removeObserver("[]",this,a)}if(c){c.addObserver("[]",this,a)
}this._cv_selection=c;this._cv_selectionContentDidChange()}.observes("selection"),_cv_selectionContentDidChange:function(){var c=this.get("selection"),b=this._cv_selindexes,a=this.get("content"),d;
this._cv_selindexes=c?c.frozenCopy():null;if(b){b=b.indexSetForSource(a)}if(c){c=c.indexSetForSource(a)
}if(c&&b){d=c.without(b).add(b.without(c))}else{d=c||b}if(d&&d.get("length")>0){this.reloadSelectionIndexes(d)
}},_invalidSelection:NO,reloadSelectionIndexes:function(a){var b=this._invalidSelection;
if(a&&(b!==YES)){if(b){b.add(a)}else{b=this._invalidSelection=a.copy()}}else{this._invalidSelection=YES
}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)
}return this},reloadSelectionIndexesIfNeeded:function(){var e=this._invalidSelection;
if(!e||!this.get("isVisibleInWindow")){return this}var d=this.get("nowShowing"),b=this._invalidIndexes,a=this.get("content"),c=this.get("selection");
this._invalidSelection=NO;if(b===YES||!d){return this}if(e===YES){e=d}if(b&&b.isIndexSet){e=e.without(b)
}e.forEach(function(f){if(!d.contains(f)){return}var g=this.itemViewForContentIndex(f,NO);
if(g){g.set("isSelected",c?c.contains(a,f):NO)}},this);return this},select:function(c,f){var d=this.get("content"),a=this.get("selectionDelegate"),b=this.get("_contentGroupIndexes"),e;
if(!this.get("isSelectable")){return this}if(SC.typeOf(c)===SC.T_NUMBER){c=SC.IndexSet.create(c,1)
}if(c&&c.get("length")>0){if(b&&b.get("length")>0){c=c.copy().remove(b)}c=a.collectionViewShouldSelectIndexes(this,c,f);
if(!c||c.get("length")===0){return this}}else{c=null}if(f&&(e=this.get("selection"))){e=e.copy()
}else{e=SC.SelectionSet.create()}if(c&&c.get("length")>0){if(c.get("length")===1){e.addObject(d.objectAt(c.get("firstObject")))
}else{e.add(d,c)}}e=a.collectionViewSelectionForProposedSelection(this,e);if(!e){e=SC.SelectionSet.create()
}this._selectionAnchor=null;this.set("selection",e.freeze());return this},deselect:function(b){var d=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate");
if(!this.get("isSelectable")){return this}if(!d||d.get("length")===0){return this
}if(SC.typeOf(b)===SC.T_NUMBER){b=SC.IndexSet.create(b,1)}b=a.collectionViewShouldDeselectIndexes(this,b);
if(!b||b.get("length")===0){return this}d=d.copy().remove(c,b);d=a.collectionViewSelectionForProposedSelection(this,d);
if(!d){d=SC.SelectionSet.create()}this.set("selection",d.freeze());return this},_findNextSelectableItemFromIndex:function(h,a){var c=this.get("length"),d=SC.IndexSet.create(),e=this.get("content"),i=this.get("selectionDelegate"),g=this.get("_contentGroupIndexes"),f,b;
if(!g&&(i.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return h
}while(h<c){if(!g||!g.contains(h)){d.add(h);f=i.collectionViewShouldSelectIndexes(this,d);
if(f&&f.get("length")>=1){return h}d.remove(h)}h++}if(a===undefined){b=this.get("selection");
a=b?b.get("max"):-1}return a},_findPreviousSelectableItemFromIndex:function(b,h){var c=SC.IndexSet.create(),f=this.get("content"),a=this.get("selectionDelegate"),e=this.get("_contentGroupIndexes"),d;
if(SC.none(b)){b=-1}if(!e&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b
}while(b>=0){if(!e||!e.contains(b)){c.add(b);d=a.collectionViewShouldSelectIndexes(this,c);
if(d&&d.get("length")>=1){return b}c.remove(b)}b--}if(h===undefined){var g=this.get("selection");
h=g?g.get("min"):-1}if(SC.none(h)){h=-1}return h},selectPreviousItem:function(h,b){if(SC.none(b)){b=1
}if(SC.none(h)){h=false}var f=this.get("selection"),e=this.get("content");if(f){f=f.indexSetForSource(e)
}var g=f?f.get("min"):-1,a=f?f.get("max")-1:-1,d=this._selectionAnchor;if(SC.none(d)){d=g
}if(h){if(a>d){a=a-b}else{g=this._findPreviousSelectableItemFromIndex(g-b)}if(SC.none(g)||(g<0)){g=0
}if(!e.objectAt(g)){g=f?f.get("min"):-1}if(a<g){a=g}}else{g=this._findPreviousSelectableItemFromIndex(g-b);
if(SC.none(g)||(g<0)){g=0}if(!e.objectAt(g)){g=f?f.get("min"):-1}a=g;d=null}var c=g;
f=SC.IndexSet.create(g,a+1-g);this.scrollToContentIndex(c);this.select(f);this._selectionAnchor=d;
return this},selectNextItem:function(h,i){if(SC.none(i)){i=1}if(SC.none(h)){h=false
}var b=this.get("selection"),g=this.get("content");if(b){b=b.indexSetForSource(g)
}var a=b?b.get("min"):-1,d=b?b.get("max")-1:-1,e=this._selectionAnchor,c=this.get("length");
if(SC.none(e)){e=a}if(h){if(a<e){a=a+i}else{d=this._findNextSelectableItemFromIndex(d+i,d)
}if(d>=c){d=c-1}if(!g.objectAt(d)){d=b?b.get("max")-1:-1}if(a>d){a=d}}else{d=this._findNextSelectableItemFromIndex(d+i,d);
if(d>=c){d=c-1}if(!g.objectAt(d)){d=b?b.get("max")-1:-1}a=d;e=null}var f=d;b=SC.IndexSet.create(a,d-a+1);
this.scrollToContentIndex(f);this.select(b);this._selectionAnchor=e;return this},deleteSelection:function(){if(!this.get("canDeleteContent")){return NO
}var d=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate"),b=d&&c?d.indexSetForSource(c):null;
if(!c||!b||b.get("length")===0){return NO}b=a.collectionViewShouldDeleteIndexes(this,b);
if(!b||b.get("length")===0){return NO}a.collectionViewDeleteContent(this,this.get("content"),b);
return YES},scrollToContentIndex:function(b){var a=this.itemViewForContentIndex(b);
if(a){this.scrollToItemView(a)}return this},scrollToItemView:function(a){if(a){a.scrollToVisible()
}return this},keyDown:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b
},keyUp:function(){return true},insertText:function(b,a){if(b===" "){var c=this.get("selection");
if(c&&c.get("length")>0){this.invokeLater(this._cv_action,0,null,a)}return YES}else{return NO
}},selectAll:function(a){var b=this.get("content"),c=b?SC.IndexSet.create(0,b.get("length")):null;
this.select(c,NO);return YES},deleteBackward:function(a){return this.deleteSelection()
},deleteForward:function(a){return this.deleteSelection()},moveDown:function(b,a){this.selectNextItem(false,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUp:function(b,a){this.selectPreviousItem(false,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeft:function(k){if(k.ctrlKey||k.metaKey){return NO
}if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(false,1);this._cv_performSelectAction(null,k,this.ACTION_DELAY)
}else{var c=this.get("selection"),i=this.get("content"),g=c?c.indexSetForSource(i):null;
if(g){var l=undefined,f=false,h=undefined;if(g.get("length")===1){h=g.get("firstObject");
l=this.get("contentDelegate");var b=l.contentIndexDisclosureState(this,i,h);if(b!==SC.BRANCH_OPEN){f=true
}}if(f){var a=l.contentIndexOutlineLevel(this,i,h)-1;if(a>=0){var e=-1;while(e<0){var d=this._findPreviousSelectableItemFromIndex(h-1);
if(d<0){return false}h=d;var j=l.contentIndexOutlineLevel(this,i,h);if(j===a){e=d
}}if(e!==-1){this.select(h)}}}else{this.collapse(g)}}}return true},moveRight:function(a){if(a.ctrlKey||a.metaKey){return NO
}if((this.get("itemsPerRow")||1)>1){this.selectNextItem(false,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)
}else{var d=this.get("selection"),c=this.get("content"),b=d?d.indexSetForSource(c):null;
if(b){this.expand(b)}}return true},moveDownAndModifySelection:function(b,a){this.selectNextItem(true,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUpAndModifySelection:function(b,a){this.selectPreviousItem(true,this.get("itemsPerRow")||1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeftAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(true,1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},moveRightAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectNextItem(true,1);
this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},insertNewline:function(d,c){var b=this.get("isEditable")&&this.get("canEditContent"),g,f,h,a,e;
if(b){g=this.get("selection");f=this.get("content");if(g&&g.get("length")===1){h=g.indexSetForSource(f);
a=h?h.get("min"):-1;b=a>=0}}if(b){e=this.itemViewForContentIndex(a);b=e&&SC.typeOf(e.beginEditing)===SC.T_FUNCTION
}if(b){this.scrollToContentIndex(a);e=this.itemViewForContentIndex(a);e.beginEditing()
}else{this.invokeLater(this._cv_action,0,e,null)}return YES},mouseDown:function(i){var g=this.itemViewForEvent(i),f=this.get("content"),e=g?g.get("contentIndex"):-1,c,d,b,a,j,h=f.get("allowsMultipleSelection");
c=this.mouseDownInfo={event:i,itemView:g,contentIndex:e,at:Date.now()};this.becomeFirstResponder();
if(this.get("useToggleSelection")){if(this.get("selectOnMouseDown")){if(!g){return
}b=this.get("selection");a=b&&b.containsObject(g.get("content"));if(a){this.deselect(e)
}else{if(!h){this.select(e,NO)}else{this.select(e,YES)}}}return YES}if(!g){if(this.get("allowDeselectAll")){this.select(null,false)
}return YES}b=this.get("selection");if(b){b=b.indexSetForSource(f)}a=b?b.contains(e):NO;
c.modifierKeyPressed=j=i.ctrlKey||i.metaKey;if(j&&a){c.shouldDeselect=e>=0}else{if(i.shiftKey&&b&&b.get("length")>0&&h){b=this._findSelectionExtendedByShift(b,e);
d=this._selectionAnchor;this.select(b);this._selectionAnchor=d}else{if(!j&&a){c.shouldReselect=e>=0
}else{if((i.shiftKey||j)&&!h){this.select(null,false)}if(this.get("selectOnMouseDown")){this.select(e,j)
}else{c.shouldSelect=e>=0}}}}c.previousContentIndex=e;return YES},mouseUp:function(i){var j=this.itemViewForEvent(i),d=this.mouseDownInfo,f=this.get("content"),e,c,a,b,g,k,h=f.get("allowsMultipleSelection");
if(this.get("useToggleSelection")){if(!j||this.get("selectOnMouseDown")){return NO
}c=this.get("selection");e=(j)?j.get("contentIndex"):-1;a=c&&c.containsObject(j.get("content"));
if(a){this.deselect(e)}else{if(!h){this.select(e,NO)}else{this.select(e,YES)}}}else{if(d){k=d.contentIndex;
e=(j)?j.get("contentIndex"):-1;if(d.shouldSelect){this.select(k,d.modifierKeyPressed)
}if(d.shouldDeselect){this.deselect(k)}if(d.shouldReselect){b=this.get("isEditable")&&this.get("canEditContent");
if(b){c=this.get("selection");b=c&&(c.get("length")===1)}if(b){g=this.itemViewForContentIndex(k);
b=g&&(!g.contentHitTest||g.contentHitTest(i));b=(b&&g.beginEditing)?g.beginEditing():NO
}if(!b){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}this._cv_reselectTimer=this.invokeLater(this.select,300,k,false)
}}this._cleanupMouseDown()}}this._cv_performSelectAction(j,i,0,i.clickCount);return NO
},_cleanupMouseDown:function(){var b=this.mouseDownInfo,a;if(b){for(a in b){if(!b.hasOwnProperty(a)){continue
}delete b[a]}}this.mouseDownInfo=null},mouseMoved:function(c){var a=this.itemViewForEvent(c),b=this._lastHoveredItem;
if(a!==b){if(b&&b.mouseExited){b.mouseExited(c)}if(a&&a.mouseEntered){a.mouseEntered(c)
}}this._lastHoveredItem=a;if(a&&a.mouseMoved){a.mouseMoved(c)}return YES},mouseExited:function(b){var a=this._lastHoveredItem;
this._lastHoveredItem=null;if(a&&a.mouseExited){a.mouseExited(b)}return YES},touchStart:function(d){if(this.get("useToggleSelection")){return true
}var b=this.itemViewForEvent(d),c=this.get("content"),f=b?b.get("contentIndex"):-1,e,a;
this.becomeFirstResponder();this.select(f,NO);this._cv_performSelectAction(this,d);
return YES},touchesDragged:function(a,b){b.forEach(function(c){if(Math.abs(c.pageX-c.startX)>5||Math.abs(c.pageY-c.startY)>5){this.select(null,NO);
c.makeTouchResponder(c.nextTouchResponder)}},this)},touchCancelled:function(a){this.select(null,NO)
},_findSelectionExtendedByShift:function(e,h){if(!e||e.get("length")===0){return SC.IndexSet.create(h)
}var d=this.get("content"),g=d.get("length")-1,c=e.get("min"),a=e.get("max")-1,f=this.mouseDownInfo,b=this._selectionAnchor;
if(SC.none(b)){b=-1}if(h<c){c=h;if(b<0){this._selectionAnchor=b=a}}else{if(h>a){a=h;
if(b<0){this._selectionAnchor=b=c}}else{if(h>=c&&h<=a){if(b<0){this._selectionAnchor=b=c
}if(h===b){c=a=h}else{if(h>b){c=b;a=h}else{if(h<b){c=h;a=b}}}}}}return SC.IndexSet.create(c,a-c+1)
},reorderDataType:function(){return"SC.CollectionView.Reorder."+SC.guidFor(this)}.property().cacheable(),dragContent:null,proposedInsertionIndex:null,proposedDropOperation:null,mouseDragged:function(h){var i=this.get("selectionDelegate"),e=this.get("content"),a=this.get("selection"),c=this.mouseDownInfo,f=this.get("_contentGroupIndexes"),d,b,g;
if(!c||c.contentIndex<0){return YES}if((Date.now()-c.at)<123){return YES}if(i.collectionViewShouldBeginDrag(this)){if(!this.get("selectOnMouseDown")){d=SC.IndexSet.create(c.contentIndex)
}else{d=a?a.indexSetForSource(e):null}if(d&&f&&f.get("length")>0){d=d.copy().remove(f);
if(d.get("length")===0){d=null}else{d.freeze()}}if(!d){return YES}else{d=d.frozenCopy()
}d={content:e,indexes:d};this.set("dragContent",d);b=this.get("dragDataTypes");if(b&&b.get("length")>0){g=i.collectionViewDragViewFor(this,d.indexes);
if(!g){g=this._cv_dragViewFor(d.indexes)}g.createLayer();SC.Drag.start({event:c.event,source:this,dragView:g,ghost:NO,ghostActsLikeCursor:i.ghostActsLikeCursor,slideBack:YES,dataSource:this});
this._cleanupMouseDown();this._lastInsertionIndex=null}else{this.set("dragContent",null)
}return YES}},_cv_dragViewFor:function(d){var b=this.get("nowShowing").without(d);
b=this.get("nowShowing").without(b);var c=this.get("layer").cloneNode(false);var a=SC.View.create({layer:c,parentView:this});
SC.$(c).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);
b.forEach(function(g){var h=this.itemViewForContentIndex(g),e,f;if(h){e=h.get("isSelected");
h.set("isSelected",NO);h.updateLayerIfNeeded();f=h.get("layer");if(f){f=f.cloneNode(true)
}h.set("isSelected",e);h.updateLayerIfNeeded()}if(f){c.appendChild(f)}f=null},this);
c=null;return a},dragDataTypes:function(){var a=this.get("selectionDelegate"),b=a.collectionViewDragDataTypes(this),c;
if(this.get("canReorderContent")){b=b?b.copy():[];c=this.get("reorderDataType");if(b.indexOf(c)<0){b.push(c)
}}return b?b:[]}.property(),dragDataForType:function(c,b){if(this.get("canReorderContent")){if(b===this.get("reorderDataType")){return this.get("dragContent")
}}var a=this.get("selectionDelegate");return a.collectionViewDragDataForType(this,c,b)
},computeDragOperations:function(c,b){var d=SC.DRAG_NONE,a=this.get("selectionDelegate");
if(this.get("canReorderContent")){if(c.get("dataTypes").indexOf(this.get("reorderDataType"))>=0){d=SC.DRAG_REORDER
}}d=a.collectionViewComputeDragOperations(this,c,d);if(d&SC.DRAG_REORDER){d=SC.DRAG_MOVE
}return d},_computeDropOperationState:function(c,l,e){var g=this.convertFrameFromView(c.get("location"),null),k=SC.DROP_BEFORE,m=this.get("selectionDelegate"),d=this.get("canReorderContent"),n,h,a,i,f,b;
var j=this.insertionIndexForLocation(g,SC.DROP_ON);if(SC.typeOf(j)===SC.T_ARRAY){k=j[1];
j=j[0]}if(k===SC.DROP_ON){this.set("proposedInsertionIndex",j);this.set("proposedDropOperation",k);
b=m.collectionViewValidateDragOperation(this,c,e,j,k);j=this.get("proposedInsertionIndex");
k=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;
if(b!==SC.DRAG_NONE){return[j,k,b]}else{k=SC.DROP_BEFORE;j=this.insertionIndexForLocation(g,SC.DROP_BEFORE);
if(SC.typeOf(j)===SC.T_ARRAY){k=j[1];j=j[0]}}}if((j>=0)&&d&&(k!==SC.DROP_ON)){n=c.dataForType(this.get("reorderDataType"));
if(n){h=this.get("content");if(k===SC.DROP_BEFORE){a=n.indexes.contains(j-1);i=n.indexes.contains(j)
}else{a=n.indexes.contains(j);i=n.indexes.contains(j-1)}if(a&&i){if(SC.none(this._lastInsertionIndex)){if(k===SC.DROP_BEFORE){while((j>=0)&&n.indexes.contains(j)){j--
}}else{f=h?h.get("length"):0;while((j<f)&&n.indexes.contains(j)){j++}}}else{j=this._lastInsertionIndex
}}if(j>=0){e=SC.DRAG_REORDER}}}this.set("proposedInsertionIndex",j);this.set("proposedDropOperation",k);
e=m.collectionViewValidateDragOperation(this,c,e,j,k);j=this.get("proposedInsertionIndex");
k=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;
return[j,k,e]},dragUpdated:function(f,b){var h=f.get("allowedDragOperations"),g=this._computeDropOperationState(f,b,h),a=g[0],c=g[1],e=g[2];
if(e!==SC.DRAG_NONE){if((this._lastInsertionIndex!==a)||(this._lastDropOperation!==c)){var d=this.itemViewForContentIndex(a);
this.showInsertionPoint(d,c)}this._lastInsertionIndex=a;this._lastDropOperation=c
}else{this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null
}return(e&SC.DRAG_REORDER)?SC.DRAG_MOVE:e},dragExited:function(){this.hideInsertionPoint();
this._lastInsertionIndex=this._lastDropOperation=null},acceptDragOperation:function(a,b){return YES
},performDragOperation:function(e,g){var a=this._computeDropOperationState(e,null,g),k=a[0],j=a[1],h=a[2],l=this.get("selectionDelegate"),c,m,d,i,b,f;
if(h&SC.DRAG_REORDER){g=(g&SC.DRAG_MOVE)?SC.DRAG_REORDER:SC.DRAG_NONE}else{g=g&h}if(g===SC.DRAG_NONE){return g
}c=l.collectionViewPerformDragOperation(this,e,g,k,j);if((c===SC.DRAG_NONE)&&(g&SC.DRAG_REORDER)){d=e.dataForType(this.get("reorderDataType"));
if(!d){return SC.DRAG_NONE}i=this.get("content");f=d.indexes;if(f.get("length")===1){if(((j===SC.DROP_BEFORE)||(j===SC.DROP_AFTER))&&(f.get("min")===k)){return SC.DRAG_MOVE
}}i.beginPropertyChanges();m=[];b=0;d.indexes.forEach(function(n){m.push(i.objectAt(n-b));
i.removeAt(n-b);b++;if(n<k){k--}},this);if(j===SC.DROP_AFTER){k++}i.replace(k,0,m,j);
this.select(SC.IndexSet.create(k,m.length));i.endPropertyChanges();g=SC.DRAG_MOVE
}return g},collectionViewShouldBeginDrag:function(a){return this.get("canReorderContent")
},insertionIndexForLocation:function(a,b){return -1},_cv_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)
}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}}}.observes("isVisibleInWindow"),collectionViewShouldSelectItem:function(a,b){return this.get("isSelectable")
},_TMP_DIFF1:SC.IndexSet.create(),_TMP_DIFF2:SC.IndexSet.create(),_cv_nowShowingDidChange:function(){var b=this.get("nowShowing"),a=this._sccv_lastNowShowing,d,e,c;
if(a!==b){if(a&&b){e=this._TMP_DIFF1.add(a).remove(b);c=this._TMP_DIFF2.add(b).remove(a);
d=e.add(c)}else{d=a||b}}if(d&&d.get("length")>0){this._sccv_lastNowShowing=b?b.frozenCopy():null;
this.updateContentRangeObserver();this.reload(d)}if(e){e.clear()}if(c){c.clear()}}.observes("nowShowing"),init:function(){arguments.callee.base.apply(this,arguments);
if(this.useFastPath){this.mixin(SC.CollectionFastPath)}if(this.get("canReorderContent")){this._cv_canReorderContentDidChange()
}this._sccv_lastNowShowing=this.get("nowShowing").clone();if(this.content){this._cv_contentDidChange()
}if(this.selection){this._cv_selectionDidChange()}},_cv_canReorderContentDidChange:function(){if(this.get("canReorderContent")){if(!this.get("isDropTarget")){this.set("isDropTarget",YES)
}SC.Drag.addDropTarget(this)}}.observes("canReorderContent"),_cv_performSelectAction:function(b,d,c,a){var e;
if(c===undefined){c=0}if(a===undefined){a=1}if((a>1)||this.get("actOnSelect")){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()
}e=this.get("selection");e=e?e.toArray():[];if(this._cv_actionTimer){this._cv_actionTimer.invalidate()
}this._cv_actionTimer=this.invokeLater(this._cv_action,c,b,d,e)}},_cv_action:function(b,a,c){var d=this.get("action");
var e=this.get("target")||null;this._cv_actionTimer=null;if(d){if(SC.typeOf(d)===SC.T_FUNCTION){return this.action(b,a)
}var f=this.get("pane");if(f){f.rootResponder.sendAction(d,e,this,f,c)}}else{if(!b){return
}else{if(SC.typeOf(b._action)==SC.T_FUNCTION){return b._action(a)}else{if(SC.typeOf(b.action)==SC.T_FUNCTION){return b.action(a)
}}}}}});SC.DateFieldView=SC.TextFieldView.extend({value:null,showDate:YES,showTime:NO,formatTime:"%I:%M %p",formatDate:"%d/%m/%Y",formatDateTime:"%d/%m/%Y %I:%M %p",_dtConstants:"%a %b %d %H %I %j %m %M %p %S %U %W %y %Y".w(),_wtConstants:[3,3,2,2,2,3,2,2,2,2,2,2,2,4],activeSelection:0,format:function(){var a=this.get("showTime");
var b=this.get("showDate");if(a===YES&&b===YES){return this.get("formatDateTime")
}if(a===YES){return this.get("formatTime")}return this.get("formatDate")}.property("showTime","showDate").cacheable(),validator:function(){return SC.Validator.DateTime.extend({format:this.get("format")})
}.property("format").cacheable(),tabsSelections:function(){var f=[];var d=this.get("format");
var i=this.get("_dtConstants");var b=this.get("_wtConstants");if(SC.empty(d)){throw"The format string is empty, and must be a valid string."
}var g,j,c,e=0,a=0,h=0;while(e<d.length&&d.indexOf("%",e)!==-1){g=d.indexOf("%",e);
j=d.substring(g,g+2);e=g+2;c=i.indexOf(j);if(c===-1){throw"SC.DateFieldView: The format's key '%@' is not supported.".fmt(j)
}a=a+g-h;f.push(SC.Object.create({key:j,textSelection:SC.TextSelection.create({start:a,end:a+b[c]})}));
a=a+b[c];h=e}g=j=c=null;return f}.property("format").cacheable(),updateTextSelecitonObserver:function(){var a=this.get("activeSelection");
var b=this.get("tabsSelections");if(this.get("isEditing")){this.selection(null,b[a].get("textSelection"))
}}.observes("activeSelection","value"),updateValue:function(b,c){var e=(c===0)?-1:1;
var d=this.get("value"),a;switch(b){case"%a":case"%d":case"%j":this.set("value",d.advance({day:e}));
break;case"%b":case"%m":this.set("value",d.advance({month:e}));break;case"%H":case"%I":this.set("value",d.advance({hour:e}));
break;case"%M":this.set("value",d.advance({minute:e}));break;case"%p":a=d.get("hour")>=12?-12:12;
this.set("value",d.advance({hour:a}));break;case"%S":this.set("value",d.advance({second:e}));
break;case"%U":this.set("value",d.advance({week1:e}));break;case"%W":this.set("value",d.advance({week0:e}));
break;case"%y":case"%Y":this.set("value",d.advance({year:e}));break}},_selectRootElement:function(){},keyDown:function(a){if(this.interpretKeyEvents(a)){a.stop();
return YES}return arguments.callee.base.apply(this,arguments)},ctrl_a:function(){return YES
},moveUp:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");
this.updateValue(c[a].get("key"),1);return YES},moveDown:function(b){var a=this.get("activeSelection");
var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),0);return YES},insertText:function(a){return YES
},moveRight:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;
if(b===c.length){b=0}this.set("activeSelection",b);return YES},moveLeft:function(a){var c=this.get("tabsSelections");
var b=this.get("activeSelection")-1;if(b===-1){b=c.length-1}this.set("activeSelection",b);
return YES},insertTab:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;
if(b<c.length){this.set("activeSelection",b);return YES}return NO},insertBacktab:function(a){var b=this.get("activeSelection")-1;
if(b!==-1){this.set("activeSelection",b);return YES}return NO},mouseUp:function(b){var c=arguments.callee.base.apply(this,arguments);
var e=this.get("selection");if(SC.none(e)){this.set("activeSelection",0)}else{var h=e.get("start");
var g=this.get("tabsSelections");var a=g.length,f;for(var d=0;d<a;d++){f=g[d].get("textSelection");
if(h>=f.get("start")&&h<=f.get("end")){this.set("activeSelection",d)}}}return c},deleteBackward:function(a){return YES
},deleteForward:function(a){return YES}});SC.DisclosureView=SC.ButtonView.extend({classNames:["sc-disclosure-view"],theme:"disclosure",buttonBehavior:SC.TOGGLE_BEHAVIOR,toggleOnValue:YES,toggleOffValue:NO,valueBindingDefault:SC.Binding.bool(),render:function(a,c){var b=this.get("displayTitle");
if(c){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="button" alt="" />');if(this.get("needsEllipsis")){a.push('<span class="ellipsis sc-button-label">',b,"</span>")
}else{a.push('<span class="sc-button-label">',b,"</span>")}}else{this.$("label").text(b)
}},keyDown:function(a){if(a.which===37||a.which===38){this.set("value",this.get("toggleOffValue"));
return YES}if(a.which===39||a.which===40){this.set("value",this.get("toggleOnValue"));
return YES}arguments.callee.base.apply(this,arguments)}});sc_require("views/collection");
sc_require("mixins/collection_row_delegate");SC.ListView=SC.CollectionView.extend(SC.CollectionRowDelegate,{classNames:["sc-list-view"],acceptsFirstResponder:YES,showAlternatingRows:NO,render:function(a,b){a.setClass("alternating",this.get("showAlternatingRows"));
return arguments.callee.base.apply(this,arguments)},rowDelegate:function(){var a=this.delegate,b=this.get("content");
return this.delegateFor("isCollectionRowDelegate",a,b)}.property("delegate","content").cacheable(),_sclv_rowDelegateDidChange:function(){var d=this._sclv_rowDelegate,b=this.get("rowDelegate"),c=this._sclv_rowHeightDidChange,a=this._sclv_customRowHeightIndexesDidChange;
if(d===b){return this}this._sclv_rowDelegate=b;if(d){d.removeObserver("rowHeight",this,c);
d.removeObserver("customRowHeightIndexes",this,a)}if(!b){throw"Internal Inconsistancy: ListView must always have CollectionRowDelegate"
}b.addObserver("rowHeight",this,c);b.addObserver("customRowHeightIndexes",this,a);
this._sclv_rowHeightDidChange()._sclv_customRowHeightIndexesDidChange();return this
}.observes("rowDelegate"),_sclv_rowHeightDidChange:function(){var b=this.get("rowDelegate"),a=b.get("rowHeight"),c;
if(a===this._sclv_rowHeight){return this}this._sclv_rowHeight=a;c=SC.IndexSet.create(0,this.get("length"));
this.rowHeightDidChangeForIndexes(c);return this},_sclv_customRowHeightIndexesDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),d=this._sclv_customRowHeightIndexes,c=this._sclv_customRowHeightIndexesContentDidChange;
if((b===d)||(d&&d.isEqual(b))){return this}if(d&&this._sclv_isObservingCustomRowHeightIndexes){d.removeObserver("[]",this,c)
}if(this._sclv_isObservingCustomRowHeightIndexes=b&&!b.get("isFrozen")){b.addObserver("[]",this,c)
}this._sclv_customRowHeightIndexesContentDidChange();return this},_sclv_customRowHeightIndexesContentDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),c=this._sclv_customRowHeightIndexes,d;
if(b&&c){d=b.copy().add(c)}else{d=b||c}this._sclv_customRowHeightIndexes=b?b.frozenCopy():null;
this.rowHeightDidChangeForIndexes(d);return this},rowOffsetForContentIndex:function(h){if(h===0){return 0
}var j=this.get("rowDelegate"),a=j.get("rowHeight"),f,e,c,b,i,g,d;e=h*a;f=this.get("rowSpacing");
if(f){e+=h*f}if(j.customRowHeightIndexes&&(c=j.get("customRowHeightIndexes"))){b=this._sclv_offsetCache;
if(!b){b=[];i=g=0;c.forEach(function(k){i+=this.rowHeightForContentIndex(k)-a;b[k+1]=i;
g=k},this);this._sclv_max=g+1;this._sclv_offsetCache=b}i=b[h];if(i===undefined){i=b[h]=b[h-1];
if(i===undefined){g=this._sclv_max;if(h<g){g=c.indexBefore(h)+1}i=b[h]=b[g]||0}}e+=i
}return e},rowHeightForContentIndex:function(a){var b=this.get("rowDelegate"),e,c,f,d;
if(b.customRowHeightIndexes&&(d=b.get("customRowHeightIndexes"))){c=this._sclv_heightCache;
if(!c){c=[];f=this.get("content");d.forEach(function(g){c[g]=b.contentIndexRowHeight(this,f,g)
},this);this._sclv_heightCache=c}e=c[a];if(e===undefined){e=b.get("rowHeight")}}else{e=b.get("rowHeight")
}return e},rowHeightDidChangeForIndexes:function(b){var a=this.get("length");this._sclv_heightCache=this._sclv_offsetCache=null;
if(b&&b.isIndexSet){b=b.get("min")}this.reload(SC.IndexSet.create(b,a-b));return this
},computeLayout:function(){var a=this._sclv_layout;if(!a){a=this._sclv_layout={}}a.minHeight=this.rowOffsetForContentIndex(this.get("length"));
this.set("calculatedHeight",a.minHeight);return a},layoutForContentIndex:function(a){return{top:this.rowOffsetForContentIndex(a),height:this.rowHeightForContentIndex(a),left:0,right:0}
},contentIndexesInRect:function(h){var a=this.get("rowDelegate").get("rowHeight"),g=SC.minY(h),b=SC.maxY(h),i=h.height||0,f=this.get("length"),e,c,d;
c=(g-(g%a))/a;e=this.rowOffsetForContentIndex(c);while(c>0&&e>g){c--;e-=this.rowHeightForContentIndex(c)
}e+=this.rowHeightForContentIndex(c);while(c<f&&e<=g){c++;e+=this.rowHeightForContentIndex(c)
}if(c<0){c=0}if(c>=f){c=f}d=c+((i-(i%a))/a);if(d>f){d=f}e=this.rowOffsetForContentIndex(d);
while(d>=c&&e>=b){d--;e-=this.rowHeightForContentIndex(d)}e+=this.rowHeightForContentIndex(d);
while(d<f&&e<b){d++;e+=this.rowHeightForContentIndex(d)}d++;if(d<c){d=c}if(d>f){d=f
}return SC.IndexSet.create(c,d-c)},insertionPointView:SC.View.extend({classNames:"sc-list-insertion-point",render:function(a,b){if(b){a.push('<div class="anchor"></div>')
}}}),showInsertionPoint:function(g,f){var h=this._insertionPointView;if(!h){h=this._insertionPointView=this.get("insertionPointView").create()
}var d=g.get("contentIndex"),e=this.get("length"),c=SC.clone(g.get("layout")),a=g.get("outlineLevel"),b=g.get("outlineIndent")||0,i;
if((d>=e)&&d>0){i=this.itemViewForContentIndex(e-1);if(i.get("isGroupView")){a=1;
b=i.get("outlineIndent")}}if(SC.none(a)){a=-1}if(f&SC.DROP_ON){this.hideInsertionPoint();
g.set("isSelected",YES);this._lastDropOnView=g}else{if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);
this._lastDropOnView=null}if(f&SC.DROP_AFTER){c.top+=c.height}c.height=2;c.right=0;
c.left=((a+1)*b)+12;delete c.width;h.set("layout",c);this.appendChild(h)}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);
this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()
}this._insertionPointView=null},insertionIndexForLocation:function(g,k){var b={x:g.x,y:g.y,width:1,height:1},f=this.contentIndexesInRect(b),h=f.get("min"),i=this.get("length"),c,l,m,e,o,d,n,j,a;
if(SC.none(h)||h<0){if((i===0)||(g.y<=this.rowOffsetForContentIndex(0))){h=0}else{if(g.y>=this.rowOffsetForContentIndex(i)){h=i
}}}c=this.rowOffsetForContentIndex(h);l=c+this.rowHeightForContentIndex(h);if(k==SC.DROP_ON){if(this.get("isEditable")){m=Math.min(Math.floor((l-c)*0.2),5)
}else{m=0}if(g.y>=(c+m)||g.y<=(l+m)){return[h,SC.DROP_ON]}}if((h<i)&&(g.y>=l-10)){h++
}if(h>0){j=this.itemViewForContentIndex(h-1);n=(j?j.get("outlineIndent"):0)||0;d=j?j.get("outlineLevel"):0;
if(h<i){j=this.itemViewForContentIndex(h);e=j?j.get("outlineLevel"):0;o=(j?j.get("outlineIndent"):0)||0;
o*=e}else{e=j.get("isGroupView")?1:0;o=n*e}n*=d;if((e!==d)&&(o!==n)){if(n>o){h--;
k=SC.DROP_AFTER}}}if(k===SC.DROP_BEFORE){j=(h<i)?this.itemViewForContentIndex(h):null;
if(!j||j.get("isGroupView")){if(h>0){j=this.itemViewForContentIndex(h-1);if(!j.get("isGroupView")||(j.get("disclosureState")===SC.BRANCH_OPEN)){h=h-1;
k=SC.DROP_AFTER}else{h=-1}}else{h=-1}}if(h<0){k=SC.DRAG_NONE}}return[h,k]},mouseWheel:function(a){var b=SC.InlineTextFieldView.editor;
if(b&&b.get("isEditing")){if(b.get("delegate").get("displayDelegate")===this){SC.InlineTextFieldView.commitEditing()
}}return NO},init:function(){arguments.callee.base.apply(this,arguments);this._sclv_rowDelegateDidChange()
}});require("views/list");SC.GridView=SC.ListView.extend({classNames:["sc-grid-view"],layout:{left:0,right:0,top:0,bottom:0},rowHeight:48,columnWidth:64,exampleView:SC.LabelView,insertionOrientation:SC.HORIZONTAL_ORIENTATION,itemsPerRow:function(){var b=this.get("frame"),a=this.get("columnWidth")||0;
return(a<=0)?1:Math.floor(b.width/a)}.property("clippingFrame","columnWidth").cacheable(),contentIndexesInRect:function(e){var d=this.get("rowHeight")||48,b=this.get("itemsPerRow"),c=Math.floor(SC.minY(e)/d)*b,a=Math.ceil(SC.maxY(e)/d)*b;
return SC.IndexSet.create(c,a-c)},layoutForContentIndex:function(g){var d=this.get("rowHeight")||48,a=this.get("clippingFrame").width,b=this.get("itemsPerRow"),e=Math.floor(a/b),f=Math.floor(g/b),c=g-(b*f);
return{left:c*e,top:f*d,height:d,width:e}},computeLayout:function(){var e=this.get("content"),d=(e)?e.get("length"):0,c=this.get("rowHeight")||48,a=this.get("itemsPerRow"),f=Math.ceil(d/a);
var b=this._cachedLayoutHash;if(!b){b=this._cachedLayoutHash={}}b.minHeight=f*c;this.calculatedHeight=b.minHeight;
return b},insertionPointClass:SC.View.extend({classNames:["grid-insertion-point"],render:function(a,b){if(b){a.push('<span class="anchor"></span>')
}}}),showInsertionPoint:function(c,e){if(!c){return}if(e===SC.DROP_ON){if(c!==this._dropOnInsertionPoint){this.hideInsertionPoint();
this._dropOnInsertionPoint=c}}else{if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null
}if(!this._insertionPointView){this._insertionPointView=this.insertionPointClass.create()
}var b=this._insertionPointView;var a=c.get("frame");var d={height:a.height-6,x:a.x,y:a.y+6,width:0};
if(!SC.rectsEqual(b.get("frame"),d)){b.set("frame",d)}if(b.parentNode!==c.parentNode){c.parentNode.appendChild(b)
}}},hideInsertionPoint:function(){var a=this._insertionPointView;if(a){a.removeFromParent()
}if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null}},insertionIndexForLocation:function(d,j){var e=this.get("frame"),g=this.get("clippingFrame"),k=this.get("itemsPerRow"),a=Math.floor(e.width/k),m=Math.floor((d.y-e.y-g.y)/this.get("rowHeight"));
var i=SC.DROP_BEFORE,c=(d.x-e.x-g.x),b=Math.floor(c/a),l=(c/a)-b;if(j===SC.DROP_ON){if(l>0.8){b++
}if((l>=0.2)&&(l<=0.8)){i=SC.DROP_ON}}else{if(l>0.45){b++}}var h=(m*k)+b;return[h,i]
},_gv_clippingFrameDidChange:function(){var d=this.get("nowShowing"),c,b,a;this.notifyPropertyChange("itemsPerRow");
a=d.get("length");for(b=0;b<a;b++){c=this.itemViewForContentIndex(b);c.adjust(this.layoutForContentIndex(b))
}}.observes("clippingFrame")});SC.ScrollerView=SC.View.extend({classNames:["sc-scroller-view"],shouldScrollToClick:NO,_touchScrollValue:NO,value:function(a,c){var b=this.get("minimum");
if(c!==undefined){this._scs_value=c}c=this._scs_value||b;return Math.max(Math.min(c,this.get("maximum")),b)
}.property("maximum","minimum").cacheable(),displayValue:function(){var a;if(this.get("_touchScrollValue")){a=this.get("_touchScrollValue")
}else{a=this.get("value")}return a}.property("value","_touchScrollValue").cacheable(),proportion:0,maximum:100,minimum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,hasButtons:YES,scrollbarThickness:14,capLength:18,capOverlap:14,buttonLength:41,buttonOverlap:11,displayProperties:"thumbPosition thumbLength isEnabled controlsHidden".w(),render:function(c,a){var b={},i="",e,k,g,f,l,j,h,d,m;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b["sc-vertical"]=YES;
break;case SC.LAYOUT_HORIZONTAL:b["sc-horizontal"]=YES;break}b.disabled=!this.get("isEnabled");
b["controls-hidden"]=this.get("controlsHidden");c.setClass(b);k=this.get("thumbLength");
e=this.get("thumbPosition");if(a){if(this.get("hasButtons")){i='<div class="button-bottom"></div><div class="button-top"></div>'
}else{i='<div class="endcap"></div>'}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:c.push('<div class="track"></div>','<div class="cap"></div>',i,'<div class="thumb" style="height: '+k+"px; top: "+e+'px;">','<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>');
break;case SC.LAYOUT_HORIZONTAL:c.push('<div class="track"></div>','<div class="cap"></div>',i,'<div class="thumb" style="width: '+k+"px; left: "+e+'px;">','<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>')
}}else{if(this.get("controlsHidden")){return}f=this.$(".thumb");this.adjustThumb(f,e,k)
}},touchScrollDidStart:function(a){this.set("_touchScrollValue",a)},touchScrollDidEnd:function(a){this.set("_touchScrollValue",NO)
},touchScrollDidChange:function(a){this.set("_touchScrollValue",a)},adjustThumb:function(b,a,c){this.adjustThumbPosition(b,a);
this.adjustThumbSize(b,c)},adjustThumbPosition:function(b,a){if(this._thumbPosition===a){return
}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.css("top",a);break;
case SC.LAYOUT_HORIZONTAL:b.css("left",a);break}this._thumbPosition=a},adjustThumbSize:function(a,b){if(this._thumbSize===b){return
}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a.css("height",Math.max(b,20));
break;case SC.LAYOUT_HORIZONTAL:a.css("width",Math.max(b,20));break}this._thumbSize=b
},trackLength:function(){var a=this.get("scrollerLength");a-=this.capLength-this.capOverlap;
a-=this.buttonLength-this.buttonOverlap;return a}.property("scrollerLength").cacheable(),scrollerLength:function(){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:return this.get("frame").height;
case SC.LAYOUT_HORIZONTAL:return this.get("frame").width}return 0}.property("frame").cacheable(),thumbLength:function(){var a;
a=Math.floor(this.get("trackLength")*this.get("proportion"));a=isNaN(a)?0:a;return Math.max(a,20)
}.property("trackLength","proportion").cacheable(),thumbPosition:function(){var g=this.get("displayValue"),c=this.get("maximum"),b=this.get("trackLength"),d=this.get("thumbLength"),f=this.get("capLength"),e=this.get("capOverlap"),a;
a=(g/c)*(b-d);a+=f-e;return Math.floor(isNaN(a)?0:a)}.property("displayValue","maximum","trackLength","thumbLength").cacheable(),controlsHidden:function(){return this.get("proportion")>=1
}.property("proportion").cacheable(),valueForPosition:function(g){var b=this.get("maximum"),a=this.get("trackLength"),c=this.get("thumbLength"),f=this.get("capLength"),d=this.get("capOverlap"),e;
e=g-(f-d);e=e/(a-c);e=e*b;return e},mouseDown:function(j){if(!this.get("isEnabled")){return NO
}this._altIsDown=j.altKey;this._shiftIsDown=j.shiftKey;var e=j.target,c=this.get("thumbPosition"),i,d,g,f=this.get("scrollerLength");
if(e.className.indexOf("thumb")>=0){d=this.convertFrameFromView({x:j.pageX,y:j.pageY});
d.x-=c;d.y-=c;this._thumbDragging=YES;this._thumbOffset=d;this._mouseDownLocation={x:j.pageX,y:j.pageY};
this._thumbPositionAtDragStart=this.get("thumbPosition");this._valueAtDragStart=this.get("value")
}else{if(e.className.indexOf("button-top")>=0){this.decrementProperty("value",(this._altIsDown?f:30));
this.makeButtonActive(".button-top");this.startMouseDownTimer("scrollUp");this._isScrollingUp=YES
}else{if(e.className.indexOf("button-bottom")>=0){this.incrementProperty("value",(this._altIsDown?f:30));
this.makeButtonActive(".button-bottom");this.startMouseDownTimer("scrollDown");this._isScrollingDown=YES
}else{var l=this.get("shouldScrollToClick");if(j.altKey){l=!l}var a=this.get("trackLength"),h=this.get("thumbLength"),b=this.convertFrameFromView({x:j.pageX,y:j.pageY}),k;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:this._mouseDownLocation=k=b.y;
break;case SC.LAYOUT_HORIZONTAL:this._mouseDownLocation=k=b.x;break}if(l){this.set("value",this.valueForPosition(k-(h/2)));
c=this.get("thumbPosition");this._thumbDragging=YES;this._thumbOffset={x:b.x-c,y:b.y-c};
this._mouseDownLocation={x:j.pageX,y:j.pageY};this._thumbPositionAtDragStart=c;this._valueAtDragStart=this.get("value")
}else{if(k<c){this.decrementProperty("value",f);this.startMouseDownTimer("page")}else{this.incrementProperty("value",f);
this.startMouseDownTimer("page")}}}}}return YES},mouseUp:function(a){var c=this._scs_buttonActive,b=NO,d;
if(c){c.removeClass("active");b=YES}d=this._mouseDownTimer;if(d){d.invalidate();this._mouseDownTimer=null
}this._thumbDragging=NO;this._isScrollingDown=NO;this._isScrollingUp=NO;return b},mouseDragged:function(m){var k,b,l,c,i=m.target,e=this._thumbPositionAtDragStart,g=this._isScrollingUp,o=this._isScrollingDown,d=this._scs_buttonActive,a;
if(this._thumbDragging){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:l=(m.pageY-this._mouseDownLocation.y);
break;case SC.LAYOUT_HORIZONTAL:l=(m.pageX-this._mouseDownLocation.x);break}if(m.altKey){if(!this._altIsDown||(this._shiftIsDown!==m.shiftKey)){e=this._thumbPositionAtDragStart=e+l;
l=0;this._mouseDownLocation={x:m.pageX,y:m.pageY};this._valueAtDragStart=this.get("value")
}if(m.shiftKey){l=-l}this.set("value",Math.round(this._valueAtDragStart+l*2))}else{c=e+l;
b=this.get("trackLength")-this.get("thumbLength");this.set("value",Math.round((c/b)*this.get("maximum")))
}}else{if(g||o){var n=NO,f=NO;var j=this.$(".button-top")[0].getBoundingClientRect();
var h=this.$(".button-bottom")[0].getBoundingClientRect();switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(m.pageY<j.bottom){n=YES
}else{f=YES}break;case SC.LAYOUT_HORIZONTAL:if(m.pageX<j.right){n=YES}else{f=YES}break
}if((n||f)&&n!==g){if(d){d.removeClass("active")}this._mouseDownTimerAction=n?"scrollUp":"scrollDown";
if(n){this.makeButtonActive(".button-top")}else{if(f){this.makeButtonActive(".button-bottom")
}}this._isScrollingUp=n;this._isScrollingDown=f}}}this._altIsDown=m.altKey;this._shiftIsDown=m.shiftKey;
return YES},startMouseDownTimer:function(b,a){var c;this._mouseDownTimerAction=b;
this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:a?0:300})
},mouseDownTimerDidFire:function(){var d=this.get("scrollerLength"),a=SC.device.get("mouseLocation"),c=this.get("thumbPosition"),b=this.get("thumbLength"),e=50;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a=this.convertFrameFromView(a).y;
break;case SC.LAYOUT_HORIZONTAL:a=this.convertFrameFromView(a).x;break}switch(this._mouseDownTimerAction){case"scrollDown":this.incrementProperty("value",this._altIsDown?d:30);
break;case"scrollUp":this.decrementProperty("value",this._altIsDown?d:30);break;case"page":e=150;
if(a<c){this.decrementProperty("value",d)}else{if(a>c+b){this.incrementProperty("value",d)
}}}this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:e})
},makeButtonActive:function(a){this._scs_buttonActive=this.$(a).addClass("active")
}});SC.TouchScrollerView=SC.ScrollerView.extend({classNames:["sc-touch-scroller-view"],scrollbarThickness:12,capLength:5,capOverlap:0,hasButtons:NO,buttonOverlap:36,adjustThumb:function(d,b,f){var c=this.$(".thumb-inner");
var a=this.get("scrollerLength")-this.capLength,e=this.get("minimum")+this.capLength;
if(b+f>a){b=Math.min(a-20,b);f=a-b}if(b<e){f-=e-b;b=e}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(this._thumbPosition!==b){d.css("-webkit-transform","translate3d(0px,"+b+"px,0px)")
}if(this._thumbSize!==f){c.css("-webkit-transform","translate3d(0px,"+Math.round(f-1044)+"px,0px)")
}break;case SC.LAYOUT_HORIZONTAL:if(this._thumbPosition!==b){d.css("-webkit-transform","translate3d("+b+"px,0px,0px)")
}if(this._thumbSize!==f){c.css("-webkit-transform","translate3d("+Math.round(f-1044)+"px,0px,0px)")
}break}this._thumbPosition=b;this._thumbSize=f},render:function(c,a){var b=[],i="",e,k,g,f,l,j,h,d,m;
switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.push("sc-vertical");
break;case SC.LAYOUT_HORIZONTAL:b.push("sc-horizontal");break}if(!this.get("isEnabled")){b.push("disabled")
}if(this.get("controlsHidden")){b.push("controls-hidden")}c.addClass(b);k=this.get("thumbLength");
e=this.get("thumbPosition");if(a){if(this.get("hasButtons")){i='<div class="button-bottom"></div><div class="button-top"></div>'
}else{i='<div class="endcap"></div>'}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:c.push('<div class="track"></div>','<div class="cap"></div>',i,'<div class="thumb">','<div class="thumb-top"></div>','<div class="thumb-clip">','<div class="thumb-inner" style="-webkit-transform: translateY('+(k-1044)+'px);">','<div class="thumb-center"></div>','<div class="thumb-bottom"></div></div></div></div>');
break;case SC.LAYOUT_HORIZONTAL:c.push('<div class="track"></div>','<div class="cap"></div>',i,'<div class="thumb">','<div class="thumb-top"></div>','<div class="thumb-clip">','<div class="thumb-inner" style="-webkit-transform: translateX('+(k-1044)+'px);">','<div class="thumb-center"></div>','<div class="thumb-bottom"></div></div></div></div>')
}}else{if(this.get("controlsHidden")){return}f=this.$(".thumb");this.adjustThumb(f,e,k)
}}});sc_require("views/scroller");sc_require("mixins/border");SC.NORMAL_SCROLL_DECELERATION=0.95;
SC.FAST_SCROLL_DECELERATION=0.85;SC.ScrollView=SC.View.extend(SC.Border,{classNames:["sc-scroll-view"],isScrollable:YES,contentView:null,horizontalAlign:SC.ALIGN_LEFT,verticalAlign:SC.ALIGN_TOP,horizontalScrollOffset:function(b,d){if(d!==undefined){var c=this.minimumHorizontalScrollOffset(),a=this.get("maximumHorizontalScrollOffset");
this._scroll_horizontalScrollOffset=Math.max(c,Math.min(a,d))}return this._scroll_horizontalScrollOffset||0
}.property().cacheable(),verticalScrollOffset:function(b,d){if(d!==undefined){var c=this.get("minimumVerticalScrollOffset"),a=this.get("maximumVerticalScrollOffset");
this._scroll_verticalScrollOffset=Math.max(c,Math.min(a,d))}return this._scroll_verticalScrollOffset||0
}.property().cacheable(),maximumScrollOffset:function(b,a,c){if(b>=a){return b-a}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0
}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)
}}},minimumScrollOffset:function(b,a,c){if(b>a){return 0}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0
}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)
}}},maximumHorizontalScrollOffset:function(){var c=this.get("contentView"),b=0,a=0;
if(c&&c.get("frame")){b=c.get("frame").width}if(c){a=c.calculatedWidth||0}if(c&&c.calculatedWidth&&c.calculatedWidth!==0){b=c.calculatedWidth
}b*=this._scale;var d=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,d)
}return this.maximumScrollOffset(b,d,this.get("horizontalAlign"))}.property(),maximumVerticalScrollOffset:function(){var a=this.get("contentView"),c=0,b=0;
if(a&&a.get("frame")){c=a.get("frame").height}if(a){b=a.calculatedHeight||0}if(a&&a.calculatedHeight&&a.calculatedHeight!==0){c=a.calculatedHeight
}c*=this._scale;var d=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,d)
}return this.maximumScrollOffset(c,d,this.get("verticalAlign"))}.property(),minimumHorizontalScrollOffset:function(){var b=this.get("contentView");
var a=b?b.get("frame").width:0;if(b&&b.calculatedWidth&&b.calculatedWidth!==0){a=b.calculatedWidth
}a*=this._scale;var c=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){a=Math.min(a,c)
}return this.minimumScrollOffset(a,c,this.get("horizontalAlign"))}.property(),minimumVerticalScrollOffset:function(){var a=this.get("contentView");
var b=(a&&a.get("frame"))?a.get("frame").height:0;if(a&&a.calculatedHeight&&a.calculatedHeight!==0){b=a.calculatedHeight
}b*=this._scale;var c=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){b=Math.min(b,c)
}return this.minimumScrollOffset(b,c,this.get("verticalAlign"))}.property(),verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("frame").height
}.property("frame"),horizontalPageScroll:function(){return this.get("frame").width
}.property("frame"),hasHorizontalScroller:YES,horizontalScrollerView:SC.ScrollerView,horizontalTouchScrollerView:SC.TouchScrollerView,isHorizontalScrollerVisible:YES,canScrollHorizontal:function(){return !!(this.get("hasHorizontalScroller")&&this.get("horizontalScrollerView")&&this.get("isHorizontalScrollerVisible"))
}.property("isHorizontalScrollerVisible").cacheable(),autohidesHorizontalScroller:YES,hasVerticalScroller:YES,verticalScrollerView:SC.ScrollerView,verticalTouchScrollerView:SC.TouchScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:function(){return !!(this.get("hasVerticalScroller")&&this.get("verticalScrollerView")&&this.get("isVerticalScrollerVisible"))
}.property("isVerticalScrollerVisible").cacheable(),autohidesVerticalScroller:YES,verticalScrollerBottom:0,verticalOverlay:function(){if(SC.platform.touch){return YES
}return NO}.property().cacheable(),horizontalOverlay:function(){if(SC.platform.touch){return YES
}return NO}.property().cacheable(),verticalScrollerLayout:null,horizontalScrollerLayout:null,containerView:SC.ContainerView.extend({}),scrollTo:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;
a=a.x}if(!SC.none(a)){a=Math.max(this.get("minimumHorizontalScrollOffset"),Math.min(this.get("maximumHorizontalScrollOffset"),a));
this.set("horizontalScrollOffset",a)}if(!SC.none(b)){b=Math.max(this.get("minimumVerticalScrollOffset"),Math.min(this.get("maximumVerticalScrollOffset"),b));
this.set("verticalScrollOffset",b)}return this},scrollBy:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;
a=a.x}a=(a)?this.get("horizontalScrollOffset")+a:null;b=(b)?this.get("verticalScrollOffset")+b:null;
return this.scrollTo(a,b)},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)
}var c=this.get("contentView");if(!c){return NO}var a=b.get("frame");if(!a){return NO
}a=c.convertFrameFromView(a,b.get("parentView"));return this.scrollToRect(a)},scrollToRect:function(b){var a=SC.cloneRect(this.get("containerView").get("frame"));
a.x=this.get("horizontalScrollOffset");a.y=this.get("verticalScrollOffset");var d=a.x,c=a.y;
a.y-=Math.max(0,SC.minY(a)-SC.minY(b));a.x-=Math.max(0,SC.minX(a)-SC.minX(b));a.y+=Math.max(0,SC.maxY(b)-SC.maxY(a));
a.x+=Math.max(0,SC.maxX(b)-SC.maxX(a));if((d!==a.x)||(c!==a.y)){this.scrollTo(a.x,a.y);
return YES}else{return NO}},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalLineScroll")*a)
},scrollUpLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-this.get("verticalLineScroll")*a)
},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo(this.get("horizontalLineScroll")*a,null)
},scrollLeftLine:function(a){if(a===undefined){a=1}return this.scrollTo(0-this.get("horizontalLineScroll")*a,null)
},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalPageScroll")*a)
},scrollUpPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-(this.get("verticalPageScroll")*a))
},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollBy(this.get("horizontalPageScroll")*a,null)
},scrollLeftPage:function(a){if(a===undefined){a=1}return this.scrollBy(0-(this.get("horizontalPageScroll")*a),null)
},tile:function(){var c=this.get("hasHorizontalScroller")?this.get("horizontalScrollerView"):null;
var h=c&&this.get("isHorizontalScrollerVisible");var j=this.get("hasVerticalScroller")?this.get("verticalScrollerView"):null;
var f=j&&this.get("isVerticalScrollerVisible");var e=this.get("containerView");var m={left:0,top:0};
var l,g,b,n,d,a;var i=((h)?c.get("scrollbarThickness"):0);var k=(f)?j.get("scrollbarThickness"):0;
if(h){a=this.get("horizontalScrollerLayout");g={left:(a?a.left:0),bottom:(a?a.bottom:0),right:(a?a.right+k-1:k-1),height:i};
c.set("layout",g);n=this.get("horizontalOverlay");m.bottom=n?0:(g.bottom+i)}else{m.bottom=0
}if(c){c.set("isVisible",h)}if(f){i=i+this.get("verticalScrollerBottom");d=this.get("verticalScrollerLayout");
g={top:(d?d.top:0),bottom:(d?d.bottom+i:i),right:(d?d.right:0),width:k};j.set("layout",g);
b=this.get("verticalOverlay");m.right=b?0:(g.right+k)}else{m.right=0}if(j){j.set("isVisible",f)
}e.adjust(m)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible"),_scroll_wheelDeltaX:0,_scroll_wheelDeltaY:0,mouseWheel:function(a){var b=(SC.browser.safari&&SC.browser.version>533)?120:1;
this._scroll_wheelDeltaX+=a.wheelDeltaX/b;this._scroll_wheelDeltaY+=a.wheelDeltaY/b;
this.invokeLater(this._scroll_mouseWheel,10);return this.get("canScrollHorizontal")||this.get("canScrollVertical")
},_scroll_mouseWheel:function(){this.scrollBy(this._scroll_wheelDeltaX,this._scroll_wheelDeltaY);
if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY>0){this._scroll_wheelDeltaY=Math.floor(this._scroll_wheelDeltaY*0.95);
this._scroll_wheelDeltaY=Math.max(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)
}else{if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY<0){this._scroll_wheelDeltaY=Math.ceil(this._scroll_wheelDeltaY*0.95);
this._scroll_wheelDeltaY=Math.min(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)
}else{this._scroll_wheelDeltaY=0;this._scroll_wheelDeltaX=0}}},canScale:NO,_scale:1,scale:function(a,b){if(b!==undefined){this._scale=Math.min(Math.max(this.get("minimumScale"),b),this.get("maximumScale"))
}return this._scale}.property().cacheable(),minimumScale:0.25,maximumScale:2,autoScaleRange:NO,_scale_css:"",updateScale:function(b){var a=this.get("contentView");
if(!a){return}if(a.isScalable){this.get("contentView").applyScale(b);this._scale_css=""
}else{this._scale_css="scale3d("+b+", "+b+", 1)"}},acceptsMultitouch:YES,decelerationRate:SC.NORMAL_SCROLL_DECELERATION,alwaysBounceHorizontal:NO,alwaysBounceVertical:YES,delaysContentTouches:YES,_touchScrollDidChange:function(){if(this.get("contentView").touchScrollDidChange){this.get("contentView").touchScrollDidChange(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)
}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidChange){this.verticalScrollerView.touchScrollDidChange(this._scroll_verticalScrollOffset)
}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidChange){this.horizontalScrollerView.touchScrollDidChange(this._scroll_horizontalScrollOffset)
}},_touchScrollDidStart:function(){if(this.get("contentView").touchScrollDidStart){this.get("contentView").touchScrollDidStart(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)
}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidStart){this.verticalScrollerView.touchScrollDidStart(this._touch_verticalScrollOffset)
}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidStart){this.horizontalScrollerView.touchScrollDidStart(this._touch_horizontalScrollOffset)
}},_touchScrollDidEnd:function(){if(this.get("contentView").touchScrollDidEnd){this.get("contentView").touchScrollDidEnd(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)
}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidEnd){this.verticalScrollerView.touchScrollDidEnd(this._touch_verticalScrollOffset)
}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidEnd){this.horizontalScrollerView.touchScrollDidEnd(this._touch_horizontalScrollOffset)
}},_applyCSSTransforms:function(b){var a="";this.updateScale(this._scale);a+="translate3d("+-this._scroll_horizontalScrollOffset+"px, "+-Math.round(this._scroll_verticalScrollOffset)+"px,0) ";
a+=this._scale_css;if(b){b.style.webkitTransform=a;b.style.webkitTransformOrigin="top left"
}},captureTouch:function(a){return YES},touchGeneration:0,touchStart:function(b){var a=++this.touchGeneration;
if(!this.tracking&&this.get("delaysContentTouches")){this.invokeLater(this.beginTouchesInContent,150,a)
}else{if(!this.tracking){this.invokeLater(this.beginTouchesInContent,1,a)}}this.beginTouchTracking(b,YES);
return YES},beginTouchesInContent:function(b){if(b!==this.touchGeneration){return
}var c=this.touch,a;if(c&&this.tracking&&!this.dragging&&!c.touch.scrollHasEnded){c.touch.captureTouch(this,YES);
if(!c.touch.touchResponder){c.touch.makeTouchResponder(this)}else{if(c.needsScrollEnd){this._touchScrollDidEnd()
}}}},beginTouchTracking:function(d,n){var g=d.averagedTouchesForView(this,n);var b=this._scroll_verticalScrollOffset||0,c=this._scroll_horizontalScrollOffset||0,i=c,h=b,e=NO;
if(this.touch&&this.touch.timeout){clearTimeout(this.touch.timeout);this.touch.timeout=null;
i=this.touch.startClipOffset.x;h=this.touch.startClipOffset.y;e=YES}var j=this.get("contentView");
var a=j?j.get("frame").width:0,l=j?j.get("frame").height:0;if(j.calculatedWidth&&j.calculatedWidth!==0){a=j.calculatedWidth
}if(j.calculatedHeight&&j.calculatedHeight!==0){l=j.calculatedHeight}var k=this.get("containerView").get("frame").width,p=this.get("containerView").get("frame").height;
var f=this.convertFrameToView(this.get("frame"),null),o=(c+(g.x-f.x))/this._scale,m=(b+(g.y-f.y))/this._scale;
this.touch={startTime:d.timeStamp,notCalculated:YES,enableScrolling:{x:a*this._scale>k||this.get("alwaysBounceHorizontal"),y:l*this._scale>p||this.get("alwaysBounceVertical")},scrolling:{x:NO,y:NO},startClipOffset:{x:i,y:h},lastScrollOffset:{x:c,y:b},startTouchOffset:{x:g.x,y:g.y},scrollVelocity:{x:0,y:0},startTouchOffsetInContent:{x:o,y:m},containerSize:{width:k,height:p},contentSize:{width:a,height:l},startScale:this._scale,startDistance:g.d,canScale:this.get("canScale"),minimumScale:this.get("minimumScale"),maximumScale:this.get("maximumScale"),globalFrame:f,layer:this.get("contentView").get("layer"),resistanceCoefficient:0.998,resistanceAsymptote:320,decelerationFromEdge:0.05,accelerationToEdge:0.1,scrollTolerance:{x:15,y:15},scaleTolerance:5,secondaryScrollTolerance:30,scrollLock:500,decelerationRate:this.get("decelerationRate"),lastEventTime:d.timeStamp,touch:(n?d:(this.touch?this.touch.touch:null)),needsScrollEnd:e};
if(!this.tracking){this.tracking=YES;this.dragging=NO}},_adjustForEdgeResistance:function(f,d,b,c,a){var e;
if(f<d){e=f-d}else{if(f>b){e=b-f}else{return f}}e=Math.pow(c,Math.abs(e))*a;if(f<d){e=e-a
}else{e=-e+a}return Math.min(Math.max(d,f),b)+e},touchesDragged:function(a,c){var b=a.averagedTouchesForView(this);
this.updateTouchScroll(b.x,b.y,b.d,a.timeStamp)},updateTouchScroll:function(j,i,d,g){var f=this.touch,a=j-f.globalFrame.x,k=i-f.globalFrame.y,s,l,u,m,A,y;
var c=((this._scroll_horizontalScrollOffset||0)+a)/this._scale,b=((this._scroll_verticalScrollOffset||0)+k)/this._scale;
var x=c-f.startTouchOffset.x,w=b-f.startTouchOffset.y;var h=f.dragging;if(!f.scrolling.x&&Math.abs(x)>f.scrollTolerance.x&&f.enableScrolling.x){h=YES;
f.scrolling.x=YES;f.scrollTolerance.y=f.secondaryScrollTolerance;f.startTouchOffset.x=j;
x=0}if(!f.scrolling.y&&Math.abs(w)>f.scrollTolerance.y&&f.enableScrolling.y){h=YES;
f.scrolling.y=YES;f.scrollTolerance.x=f.secondaryScrollTolerance;f.startTouchOffset.y=i;
w=0}if(h&&!f.dragging){f.dragging=YES;this.dragging=YES;this._touchScrollDidStart()
}if(!f.scrolling.x&&!f.scrolling.y&&!f.canScale){return}if(f.scrolling.x&&!f.scrolling.y){if(x>f.scrollLock&&!f.scrolling.y){f.enableScrolling.y=NO
}}if(f.scrolling.y&&!f.scrolling.x){if(w>f.scrollLock&&!f.scrolling.x){f.enableScrolling.x=NO
}}if(f.canScale){var o=f.startDistance,v=d-o;if(Math.abs(v)>f.scaleTolerance){f.scrolling.y=YES;
f.scrolling.x=YES;var z=f.startScale*(d/Math.max(o,50));var p=this._adjustForEdgeResistance(z,f.minimumScale,f.maximumScale,f.resistanceCoefficient,f.resistanceAsymptote);
this.dragging=YES;this._scale=p;var r=c*this._scale,q=b*this._scale}}A=this.minimumScrollOffset(f.contentSize.width*this._scale,f.containerSize.width,this.get("horizontalAlign"));
y=this.minimumScrollOffset(f.contentSize.height*this._scale,f.containerSize.height,this.get("verticalAlign"));
m=this.maximumScrollOffset(f.contentSize.width*this._scale,f.containerSize.width,this.get("horizontalAlign"));
l=this.maximumScrollOffset(f.contentSize.height*this._scale,f.containerSize.height,this.get("verticalAlign"));
u=f.startTouchOffsetInContent.x*this._scale-a;s=f.startTouchOffsetInContent.y*this._scale-k;
u=this._adjustForEdgeResistance(u,A,m,f.resistanceCoefficient,f.resistanceAsymptote);
s=this._adjustForEdgeResistance(s,y,l,f.resistanceCoefficient,f.resistanceAsymptote);
if(f.scrolling.x){this._scroll_horizontalScrollOffset=u}if(f.scrolling.y){this._scroll_verticalScrollOffset=s
}this._applyCSSTransforms(f.layer);this._touchScrollDidChange();if(g-f.lastEventTime>=1||f.notCalculated){f.notCalculated=NO;
var e=this._scroll_horizontalScrollOffset;var n=this._scroll_verticalScrollOffset;
f.scrollVelocity.x=((e-f.lastScrollOffset.x)/Math.max(1,g-f.lastEventTime));f.scrollVelocity.y=((n-f.lastScrollOffset.y)/Math.max(1,g-f.lastEventTime));
f.lastScrollOffset.x=e;f.lastScrollOffset.y=n;f.lastEventTime=g}},touchEnd:function(c){var a=this.touch,b=c.averagedTouchesForView(this);
c.scrollHasEnded=YES;if(b.touchCount>0){this.beginTouchTracking(c,NO)}else{if(this.dragging){a.dragging=NO;
a.lastEventTime=c.timeStamp;this.startDecelerationAnimation()}else{if(a.needsScrollEnd){this._touchScrollDidEnd()
}c.captureTouch(this,YES);if(c.touchResponder&&c.touchResponder!==this){c.end()}else{if(!c.touchResponder||c.touchResponder===this){if(c.nextTouchResponder){c.makeTouchResponder(c.nextTouchResponder)
}}else{}}this.touch=null}this.tracking=NO;this.dragging=NO}},touchCancelled:function(c){var a=this.touch,b=c.averagedTouchesForView(this);
if(!this.touch||!this.touch.timeout){this.beginPropertyChanges();this.set("scale",this._scale);
this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);
this.endPropertyChanges();this.tracking=NO;if(this.dragging){this._touchScrollDidEnd()
}this.dragging=NO;this.touch=null}},startDecelerationAnimation:function(a){var b=this.touch;
b.decelerationVelocity={x:b.scrollVelocity.x*10,y:b.scrollVelocity.y*10};this.decelerateAnimation()
},bouncyBounce:function(c,e,d,f,g,b,a){if(e<d){if(c<0){c=c+((d-e)*g)}else{c=Math.min((d-e)*b+a,d-e-0.01)
}}else{if(e>f){if(c>0){c=c-((e-f)*g)}else{c=-Math.min((e-f)*b+a,e-f-0.01)}}}return c
},decelerateAnimation:function(){var b=this.touch,s=this._scale,r=this.minimumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign")),q=this.minimumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign")),h=this.maximumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign")),g=this.maximumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign")),a=Date.now(),e=Math.max(a-b.lastEventTime,1),m=this._scroll_horizontalScrollOffset+b.decelerationVelocity.x*(e/10),j=this._scroll_verticalScrollOffset+b.decelerationVelocity.y*(e/10);
var l=b.decelerationFromEdge,n=b.accelerationToEdge;var d=m>=r&&m<=h;var o=j>=q&&j<=g;
m/=this._scale;j/=this._scale;var i=0;i=this.bouncyBounce(i,s,b.minimumScale,b.maximumScale,l,n,0);
this._scale=s=s+i;m*=this._scale;j*=this._scale;r=this.minimumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign"));
q=this.minimumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign"));
h=this.maximumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign"));
g=this.maximumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign"));
if(d&&(m<r||m>h)){m=Math.max(r,Math.min(m,h))}if(o&&(j<q||j>g)){j=Math.max(q,Math.min(j,g))
}this._scroll_horizontalScrollOffset=m;this._scroll_verticalScrollOffset=j;this._applyCSSTransforms(b.layer);
SC.RunLoop.begin();this._touchScrollDidChange();SC.RunLoop.end();var p=b.decelerationRate;
b.decelerationVelocity.y*=Math.pow(p,(e/10));b.decelerationVelocity.x*=Math.pow(p,(e/10));
b.decelerationVelocity.x=this.bouncyBounce(b.decelerationVelocity.x,m,r,h,l,n,0.3);
b.decelerationVelocity.y=this.bouncyBounce(b.decelerationVelocity.y,j,q,g,l,n,0.3);
var k=Math.abs(b.decelerationVelocity.x);var c=Math.abs(b.decelerationVelocity.y);
if(c<0.01&&k<0.01&&Math.abs(i)<0.01){b.timeout=null;this.touch=null;SC.RunLoop.begin();
this._touchScrollDidEnd();this.beginPropertyChanges();this.set("scale",this._scale);
this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);
this.endPropertyChanges();SC.RunLoop.end();return}var f=this;b.lastEventTime=Date.now();
this.touch.timeout=setTimeout(function(){f.decelerateAnimation()},10)},createChildViews:function(){var b=[],a;
if(SC.none(a=this.containerView)){a=SC.ContainerView}b.push(this.containerView=this.createChildView(a,{contentView:this.contentView,isScrollContainer:YES}));
this.contentView=this.containerView.get("contentView");a=SC.platform.touch?this.get("horizontalTouchScrollerView"):this.get("horizontalScrollerView");
if(a){if(this.get("hasHorizontalScroller")){a=this.horizontalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_HORIZONTAL,valueBinding:"*owner.horizontalScrollOffset"});
b.push(a)}else{this.horizontalScrollerView=null}}a=SC.platform.touch?this.get("verticalTouchScrollerView"):this.get("verticalScrollerView");
if(a){if(this.get("hasVerticalScroller")){a=this.verticalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_VERTICAL,valueBinding:"*owner.verticalScrollOffset"});
b.push(a)}else{this.verticalScrollerView=null}}this.childViews=b;this.contentViewDidChange();
this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");
var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)
}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)
}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewDidChange:function(){var d=this.get("contentView"),a=this._scroll_contentView,b=this.contentViewFrameDidChange,c=this.contentViewLayerDidChange;
if(d!==a){if(a){a.removeObserver("frame",this,b);a.removeObserver("layer",this,c)
}this._scroll_contentView=d;if(d){d.addObserver("frame",this,b);d.addObserver("layer",this,c)
}this.containerView.set("contentView",d);this.contentViewFrameDidChange()}}.observes("contentView"),render:function(a,b){this.invokeLast(this.adjustElementScroll);
if(b){a.push('<div class="corner"></div>')}return arguments.callee.base.apply(this,arguments)
},oldMaxHOffset:0,oldMaxVOffset:0,contentViewFrameDidChange:function(b){var n=this.get("contentView"),l=(n)?n.get("frame"):null,h=this._scale,c=(l)?l.width*h:0,p=(l)?l.height*h:0,j,i,m;
if(!b&&(c===this._scroll_contentWidth)&&(p===this._scroll_contentHeight)){return}this._scroll_contentWidth=c;
this._scroll_contentHeight=p;j=this.getPath("containerView.frame");i=j.width;m=j.height;
if(this.get("hasHorizontalScroller")&&(n=this.get("horizontalScrollerView"))){if(this.get("autohidesHorizontalScroller")){this.set("isHorizontalScrollerVisible",c>i)
}n.setIfChanged("maximum",c-i);n.setIfChanged("proportion",i/c)}if(this.get("hasVerticalScroller")&&(n=this.get("verticalScrollerView"))){if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",p>m)
}n.setIfChanged("maximum",p-m);n.setIfChanged("proportion",m/p)}if(!this.get("isVerticalScrollerVisible")&&(this.get("verticalScrollOffset")!==0)&&this.get("autohidesVerticalScroller")){this.set("verticalScrollOffset",0)
}if(!this.get("isHorizontalScrollerVisible")&&(this.get("horizontalScrollOffset")!==0)&&this.get("autohidesHorizontalScroller")){this.set("horizontalScrollOffset",0)
}var o=this.get("maximumVerticalScrollOffset"),k=this.get("verticalScrollOffset"),g=this.get("maximumHorizontalScrollOffset"),a=this.get("horizontalScrollOffset"),e=o<k,d=g<a;
if(e||d){this.forceDimensionsRecalculation(d,e,k,a)}},frameDidChange:function(){this.contentViewFrameDidChange(YES)
}.observes("frame"),contentViewLayerDidChange:function(){if(this._verticalScrollOffset!==0){this._verticalScrollOffset=-1
}if(this._horizontalScrollOffset!==0){this._horizontalScrollOffset=-1}this.invokeLast(this.adjustElementScroll)
},_scroll_horizontalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)
}.observes("horizontalScrollOffset"),_scroll_verticalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)
}.observes("verticalScrollOffset"),adjustElementScroll:function(){var a=this.get("containerView"),d=this.get("contentView"),c=this.get("verticalScrollOffset"),b=this.get("horizontalScrollOffset");
if(d){SC.RunLoop.begin();d._viewFrameDidChange();SC.RunLoop.end();if(SC.platform.touch){this._applyCSSTransforms(d.get("layer"))
}}if(a&&!SC.platform.touch){a=a.$()[0];if(a){if(c!==this._verticalScrollOffset){a.scrollTop=c;
this._verticalScrollOffset=c}if(b!==this._horizontalScrollOffset){a.scrollLeft=b;
this._horizontalScrollOffset=b}}}},forceDimensionsRecalculation:function(b,c,e,a){var f=a;
var d=e;this.scrollTo(0,0);if(b&&c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),this.get("maximumVerticalScrollOffset"))
}if(b&&!c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),d)}if(!b&&c){this.scrollTo(f,this.get("maximumVerticalScrollOffset"))
}},_scroll_verticalScrollOffset:0,_scroll_horizontalScrollOffset:0});sc_require("views/scroll");
SC.MenuScrollerView=SC.ScrollerView.extend({classNames:["sc-menu-scroller-view"],scrollDown:NO,value:function(a,c){if(c!==undefined){this._value=c
}else{var b=this._value||0;return Math.min(b,this.get("maximum"))}}.property("maximum").cacheable(),maximum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,verticalLineScroll:20,ownerScrollValueKey:function(){return"verticalScrollOffset"
}.property("layoutDirection").cacheable(),init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.TINY_SCROLLER_THICKNESS);
break;case SC.SMALL_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS);
break;case SC.REGULAR_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS);
break;case SC.LARGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS);
break;case SC.HUGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS);
break}return arguments.callee.base.apply(this,arguments)},render:function(a,c){a.addClass("sc-vertical");
a.addClass(this.get("controlSize"));if(c){var b=this.get("scrollDown")?"arrowDown":"arrowUp";
a.push('<span class="scrollArrow '+b+'">&nbsp;</span>')}a.setClass("disabled",!this.get("isEnabled"))
},didCreateLayer:function(){},willDestroyLayer:function(){var a=this._sc_scroller_scrollDidChange;
SC.Event.remove(this.$(),"scroll",this,a)},mouseEntered:function(a){this.set("isMouseOver",YES);
this._invokeScrollOnMouseOver()},mouseExited:function(a){this.set("isMouseOver",NO)
},_sc_scroller_valueDidChange:function(){}.observes("value"),_sc_scroller_armScrollTimer:function(){if(!this._sc_scrollTimer){SC.RunLoop.begin();
var a=this._sc_scroller_scrollDidChange;this._sc_scrollTimer=this.invokeLater(a,50);
SC.RunLoop.end()}},_sc_scroller_scrollDidChange:function(){var b=Date.now(),d=this._sc_lastScroll,c=this.get("layer"),a=0;
if(d&&(b-d)<50){return this._sc_scroller_armScrollTimer()}this._sc_scrollTimer=null;
this._sc_lastScroll=b;SC.RunLoop.begin();if(!this.get("isEnabled")){return}this._sc_scrollValue=a=c.scrollTop;
this.set("value",a);SC.RunLoop.end()},_scrollMenu:function(){var b=this.get("value"),a;
if(this.get("scrollDown")){a=b+this.verticalLineScroll;if(a<=this.get("maximum")){this.set("value",a)
}}else{a=b-this.verticalLineScroll;if(a>=0){this.set("value",a)}else{if(b<=this.verticalLineScroll&&b>0){this.set("value",0)
}}}return YES},_invokeScrollOnMouseOver:function(){this._scrollMenu();if(this.get("isMouseOver")){this.invokeLater(this._invokeScrollOnMouseOver,100)
}}});SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS=18;SC.MenuScrollerView.TINY_SCROLLER_THICKNESS=10;
SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS=14;SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS=23;
SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS=26;SC.MenuScrollView=SC.ScrollView.extend({classNames:["sc-menu-scroll-view"],maximumHorizontalScrollOffset:0,hasHorizontalScroller:NO,horizontalScrollerView:SC.MenuScrollerView,isHorizontalScrollerVisible:NO,canScrollHorizontal:NO,autohidesHorizontalScroller:NO,hasVerticalScroller:YES,verticalScrollerView:SC.MenuScrollerView,verticalScrollerView2:SC.MenuScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:YES,autohidesVerticalScroller:YES,verticalScrollerBottom:0,controlSize:SC.REGULAR_CONTROL_SIZE,containerView:SC.ContainerView,tile:function(){var g,s,h,b,q,i,c;
g=this.get("hasVerticalScroller");s=g?this.get("verticalScrollerView"):null;h=g?this.get("verticalScrollerView2"):null;
b=s&&this.get("isVerticalScrollerVisible");q=this.get("containerView");i={left:0,top:0};
if(b){c=0;var a=s.get("scrollerThickness")||h.get("scrollerThickness");var j=this.get("contentView"),o,p=(j)?j.get("frame"):null,k=(p)?p.height:0,r=this.containerView.$()[0],l=this.get("verticalScrollOffset"),e={height:0,top:0,right:0,left:0},n={height:a,top:0,right:0,left:0},d={height:a,bottom:0,right:0,left:0},m={height:0,bottom:0,right:0,left:0};
if(r){c=r.offsetHeight}if(l===0){i.top=0;i.bottom=a;s.set("layout",e);h.set("layout",d)
}else{if(l>=(k-c-a)){i.top=a;i.bottom=0;s.set("layout",n);h.set("layout",m)}else{i.top=a;
i.bottom=a;s.set("layout",n);h.set("layout",d)}}}if(s){s.set("isVisible",b);h.set("isVisible",b)
}q.set("layout",i)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible","verticalScrollOffset"),createChildViews:function(){var c=[],b,a,d=this.get("controlSize");
if(SC.none(b=this.containerView)){b=SC.ContainerView}c.push(this.containerView=this.createChildView(b,{contentView:this.contentView}));
this.contentView=this.containerView.get("contentView");if((b=this.verticalScrollerView)&&(a=this.verticalScrollerView2)){if(this.get("hasVerticalScroller")){b=this.verticalScrollerView=this.createChildView(b,{layout:{top:0,left:0,right:0},controlSize:d,valueBinding:"*owner.verticalScrollOffset"});
c.push(b);a=this.verticalScrollerView2=this.createChildView(a,{scrollDown:YES,layout:{bottom:0,left:0,right:0},controlSize:d,valueBinding:"*owner.verticalScrollOffset"});
c.push(a)}else{this.verticalScrollerView=null;this.verticalScrollerView2=null}}this.childViews=c;
this.contentViewFrameDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);
this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)
}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)
}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewFrameDidChange:function(){var c=this.get("contentView"),b,h=(c)?c.get("frame"):null,e=(h)?h.width:0,a=(h)?h.height:0,i=this.get("frame"),d,g;
this._scroll_contentWidth=e;this._scroll_contentHeight=a;if(this.get("hasVerticalScroller")&&(c=this.get("verticalScrollerView"))&&(b=this.get("verticalScrollerView2"))){a-=1;
if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",a>i.height)
}a-=this.get("verticalScrollerBottom");d=0;g=this.containerView.$()[0];if(g){d=g.offsetHeight
}a=a-d;c.setIfChanged("maximum",a);b.setIfChanged("maximum",a)}},_scroll_horizontalScrollOffsetDidChange:function(){},_scroll_verticalScrollOffsetDidChange:function(){var b=this.get("verticalScrollOffset");
var a=this.get("contentView");if(a){a.adjust("top",0-b)}}.observes("verticalScrollOffset")});
sc_require("views/button");SC.PopupButtonView=SC.ButtonView.extend({classNames:["sc-popup-button"],preferMatrix:null,menu:null,shouldLoadInBackground:NO,init:function(){arguments.callee.base.apply(this,arguments);
this._setupMenu();if(this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonMenuLoader.create({popupButton:this}))
}},_setupMenu:function(){var a=this.get("instantiatedMenu");if(this.isActiveBinding){this.isActiveBinding.disconnect()
}this.isActiveBinding=null;if(a&&!a.isClass){this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")
}},_popup_menuDidChange:function(){this._setupMenu()}.observes("menu"),isActive:NO,_instantiateMenu:function(){var a=this.get("menu");
if(!a.isClass||!a){return}this.menu=a.create();this._setupMenu()},acceptsFirstResponder:YES,instantiatedMenu:function(){var a=this.get("menu");
if(a&&a.isClass){this._instantiateMenu();a=this.get("menu")}return a}.property("menu").cacheable(),action:function(a){var b=this.get("instantiatedMenu");
if(!b){SC.Logger.warn("SC.PopupButton - Unable to show menu because the menu property is set to %@.".fmt(b));
return NO}b.popup(this,this.get("preferMatrix"));return YES},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this._isMouseDown=YES;this._action();this.invokeLast(this._recordMouseDownTimestamp);
this.becomeFirstResponder();return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()
},mouseUp:function(b){var d=new Date().getTime(),c=this._menuRenderedTimestamp,e=this.get("instantiatedMenu"),f=SC.platform.touch,a;
if(e){a=e.getPath("rootMenu.targetMenuItem");if(a){if(!a.performAction()){e.remove()
}}else{if(!f&&(d-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){e.remove()}}}this._isMouseDown=NO;
arguments.callee.base.apply(this,arguments);return YES},mouseExited:function(a){return YES
},performKeyEquivalent:function(b,a){if(!this.get("isEnabled")){return NO}var c=this.get("instantiatedMenu");
return(!!c&&c.performKeyEquivalent(b,a))},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled")});SC.PopupButtonMenuLoader=SC.Task.extend({popupButton:null,run:function(){if(this.popupButton){this.popupButton._instantiateMenu()
}}});SC.ProgressView=SC.View.extend(SC.Control,{value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),offsetRange:24,contentMaximumKey:null,isIndeterminate:NO,isIndeterminateBindingDefault:SC.Binding.bool(),isRunning:NO,isRunningBindingDefault:SC.Binding.bool(),animatedBackgroundMatrix:[],contentIsIndeterminateKey:null,classNames:"sc-progress-view",_backgroundOffset:0,_currentBackground:1,_nextBackground:1,init:function(){arguments.callee.base.apply(this,arguments);
this.animateProgressBar()},animateProgressBar:function(){if(this.get("isRunning")&&this.get("isVisibleInWindow")){this._animateProgressBar(500)
}}.observes("isRunning","isVisibleInWindow"),_animateProgressBar:function(a){if(a===0){a=1000/30
}if(this.get("isRunning")&&this.get("isVisibleInWindow")){this.displayDidChange();
this.invokeLater(this._animateProgressBar,a,600)}},displayProperties:"value minimum maximum isIndeterminate".w(),render:function(c,b){var n,e,k,d,h,f=this.get("isIndeterminate"),m=this.get("isRunning"),j=this.get("isEnabled"),l=this.get("offsetRange"),g=(f&&m)?(Math.floor(Date.now()/75)%l-l):0;
if(!j){k="0%"}else{if(f){k="120%"}else{k=(this.get("_percentageNumeric")*100)+"%"
}}var a={"sc-indeterminate":f,"sc-empty":(k<=0),"sc-complete":(k>=100)};if(b){var i=this._createClassNameString(a);
c.push('<div class="sc-inner ',i,'" style="width: ',k,";left: ",g,'px;">','<div class="sc-inner-head">',"</div>",'<div class="sc-inner-tail"></div></div>','<div class="sc-outer-head"></div>','<div class="sc-outer-tail"></div>')
}else{c.setClass(a);n=this.$(".sc-inner");e=this.get("animatedBackgroundMatrix");
d="width: "+k+"; ";d=d+"left: "+g+"px; ";if(e.length===3){n.css("backgroundPosition","0px -"+(e[0]+e[1]*this._currentBackground)+"px");
if(this._currentBackground===e[2]-1||this._currentBackground===0){this._nextBackground*=-1
}this._currentBackground+=this._nextBackground;d=d+"backgroundPosition: "+h+"px; ";
n.attr("style",d)}else{n.attr("style",d)}}},contentPropertyDidChange:function(c,a){var b=this.get("content");
this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()
},_percentageNumeric:function(){var b=this.get("minimum")||0,c=this.get("maximum")||1,a=this.get("value")||0;
a=(a-b)/(c-b);if(a>1){a=1}if(isNaN(a)){a=0}if(a<b){a=0}if(a>c){a=1}return a}.property("value").cacheable(),_createClassNameString:function(c){var b=[],a;
for(a in c){if(!c.hasOwnProperty(a)){continue}if(c[a]){b.push(a)}}return b.join(" ")
}});SC.RadioView=SC.View.extend(SC.Control,{classNames:["sc-radio-view"],value:null,layoutDirection:SC.LAYOUT_VERTICAL,escapeHTML:YES,items:[],itemTitleKey:null,itemWidthKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)
}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)
}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this._renderAsFirstTime=YES;
this.notifyPropertyChange("_displayItems")},displayProperties:["value","_displayItems"],render:function(b,g){var j=this.get("_displayItems"),m=this.get("value"),h=SC.isArray(m),q,i,o,r,l,p,d,a,c,n,f,k,e;
b.addClass(this.get("layoutDirection"));if(h&&m.length<=0){m=m[0];h=NO}if(this._renderAsFirstTime){g=YES;
this._renderAsFirstTime=NO}if(g){b.attr("role","radiogroup");r=SC.guidFor(this);p=j.length;
for(i=0;i<p;i++){q=j[i];o=q[3];if(o){d=(o.indexOf("/")>=0)?o:SC.BLANK_IMAGE_URL;a=(d===o)?"":o;
o='<img src="'+d+'" class="icon '+a+'" alt="" />'}else{o=""}if(q){n=(h)?(m.indexOf(q[1])>=0):(m===q[1])
}else{n=NO}e=this._getSelectionStateClassNames(q,n,m,h,false);f=this.escapeHTML?SC.RenderContext.escapeHTML(q[0]):q[0];
l=q[4];b.push('<div class="sc-radio-button ',e,'" ',l?'style="width: '+l+'px;" ':"",'aria-checked="',n?"true":"false",'" ','role="radio"',' index="',i,'">','<span class="button"></span>','<span class="sc-button-label">',o,f,"</span></div>")
}}else{this.$(".sc-radio-button").forEach(function(s){s=this.$(s);i=parseInt(s.attr("index"),0);
q=(i>=0)?j[i]:null;if(q){n=(h)?(m.indexOf(q[1])>=0):(m===q[1])}else{n=NO}l=q[4];if(l){s.width(l)
}k=this._getSelectionStateClassNames(q,n,m,h,true);s.attr("aria-checked",n?"true":"false");
s.setClass(k);i=k=null},this)}},_displayItems:function(){var h=this.get("items"),d=this.get("localize"),b=this.get("itemTitleKey"),c=this.get("itemValueKey"),k=this.get("itemWidthKey"),a=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,g=this.get("itemIsEnabledKey"),q=this.get("itemIconKey"),p=[],l=(h)?h.get("length"):0,n,r,i,j,f,e,o,m;
for(f=0;f<l;f++){n=h.objectAt(f);if(SC.typeOf(n)===SC.T_ARRAY){r=n[0];j=n[1]}else{if(n){if(b){r=n.get?n.get(b):n[b]
}else{r=(n.toString)?n.toString():null}if(k&&a){i=n.get?n.get(k):n[k]}if(c){j=n.get?n.get(c):n[c]
}else{j=n}if(g){o=n.get?n.get(g):n[g]}else{o=YES}if(q){m=n.get?n.get(q):n[q]}else{m=null
}}else{r=j=m=null;o=NO}}if(d){r=r.loc()}p.push([r,j,o,m,i])}return p}.property("items","itemTitleKey","itemWidthKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey").cacheable(),_getSelectionStateClassNames:function(d,f,e,a,b){var h,c;
h={sel:(f&&!a),mixed:(f&&a),disabled:(!d[2])};if(b){return h}else{var g=[];for(c in h){if(!h.hasOwnProperty(c)){continue
}if(h[c]){g.push(c)}}return g.join(" ")}},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}var b=a.target;while(b){if(b.className&&b.className.indexOf("sc-radio-button")>-1){break
}b=b.parentNode}if(!b){return NO}b=this.$(b);if(b.hasClass("disabled")){return YES
}b.addClass("active");this._activeRadioButton=b;a.allowDefault();return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES
}var f=this._activeRadioButton,e=a.target,b=this.get("_displayItems"),c,d;if(f){f.removeClass("active");
this._activeRadioButton=null}else{return YES}while(e){if(e.className&&e.className.indexOf("sc-radio-button")>-1){break
}e=e.parentNode}e=this.$(e);if(e[0]!==f[0]||e.hasClass("disabled")){return YES}c=parseInt(e.attr("index"),0);
d=b[c];this.set("value",d[1])},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
}});SC.SceneView=SC.ContainerView.extend({scenes:["master","detail"],nowShowing:null,transitionDuration:200,_state:"NO_VIEW",replaceContent:function(a){if(a&&this._state===this.READY){this.animateScene(a)
}else{this.replaceScene(a)}return this},replaceScene:function(c){var d=this._targetView,e=this.STANDARD_LAYOUT,b=this.get("scenes"),a=b?b.indexOf(this.get("nowShowing")):-1;
this._targetView=c;this._targetIndex=a;if(this._timer){this._timer.invalidate()}this._leftView=this._rightView=this._start=this._end=null;
this._timer=null;this.removeAllChildren();if(d){d.set("layout",e)}if(c){c.set("layout",e)
}if(c){this.appendChild(c)}this._state=c?this.READY:this.NO_VIEW},animateScene:function(b){var c=this._targetView,f=this._targetIndex,a=this.get("scenes"),e=a?a.indexOf(this.get("nowShowing")):-1,d;
if(f<0||e<0||f===e){return this.replaceScene(b)}this._targetView=b;this._targetIndex=e;
if(e>f){this._leftView=c;this._rightView=b;this._target=-1}else{this._leftView=b;
this._rightView=c;this._target=1}this.removeAllChildren();if(c){this.appendChild(c)
}if(b){this.appendChild(b)}this._start=Date.now();this._end=this._start+this.get("transitionDuration");
this._state=this.ANIMATING;this.tick()},tick:function(){this._timer=null;var a=Date.now(),d=(a-this._start)/(this._end-this._start),g=this._target,f=this._leftView,b=this._rightView,c,e;
if(d<0){d=0}if(!this.get("isVisibleInWindow")||(d>=1)){return this.replaceScene(this._targetView)
}c=SC.clone(this.get("frame"));e=Math.floor(c.width*d);if(g>0){c.left=0-(c.width-e);
f.set("layout",c);c=SC.clone(c);c.left=e;b.set("layout",c)}else{c.left=0-e;f.set("layout",c);
c=SC.clone(c);c.left=c.width-e;b.set("layout",c)}this._timer=this.invokeLater(this.tick,20);
return this},NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",STANDARD_LAYOUT:{top:0,left:0,bottom:0,right:0}});
SC.SegmentedView=SC.View.extend(SC.Control,{classNames:["sc-segmented-view"],theme:"square",value:null,isEnabled:YES,allowsEmptySelection:NO,allowsMultipleSelection:NO,localize:YES,align:SC.ALIGN_CENTER,layoutDirection:SC.LAYOUT_HORIZONTAL,items:[],itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemActionKey:null,itemTargetKey:null,itemKeyEquivalentKey:null,itemKeys:"itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemWidthKey itemToolTipKey".w(),displayItems:function(){var f=this.get("items"),c=this.get("localize"),k=null,d,i,e=[],g=f.get("length"),h,j,b=SC._segmented_fetchKeys,a=SC._segmented_fetchItem;
for(h=0;h<g;h++){j=f.objectAt(h);if(SC.none(j)){continue}d=SC.typeOf(j);if(d===SC.T_STRING){i=[j.humanize().titleize(),j,YES,null,null,null,h]
}else{if(d!==SC.T_ARRAY){if(k===null){k=this.itemKeys.map(b,this)}i=k.map(a,j);i[i.length]=h;
if(!k[0]&&j.toString){i[0]=j.toString()}if(!k[1]){i[1]=j}if(!k[2]){i[2]=YES}}}if(c&&i[0]){i[0]=i[0].loc()
}if(c&&i[5]&&SC.typeOf(i[5])===SC.T_STRING){i[5]=i[5].loc()}e[e.length]=i}return e
}.property("items","itemTitleKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemWidthKey","itemToolTipKey"),itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)
}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)
}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this.set("renderLikeFirstTime",YES);
this.notifyPropertyChange("displayItems")},init:function(){arguments.callee.base.apply(this,arguments);
this.itemsDidChange()},displayProperties:["displayItems","value","activeIndex"],render:function(b,a){var g=this.get("displayItems");
var c=this.get("theme");if(c){b.addClass(c)}if(a||this.get("renderLikeFirstTime")){this._seg_displayItems=g;
this.renderDisplayItems(b,g);b.addStyle("text-align",this.get("align"));this.set("renderLikeFirstTime",NO)
}else{var k=this.get("activeIndex"),i=this.get("value"),d=SC.isArray(i);if(d&&i.get("length")===1){i=i.objectAt(0);
d=NO}var h={},e=g.length,f=this.$(".sc-segment"),j;while(--e>=0){j=g[e];h.sel=d?(i.indexOf(j[1])>=0):(j[1]===i);
h.active=(k===e);h.disabled=!j[2];SC.$(f[e]).setClass(h)}h=g=i=g=null}},renderDisplayItems:function(d,l){var o=this.get("value"),h=SC.isArray(o),r=this.get("activeIndex"),j=l.length,n,m,b,k,f,q,a,c,g,e,p;
for(g=0;g<j;g++){f=d.begin("a").attr("role","button");q=l[g];n=q[0];m=q[3];a=q[5];
e={};p=[];if(this.get("layoutDirection")==SC.LAYOUT_HORIZONTAL){e.display="inline-block"
}p.push("sc-segment");if(!q[2]){p.push("disabled")}if(g===0){p.push("sc-first-segment")
}if(g===(j-1)){p.push("sc-last-segment")}if(g!==0&&g!==(j-1)){p.push("sc-middle-segment")
}if(h?(o.indexOf(q[1])>=0):(q[1]===o)){p.push("sel")}if(r===g){p.push("active")}if(q[4]){c=q[4];
e.width=c+"px"}f.addClass(p);f.addStyle(e);if(a){f.attr("title",a)}if(m){b=(m.indexOf("/")>=0)?m:SC.BLANK_IMAGE_URL;
k=(b===m)?"":m;m='<img src="'+b+'" alt="" class="icon '+k+'" />'}else{m=""}f.push('<span class="sc-button-inner"><label class="sc-button-label">',m+n,"</label></span>");
f.end()}},displayItemIndexForEvent:function(a){return this.displayItemIndexForPosition(a.pageX,a.pageY)
},displayItemIndexForPosition:function(e,d){var c=this.$(".sc-segment"),b=c.length,a,g,f;
for(a=0;a<b;a++){g=c[a];f=g.getBoundingClientRect();if(this.get("layoutDirection")==SC.LAYOUT_VERTICAL){if(d>f.top&&d<f.bottom){return a
}}else{if(e>f.left&&e<f.right){return a}}}return -1},keyDown:function(d){var f,g,e,a,h,c;
if(d.which===9){var b=d.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(b){b.becomeFirstResponder()}else{d.allowDefault()}return YES}if(!this.get("allowsMultipleSelection")&&!this.get("allowsEmptySelection")){e=this.get("displayItems");
a=e.length;h=this.get("value");c=SC.isArray(h);if(d.which===39||d.which===40){for(f=0;
f<a-1;f++){g=e[f];if(c?(h.indexOf(g[1])>=0):(g[1]===h)){this.triggerItemAtIndex(f+1)
}}return YES}else{if(d.which===37||d.which===38){for(f=1;f<a;f++){g=e[f];if(c?(h.indexOf(g[1])>=0):(g[1]===h)){this.triggerItemAtIndex(f-1)
}}return YES}}}return YES},mouseDown:function(b){if(!this.get("isEnabled")){return YES
}var a=this.displayItemIndexForEvent(b);if(a>=0){this._isMouseDown=YES;this.set("activeIndex",a)
}return YES},mouseUp:function(b){var a=this.displayItemIndexForEvent(b);if(this._isMouseDown&&(a>=0)){this.triggerItemAtIndex(a)
}this._isMouseDown=NO;this.set("activeIndex",-1);return YES},mouseMoved:function(b){if(this._isMouseDown){var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",a)}return YES},mouseExited:function(b){if(this._isMouseDown){var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",a)}return YES},mouseEntered:function(b){if(this._isMouseDown){var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",-1)}return YES},touchStart:function(b){if(!this.get("isEnabled")){return YES
}var a=this.displayItemIndexForEvent(b);if(a>=0){this._isTouching=YES;this.set("activeIndex",a)
}return YES},touchEnd:function(b){var a=this.displayItemIndexForEvent(b);if(this._isTouching&&(a>=0)){this.triggerItemAtIndex(a)
}this._isTouching=NO;this.set("activeIndex",-1);return YES},touchesDragged:function(b,c){var d=this.touchIsInBoundary(b);
if(d){if(!this._isTouching){this._touchDidEnter(b)}var a=this.displayItemIndexForEvent(b);
this.set("activeIndex",a)}else{if(this._isTouching){this._touchDidExit(b)}}this._isTouching=d;
return YES},_touchDidExit:function(b){var a=this.displayItemIndexForEvent(b);this.set("activeIndex",-1);
return YES},_touchDidEnter:function(b){var a=this.displayItemIndexForEvent(b);this.set("activeIndex",a);
return YES},triggerItemAtIndex:function(k){var i=this.get("displayItems"),l=i.objectAt(k),b,j,c,g,f;
if(!l[2]){return this}g=this.get("allowsEmptySelection");f=this.get("allowsMultipleSelection");
b=l[1];j=c=this.get("value");if(!SC.isArray(j)){j=[j]}if(!f){if(g&&(j.get("length")===1)&&(j.objectAt(0)===b)){j=[]
}else{j=[b]}}else{if(j.indexOf(b)>=0){if(j.get("length")>1||(j.objectAt(0)!==b)||g){j=j.without(b)
}}else{j=j.concat([b])}}switch(j.get("length")){case 0:j=null;break;case 1:j=j.objectAt(0);
break;default:break}var m=this.get("itemActionKey"),a=this.get("itemTargetKey"),e,h=null,d=this.getPath("pane.rootResponder");
if(m&&(l=this.get("items").objectAt(l[6]))){e=l.get?l.get(m):l[m];if(a){h=l.get?l.get(a):l[a]
}if(d){d.sendAction(e,h,this,this.get("pane"))}}if(!e&&c!==undefined){this.set("value",j)
}e=this.get("action");if(e&&d){d.sendAction(e,this.get("target"),this,this.get("pane"))
}},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$()[0].focus()
}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}}});
SC._segmented_fetchKeys=function(a){return this.get(a)};SC._segmented_fetchItem=function(a){if(!a){return null
}return this.get?this.get(a):this[a]};sc_require("views/button");SC.SelectView=SC.ButtonView.extend({items:[],itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:null,itemSortKey:null,itemValueKey:null,itemIconKey:null,itemSeparatorKey:"separator",localize:YES,disableSort:YES,classNames:["sc-select-view"],_itemList:[],_currentSelItem:null,_itemIdx:null,value:null,showCheckbox:YES,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","items"],preferMatrix:null,CUSTOM_MENU_ITEM_HEIGHT:20,isSelectedBinding:"*menu.isVisibleInWindow",positionMenuBelow:NO,lastMenuWidth:null,exampleView:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,menuItemPadding:35,isContextMenuEnabled:NO,leftAlign:function(){var b=0,a=this.get("controlSize");
if(a===SC.SMALL_CONTROL_SIZE){b=-14}if(a===SC.REGULAR_CONTROL_SIZE){b=-16}return b
}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("itemSortKey")||this.get("itemTitleKey");
b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)
})}return b},render:function(b,f){arguments.callee.base.apply(this,arguments);var c,j,n,p,s,g,e,r,h,l,a,k,d,i,u,o,m,q;
j=this.get("items");j=this.sortObjects(j);n=j.length;p=this.get("itemTitleKey");s=this.get("itemIconKey");
g=this.get("itemValueKey");e=this.get("itemSeparatorKey");r=this.get("showCheckbox");
h=this.get("value");l=this.get("localize");k=[];d=YES;i=0;j.forEach(function(v){if(v||v===0){u=p?(v.get?v.get(p):v[p]):v.toString();
u=l?u.loc():u;o=s?(v.get?v.get(s):v[s]):null;if(SC.none(v[s])){o=null}m=(g)?(v.get?v.get(g):v[g]):v;
if(!SC.none(h)&&!SC.none(m)){if(h===m){this.set("title",u);this.set("icon",o)}}if(m===this.get("value")){this.set("_itemIdx",i);
d=!r?NO:YES}else{d=NO}a=e?(v.get?v.get(e):v[e]):NO;if(i===0){this._defaultVal=m;this._defaultTitle=u;
this._defaultIcon=o}var w=SC.Object.create({separator:a,title:u,icon:o,value:m,isEnabled:YES,checkbox:d,action:this.displaySelectedItem});
k.push(w)}i+=1;this.set("_itemList",k)},this);if(f){this.invokeLast(function(){var v=this.get("value");
if(SC.none(v)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);
this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this._itemIdx)
},_action:function(l){var h,a,i,j,q,n,y,e,x,c,m,s,o,v,f,g,k,b,w;h=this.$(".sc-button-label")[0];
a=this.get("layer").offsetWidth;i=h.scrollWidth;j=this.get("lastMenuWidth");if(i){q=h.offsetWidth;
if(i&&q){a=a+i-q}}if(!j||(a>j)){j=a}n=this.get("_itemList");var r=this.get("customViewClassName");
var p=this.get("customViewMenuOffsetWidth");var d="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";
d=r?(d+" "+r):d;SC.prepareStringMeasurement("",d);for(m=0,w=n.length;m<w;++m){x=n.objectAt(m);
y=SC.measureString(x.title).width;if(!e||(y>e)){e=y}}SC.teardownStringMeasurement();
j=(e+this.menuItemPadding>j)?e+this.menuItemPadding:j;var u=SC.RootResponder.responder.get("currentWindowSize").width;
if(j>u){j=(u-25)}this.set("lastMenuWidth",j);s=this.get("_currentSelItem");o=this.get("_itemList");
v=this.get("controlSize");f=this.get("menuPaneHeightPadding");g=this.get("exampleView");
k=g?g:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:o,exampleView:k,isEnabled:YES,menuHeightPadding:f,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:j},controlSize:v,itemWidth:j,contentView:SC.View.extend({})});
if(!b){return NO}b.popup(this,this.preferMatrix);b.set("currentSelectedMenuItem",s);
return YES},displaySelectedItem:function(){var j,b,f,i,c,a=0,g,e,h,k=null,d;j=this.parentMenu();
b=j.get("currentSelectedMenuItem");f=j.menuItemViews;if(b&&f){a=f.indexOf(b)}g=j.get("anchor");
e=j.get("items");h=e.length;while(!k&&(--h>=0)){d=e[h];i=!SC.none(d.title)?d.title:e.toString();
c=!SC.none(d.value)?d.value:i;if(i===this.get("value")&&(a===h)){k=e;g.set("value",c);
g.set("title",i)}}g.set("icon",this.get("icon")).set("_currentSelItem",b).set("_itemIdx",a)
},changeSelectButtonPreferMatrix:function(){var d=0,b=this.get("_itemIdx"),a=this.get("leftAlign"),e,c;
if(this.get("positionMenuBelow")){e=[a,4,3];this.set("preferMatrix",e)}else{if(b){d=b*this.CUSTOM_MENU_ITEM_HEIGHT
}c=[a,-d,2];this.set("preferMatrix",c)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();
return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{arguments.callee.base.apply(this,arguments)
}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()
}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)
}});SC.SelectFieldView=SC.FieldView.extend({tagName:"select",classNames:["sc-select-field-view"],objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,emptyName:null,localize:false,cpDidChange:YES,disableSort:NO,validateMenuItem:function(b,a){return true
},sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");
if(a){b=b.sortProperty(a)}else{b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];
c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)})}}return b},render:function(c,a){if(this.get("cpDidChange")){this.set("cpDidChange",NO);
var f=this.get("nameKey");var j=this.get("valueKey");var i=this.get("objects");var b=this.get("value");
var d,g;if(!this.get("isEnabled")){c.attr("disabled","disabled")}var h=this.get("localize");
if(!j&&b){b=SC.guidFor(b)}if((b===null)||(b==="")){b="***"}if(i){i=this.sortObjects(i);
if(!a){g=this.$input()[0];if(!g){return}g.innerHTML=""}var e=this.get("emptyName");
if(e){if(h){e=e.loc()}if(a){c.push('<option value="***">'+e+"</option>",'<option disabled="disabled"></option>')
}else{d=document.createElement("option");d.value="***";d.innerHTML=e;g.appendChild(d);
d=document.createElement("option");d.disabled="disabled";g.appendChild(d)}}i.forEach(function(n,m){if(n){var l=f?(n.get?n.get(f):n[f]):n.toString();
if(h){l=l.loc()}var o=(j)?(n.get?n.get(j):n[j]):n;if(!e&&m===0&&b==="***"){this.set("value",o)
}if(o){o=(SC.guidFor(o))?SC.guidFor(o):o.toString()}var k=(this.validateMenuItem&&this.validateMenuItem(o,l))?"":'disabled="disabled" ';
if(a){c.push("<option "+k+'value="'+o+'">'+l+"</option>")}else{d=document.createElement("option");
d.value=o;d.innerHTML=l;if(k.length>0){d.disable="disabled"}g.appendChild(d)}}else{if(a){c.push('<option disabled="disabled"></option>')
}else{d=document.createElement("option");d.disabled="disabled";g.appendChild(d)}}},this);
this.setFieldValue(b)}else{this.set("value",null)}}else{this.$().attr("disabled",this.get("isEnabled")?null:"disabled")
}},displayProperties:["objects","nameKey","valueKey","isEnabled"],_objectsObserver:function(){this.set("cpDidChange",YES)
}.observes("objects"),_objectArrayObserver:function(){this.set("cpDidChange",YES);
this.propertyDidChange("objects")}.observes("*objects.[]"),_nameKeyObserver:function(){this.set("cpDidChange",YES)
}.observes("nameKey"),_valueKeyObserver:function(){this.set("cpDidChange",YES)}.observes("valueKey"),acceptsFirstResponder:function(){return this.get("isEnabled")
}.property("isEnabled"),$input:function(){return this.$()},mouseDown:function(a){if(!this.get("isEnabled")){a.stop();
return YES}else{return arguments.callee.base.apply(this,arguments)}},touchStart:function(a){return this.mouseDown(a)
},touchEnd:function(a){return this.mouseUp(a)},getFieldValue:function(){var f=arguments.callee.base.apply(this,arguments);
var c=this.get("valueKey");var e=this.get("objects");var d=null;var a;if(f=="***"){f=null
}else{if(f&&e){var g=(SC.typeOf(e.length)===SC.T_FUNCTION)?e.length():e.length;while(!d&&(--g>=0)){a=e.objectAt?e.objectAt(g):e[g];
if(!a){continue}if(c){a=(a.get)?a.get(c):a[c]}var b=(a)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null;
if(f==b){d=a}}}}return(c||d)?d:f},setFieldValue:function(a){if(SC.none(a)){a="***"
}else{a=((a)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null)}this.$input().val(a);
return this},fieldDidFocus:function(){var a=this.get("isFocused");if(!a){this.set("isFocused",true)
}},fieldDidBlur:function(){var a=this.get("isFocused");if(a){this.set("isFocused",false)
}},_isFocusedObserver:function(){this.$().setClass("focus",this.get("isFocused"))
}.observes("isFocused"),didCreateLayer:function(){var a=this.$input();if(this.get("isEnabled")===false){this.$()[0].disabled=true
}SC.Event.add(a,"blur",this,this.fieldDidBlur);SC.Event.add(a,"focus",this,this.fieldDidFocus);
return arguments.callee.base.apply(this,arguments)},willDestroyLayer:function(){var a=this.$input();
SC.Event.remove(a,"focus",this,this.fieldDidFocus);SC.Event.remove(a,"blur",this,this.fieldDidBlur);
return arguments.callee.base.apply(this,arguments)}});SC.SliderView=SC.View.extend(SC.Control,{classNames:"sc-slider-view",handleSelector:"img.sc-handle",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,step:0.1,displayProperties:"value minimum maximum".w(),render:function(d,g){arguments.callee.base.apply(this,arguments);
var c=this.get("minimum"),a=this.get("maximum"),f=this.get("value"),e=this.get("step");
f=Math.min(Math.max(f,c),a);if(!SC.none(e)&&e!==0){f=Math.round(f/e)*e}if(f!==0){f=Math.floor((f-c)/(a-c)*100)
}if(g){var b=SC.BLANK_IMAGE_URL;d.push('<span class="sc-inner">','<span class="sc-leftcap"></span>','<span class="sc-rightcap"></span>','<img src="',b,'" class="sc-handle" style="left: ',f,'%" />',"</span>")
}else{this.$(this.get("handleSelector")).css("left",f+"%")}},_isMouseDown:NO,mouseDown:function(a){if(!this.get("isEnabled")){return YES
}this.set("isActive",YES);this._isMouseDown=YES;return this._triggerHandle(a,true)
},mouseDragged:function(a){return this._isMouseDown?this._triggerHandle(a):YES},mouseUp:function(a){if(this._isMouseDown){this.set("isActive",NO)
}var b=this._isMouseDown?this._triggerHandle(a):YES;this._isMouseDown=NO;return b
},mouseWheel:function(b){if(!this.get("isEnabled")){return YES}var d=this.get("minimum"),a=this.get("maximum"),c=this.get("value")+((b.wheelDeltaX+b.wheelDeltaY)*0.01),e=this.get("step"),f=Math.round(c/e)*e;
if(c<d){this.setIfChanged("value",d)}else{if(c>a){this.setIfChanged("value",a)}else{this.setIfChanged("value",c)
}}return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)
},touchesDragged:function(a){return this.mouseDragged(a)},_triggerHandle:function(b,e){var f=this.get("frame").width,d=this.get("minimum"),a=this.get("maximum"),g=this.get("step"),c=this.get("value"),h;
if(e){h=this.convertFrameFromView({x:b.pageX}).x;this._evtDiff=b.pageX-h}else{h=b.pageX-this._evtDiff
}h=Math.max(Math.min(h,f-8),8)-8;f-=16;h=h/f;h=d+((a-d)*h);if(g!==0){h=Math.round(h/g)*g
}if(Math.abs(c-h)>=0.01){this.set("value",h)}return YES},acceptsFirstResponder:function(){if(!SC.SAFARI_FOCUS_BEHAVIOR){return this.get("isEnabled")
}else{return NO}}.property("isEnabled"),willBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;
this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$()[0].focus()
}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},keyDown:function(c){if(c.which===9){var b=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");
if(b){b.becomeFirstResponder()}else{c.allowDefault()}return YES}if(c.which===37||c.which===38||c.which===39||c.which===40){var e=this.get("minimum"),a=this.get("maximum"),f=this.get("step"),d=a-e,h=0,g;
if(c.which===37||c.which===38){if(f===0){if(d<100){h=this.get("value")-1}else{g=Math.abs(d/100);
if(g<2){g=2}h=this.get("value")-Math.abs(d/100)}}else{h=this.get("value")-f}}if(c.which===39||c.which===40){if(f===0){if(d<100){h=this.get("value")+2
}else{g=Math.abs(d/100);if(g<2){g=2}h=this.get("value")+g}}else{h=this.get("value")+f
}}if(h>=e&&h<=a){this.set("value",h)}}SC.RunLoop.begin().end();return YES},contentPropertyDidChange:function(c,a){var b=this.get("content");
this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()
}});sc_require("mixins/collection_group");sc_require("views/disclosure");SC.SourceListGroupView=SC.View.extend(SC.Control,SC.CollectionGroup,{classNames:["sc-source-list-group"],content:null,isGroupVisible:YES,hasGroupTitle:YES,groupTitleKey:null,groupVisibleKey:null,render:function(a,b){a.push('<div role="button" class="sc-source-list-label sc-disclosure-view sc-button-view button disclosure no-disclosure">','<img src="'+SC.BLANK_IMAGE_URL+'" class="button" />','<span class="label"></span></div>')
},createChildViews:function(){},contentPropertyDidChange:function(f,c){var e=this.get("content");
var h=this.outlet("labelView");if(e===null){h.setIfChanged("isVisible",NO);this.setIfChanged("hasGroupTitle",NO);
return}else{h.setIfChanged("isVisible",YES);this.setIfChanged("hasGroupTitle",YES)
}var b=this.getDelegateProperty("groupTitleKey",this.displayDelegate);if((c=="*")||(b&&(c==b))){var g=(e&&e.get&&b)?e.get(b):e;
if(g!=this._title){this._title=g;if(g){g=g.capitalize()}h.set("title",g)}}var d=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);
if((c=="*")||(d&&(c==d))){if(d){h.removeClassName("no-disclosure");var a=(e&&e.get)?!!e.get(d):YES;
if(a!=this.get("isGroupVisible")){this.set("isGroupVisible",a);h.set("value",a)}}else{h.addClassName("no-disclosure")
}}},disclosureValueDidChange:function(c){if(c==this.get("isGroupVisible")){return
}var b=this.get("content");var a=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);
if(b&&b.set&&a){b.set(a,c)}this.set("isGroupVisible",c);if(this.owner&&this.owner.updateChildren){this.owner.updateChildren(true)
}},labelView:SC.DisclosureView.extend({value:YES,_valueObserver:function(){if(this.owner){this.owner.disclosureValueDidChange(this.get("value"))
}}.observes("value")})});sc_require("views/list");sc_require("views/source_list_group");
SC.BENCHMARK_SOURCE_LIST_VIEW=YES;SC.SourceListView=SC.ListView.extend({classNames:["sc-source-list"],rowHeight:32,selectOnMouseDown:NO,actOnSelect:YES});
SC.RESIZE_BOTH="resize-both";SC.RESIZE_TOP_LEFT="resize-top-left";SC.RESIZE_BOTTOM_RIGHT="resize-bottom-right";
SC.SplitView=SC.View.extend({classNames:["sc-split-view"],displayProperties:["layoutDirection"],delegate:null,layoutDirection:SC.LAYOUT_HORIZONTAL,canCollapseViews:YES,autoresizeBehavior:SC.RESIZE_BOTTOM_RIGHT,defaultThickness:0.5,isSplitView:YES,topLeftView:SC.View,dividerView:SC.SplitDividerView,bottomRightView:SC.View,topLeftThickness:function(){var a=this.get("topLeftView");
return a?this.thicknessForView(a):0}.property("topLeftView").cacheable(),bottomRightThickness:function(){var a=this.get("bottomRightView");
return a?this.thicknessForView(a):0}.property("bottomRightView").cacheable(),thumbViewCursor:null,canCollapseView:function(a){return this.invokeDelegateMethod(this.delegate,"splitViewCanCollapse",this,a)
},thicknessForView:function(a){var c=this.get("layoutDirection"),b=a.get("frame");
return(c===SC.LAYOUT_HORIZONTAL)?b.width:b.height},createChildViews:function(){var e=[],d=["topLeftView","dividerView","bottomRightView"],c,b,a;
for(b=0,a=d.length;b<a;++b){if(c=this.get(d[b])){c=this[d[b]]=this.createChildView(c,{layoutView:this,rootElementPath:[b]});
e.push(c)}}this.set("childViews",e);return this},updateChildLayout:function(){var a=this.get("topLeftView"),b=this.get("bottomRightView"),h=this.get("dividerView"),i=this.get("layoutDirection"),d=this._desiredTopLeftThickness;
var j=this.get("dividerThickness");j=(!SC.none(j))?j:7;var g=(i===SC.LAYOUT_HORIZONTAL)?this.get("frame").width:this.get("frame").height,k=g-j-d,c=this.get("autoresizeBehavior"),f,e;
e=a.get("isCollapsed")||NO;a.setIfChanged("isVisible",!e);f=SC.clone(a.get("layout"));
if(i===SC.LAYOUT_HORIZONTAL){f.top=0;f.left=0;f.bottom=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:f.right=k+j;delete f.width;break;case SC.RESIZE_BOTTOM_RIGHT:delete f.right;
delete f.height;f.width=d;break}}else{f.top=0;f.left=0;f.right=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:f.bottom=k+j;delete f.height;break;case SC.RESIZE_BOTTOM_RIGHT:delete f.bottom;
delete f.width;f.height=d;break}}a.set("layout",f);if(h){f=SC.clone(h.get("layout"));
if(i===SC.LAYOUT_HORIZONTAL){f.width=j;delete f.height;f.top=0;f.bottom=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:delete f.left;f.right=k;delete f.centerX;delete f.centerY;
break;case SC.RESIZE_BOTTOM_RIGHT:f.left=d;delete f.right;delete f.centerX;delete f.centerY;
break}}else{delete f.width;f.height=j;f.left=0;f.right=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_TOP_LEFT:delete f.top;f.bottom=k;delete f.centerX;delete f.centerY;
break;case SC.RESIZE_BOTTOM_RIGHT:f.top=d;delete f.bottom;delete f.centerX;delete f.centerY;
break}}h.set("layout",f)}e=b.get("isCollapsed")||NO;b.setIfChanged("isVisible",!e);
f=SC.clone(b.get("layout"));if(i===SC.LAYOUT_HORIZONTAL){f.top=0;f.bottom=0;f.right=0;
switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:f.left=d+j;
delete f.width;break;case SC.RESIZE_TOP_LEFT:delete f.left;f.width=k;break}}else{f.left=0;
f.right=0;f.bottom=0;switch(c){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";
case SC.RESIZE_BOTTOM_RIGHT:f.top=d+j;delete f.height;break;case SC.RESIZE_TOP_LEFT:delete f.top;
f.height=k;break}}b.set("layout",f);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")
},renderLayout:function(b,a){if(a||this._recalculateDivider){if(!this.get("thumbViewCursor")){this.set("thumbViewCursor",SC.Cursor.create())
}var d=this.get("layoutDirection"),f=this.get("frame"),e,i=this.$(),h=this.get("defaultThickness"),c=this.get("autoresizeBehavior");
var g=this.get("dividerThickness");g=(!SC.none(g))?g:7;if(this._recalculateDivider===undefined&&h<1){this._recalculateDivider=YES
}else{if(this._recalculateDivider){this._recalculateDivider=NO}}if(i[0]){e=(d===SC.LAYOUT_HORIZONTAL)?i[0].offsetWidth:i[0].offsetHeight
}else{e=(d===SC.LAYOUT_HORIZONTAL)?f.width:f.height}if(SC.none(h)||(h>0&&h<1)){h=Math.floor((e-(g))*(h||0.5))
}if(c===SC.RESIZE_BOTTOM_RIGHT){this._desiredTopLeftThickness=h}else{this._desiredTopLeftThickness=e-g-h
}this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");
this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));
this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");
this._updateTopLeftThickness(0);this._setCursorStyle();this.updateChildLayout()}arguments.callee.base.apply(this,arguments)
},render:function(b,c){arguments.callee.base.apply(this,arguments);if(this._inLiveResize){this._setCursorStyle()
}var a=this.get("layoutDirection");if(a===SC.LAYOUT_HORIZONTAL){b.addClass("sc-horizontal")
}else{b.addClass("sc-vertical")}},mouseDownInThumbView:function(a,c){var b=this.getPath("pane.rootResponder");
if(!b){return NO}b.dragDidStart(this);this._mouseDownX=a.pageX;this._mouseDownY=a.pageY;
this._thumbView=c;this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");
this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));
this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");
this.beginLiveResize();this._inLiveResize=YES;return YES},mouseDragged:function(a){var b=(this._layoutDirection===SC.LAYOUT_HORIZONTAL)?a.pageX-this._mouseDownX:a.pageY-this._mouseDownY;
this._updateTopLeftThickness(b);return YES},mouseUp:function(a){if(this._inLiveResize===YES){this._thumbView=null;
this._inLiveResize=NO;this.endLiveResize();return YES}return NO},touchesDragged:function(a){return this.mouseDragged(a)
},touchEnd:function(a){return this.mouseUp(a)},doubleClickInThumbView:function(b,d){var a=this._topLeftView,c=a.get("isCollapsed")||NO;
if(!c&&!this.canCollapseView(a)){a=this._bottomRightView;c=a.get("isCollapsed")||NO;
if(!c&&!this.canCollapseView(a)){return NO}}if(!c){this._uncollapsedThickness=this.thicknessForView(a);
if(a===this._topLeftView){this._updateTopLeftThickness(this.topLeftThickness()*-1)
}else{this._updateBottomRightThickness(this.bottomRightThickness()*-1)}if(!a.get("isCollapsed")){this._uncollapsedThickness=null
}}else{if(a===this._topLeftView){this._updateTopLeftThickness(this._uncollapsedThickness)
}else{this._updateBottomRightThickness(this._uncollapsedThickness)}a._uncollapsedThickness=null
}this._setCursorStyle();return true},_updateTopLeftThickness:function(e){var a=this._topLeftView,c=this._bottomRightView,f=this.thicknessForView(a),g=this.thicknessForView(c),j=this._dividerThickness,i=0,b=this._topLeftViewThickness+e,m=this._layoutDirection,o=this.canCollapseView(c),l=b,k=this.get("topLeftMaxThickness"),d=this.get("topLeftMinThickness"),n,h,p;
if(!a.get("isCollapsed")){i+=f}if(!c.get("isCollapsed")){i+=g}if(!SC.none(k)){l=Math.min(k,l)
}if(!SC.none(d)){l=Math.max(d,l)}k=this.get("bottomRightMaxThickness");d=this.get("bottomRightMinThickness");
n=i-l;if(!SC.none(k)){n=Math.min(k,n)}if(!SC.none(d)){n=Math.max(d,n)}l=i-n;l=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,l);
l=Math.min(l,i);l=Math.max(0,l);h=a.get("collapseAtThickness");if(!h){h=0}p=c.get("collapseAtThickness");
p=SC.none(p)?i:(i-p);if((b<=h)&&this.canCollapseView(a)){k=c.get("maxThickness");
if(!k||(j+i)<=k){l=0}}else{if(b>=p&&this.canCollapseView(c)){k=a.get("maxThickness");
if(!k||(j+i)<=k){l=i}}}if(l!=this.thicknessForView(a)){this._desiredTopLeftThickness=l;
a.set("isCollapsed",l===0);c.set("isCollapsed",l>=i);this.updateChildLayout();this.displayDidChange()
}},_updateBottomRightThickness:function(e){var a=this._topLeftView,c=this._bottomRightView,f=this.thicknessForView(a),g=this.thicknessForView(c),j=this._dividerThickness,i=0,b=this._topLeftViewThickness+e,m=this._layoutDirection,o=this.canCollapseView(c),l=b,k=this.get("topLeftMaxThickness"),d=this.get("topLeftMinThickness"),n,h,p;
if(!a.get("isCollapsed")){i+=f}if(!c.get("isCollapsed")){i+=g}if(!SC.none(k)){l=Math.min(k,l)
}if(!SC.none(d)){l=Math.max(d,l)}k=this.get("bottomRightMaxThickness");d=this.get("bottomRightMinThickness");
n=i-l;if(!SC.none(k)){n=Math.min(k,n)}if(!SC.none(d)){n=Math.max(d,n)}l=i-n;l=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,l);
l=Math.min(l,i);l=Math.max(0,l);h=a.get("collapseAtThickness");if(!h){h=0}p=c.get("collapseAtThickness");
p=SC.none(p)?i:(i-p);if((b<=h)&&this.canCollapseView(a)){k=c.get("maxThickness");
if(!k||(j+i)<=k){l=0}}else{if(b>=p&&this.canCollapseView(c)){k=a.get("maxThickness");
if(!k||(j+i)<=k){l=i}}}if(l!=this.thicknessForView(a)){this._desiredTopLeftThickness=l;
a.set("isCollapsed",l===0);c.set("isCollapsed",l>=i);this.updateChildLayout();this.displayDidChange()
}},_setCursorStyle:function(){var d=this._topLeftView,e=this._bottomRightView,a=this.get("thumbViewCursor"),b=this.thicknessForView(d),c=this.thicknessForView(e);
this._layoutDirection=this.get("layoutDirection");if(d.get("isCollapsed")||b===this.get("topLeftMinThickness")||c==this.get("bottomRightMaxThickness")){a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"s-resize")
}else{if(e.get("isCollapsed")||b===this.get("topLeftMaxThickness")||c==this.get("bottomRightMinThickness")){a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"w-resize":"n-resize")
}else{if(SC.browser.msie){a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"n-resize")
}else{a.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"ew-resize":"ns-resize")
}}}}.observes("layoutDirection"),splitViewCanCollapse:function(b,a){if(b.get("canCollapseViews")===NO){return NO
}if(a.get("canCollapse")===NO){return NO}return YES},splitViewConstrainThickness:function(c,a,b){return b
},_forceSplitCalculation:function(){this.updateLayout()}.observes("*pane.isPaneAttached"),viewDidResize:function(){arguments.callee.base.apply(this,arguments);
this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")
}.observes("layout")});sc_require("views/split");SC.SplitDividerView=SC.View.extend({classNames:["sc-split-divider-view"],prepareContext:function(a,c){var b=this.get("splitView");
if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)
},mouseDown:function(a){var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)
},doubleClick:function(a){var b=this.get("splitView");return(b)?b.doubleClickInThumbView(a,this):arguments.callee.base.apply(this,arguments)
},touchStart:function(a){return this.mouseDown(a)}});sc_require("views/collection");
SC.StackedView=SC.CollectionView.extend({classNames:["sc-stacked-view"],layout:{top:0,left:0,right:0,height:1},computeNowShowing:function(a){return this.get("allContentIndexes")
},updateHeight:function(a){if(a){this._updateHeight()}else{this.invokeLast(this._updateHeight)
}return this},_updateHeight:function(){var e=this.get("childViews"),b=e.get("length"),c,d,a;
if(b===0){a=1}else{c=e.objectAt(b-1);d=c?c.get("layer"):null;a=d?(d.offsetTop+d.offsetHeight):1;
d=null}this.adjust("height",a)},didReload:function(a){return this.updateHeight()},didCreateLayer:function(){return this.updateHeight()
}});SC.StaticContentView=SC.View.extend(SC.StaticLayout,{classNames:["sc-static-content-view"],displayProperties:["content"],content:null,contentLayoutDidChange:function(){this._viewFrameDidChange()
},useStaticLayout:YES,frame:function(){var a=this.get("layer"),b;if(!a){return{x:0,y:0,width:0,height:0}
}if(a.getBoundingClientRect){b=a.getBoundingClientRect();return{x:0,y:0,width:b.width,height:b.height}
}else{return{x:0,y:0,width:a.clientWidth,height:a.clientHeight}}}.property("content").cacheable(),parentViewDidResize:function(){this.contentLayoutDidChange()
},didCreateLayer:function(){this.contentLayoutDidChange()},render:function(a,c){var b=this.get("content");
if(b){a.push(b||"")}},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();
return YES}});sc_require("views/segmented");SC.TOP_LOCATION="top";SC.TOP_TOOLBAR_LOCATION="top-toolbar";
SC.BOTTOM_LOCATION="bottom";SC.TabView=SC.View.extend({classNames:["sc-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,tabHeight:SC.REGULAR_BUTTON_HEIGHT,tabLocation:SC.TOP_LOCATION,userDefaultKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");
this.get("containerView").set("nowShowing",a);this.get("segmentedView").set("value",a);
return this}.observes("nowShowing"),_tab_saveUserDefault:function(){var a=this.get("nowShowing");
var b=this.get("userDefaultKey");if(b){SC.userDefaults.set([b,"nowShowing"].join(":"),a)
}}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("segmentedView").set("items",this.get("items"));
return this}.observes("items"),init:function(){arguments.callee.base.apply(this,arguments);
this._tab_nowShowingDidChange()._tab_itemsDidChange()},awake:function(){arguments.callee.base.apply(this,arguments);
var a=this.get("userDefaultKey");if(a){a=[a,"nowShowing"].join(":");var b=SC.userDefaults.get(a);
if(!SC.none(b)){this.set("nowShowing",b)}}},createChildViews:function(){var f=[],a,e,d,c=this.get("tabLocation"),b=this.get("tabHeight");
d=(c===SC.TOP_LOCATION)?{top:b/2+1,left:0,right:0,bottom:0}:(c===SC.TOP_TOOLBAR_LOCATION)?{top:b+1,left:0,right:0,bottom:0}:{top:0,left:0,right:0,bottom:b-1};
e=this.containerView.extend(SC.Border,{layout:d,borderStyle:SC.BORDER_BLACK});a=this.containerView=this.createChildView(e);
f.push(a);d=(c===SC.TOP_LOCATION||c===SC.TOP_TOOLBAR_LOCATION)?{height:b,left:0,right:0,top:0}:{height:b,left:0,right:0,bottom:0};
this.segmentedView=this.get("segmentedView").extend({layout:d,_sc_tab_segmented_valueDidChange:function(){var g=this.get("parentView");
if(g){g.set("nowShowing",this.get("value"))}this.set("layerNeedsUpdate",YES);this.invokeOnce(this.updateLayerIfNeeded)
}.observes("value"),init:function(){var g=this.get("parentView");if(g){SC._TAB_ITEM_KEYS.forEach(function(h){this[h]=g.get(h)
},this)}return arguments.callee.base.apply(this,arguments)}});a=this.segmentedView=this.createChildView(this.segmentedView);
f.push(a);this.set("childViews",f);return this},containerView:SC.ContainerView,segmentedView:SC.SegmentedView});
SC._TAB_ITEM_KEYS="itemTitleKey itemValueKey itemIsEnabledKey itemIconKey itemWidthKey itemToolTipKey itemActionKey itemTargetKey".w();
SC.ThumbView=SC.View.extend({classNames:["sc-thumb-view"],isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),prepareContext:function(a,c){var b=this.get("splitView");
if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)
},mouseDown:function(a){if(!this.get("isEnabled")){return NO}var b=this.get("splitView");
return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)
},touchStart:function(a){return this.mouseDown(a)}});SC.ToolbarView=SC.View.extend({classNames:["sc-toolbar-view"],anchorLocation:null,layout:{left:0,height:32,right:0},init:function(){if(this.anchorLocation){this.layout=SC.merge(this.layout,this.anchorLocation)
}arguments.callee.base.apply(this,arguments)}});SC.WebView=SC.View.extend(SC.Control,{classNames:"sc-web-view",displayProperties:["value","shouldAutoResize"],shouldAutoResize:NO,render:function(a,d){var c=this.get("value");
if(d){a.push('<iframe src="'+c+'" style="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0p;"></iframe>')
}else{var b=this.$("iframe");b.attr("src","javascript:;");b.attr("src",c)}},didCreateLayer:function(){var a=this.$("iframe");
SC.Event.add(a,"load",this,this.iframeDidLoad)},iframeDidLoad:function(){if(this.get("shouldAutoResize")===YES){var a;
var c=this.$("iframe")[0];if(c&&c.contentWindow){a=c.contentWindow;if(a&&a.document&&a.document.documentElement){var b=a.document.documentElement;
if(!SC.browser.isIE){this.$().width(b.scrollWidth);this.$().height(b.scrollHeight)
}else{this.$().width(b.scrollWidth+12);this.$().height(b.scrollHeight+5)}}}}}});SC.WELL_CONTAINER_PADDING=15;
SC.WellView=SC.ContainerView.extend({classNames:"sc-well-view",contentLayout:{top:SC.WELL_CONTAINER_PADDING,bottom:SC.WELL_CONTAINER_PADDING,left:SC.WELL_CONTAINER_PADDING,right:SC.WELL_CONTAINER_PADDING},createChildViews:function(){var a=this.get("contentView");
if(a){a=this.contentView=this.createChildView(a);a.set("layout",this.contentLayout);
this.childViews=[a]}},render:function(a,b){if(b){a.push("<div class='top-left-edge'></div>","<div class='top-edge'></div>","<div class='top-right-edge'></div>","<div class='right-edge'></div>","<div class='bottom-right-edge'></div>","<div class='bottom-edge'></div>","<div class='bottom-left-edge'></div>","<div class='left-edge'></div>","<div class='content-background'></div>")
}arguments.callee.base.apply(this,arguments)},contentViewDidChange:function(){var a=this.get("contentView");
a.set("layout",this.contentLayout);this.replaceContent(a)}.observes("contentView")});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/desktop")
}SC.DataSource=SC.Object.extend({fetch:function(a,b){return NO},retrieveRecords:function(a,c,b){return this._handleEach(a,c,this.retrieveRecord,b)
},commitRecords:function(c,b,g,f,h){var d,e,a;if(b.length>0){d=this.createRecords.call(this,c,b,h)
}if(g.length>0){e=this.updateRecords.call(this,c,g,h)}if(f.length>0){a=this.destroyRecords.call(this,c,f,h)
}return((d===e)&&(d===a))?d:SC.MIXED_STATE},cancel:function(a,b){return NO},updateRecords:function(a,b,c){return this._handleEach(a,b,this.updateRecord,null,c)
},createRecords:function(a,b,c){return this._handleEach(a,b,this.createRecord,null,c)
},destroyRecords:function(a,b,c){return this._handleEach(a,b,this.destroyRecord,null,c)
},_handleEach:function(g,d,c,a,b){var e=d.length,h,f,i,j;if(!a){a=[]}for(h=0;h<e;
h++){j=a[h]?a[h]:b;i=c.call(this,g,d[h],j,b);if(f===undefined){f=i}else{if(f===YES){f=(i===YES)?YES:SC.MIXED_STATE
}else{if(f===NO){f=(i===NO)?NO:SC.MIXED_STATE}}}}return f?f:null},updateRecord:function(a,b,c){return NO
},retrieveRecord:function(a,b,c){return NO},createRecord:function(a,b,c){return NO
},destroyRecord:function(a,b,c){return NO}});sc_require("data_sources/data_source");
SC.CascadeDataSource=SC.DataSource.extend({dataSources:null,from:function(a){var b=this.get("dataSources");
if(!b){this.set("dataSources",b=[])}b.push(a);return this},fetch:function(c,g){var e=this.get("dataSources"),b=e?e.length:0,d=NO,h,f,a;
for(a=0;(d!==YES)&&a<b;a++){f=e.objectAt(a);h=f.fetch?f.fetch.apply(f,arguments):NO;
d=this._handleResponse(d,h)}return d},retrieveRecords:function(h,d,b){var c=this.get("dataSources"),e=c?c.length:0,f=NO,i,a,g;
for(g=0;(f!==YES)&&g<e;g++){a=c.objectAt(g);i=a.retrieveRecords.apply(a,arguments);
f=this._handleResponse(f,i)}return f},commitRecords:function(i,c,g,d){var b=this.get("dataSources"),e=b?b.length:0,f=NO,j,a,h;
for(h=0;(f!==YES)&&h<e;h++){a=b.objectAt(h);j=a.commitRecords.apply(a,arguments);
f=this._handleResponse(f,j)}return f},cancel:function(c,f){var e=this.get("dataSources"),b=e?e.length:0,d=NO,h,g,a;
for(a=0;(d!==YES)&&a<b;a++){g=e.objectAt(a);h=g.cancel.apply(g,arguments);d=this._handleResponse(d,h)
}return d},init:function(){arguments.callee.base.apply(this,arguments);var b=this.get("dataSources"),a=b?b.get("length"):0,c;
while(--a>=0){c=b[a];if(SC.typeOf(c)===SC.T_STRING){b[a]=this.get(c)}}},_handleResponse:function(b,a){if(a===YES){return YES
}else{if(b===NO){return(a===NO)?NO:SC.MIXED_STATE}else{return SC.MIXED_STATE}}}});
SC.Record=SC.Object.extend({isRecord:YES,primaryKey:"guid",id:function(a,b){if(b!==undefined){this.writeAttribute(this.get("primaryKey"),b);
return b}else{return SC.Store.idFor(this.storeKey)}}.property("storeKey").cacheable(),status:function(){return this.store.readStatus(this.storeKey)
}.property("storeKey").cacheable(),store:null,storeKey:null,isDestroyed:function(){return !!(this.get("status")&SC.Record.DESTROYED)
}.property("status").cacheable(),isEditable:function(a,b){if(b!==undefined){this._screc_isEditable=b
}if(this.get("status")&SC.Record.READY){return this._screc_isEditable}else{return NO
}}.property("status").cacheable(),_screc_isEditable:YES,isLoaded:function(){var b=SC.Record,a=this.get("status");
return !((a===b.EMPTY)||(a===b.BUSY_LOADING)||(a===b.ERROR))}.property("status").cacheable(),relationships:null,attributes:function(){var a=this.get("store"),b=this.storeKey;
return a.readEditableDataHash(b)}.property(),readOnlyAttributes:function(){var a=this.get("store"),c=this.storeKey,b=a.readDataHash(c);
if(b){b=SC.clone(b,YES)}return b}.property(),childRecords:null,childRecordNamespace:null,refresh:function(){this.get("store").refreshRecord(null,null,this.get("storeKey"));
return this},destroy:function(){this.get("store").destroyRecord(null,null,this.get("storeKey"));
this.notifyPropertyChange("status");this.propagateToAggregates();return this},recordDidChange:function(a){this.get("store").recordDidChange(null,null,this.get("storeKey"),a);
this.notifyPropertyChange("status");this.propagateToAggregates();return this},_editLevel:0,beginEditing:function(){this._editLevel++;
return this},endEditing:function(a){if(--this._editLevel<=0){this._editLevel=0;this.recordDidChange(a)
}return this},readAttribute:function(c){var a=this.get("store"),d=this.storeKey;var b=a.readDataHash(d);
return b?b[c]:undefined},writeAttribute:function(c,f,e){var a=this.get("store"),d=this.storeKey,b;
b=a.readEditableDataHash(d);if(!b){throw SC.Record.BAD_STATE_ERROR}if(f!==b[c]){if(!e){this.beginEditing()
}b[c]=f;if(c===this.get("primaryKey")){SC.Store.replaceIdFor(d,f);this.propertyDidChange("id")
}if(!e){this.endEditing(c)}}return this},propagateToAggregates:function(){var o=this.get("storeKey"),d=SC.Store.recordTypeFor(o),m,h,n,b,l;
var g=d.aggregates;if(!g){var f=this.get("store").readDataHash(o);g=[];for(var c in f){if(this[c]&&this[c].get&&this[c].get("aggregate")===YES){g.push(c)
}}d.aggregates=g}var j=SC.Record,a=j.DIRTY,e=j.READY_NEW,p=j.DESTROYED,q=j.READY_CLEAN,i;
i=function(s){var k,r;if(s){k=this.get("status");if((k&a)||(k&e)||(k&p)){r=s.get("status");
if(r===q){s.get("store").recordDidChange(s.constructor,null,s.get("storeKey"),null,YES)
}}}};for(m=0,h=g.length;m<h;++m){n=g[m];b=this.get(n);l=SC.kindOf(b,SC.ManyArray)?b:[b];
l.forEach(i,this)}},storeDidChangeProperties:function(a,b){if(a){this.notifyPropertyChange("status")
}else{if(b){this.beginPropertyChanges();b.forEach(function(e){this.notifyPropertyChange(e)
},this);this.notifyPropertyChange("status");this.endPropertyChanges()}else{this.allPropertiesDidChange()
}var d=this.relationships,c=d?d.length:0;while(--c>=0){d[c].recordPropertyDidChange(b)
}}},normalize:function(e){var j=this.primaryKey,c=this.get("id"),k=this.get("store"),m=this.get("storeKey"),l,h,d,p,g,o,b,a,i,n;
var f=k.readEditableDataHash(m)||{};f[j]=c;p=k.readDataHash(m);for(l in this){h=this[l];
if(h){d=h.typeClass;if(d){n=h.get("key")||l;b=SC.typeOf(d.call(h))===SC.T_CLASS;a=h.isChildRecordTransform;
if(!b&&!a){g=this.get(l);if(g!==undefined||(g===null&&e)){f[n]=g}}else{if(a){g=this.get(l);
if(g&&g.normalize){g.normalize()}}else{if(b){g=p[n];if(g!==undefined){f[n]=g}else{i=h.get("defaultValue");
if(SC.typeOf(i)===SC.T_FUNCTION){f[n]=i(this,l,i)}else{f[n]=i}}}}}}}}return this},unknownProperty:function(b,d){if(d!==undefined){var c=this.get("storeKey"),e=SC.Store.recordTypeFor(c);
if(e.ignoreUnknownProperties===YES){this[b]=d;return d}var a=this.get("primaryKey");
this.writeAttribute(b,d);if(b===a){SC.Store.replaceIdFor(c,d)}}return this.readAttribute(b)
},commitRecord:function(b){var a=this.get("store");a.commitRecord(undefined,undefined,this.get("storeKey"),b);
return this},isError:function(){return this.get("status")&SC.Record.ERROR}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null
}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");
return a.readError(this.get("storeKey"))||SC.Record.GENERIC_ERROR}else{return null
}}.property("isError").cacheable(),set:function(a,c){var b=this[a];if(b&&b.isProperty&&b.get&&!b.get("isEditable")){return this
}return arguments.callee.base.apply(this,arguments)},toString:function(){var a=this.get("store").readDataHash(this.get("storeKey"));
return"%@(%@) %@".fmt(this.constructor.toString(),SC.inspect(a),this.statusString())
},statusString:function(){var b=[],a=this.get("status");for(var c in SC.Record){if(c.match(/[A-Z_]$/)&&SC.Record[c]===a){b.push(c)
}}return b.join(" ")},registerChildRecord:function(f,e){var c=f.primaryKey||"childRecordKey";
var d=e[c];var b=null;var a=this.get("childRecords");if(d&&a){b=a[d]}if(SC.none(b)){b=this.createChildRecord(f,e)
}return b},createChildRecord:function(b,c){var a=null;SC.run(function(){var g=SC.Record._generateChildKey();
c=c||{};var f=b.primaryKey||"childRecordKey";var h=c[f];c[f]=g;var e=this.get("store");
if(SC.none(e)){throw"Error: during the creation of a child record: NO STORE ON PARENT!"
}a=e.createRecord(b,c);a._parentRecord=this;if(this.generateIdForChild){this.generateIdForChild(a)
}var d=this.get("childRecords");if(SC.none(d)){d=SC.Object.create();this.set("childRecords",d)
}d[g]=a},this);return a},generateIdForChild:function(a){}});SC.Record.mixin({ignoreUnknownProperties:NO,CLEAN:1,DIRTY:2,EMPTY:256,ERROR:4096,READY:512,READY_CLEAN:513,READY_DIRTY:514,READY_NEW:515,DESTROYED:1024,DESTROYED_CLEAN:1025,DESTROYED_DIRTY:1026,BUSY:2048,BUSY_LOADING:2052,BUSY_CREATING:2056,BUSY_COMMITTING:2064,BUSY_REFRESH:2080,BUSY_REFRESH_CLEAN:2081,BUSY_REFRESH_DIRTY:2082,BUSY_DESTROYING:2112,BAD_STATE_ERROR:SC.$error("Internal Inconsistency"),RECORD_EXISTS_ERROR:SC.$error("Record Exists"),NOT_FOUND_ERROR:SC.$error("Not found "),BUSY_ERROR:SC.$error("Busy"),GENERIC_ERROR:SC.$error("Generic Error"),_nextChildKey:0,attr:function(a,b){return SC.RecordAttribute.attr(a,b)
},fetch:function(b,a){return SC.FetchedAttribute.attr(b,a)},toMany:function(d,b){b=b||{};
var c=b.nested;var a;if(c){a=SC.ChildrenAttribute.attr(d,b)}else{a=SC.ManyAttribute.attr(d,b)
}return a},toOne:function(d,b){b=b||{};var c=b.nested;var a;if(c){a=SC.ChildAttribute.attr(d,b)
}else{a=SC.SingleAttribute.attr(d,b)}return a},storeKeysById:function(){var b=SC.keyFor("storeKey",SC.guidFor(this)),a=this[b];
if(!a){a=this[b]={}}return a},storeKeyFor:function(c){var b=this.storeKeysById(),a=b[c];
if(!a){a=SC.Store.generateStoreKey();SC.Store.idsByStoreKey[a]=c;SC.Store.recordTypesByStoreKey[a]=this;
b[c]=a}return a},storeKeyExists:function(c){var b=this.storeKeysById(),a=b[c];return a
},find:function(a,b){return a.find(this,b)},extend:function(){var a=SC.Object.extend.apply(this,arguments);
SC.Query._scq_didDefineRecordType(a);return a},_generateChildKey:function(){var a=SC.Record._nextChildKey+1;
SC.Record._nextChildKey=a;return a}});sc_require("data_sources/data_source");sc_require("models/record");
SC.FixturesDataSource=SC.DataSource.extend({simulateRemoteResponse:NO,latency:50,cancel:function(a,b){return NO
},fetch:function(a,b){if(b.get("location")!==SC.Query.LOCAL){throw SC.$error("SC.Fixture data source can only fetch local queries")
}if(!b.get("recordType")&&!b.get("recordTypes")){throw SC.$error("SC.Fixture data source can only fetch queries with one or more record types")
}if(this.get("simulateRemoteResponse")){this.invokeLater(this._fetch,this.get("latency"),a,b)
}else{this._fetch(a,b)}},_fetch:function(a,c){var d=c.get("recordType"),b=c.get("recordTypes")||[d];
b.forEach(function(e){if(SC.typeOf(e)===SC.T_STRING){e=SC.objectForPropertyPath(e)
}if(e){this.loadFixturesFor(a,e)}},this);a.dataSourceDidFetchQuery(c)},retrieveRecords:function(a,c){var d=this.get("latency"),b=this.hasFixturesFor(c);
if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._retrieveRecords,d,a,c)
}else{this._retrieveRecords(a,c)}return b},_retrieveRecords:function(a,b){b.forEach(function(d){var c=[],g=SC.Store.recordTypeFor(d),f=a.idFor(d),e=this.fixtureForStoreKey(a,d);
c.push(d);a.dataSourceDidComplete(d,e,f)},this)},updateRecords:function(a,c,e){var d=this.get("latency"),b=this.hasFixturesFor(c);
if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._updateRecords,d,a,c)
}else{this._updateRecords(a,c)}return b},_updateRecords:function(a,b){b.forEach(function(c){var d=a.readDataHash(c);
this.setFixtureForStoreKey(a,c,d);a.dataSourceDidComplete(c)},this)},createRecords:function(a,b,d){var c=this.get("latency");
if(this.get("simulateRemoteResponse")){this.invokeLater(this._createRecords,c,a,b)
}else{this._createRecords(a,b)}return YES},_createRecords:function(a,b){b.forEach(function(e){var g=a.idFor(e),f=a.recordTypeFor(e),d=a.readDataHash(e),c=this.fixturesFor(f);
if(!g){g=this.generateIdFor(f,d,a,e)}this._invalidateCachesFor(f,e,g);c[g]=d;a.dataSourceDidComplete(e,null,g)
},this)},destroyRecords:function(a,c,e){var d=this.get("latency"),b=this.hasFixturesFor(c);
if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._destroyRecords,d,a,c)
}else{this._destroyRecords(a,c)}return b},_destroyRecords:function(a,b){b.forEach(function(d){var f=a.idFor(d),e=a.recordTypeFor(d),c=this.fixturesFor(e);
this._invalidateCachesFor(e,d,f);if(f){delete c[f]}a.dataSourceDidDestroy(d)},this)
},loadFixturesFor:function(a,g,c){var b=[],e,d,f;e=this.fixturesFor(g);for(d in e){f=g.storeKeyFor(d);
if(a.peekStatus(f)===SC.Record.EMPTY){b.push(e[d])}if(c){c.push(f)}}if(b&&b.length>0){a.loadRecords(g,b)
}return this},generateIdFor:function(d,b,a,c){return"@id%@".fmt(SC.Store.generateStoreKey())
},fixtureForStoreKey:function(a,c){var e=a.idFor(c),d=a.recordTypeFor(c),b=this.fixturesFor(d);
return b?b[e]:null},setFixtureForStoreKey:function(a,d,c){var f=a.idFor(d),e=a.recordTypeFor(d),b=this.fixturesFor(e);
this._invalidateCachesFor(e,d,f);b[f]=c;return this},fixturesFor:function(h){if(!this._fixtures){this._fixtures={}
}var f=this._fixtures[SC.guidFor(h)];if(f){return f}var e=h?h.FIXTURES:null,b=e?e.length:0,c=h?h.prototype.primaryKey:"guid",a,d,g;
this._fixtures[SC.guidFor(h)]=f={};for(a=0;a<b;a++){d=e[a];g=d[c];if(!g){g=this.generateIdFor(h,d)
}f[g]=d}return f},fixturesLoadedFor:function(c){if(!this._fixtures){return NO}var a=[],b=this._fixtures[SC.guidFor(c)];
return b?YES:NO},hasFixturesFor:function(b){var a=NO;b.forEach(function(d){if(a!==SC.MIXED_STATE){var e=SC.Store.recordTypeFor(d),c=e?e.FIXTURES:null;
if(c&&c.length&&c.length>0){if(a===NO){a=YES}}else{if(a===YES){a=SC.MIXED_STATE}}}},this);
return a},_invalidateCachesFor:function(d,b,c){var a=this._storeKeyCache;if(a){delete a[SC.guidFor(d)]
}return this}});SC.Record.fixtures=SC.FixturesDataSource.create();var AuthorFixtures=[{type:"Author",guid:"4995bc373454a",fullName:"Gerry Woolery 4",bookTitle:"The Madness of the Meddler",address:" MIT, 21 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc37345ab",fullName:"Forrest Eggbert 2",bookTitle:"The Night Inferno",address:" Harvard, 86 University Loop, Southampton, UK"},{type:"Author",guid:"4995bc37345c0",fullName:"Dorthy Wilson 4",bookTitle:"The Nightmare of Space",address:" Harvard, 283 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc37345e4",fullName:"Nathan Lineman 4",bookTitle:"The Night of the Ice",address:" College University, 199 First St, Seattle, WA"},{type:"Author",guid:"4995bc3734605",fullName:"Phinehas Laurenzi 3",bookTitle:"The Day Infinity",address:" Foothill College, 144 First St, Wichita, KS"},{type:"Author",guid:"4995bc3734618",fullName:"Avis Cass 3",bookTitle:"Masque of Space",address:" London University, 75 Fifth Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc373462d",fullName:"Everard Richardson 1",bookTitle:"The Day of the Horn",address:" London University, 265 Lazaneo St, New York, NY"},{type:"Author",guid:"4995bc3734641",fullName:"Su Strickland 2",bookTitle:"The Day Ambassador",address:" Santa Clara University, 461 Dana St, Los Angeles, CA"},{type:"Author",guid:"4995bc3734655",fullName:"Patton Kooser 2",bookTitle:"The Ultimate Seed",address:" London University, 235 Van Ness Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc373466e",fullName:"Janelle Howard 3",bookTitle:"The Fury Massacre",address:" Springfield University, 411 Main St, Southampton, UK"},{type:"Author",guid:"4995bc3734685",fullName:"Eliza Ropes 2",bookTitle:"The Fear Robots",address:" Foothill College, 386 Broadway Blvd, Ann Arbor, MI"},{type:"Author",guid:"4995bc373469a",fullName:"Alisya Drennan 2",bookTitle:"The Fear Paradise",address:" University of Southampton, 282 Elm St, Santa Clara, CA"},{type:"Author",guid:"4995bc37346b1",fullName:"Lori Magor 4",bookTitle:"The Madness Attack",address:" MIT, 429 Dana St, San Francisco, CA"},{type:"Author",guid:"4995bc37346c4",fullName:"Amethyst Evans 4",bookTitle:"The Fear of the Thieves",address:" London University, 309 Main St, Cupertino, CA"},{type:"Author",guid:"4995bc37346d8",fullName:"Ridley Ewing 2",bookTitle:"The Killer Angel",address:" New York University, 470 Broadway Blvd, New York, NY"},{type:"Author",guid:"4995bc37346ef",fullName:"Sloane Moulton 1",bookTitle:"The Dead of Time",address:" Springfield University, 1 Dana St, Southampton, UK"},{type:"Author",guid:"4995bc3734704",fullName:"Marquis Fuchs 3",bookTitle:"The Seeds of Menace",address:" CalTech, 348 Fifth Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3734718",fullName:"August Feufer 4",bookTitle:"The Fangs",address:" CalTech, 244 Broadway Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc373472c",fullName:"Alix Rifler 1",bookTitle:"The Day Whisper",address:" Santa Clara University, 368 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3734740",fullName:"Virgil Pinney 3",bookTitle:"The Death of the Hive",address:" College University, 452 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc373475d",fullName:"Carin Burnett 4",bookTitle:"The Space of the Mist",address:" Michigan State University, 331 University Loop, Santa Clara, CA"},{type:"Author",guid:"4995bc3734774",fullName:"Matty Cypret 2",bookTitle:"Crater of Day",address:" London University, 37 Broadway Blvd, Seattle, WA"},{type:"Author",guid:"4995bc3734794",fullName:"Matilda Rockwell 3",bookTitle:"The Pirate Masters",address:" CalTech, 487 Bloom St, Cambridge, MA"},{type:"Author",guid:"4995bc37347b0",fullName:"Luann Garneis 1",bookTitle:"The Day of the Keys",address:" Springfield University, 418 Dana St, New York, NY"},{type:"Author",guid:"4995bc37347c4",fullName:"Alysha Fox 1",bookTitle:"The Death Face",address:" Springfield University, 423 Castro St, Southampton, UK"},{type:"Author",guid:"4995bc37347d9",fullName:"Clifford Dugger 3",bookTitle:"The Ultimate Inferno",address:" MIT, 478 Lazaneo St, San Francisco, CA"},{type:"Author",guid:"4995bc37347ec",fullName:"Christianne Taggart 3",bookTitle:"The Curse of Day",address:" Stanford University, 83 Lazaneo St, Cambridge, MA"},{type:"Author",guid:"4995bc373480b",fullName:"Kestrel Nehling 2",bookTitle:"The Machines History",address:" Santa Clara University, 296 Bloom St, Ann Arbor, MI"},{type:"Author",guid:"4995bc373481f",fullName:"Mackenzie Pittman 1",bookTitle:"Cave of Night",address:" New York University, 489 Elm St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734833",fullName:"Sheila Ammons 4",bookTitle:"Robots of Menace",address:" Harvard, 211 Second St, Cambridge, MA"},{type:"Author",guid:"4995bc3734847",fullName:"September Glover 4",bookTitle:"The Illusion Carnival",address:" London University, 370 Fifth Ave, New York, NY"},{type:"Author",guid:"4995bc3734863",fullName:"Porsche Gilman 1",bookTitle:"The Seeds of Menace",address:" Michigan State University, 1 Fifth Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3734875",fullName:"Vance Jolce 1",bookTitle:"The Final Time",address:" CalTech, 364 University Loop, London, UK"},{type:"Author",guid:"4995bc373488a",fullName:"Clifford Dugger 4",bookTitle:"Dreams of Menace",address:" Springfield University, 211 First St, New York, NY"},{type:"Author",guid:"4995bc373489e",fullName:"Zander Pershing 1",bookTitle:"Killer of Menace",address:" Harvard, 464 Dana St, London, UK"},{type:"Author",guid:"4995bc37348b2",fullName:"Joye Eisenman 3",bookTitle:"The Whisper Faces",address:" College University, 171 Lazaneo St, St. Louis, MO"},{type:"Author",guid:"4995bc37348c5",fullName:"Phyliss Saylor 3",bookTitle:"The Fury Secret",address:" London University, 443 Dana St, St. Louis, MO"},{type:"Author",guid:"4995bc37348e1",fullName:"Duke Rosenstiehl 1",bookTitle:"The Time Fangs",address:" CalTech, 28 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc37348f3",fullName:"Silvester Mcfall 3",bookTitle:"Whispers of Madness",address:" MIT, 217 First St, Cambridge, MA"},{type:"Author",guid:"4995bc3734909",fullName:"Branda Wood 1",bookTitle:"The Inferno",address:" London University, 120 University Loop, Wichita, KS"},{type:"Author",guid:"4995bc373491d",fullName:"Em Leichter 1",bookTitle:"The Day of the Massacre",address:" CalTech, 113 Castro St, Wichita, KS"},{type:"Author",guid:"4995bc3734931",fullName:"Bonita Downing 4",bookTitle:"Minds of Fury",address:" Santa Clara University, 64 University Loop, London, UK"},{type:"Author",guid:"4995bc3734944",fullName:"Norm Burns 4",bookTitle:"The Machines Mists",address:" UC Santa Cruz, 27 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc373495f",fullName:"Victor Painter 3",bookTitle:"The Laboratory",address:" MIT, 5 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc3734974",fullName:"Lalla Haverrman 2",bookTitle:"Planet of Death",address:" University of Southampton, 60 Oak Ave, London, UK"},{type:"Author",guid:"4995bc3734988",fullName:"Jeri Stroh 3",bookTitle:"The Meddler",address:" London University, 390 Oak Ave, Southampton, UK"},{type:"Author",guid:"4995bc373499c",fullName:"Raynard Peters 1",bookTitle:"The Horror of the Minds",address:" Michigan State University, 186 Van Ness Blvd, New York, NY"},{type:"Author",guid:"4995bc37349bb",fullName:"Buck Eisaman 3",bookTitle:"Future of Night",address:" New York University, 470 First St, Southampton, UK"},{type:"Author",guid:"4995bc37349d8",fullName:"Annie Surrency 3",bookTitle:"The Menace Androids",address:" Foothill College, 192 Bloom St, Southampton, UK"},{type:"Author",guid:"4995bc37349f3",fullName:"Ashlie Newman 4",bookTitle:"The Horror Key",address:" MIT, 106 First St, Cupertino, CA"},{type:"Author",guid:"4995bc3734a07",fullName:"Mabelle Staymates 2",bookTitle:"The Riders of Death",address:" Foothill College, 42 Broadway Blvd, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734a22",fullName:"Eveleen Mixey 3",bookTitle:"The Doom of the Jaws",address:" New York University, 218 University Loop, Los Angeles, CA"},{type:"Author",guid:"4995bc3734a5f",fullName:"Anneka Gist 3",bookTitle:"Ark of Space",address:" London University, 301 Van Ness Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc3734a75",fullName:"Avis Cass 3",bookTitle:"The Doomed Pit",address:" Foothill College, 40 Second St, Seattle, WA"},{type:"Author",guid:"4995bc3734a89",fullName:"Cedar Garry 3",bookTitle:"The Death Dead",address:" University of Southampton, 206 Bloom St, Palo Alto, CA"},{type:"Author",guid:"4995bc3734aa3",fullName:"Kezia Henry 1",bookTitle:"The Operation",address:" MIT, 294 First St, New York, NY"},{type:"Author",guid:"4995bc3734ab8",fullName:"Lindsey Straub 3",bookTitle:"The Fury of the Angel",address:" Stanford University, 11 Dana St, Cambridge, MA"},{type:"Author",guid:"4995bc3734aca",fullName:"Cornell Siegrist 1",bookTitle:"The Ghost",address:" College University, 310 Second St, Southampton, UK"},{type:"Author",guid:"4995bc3734ae5",fullName:"Raine Warrick 2",bookTitle:"The Menace Myth",address:" Springfield University, 360 University Loop, San Francisco, CA"},{type:"Author",guid:"4995bc3734af9",fullName:"Marci Caesar 2",bookTitle:"Fangs of Fury",address:" Santa Clara University, 486 Main St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734b0d",fullName:"Hewie Rose 2",bookTitle:"Mirror of Night",address:" CalTech, 419 Elm St, Wichita, KS"},{type:"Author",guid:"4995bc3734b26",fullName:"Titania Tilton 3",bookTitle:"The Day of the Mists",address:" Michigan State University, 251 Main St, Los Angeles, CA"},{type:"Author",guid:"4995bc3734b3b",fullName:"Amyas Hice 1",bookTitle:"City of Menace",address:" Santa Clara University, 380 Lazaneo St, San Francisco, CA"},{type:"Author",guid:"4995bc3734b5c",fullName:"Lyric Richards 1",bookTitle:"The Impossible Doors",address:" MIT, 412 Elm St, Cambridge, MA"},{type:"Author",guid:"4995bc3734b6f",fullName:"Lianne Kemble 4",bookTitle:"The Mind Massacre",address:" Harvard, 318 Fifth Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734b83",fullName:"Gabe Milliron 4",bookTitle:"The Carnival",address:" MIT, 187 Second St, Los Angeles, CA"},{type:"Author",guid:"4995bc3734b97",fullName:"Willis Costello 4",bookTitle:"The Night of the Bandits",address:" Michigan State University, 114 Elm St, Cambridge, MA"},{type:"Author",guid:"4995bc3734bb6",fullName:"Lottie Sherlock 3",bookTitle:"The Space Skull",address:" Foothill College, 165 Main St, Cambridge, MA"},{type:"Author",guid:"4995bc3734bc8",fullName:"Frieda Wade 2",bookTitle:"The Operation",address:" Santa Clara University, 179 University Loop, Cupertino, CA"},{type:"Author",guid:"4995bc3734bde",fullName:"Chip Haynes 1",bookTitle:"The Robot of Night",address:" Foothill College, 258 First St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734bf2",fullName:"Denzel Buehler 3",bookTitle:"The Night of the Brides",address:" Michigan State University, 138 First St, Cambridge, MA"},{type:"Author",guid:"4995bc3734c0e",fullName:"Kaelee Johnson 3",bookTitle:"The Evil Invasion",address:" MIT, 121 Fifth Ave, Southampton, UK"},{type:"Author",guid:"4995bc3734c25",fullName:"Prissy Cressman 1",bookTitle:"Monster of Day",address:" CalTech, 53 Second St, Los Angeles, CA"},{type:"Author",guid:"4995bc3734c38",fullName:"Anne Roadman 4",bookTitle:"The Meddler of Fear",address:" MIT, 374 Broadway Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3734c57",fullName:"Stacy Moffat 3",bookTitle:"The Menace Mist",address:" University of Southampton, 42 Second St, London, UK"},{type:"Author",guid:"4995bc3734c6b",fullName:"Jerold Jenkins 3",bookTitle:"The Thieves of Time",address:" London University, 188 Broadway Blvd, London, UK"},{type:"Author",guid:"4995bc3734c7f",fullName:"Berniece Berry 2",bookTitle:"The Illusion Ark",address:" College University, 148 Second St, Palo Alto, CA"},{type:"Author",guid:"4995bc3734c92",fullName:"Tim Beck 3",bookTitle:"The Warrior",address:" New York University, 47 Broadway Blvd, London, UK"},{type:"Author",guid:"4995bc3734cad",fullName:"Alexis Weisgarber 1",bookTitle:"The Space of the Crater",address:" Harvard, 47 Elm St, Palo Alto, CA"},{type:"Author",guid:"4995bc3734cc0",fullName:"Levi Wilkinson 1",bookTitle:"The Ambassador of Horror",address:" UC Santa Cruz, 34 Lazaneo St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734cd4",fullName:"Bailey Lauffer 3",bookTitle:"Fury of Doom",address:" New York University, 227 Castro St, Santa Clara, CA"},{type:"Author",guid:"4995bc3734ce7",fullName:"Gerry Woolery 1",bookTitle:"The Menace of the Computers",address:" Springfield University, 8 Main St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734cfb",fullName:"Hale Alliman 2",bookTitle:"The Paradise of Death",address:" Santa Clara University, 21 University Loop, Cupertino, CA"},{type:"Author",guid:"4995bc3734d0f",fullName:"Everard Richardson 2",bookTitle:"The Skull",address:" Santa Clara University, 391 Elm St, Cupertino, CA"},{type:"Author",guid:"4995bc3734d2c",fullName:"Tammie Crawford 1",bookTitle:"The Empty Runaway",address:" Michigan State University, 155 Van Ness Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc3734d3f",fullName:"Xavier Porter 3",bookTitle:"The Resurrection of Death",address:" Springfield University, 187 Lazaneo St, Palo Alto, CA"},{type:"Author",guid:"4995bc3734d53",fullName:"Alec Owens 3",bookTitle:"The Madness of the History",address:" New York University, 385 University Loop, St. Louis, MO"},{type:"Author",guid:"4995bc3734d67",fullName:"Jancis Busk 2",bookTitle:"The Mind Seed",address:" Harvard, 49 Main St, Santa Clara, CA"},{type:"Author",guid:"4995bc3734d7b",fullName:"Daffodil Harper 1",bookTitle:"Monster of Day",address:" Michigan State University, 254 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3734d8f",fullName:"Davey Moore 2",bookTitle:"Ghost of Fury",address:" Harvard, 160 Broadway Blvd, Cupertino, CA"},{type:"Author",guid:"4995bc3734dca",fullName:"Ridley Ewing 3",bookTitle:"The Fear Awakening",address:" College University, 86 Lazaneo St, San Francisco, CA"},{type:"Author",guid:"4995bc3734dde",fullName:"Loreto Isemann 1",bookTitle:"The Madness Night",address:" Foothill College, 496 Van Ness Blvd, Wichita, KS"},{type:"Author",guid:"4995bc3734df2",fullName:"Deshawn Pyle 4",bookTitle:"Suns of Time",address:" Santa Clara University, 271 Fifth Ave, Southampton, UK"},{type:"Author",guid:"4995bc3734e07",fullName:"Hailey Berkheimer 3",bookTitle:"The Time Smuggler",address:" Stanford University, 345 Main St, St. Louis, MO"},{type:"Author",guid:"4995bc3734e51",fullName:" 3",bookTitle:"The Menace Nightmares",address:" Stanford University, 346 Main St, Santa Clara, CA"},{type:"Author",guid:"4995bc3734e74",fullName:"Simona Craig 2",bookTitle:"The Horror of the Ice",address:" Michigan State University, 47 Bloom St, Cambridge, MA"},{type:"Author",guid:"4995bc3734e89",fullName:"Peta Filby 1",bookTitle:"Masque of Space",address:" Santa Clara University, 95 Broadway Blvd, Wichita, KS"},{type:"Author",guid:"4995bc3734ea6",fullName:"Kathi Williams 4",bookTitle:"Madness of Death",address:" Springfield University, 307 Second St, San Francisco, CA"},{type:"Author",guid:"4995bc3734eba",fullName:"Barret Lalty 1",bookTitle:"The Space of the Mirror",address:" University of Southampton, 287 Fifth Ave, St. Louis, MO"},{type:"Author",guid:"4995bc3734ed9",fullName:"Russ Nicola 4",bookTitle:"The Bride of Horror",address:" University of Southampton, 270 Elm St, Cupertino, CA"},{type:"Author",guid:"4995bc3734eed",fullName:"Maya Schrader 2",bookTitle:"The Terrible Sea",address:" College University, 206 First St, London, UK"},{type:"Author",guid:"4995bc3734f01",fullName:"Hazel Holts 1",bookTitle:"The Carnival",address:" CalTech, 65 University Loop, London, UK"},{type:"Author",guid:"4995bc3734f26",fullName:"Saffron Elinor 3",bookTitle:"The Seeds of Menace",address:" Springfield University, 462 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc3734f39",fullName:"Tiger Whitling 2",bookTitle:"The Night of the Brides",address:" MIT, 139 Castro St, Palo Alto, CA"},{type:"Author",guid:"4995bc3734f4e",fullName:"Rolph Burris 4",bookTitle:"The Horror Power",address:" Harvard, 418 Second St, London, UK"},{type:"Author",guid:"4995bc3734f61",fullName:"Mark Wheeler 1",bookTitle:"The Horror Key",address:" University of Southampton, 441 Bloom St, New York, NY"},{type:"Author",guid:"4995bc3734f75",fullName:"Wenona Tennant 2",bookTitle:"The Men",address:" Stanford University, 122 Main St, New York, NY"},{type:"Author",guid:"4995bc3734f89",fullName:"Callista Bishop 1",bookTitle:"The Pirate Masters",address:" UC Santa Cruz, 127 Main St, Cambridge, MA"},{type:"Author",guid:"4995bc3734fa4",fullName:"Cecil Rodacker 2",bookTitle:"The Fury of the Wings",address:" MIT, 499 Fifth Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3734fb7",fullName:"Liliana Northey 4",bookTitle:"The Fear Awakening",address:" Harvard, 185 First St, Cambridge, MA"},{type:"Author",guid:"4995bc3734fcb",fullName:"Webster Jelliman 1",bookTitle:"The Talons of Day",address:" University of Southampton, 472 Lazaneo St, Los Angeles, CA"},{type:"Author",guid:"4995bc3734fdf",fullName:"Loreen Buck 4",bookTitle:"The Masque of Doom",address:" UC Santa Cruz, 122 Broadway Blvd, Cupertino, CA"},{type:"Author",guid:"4995bc3734ff3",fullName:"Keisha Klockman 2",bookTitle:"The Ice Web",address:" MIT, 88 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc3735006",fullName:"Bennett Little 1",bookTitle:"Revelation of Menace",address:" UC Santa Cruz, 118 University Loop, Palo Alto, CA"},{type:"Author",guid:"4995bc3735022",fullName:"Louis Waldron 1",bookTitle:"The Mountain Suns",address:" CalTech, 79 First St, San Francisco, CA"},{type:"Author",guid:"4995bc3735034",fullName:"Sophia Spring 1",bookTitle:"The Death of the Nightmares",address:" Santa Clara University, 450 First St, San Francisco, CA"},{type:"Author",guid:"4995bc3735048",fullName:"Joscelin Nash 3",bookTitle:"The Day Monster",address:" Santa Clara University, 191 Lazaneo St, St. Louis, MO"},{type:"Author",guid:"4995bc373505c",fullName:"Porsche Gilman 1",bookTitle:"Robots of Night",address:" CalTech, 338 First St, St. Louis, MO"},{type:"Author",guid:"4995bc3735070",fullName:"Deshawn Pyle 4",bookTitle:"The Space Brides",address:" Michigan State University, 204 Second St, Southampton, UK"},{type:"Author",guid:"4995bc3735084",fullName:"Galen Flanders 2",bookTitle:"The Secret Devils",address:" CalTech, 219 Castro St, Palo Alto, CA"},{type:"Author",guid:"4995bc37350a5",fullName:"Lonnie Linton 3",bookTitle:"The Armageddon",address:" London University, 214 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc37350ba",fullName:"Melvin Wilkerson 4",bookTitle:"The Space Reign",address:" Harvard, 71 Bloom St, San Francisco, CA"},{type:"Author",guid:"4995bc37350d0",fullName:"Eleanor Bennett 4",bookTitle:"Runaway of Death",address:" Harvard, 148 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc37350e4",fullName:"Fawn Carr 3",bookTitle:"The Warrior of Menace",address:" Springfield University, 202 Oak Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc37350f8",fullName:"Linsay Mcmullen 4",bookTitle:"The Doom Masters",address:" Harvard, 116 First St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735110",fullName:"Amyas Hice 4",bookTitle:"The Space Skull",address:" College University, 6 Fifth Ave, St. Louis, MO"},{type:"Author",guid:"4995bc3735123",fullName:"Monty Kava 4",bookTitle:"The Day Ice",address:" Santa Clara University, 175 Elm St, Cambridge, MA"},{type:"Author",guid:"4995bc3735138",fullName:"Brock Young 4",bookTitle:"The Killer Sound",address:" College University, 414 University Loop, Southampton, UK"},{type:"Author",guid:"4995bc373514c",fullName:"Belinda Alice 3",bookTitle:"The Deadly Memories",address:" UC Santa Cruz, 172 Elm St, Wichita, KS"},{type:"Author",guid:"4995bc3735160",fullName:"Marlene Agnes 4",bookTitle:"The Death Creature",address:" CalTech, 291 Van Ness Blvd, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735174",fullName:"Godric Sommer 3",bookTitle:"The Fury Infinity",address:" CalTech, 290 Oak Ave, Southampton, UK"},{type:"Author",guid:"4995bc373518d",fullName:"Janis Bullard 2",bookTitle:"The Wings",address:" Foothill College, 265 Van Ness Blvd, Southampton, UK"},{type:"Author",guid:"4995bc37351a3",fullName:"Pamella Mckee 3",bookTitle:"The Children of Madness",address:" London University, 273 Broadway Blvd, London, UK"},{type:"Author",guid:"4995bc37351c8",fullName:"Prince Demuth 4",bookTitle:"The Riders",address:" Michigan State University, 193 Main St, St. Louis, MO"},{type:"Author",guid:"4995bc37351dc",fullName:"Kristal Young 2",bookTitle:"The Pirate Nightmares",address:" Foothill College, 354 Castro St, St. Louis, MO"},{type:"Author",guid:"4995bc37351ef",fullName:"Osmund Pritchard 1",bookTitle:"The Time Suns",address:" University of Southampton, 250 Dana St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735209",fullName:"Jazmine Adams 3",bookTitle:"The Day of the Computers",address:" Stanford University, 340 Van Ness Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc3735221",fullName:"Rose Mays 3",bookTitle:"Meddler of Space",address:" UC Santa Cruz, 409 Bloom St, Los Angeles, CA"},{type:"Author",guid:"4995bc373523f",fullName:"Rylee Fiddler 2",bookTitle:"Masque of Space",address:" UC Santa Cruz, 413 Fifth Ave, Wichita, KS"},{type:"Author",guid:"4995bc3735253",fullName:"Meg Coveney 1",bookTitle:"Devils of Fury",address:" MIT, 446 Oak Ave, Southampton, UK"},{type:"Author",guid:"4995bc3735267",fullName:"Pamelia Mang 4",bookTitle:"The Time of the Pyramid",address:" New York University, 131 Main St, Cupertino, CA"},{type:"Author",guid:"4995bc373527b",fullName:"Raphael Wilks 4",bookTitle:"Ark of Day",address:" Foothill College, 44 Fifth Ave, Cambridge, MA"},{type:"Author",guid:"4995bc373529a",fullName:"Matilda Rockwell 4",bookTitle:"The Time Smugglers",address:" Michigan State University, 135 Van Ness Blvd, Ann Arbor, MI"},{type:"Author",guid:"4995bc37352ae",fullName:"Duke Rosenstiehl 1",bookTitle:"Mist of Death",address:" Santa Clara University, 160 First St, Ann Arbor, MI"},{type:"Author",guid:"4995bc37352cf",fullName:"Effie Greenwood 2",bookTitle:"The Fury Mist",address:" UC Santa Cruz, 288 Main St, Santa Clara, CA"},{type:"Author",guid:"4995bc37352e3",fullName:"Kathy Huston 4",bookTitle:"History of Doom",address:" Harvard, 299 Bloom St, Cupertino, CA"},{type:"Author",guid:"4995bc37352f6",fullName:"Rina Prescott 1",bookTitle:"The Children of Madness",address:" College University, 458 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735319",fullName:"Raven Pirl 4",bookTitle:"Smugglers of Night",address:" UC Santa Cruz, 467 Main St, St. Louis, MO"},{type:"Author",guid:"4995bc373532c",fullName:"Xavier Porter 2",bookTitle:"The Robot of Night",address:" University of Southampton, 52 Lazaneo St, London, UK"},{type:"Author",guid:"4995bc373533f",fullName:"Lianne Kemble 1",bookTitle:"The Seeds",address:" College University, 482 Castro St, Cupertino, CA"},{type:"Author",guid:"4995bc3735353",fullName:"Byrne Bruxner 1",bookTitle:"The Long Suns",address:" CalTech, 238 Dana St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735367",fullName:"Byrne Bruxner 3",bookTitle:"The Wings",address:" New York University, 331 Van Ness Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc373537a",fullName:"Fawn Carr 4",bookTitle:"The Laboratory",address:" CalTech, 237 Fifth Ave, London, UK"},{type:"Author",guid:"4995bc3735398",fullName:"Alyx Hincken 2",bookTitle:"The Revelation",address:" CalTech, 41 First St, Palo Alto, CA"},{type:"Author",guid:"4995bc37353aa",fullName:"Xerxes Newbern 1",bookTitle:"The Ghost",address:" Stanford University, 424 Van Ness Blvd, Southampton, UK"},{type:"Author",guid:"4995bc37353c0",fullName:"Alton Saline 3",bookTitle:"The Space of the Leisure",address:" London University, 102 Bloom St, London, UK"},{type:"Author",guid:"4995bc37353d3",fullName:"Lina Sanborn 1",bookTitle:"The Night Caves",address:" Michigan State University, 79 Second St, Ann Arbor, MI"},{type:"Author",guid:"4995bc37353e7",fullName:"Laura Herrold 3",bookTitle:"The Runaway Gods",address:" College University, 476 Dana St, Ann Arbor, MI"},{type:"Author",guid:"4995bc37353fb",fullName:"Maximilian Wolfe 1",bookTitle:"The Doom Meddler",address:" Stanford University, 400 Lazaneo St, Santa Clara, CA"},{type:"Author",guid:"4995bc3735418",fullName:"Ben Lombardi 3",bookTitle:"The Day",address:" College University, 139 Bloom St, St. Louis, MO"},{type:"Author",guid:"4995bc373543d",fullName:"Tiger Whitling 4",bookTitle:"The Fury Sea",address:" MIT, 55 Second St, St. Louis, MO"},{type:"Author",guid:"4995bc3735450",fullName:"Nena Davis 1",bookTitle:"The Operation of Menace",address:" University of Southampton, 2 First St, Cambridge, MA"},{type:"Author",guid:"4995bc3735464",fullName:"Luther Johnston 3",bookTitle:"The Keeper of Space",address:" Foothill College, 76 University Loop, San Francisco, CA"},{type:"Author",guid:"4995bc373547e",fullName:"Rikki Graham 3",bookTitle:"The Devil",address:" Foothill College, 322 Castro St, Cupertino, CA"},{type:"Author",guid:"4995bc3735493",fullName:"Alec Owens 1",bookTitle:"The Hive of Doom",address:" Michigan State University, 448 Bloom St, Wichita, KS"},{type:"Author",guid:"4995bc37354b2",fullName:"Lettie Roberts 3",bookTitle:"Dead of Time",address:" Stanford University, 152 Second St, Southampton, UK"},{type:"Author",guid:"4995bc37354c5",fullName:"Amalia Grant 2",bookTitle:"The Talons of Day",address:" University of Southampton, 42 Oak Ave, New York, NY"},{type:"Author",guid:"4995bc37354d9",fullName:"Brady Smail 2",bookTitle:"The Horror Visitor",address:" University of Southampton, 350 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc37354ed",fullName:"Lori Magor 2",bookTitle:"The Ultimate Seed",address:" London University, 397 Main St, Cambridge, MA"},{type:"Author",guid:"4995bc373550f",fullName:"Jewel Mortland 2",bookTitle:"The Horror of the Ragnarok",address:" College University, 46 Elm St, St. Louis, MO"},{type:"Author",guid:"4995bc3735538",fullName:"Kaitlyn Paul 1",bookTitle:"The Memories",address:" New York University, 489 Lazaneo St, Los Angeles, CA"},{type:"Author",guid:"4995bc373554e",fullName:"Aletha Lambert 1",bookTitle:"The Horror of the Universe",address:" Stanford University, 425 Van Ness Blvd, Los Angeles, CA"},{type:"Author",guid:"4995bc3735563",fullName:"Lela Warner 2",bookTitle:"The Menace of the Anvil",address:" CalTech, 430 Fifth Ave, Seattle, WA"},{type:"Author",guid:"4995bc3735578",fullName:"Brandi Bauerle 4",bookTitle:"The Fear of the Key",address:" College University, 485 Elm St, San Francisco, CA"},{type:"Author",guid:"4995bc373558c",fullName:"Marva Wise 4",bookTitle:"The Meddler",address:" Stanford University, 388 Second St, Cupertino, CA"},{type:"Author",guid:"4995bc373559e",fullName:"Seymour Fischer 1",bookTitle:"The Rock",address:" Springfield University, 375 First St, San Francisco, CA"},{type:"Author",guid:"4995bc37355b2",fullName:"Honor Simmons 3",bookTitle:"The Menace Mist",address:" CalTech, 179 Broadway Blvd, San Francisco, CA"},{type:"Author",guid:"4995bc37355c7",fullName:"Sarah Chapman 1",bookTitle:"The Day Androids",address:" UC Santa Cruz, 317 Dana St, Cupertino, CA"},{type:"Author",guid:"4995bc37355db",fullName:"Suzanna Neely 1",bookTitle:"The Secret Devils",address:" CalTech, 201 Main St, New York, NY"},{type:"Author",guid:"4995bc37355ee",fullName:"Wil Hoffhants 2",bookTitle:"The Empty Machines",address:" UC Santa Cruz, 446 Bloom St, San Francisco, CA"},{type:"Author",guid:"4995bc3735602",fullName:"Ridley Ewing 4",bookTitle:"The Ghost of Menace",address:" College University, 252 Broadway Blvd, Southampton, UK"},{type:"Author",guid:"4995bc3735616",fullName:"Rodge Catherina 2",bookTitle:"The Empty Herald",address:" Michigan State University, 367 Van Ness Blvd, Palo Alto, CA"},{type:"Author",guid:"4995bc373562a",fullName:"Brady Smail 1",bookTitle:"The Day Ice",address:" London University, 426 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc373563e",fullName:"Antony Stern 4",bookTitle:"Reign of Night",address:" University of Southampton, 6 Van Ness Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3735652",fullName:"Loreen Buck 1",bookTitle:"The Day Whisper",address:" Michigan State University, 47 Main St, Palo Alto, CA"},{type:"Author",guid:"4995bc3735666",fullName:"Melita Barkley 1",bookTitle:"The Meddler of Fear",address:" CalTech, 328 Lazaneo St, Cambridge, MA"},{type:"Author",guid:"4995bc373567a",fullName:"Kerensa Benford 2",bookTitle:"The Menace of the Ghosts",address:" New York University, 411 Elm St, Seattle, WA"},{type:"Author",guid:"4995bc373568e",fullName:"Prue Putnam 2",bookTitle:"The Doom of the Night",address:" College University, 340 Oak Ave, Southampton, UK"},{type:"Author",guid:"4995bc37356aa",fullName:"Rosaleen Mench 3",bookTitle:"The Devil",address:" College University, 266 First St, Palo Alto, CA"},{type:"Author",guid:"4995bc37356bc",fullName:"Washington Rummel 4",bookTitle:"Man of Madness",address:" College University, 54 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc37356d0",fullName:"Leyton Jyllian 1",bookTitle:"The Menace of the Computers",address:" Springfield University, 432 First St, St. Louis, MO"},{type:"Author",guid:"4995bc37356e4",fullName:"Perce Pennington 3",bookTitle:"The Seventh Child",address:" College University, 178 Oak Ave, London, UK"},{type:"Author",guid:"4995bc37356f8",fullName:"Sabrina Beedell 3",bookTitle:"Runaway of Death",address:" Stanford University, 105 Lazaneo St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735713",fullName:"Mckenzie Carden 2",bookTitle:"The Universe",address:" Springfield University, 436 Broadway Blvd, Palo Alto, CA"},{type:"Author",guid:"4995bc3735728",fullName:"Ginny Finlay 2",bookTitle:"The Doom of the Massacre",address:" Foothill College, 56 Broadway Blvd, Wichita, KS"},{type:"Author",guid:"4995bc373573c",fullName:"Fox Omara 4",bookTitle:"The Madness Horns",address:" Foothill College, 239 Fifth Ave, London, UK"},{type:"Author",guid:"4995bc373574f",fullName:"Cherice Blatenberger 2",bookTitle:"The Claws of Fury",address:" Harvard, 235 Van Ness Blvd, Cupertino, CA"},{type:"Author",guid:"4995bc3735763",fullName:"Harriette Alington 4",bookTitle:"The Whispers",address:" College University, 203 Lazaneo St, Wichita, KS"},{type:"Author",guid:"4995bc3735777",fullName:"Eldon Ream 2",bookTitle:"The Revelation",address:" University of Southampton, 97 Broadway Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc373578b",fullName:"Ambrosine Echard 4",bookTitle:"The Android of Madness",address:" University of Southampton, 133 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc373579f",fullName:"Bekki Blunt 4",bookTitle:"Evil of Fury",address:" Springfield University, 236 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc37357b2",fullName:"Zena Giesler 1",bookTitle:"The Terrible Ghosts",address:" Foothill College, 228 Bloom St, Santa Clara, CA"},{type:"Author",guid:"4995bc37357c6",fullName:"Lalo Pery 4",bookTitle:"The Fury of the Devils",address:" Michigan State University, 39 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc37357da",fullName:"Rowina Bicknell 2",bookTitle:"Evil of Fury",address:" University of Southampton, 471 Second St, Santa Clara, CA"},{type:"Author",guid:"4995bc37357ee",fullName:"Candis Kanaga 4",bookTitle:"The Operation",address:" UC Santa Cruz, 11 Bloom St, London, UK"},{type:"Author",guid:"4995bc3735802",fullName:"Jess Richter 4",bookTitle:"The Bride of Fury",address:" MIT, 91 University Loop, Seattle, WA"},{type:"Author",guid:"4995bc3735816",fullName:"Elfreda Vanleer 1",bookTitle:"The Madness of the Face",address:" College University, 147 Main St, Cupertino, CA"},{type:"Author",guid:"4995bc373582a",fullName:"Rolo Orner 1",bookTitle:"The Dead Sea",address:" London University, 475 Dana St, St. Louis, MO"},{type:"Author",guid:"4995bc373583e",fullName:"Lottie Sherlock 1",bookTitle:"The Robbers",address:" Michigan State University, 306 Van Ness Blvd, New York, NY"},{type:"Author",guid:"4995bc3735851",fullName:"Shyla Clarke 3",bookTitle:"The Attack",address:" College University, 299 Dana St, Cupertino, CA"},{type:"Author",guid:"4995bc3735865",fullName:"Bethany Veith 3",bookTitle:"The Secret Pyramids",address:" Harvard, 248 Fifth Ave, Wichita, KS"},{type:"Author",guid:"4995bc3735879",fullName:"Bertha Jesse 3",bookTitle:"The Space of the Pit",address:" Harvard, 364 University Loop, London, UK"},{type:"Author",guid:"4995bc373588d",fullName:"Marylou Frankenberger 1",bookTitle:"The Time Keys",address:" College University, 322 Elm St, Cambridge, MA"},{type:"Author",guid:"4995bc37358a1",fullName:"Roderick Powell 3",bookTitle:"The Inferno of Death",address:" University of Southampton, 266 Main St, St. Louis, MO"},{type:"Author",guid:"4995bc37358b5",fullName:"Maureen Leach 3",bookTitle:"The Unearthly Assassin",address:" Santa Clara University, 170 Bloom St, Cupertino, CA"},{type:"Author",guid:"4995bc37358c8",fullName:"Jaclyn Stiffey 1",bookTitle:"Dominator of Death",address:" Harvard, 236 Second St, Palo Alto, CA"},{type:"Author",guid:"4995bc37358dc",fullName:"Lindsey Straub 3",bookTitle:"The Decay of Space",address:" UC Santa Cruz, 155 Castro St, Cambridge, MA"},{type:"Author",guid:"4995bc37358f7",fullName:"Lyric Richards 1",bookTitle:"The Paradise of Menace",address:" Foothill College, 293 Elm St, Santa Clara, CA"},{type:"Author",guid:"4995bc373590b",fullName:"Allycia Mackendrick 1",bookTitle:"The Long Suns",address:" Santa Clara University, 449 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc373591f",fullName:"James Buzzard 2",bookTitle:"The Death of the Thieves",address:" University of Southampton, 341 Oak Ave, San Francisco, CA"},{type:"Author",guid:"4995bc3735933",fullName:"Pamelia Mang 2",bookTitle:"The Masque of Doom",address:" Santa Clara University, 411 University Loop, Southampton, UK"},{type:"Author",guid:"4995bc3735947",fullName:"Chandler Wildman 3",bookTitle:"The Fear Awakening",address:" Santa Clara University, 144 Main St, New York, NY"},{type:"Author",guid:"4995bc373595b",fullName:"Tyrese Knight 2",bookTitle:"The Messenger of Fear",address:" Michigan State University, 342 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc373596e",fullName:"Emery Cavalet 2",bookTitle:"City of Menace",address:" CalTech, 477 Fifth Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735982",fullName:"Jackson Garratt 3",bookTitle:"The Claws of Fear",address:" College University, 25 Dana St, London, UK"},{type:"Author",guid:"4995bc3735996",fullName:"Gussie Bowman 2",bookTitle:"The Space of the Runaway",address:" Michigan State University, 372 Main St, San Francisco, CA"},{type:"Author",guid:"4995bc37359aa",fullName:"Kezia Henry 2",bookTitle:"The Time Ark",address:" Stanford University, 199 Main St, San Francisco, CA"},{type:"Author",guid:"4995bc37359bd",fullName:"Quintin Hays 1",bookTitle:"The Nightmares of Doom",address:" Santa Clara University, 172 University Loop, London, UK"},{type:"Author",guid:"4995bc37359d1",fullName:"Amalia Grant 2",bookTitle:"The Fang Ghost",address:" University of Southampton, 471 Fifth Ave, Seattle, WA"},{type:"Author",guid:"4995bc37359e5",fullName:"Jasper Swarner 4",bookTitle:"The Time Armageddon",address:" Foothill College, 65 Lazaneo St, Southampton, UK"},{type:"Author",guid:"4995bc37359f9",fullName:"Tania Scott 4",bookTitle:"The Secret Monster",address:" Michigan State University, 24 Second St, London, UK"},{type:"Author",guid:"4995bc3735a0d",fullName:"Jarrod Schreckengost 3",bookTitle:"Dreams of Menace",address:" New York University, 126 Bloom St, Cambridge, MA"},{type:"Author",guid:"4995bc3735a21",fullName:"Lesley Sanforth 3",bookTitle:"The Jaws of Death",address:" CalTech, 357 Castro St, New York, NY"},{type:"Author",guid:"4995bc3735a34",fullName:"Roosevelt Stewart 3",bookTitle:"The Fear of the Mist",address:" College University, 6 Main St, Cambridge, MA"},{type:"Author",guid:"4995bc3735a48",fullName:"Jacaline Mathews 2",bookTitle:"The Day of the Runaway",address:" Santa Clara University, 420 Broadway Blvd, Seattle, WA"},{type:"Author",guid:"4995bc3735a5c",fullName:"Kaitlyn Paul 3",bookTitle:"The Carnival",address:" Michigan State University, 322 Bloom St, London, UK"},{type:"Author",guid:"4995bc3735a70",fullName:"Christianne Taggart 1",bookTitle:"The Doomed Bride",address:" Michigan State University, 289 Van Ness Blvd, London, UK"},{type:"Author",guid:"4995bc3735a84",fullName:"Lawrie Toyley 1",bookTitle:"The Night of the Ice",address:" University of Southampton, 367 University Loop, Palo Alto, CA"},{type:"Author",guid:"4995bc3735a98",fullName:"Gladwyn Handyside 1",bookTitle:"The Fury Face",address:" Springfield University, 350 University Loop, Wichita, KS"},{type:"Author",guid:"4995bc3735ab0",fullName:"Raphael Wilks 4",bookTitle:"Myth of Madness",address:" CalTech, 187 Fifth Ave, London, UK"},{type:"Author",guid:"4995bc3735ad1",fullName:"Matilda Rockwell 3",bookTitle:"The Unearthly Assassin",address:" Stanford University, 84 Fifth Ave, Southampton, UK"},{type:"Author",guid:"4995bc3735ae5",fullName:"Alan Brown 4",bookTitle:"The Menace of the Visitor",address:" Springfield University, 45 Oak Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3735af8",fullName:"Romy Ward 3",bookTitle:"The Space Underworld",address:" Harvard, 387 Lazaneo St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735b0c",fullName:"Eldreda Flick 2",bookTitle:"The Death of the Dominators",address:" MIT, 453 Oak Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3735b20",fullName:"Em Leichter 1",bookTitle:"The Future Web",address:" University of Southampton, 291 First St, Santa Clara, CA"},{type:"Author",guid:"4995bc3735b34",fullName:"Janella Warner 3",bookTitle:"The Final Claws",address:" Springfield University, 398 Castro St, New York, NY"},{type:"Author",guid:"4995bc3735b48",fullName:"Chip Haynes 3",bookTitle:"The Menace Thieves",address:" Michigan State University, 490 Broadway Blvd, Seattle, WA"},{type:"Author",guid:"4995bc3735b5c",fullName:"Lita Rumbaugh 3",bookTitle:"The Child of Space",address:" Springfield University, 444 First St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735b6f",fullName:"Zena Giesler 3",bookTitle:"The Deadly Memories",address:" Harvard, 420 Main St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735b83",fullName:"Polly Van 3",bookTitle:"Horns of Day",address:" New York University, 57 Dana St, Palo Alto, CA"},{type:"Author",guid:"4995bc3735b97",fullName:"Ceara Sanner 1",bookTitle:"The Evil Assassin",address:" Michigan State University, 410 Second St, St. Louis, MO"},{type:"Author",guid:"4995bc3735bab",fullName:"Nola Bell 4",bookTitle:"The Last Alien",address:" Harvard, 261 Oak Ave, Seattle, WA"},{type:"Author",guid:"4995bc3735bbf",fullName:"Hamilton Heyman 1",bookTitle:"The Minds of Madness",address:" New York University, 352 Fifth Ave, Cambridge, MA"},{type:"Author",guid:"4995bc3735bd2",fullName:"Neville Mildred 3",bookTitle:"Mutants of Night",address:" CalTech, 115 University Loop, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735be6",fullName:"Fran Willcox 4",bookTitle:"The Menace of the Spider",address:" London University, 432 Second St, San Francisco, CA"},{type:"Author",guid:"4995bc3735bfa",fullName:"Matty Cypret 3",bookTitle:"The Day of the Vengeance",address:" College University, 218 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc3735c0e",fullName:"Austen Fonblanque 4",bookTitle:"The Space Reign",address:" Foothill College, 142 Bloom St, Cupertino, CA"},{type:"Author",guid:"4995bc3735c21",fullName:"Felix Mitchell 4",bookTitle:"God of Doom",address:" Foothill College, 45 Castro St, Wichita, KS"},{type:"Author",guid:"4995bc3735c35",fullName:"Matty Cypret 3",bookTitle:"The Night of the Leisure",address:" London University, 9 Fifth Ave, Seattle, WA"},{type:"Author",guid:"4995bc3735c49",fullName:"Cassarah Vinsant 4",bookTitle:"The Seed of Night",address:" Michigan State University, 20 Van Ness Blvd, London, UK"},{type:"Author",guid:"4995bc3735c5d",fullName:"Vernon Perkins 1",bookTitle:"Reign of Night",address:" MIT, 274 Fifth Ave, Cupertino, CA"},{type:"Author",guid:"4995bc3735c71",fullName:"Shirley Mingle 2",bookTitle:"The Smugglers of Menace",address:" Harvard, 125 Dana St, Cambridge, MA"},{type:"Author",guid:"4995bc3735c85",fullName:"Kemp Lord 4",bookTitle:"The Horror Angel",address:" London University, 159 Second St, Palo Alto, CA"},{type:"Author",guid:"4995bc3735c98",fullName:"Kermit Throckmorton 1",bookTitle:"The Tenth Web",address:" London University, 106 Van Ness Blvd, Palo Alto, CA"},{type:"Author",guid:"4995bc3735cb3",fullName:"Delma Auman 4",bookTitle:"Killer of Night",address:" University of Southampton, 226 Second St, Cambridge, MA"},{type:"Author",guid:"4995bc3735cc7",fullName:"Marly Friedline 4",bookTitle:"Runaway of Horror",address:" Foothill College, 256 Dana St, San Francisco, CA"},{type:"Author",guid:"4995bc3735cdb",fullName:"Noah Kline 4",bookTitle:"The Menace of the Ragnarok",address:" Springfield University, 63 Bloom St, St. Louis, MO"},{type:"Author",guid:"4995bc3735cef",fullName:"Wendy Sayre 1",bookTitle:"History of Doom",address:" New York University, 39 Castro St, Southampton, UK"},{type:"Author",guid:"4995bc3735d03",fullName:"Izzy Wyatt 4",bookTitle:"The Assassin of Fear",address:" University of Southampton, 73 Bloom St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735d17",fullName:"Ann Sachse 2",bookTitle:"The Doom Fury",address:" CalTech, 133 Elm St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735d2b",fullName:"Ebba Hil 1",bookTitle:"Talons of Madness",address:" Harvard, 54 Broadway Blvd, Santa Clara, CA"},{type:"Author",guid:"4995bc3735d3f",fullName:"Alexina Compton 2",bookTitle:"War of Time",address:" University of Southampton, 44 Main St, St. Louis, MO"},{type:"Author",guid:"4995bc3735d53",fullName:"Sybella Henley 2",bookTitle:"The Illusion Revelation",address:" UC Santa Cruz, 107 Van Ness Blvd, Santa Clara, CA"},{type:"Author",guid:"4995bc3735d66",fullName:"Tylar Monahan 1",bookTitle:"Image of Space",address:" London University, 126 Second St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735d7a",fullName:" 4",bookTitle:"The False Masque",address:" MIT, 318 Oak Ave, Wichita, KS"},{type:"Author",guid:"4995bc3735d91",fullName:"Lorrin Reichard 2",bookTitle:"The Fear of the Androids",address:" Springfield University, 467 Main St, Cambridge, MA"},{type:"Author",guid:"4995bc3735da5",fullName:"Harriette Alington 1",bookTitle:"The Future of Time",address:" Stanford University, 5 Castro St, St. Louis, MO"},{type:"Author",guid:"4995bc3735db9",fullName:"Dominic Groah 3",bookTitle:"Smuggler of Day",address:" UC Santa Cruz, 246 Fifth Ave, St. Louis, MO"},{type:"Author",guid:"4995bc3735dcc",fullName:"Everard Richardson 1",bookTitle:"The Revelation",address:" Springfield University, 261 Dana St, Seattle, WA"},{type:"Author",guid:"4995bc3735de0",fullName:"Gladwyn Handyside 2",bookTitle:"The Secret Monster",address:" UC Santa Cruz, 94 Main St, Wichita, KS"},{type:"Author",guid:"4995bc3735df4",fullName:"Kyla Moore 3",bookTitle:"The Horror Robot",address:" Santa Clara University, 456 Castro St, London, UK"},{type:"Author",guid:"4995bc3735e08",fullName:"Latonya Roche 4",bookTitle:"The Machines Spider",address:" Michigan State University, 429 Elm St, Palo Alto, CA"},{type:"Author",guid:"4995bc3735e1c",fullName:"Chanel Boyd 2",bookTitle:"The Horror of the Minds",address:" London University, 482 Elm St, Southampton, UK"},{type:"Author",guid:"4995bc3735e2f",fullName:"Delice Kimmons 4",bookTitle:"The Death of the Memory",address:" MIT, 257 Broadway Blvd, Palo Alto, CA"},{type:"Author",guid:"4995bc3735e43",fullName:"Cornelius Metzer 2",bookTitle:"City of Menace",address:" Springfield University, 353 Bloom St, Wichita, KS"},{type:"Author",guid:"4995bc3735e57",fullName:"Meg Coveney 2",bookTitle:"The Assassin of Fear",address:" College University, 348 Lazaneo St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735e6a",fullName:"Roxanna Loewentsein 2",bookTitle:"The Riders of Death",address:" CalTech, 125 Bloom St, St. Louis, MO"},{type:"Author",guid:"4995bc3735e7e",fullName:"Emmett Agg 2",bookTitle:"The Last Mists",address:" UC Santa Cruz, 210 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3735e99",fullName:"Junior Christman 4",bookTitle:"Ragnarok of Space",address:" Foothill College, 264 Second St, Palo Alto, CA"},{type:"Author",guid:"4995bc3735eae",fullName:"Wendy Sayre 2",bookTitle:"The Madness Myth",address:" University of Southampton, 398 Bloom St, Santa Clara, CA"},{type:"Author",guid:"4995bc3735ec0",fullName:"Amandine Catlay 1",bookTitle:"The Night Inferno",address:" MIT, 364 Oak Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3735ed8",fullName:"Gordon Zadovsky 4",bookTitle:"The Key of Death",address:" Foothill College, 68 Fifth Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3735eec",fullName:"Earline Judge 1",bookTitle:"The Doom of the Claws",address:" CalTech, 462 Bloom St, London, UK"},{type:"Author",guid:"4995bc3735f00",fullName:"Chryssa Robertson 3",bookTitle:"The Fear of Day",address:" New York University, 323 First St, San Francisco, CA"},{type:"Author",guid:"4995bc3735f14",fullName:"Tim Beck 4",bookTitle:"The Fear of the Arc",address:" New York University, 287 Lazaneo St, Seattle, WA"},{type:"Author",guid:"4995bc3735f28",fullName:"Sarah Chapman 4",bookTitle:"Pyramids of Menace",address:" University of Southampton, 289 Lazaneo St, Los Angeles, CA"},{type:"Author",guid:"4995bc3735f3b",fullName:"Serrena Canham 2",bookTitle:"The Ultimate Seed",address:" Springfield University, 268 Castro St, Seattle, WA"},{type:"Author",guid:"4995bc3735f4f",fullName:"Pierce Conrad 4",bookTitle:"Future of Night",address:" New York University, 44 Elm St, Southampton, UK"},{type:"Author",guid:"4995bc3735f63",fullName:"Sheard Alcocke 1",bookTitle:"The Claws of Day",address:" Springfield University, 23 Van Ness Blvd, Wichita, KS"},{type:"Author",guid:"4995bc3735f77",fullName:"Prue Putnam 1",bookTitle:"Robbers of Doom",address:" College University, 244 Main St, San Francisco, CA"},{type:"Author",guid:"4995bc3735f8a",fullName:"Kezia Henry 3",bookTitle:"Creature of Space",address:" Stanford University, 440 Lazaneo St, New York, NY"},{type:"Author",guid:"4995bc3735f9f",fullName:"Chrystal Prevatt 4",bookTitle:"The Day of the Mirror",address:" New York University, 135 Main St, Cupertino, CA"},{type:"Author",guid:"4995bc3735fb3",fullName:"Kim Oppenheimer 2",bookTitle:"The Killers of Time",address:" London University, 226 Oak Ave, Cambridge, MA"},{type:"Author",guid:"4995bc3735fc8",fullName:"Adolph Hayhurst 2",bookTitle:"Messenger of Fear",address:" MIT, 298 Fifth Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc3735fdb",fullName:"Luann Garneis 1",bookTitle:"The Masque",address:" Santa Clara University, 109 Van Ness Blvd, Cupertino, CA"},{type:"Author",guid:"4995bc3735ff0",fullName:"Hazel Holts 4",bookTitle:"The Pirate Memory",address:" Santa Clara University, 241 Dana St, London, UK"},{type:"Author",guid:"4995bc3736005",fullName:"Brittney Lowe 1",bookTitle:"The Time Smugglers",address:" Springfield University, 216 University Loop, Palo Alto, CA"},{type:"Author",guid:"4995bc3736367",fullName:"Missie Marjorie 2",bookTitle:"The Computer Time",address:" Michigan State University, 306 Elm St, New York, NY"},{type:"Author",guid:"4995bc3736381",fullName:"Blondie Rogers 3",bookTitle:"The Empty Runaway",address:" UC Santa Cruz, 336 Castro St, Seattle, WA"},{type:"Author",guid:"4995bc3736396",fullName:"Kyla Moore 2",bookTitle:"The First Cave",address:" Michigan State University, 269 University Loop, Santa Clara, CA"},{type:"Author",guid:"4995bc37363ab",fullName:"Kaylynn Herndon 4",bookTitle:"The Time of the Seeds",address:" Stanford University, 201 Bloom St, Seattle, WA"},{type:"Author",guid:"4995bc37363bf",fullName:"Jancis Busk 1",bookTitle:"The Ultimate Resurrection",address:" Harvard, 314 Main St, London, UK"},{type:"Author",guid:"4995bc37363e0",fullName:"Linnie Fraser 3",bookTitle:"The God",address:" University of Southampton, 302 Fifth Ave, San Francisco, CA"},{type:"Author",guid:"4995bc37363f5",fullName:"Tyrell Riggle 1",bookTitle:"Visitors of Time",address:" University of Southampton, 258 First St, Southampton, UK"},{type:"Author",guid:"4995bc373640a",fullName:"Luanne Mens 3",bookTitle:"The Day Sea",address:" Stanford University, 422 Fifth Ave, San Francisco, CA"},{type:"Author",guid:"4995bc373641e",fullName:"Everitt Thompson 3",bookTitle:"The Enemies",address:" University of Southampton, 57 Fifth Ave, Cambridge, MA"},{type:"Author",guid:"4995bc3736432",fullName:"Robynne Unk 4",bookTitle:"The Fear of the Devil",address:" Springfield University, 326 Castro St, Cambridge, MA"},{type:"Author",guid:"4995bc373644e",fullName:"Lake Elder 1",bookTitle:"Spiders of Death",address:" University of Southampton, 237 Fifth Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3736465",fullName:"Gale Cross 4",bookTitle:"The Mutants",address:" Foothill College, 323 Broadway Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3736479",fullName:"Amy Mcelroy 4",bookTitle:"The Caves of Madness",address:" MIT, 255 Fifth Ave, San Francisco, CA"},{type:"Author",guid:"4995bc373648d",fullName:"Lowell Holtzer 3",bookTitle:"The Spider",address:" College University, 370 Oak Ave, Cambridge, MA"},{type:"Author",guid:"4995bc37364a1",fullName:"Zola Haines 4",bookTitle:"The Fear of the Mist",address:" New York University, 286 Fifth Ave, Palo Alto, CA"},{type:"Author",guid:"4995bc37364b4",fullName:"Pearce Swartzbaugh 4",bookTitle:"The Menace Killers",address:" Stanford University, 34 Dana St, New York, NY"},{type:"Author",guid:"4995bc37364cc",fullName:"Lorayne Losey 1",bookTitle:"The Messenger",address:" Springfield University, 70 University Loop, Cupertino, CA"},{type:"Author",guid:"4995bc37364e0",fullName:"Perdita Casteel 3",bookTitle:"Illusion of Doom",address:" College University, 103 First St, Los Angeles, CA"},{type:"Author",guid:"4995bc37364f4",fullName:"Jules Leech 4",bookTitle:"The Dominator",address:" Foothill College, 405 Broadway Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3736508",fullName:"Reagan Ironmonger 1",bookTitle:"Hive of Menace",address:" London University, 447 University Loop, Los Angeles, CA"},{type:"Author",guid:"4995bc373651c",fullName:"Bevis Powers 3",bookTitle:"The Sun of Death",address:" Foothill College, 447 Main St, Santa Clara, CA"},{type:"Author",guid:"4995bc3736530",fullName:"Kip Mosser 4",bookTitle:"The Door of Space",address:" Stanford University, 294 University Loop, London, UK"},{type:"Author",guid:"4995bc3736543",fullName:"Jilly Poorbaugh 3",bookTitle:"The Doom of the Battlefield",address:" Harvard, 360 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736557",fullName:"Chip Haynes 1",bookTitle:"The Unearthly Androids",address:" MIT, 483 Elm St, Cupertino, CA"},{type:"Author",guid:"4995bc373656b",fullName:"Daffodil Harper 4",bookTitle:"The War of Fury",address:" Michigan State University, 483 Second St, Palo Alto, CA"},{type:"Author",guid:"4995bc373657f",fullName:"Dorthy Wilson 2",bookTitle:"The Mind Crime",address:" Michigan State University, 412 Broadway Blvd, Seattle, WA"},{type:"Author",guid:"4995bc3736593",fullName:"Ridley Ewing 3",bookTitle:"The Night of the Universe",address:" New York University, 287 First St, Wichita, KS"},{type:"Author",guid:"4995bc37365a7",fullName:"Brennan Whishaw 1",bookTitle:"The War of Fury",address:" University of Southampton, 499 First St, Los Angeles, CA"},{type:"Author",guid:"4995bc37365bb",fullName:"Hale Alliman 1",bookTitle:"Devils of Fury",address:" Foothill College, 265 Main St, Southampton, UK"},{type:"Author",guid:"4995bc37365d6",fullName:"Petronella Eckhardstein 1",bookTitle:"The Mind Massacre",address:" MIT, 78 Castro St, St. Louis, MO"},{type:"Author",guid:"4995bc37365ea",fullName:"Maurice Bagley 4",bookTitle:"The Decay Claws",address:" Foothill College, 159 Fifth Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc37365fe",fullName:"Shaun Drabble 3",bookTitle:"The Fang Secret",address:" Michigan State University, 79 Broadway Blvd, Wichita, KS"},{type:"Author",guid:"4995bc3736612",fullName:"Brady Smail 3",bookTitle:"Sound of Time",address:" UC Santa Cruz, 456 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736626",fullName:"Juliet Shaw 3",bookTitle:"The Ghost Universe",address:" New York University, 379 Castro St, Los Angeles, CA"},{type:"Author",guid:"4995bc373663a",fullName:"Lorayne Losey 3",bookTitle:"The Jaws of Death",address:" Michigan State University, 398 University Loop, Ann Arbor, MI"},{type:"Author",guid:"4995bc373664e",fullName:"Lisha Enderly 4",bookTitle:"The Web",address:" Santa Clara University, 86 Broadway Blvd, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736662",fullName:"Becky Davis 1",bookTitle:"The Doom of the Claws",address:" London University, 284 Van Ness Blvd, New York, NY"},{type:"Author",guid:"4995bc3736676",fullName:"Leyton Jyllian 3",bookTitle:"Operation of Night",address:" MIT, 137 Dana St, Wichita, KS"},{type:"Author",guid:"4995bc373668a",fullName:"Alice Yates 1",bookTitle:"The Madness of the Spiders",address:" Stanford University, 484 First St, London, UK"},{type:"Author",guid:"4995bc373669d",fullName:"Lemoine James 1",bookTitle:"The Deadly Mutants",address:" Springfield University, 359 Oak Ave, Cambridge, MA"},{type:"Author",guid:"4995bc37366b1",fullName:"Baylee Raybould 1",bookTitle:"Curse of Fear",address:" Michigan State University, 154 Lazaneo St, London, UK"},{type:"Author",guid:"4995bc37366c5",fullName:"Ford Steiner 2",bookTitle:"The Masque of Doom",address:" Michigan State University, 390 Second St, Southampton, UK"},{type:"Author",guid:"4995bc37366d9",fullName:"Laureen Moon 1",bookTitle:"The Fear Memories",address:" Stanford University, 372 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc37366ed",fullName:"Colin Hair 4",bookTitle:"The Time of the Secret",address:" Springfield University, 464 Bloom St, Cupertino, CA"},{type:"Author",guid:"4995bc3736701",fullName:"Haven Crissman 1",bookTitle:"The Armageddon Laboratory",address:" College University, 141 Lazaneo St, Palo Alto, CA"},{type:"Author",guid:"4995bc373671a",fullName:"Ludmilla Candles 2",bookTitle:"The Pyramids",address:" CalTech, 303 Bloom St, Southampton, UK"},{type:"Author",guid:"4995bc373672f",fullName:"Alberta Fowler 1",bookTitle:"The Day of the Door",address:" London University, 271 University Loop, Cambridge, MA"},{type:"Author",guid:"4995bc3736744",fullName:"Lowell Holtzer 3",bookTitle:"The Night of the Bandits",address:" University of Southampton, 173 Second St, Seattle, WA"},{type:"Author",guid:"4995bc3736758",fullName:"Lesley Sanforth 4",bookTitle:"Robbers of Doom",address:" University of Southampton, 129 Van Ness Blvd, Seattle, WA"},{type:"Author",guid:"4995bc373676c",fullName:"Vic Close 1",bookTitle:"The Bride of Horror",address:" MIT, 390 Main St, Santa Clara, CA"},{type:"Author",guid:"4995bc3736780",fullName:"Lorraine Butler 2",bookTitle:"The Time of the Seeds",address:" New York University, 13 Oak Ave, Wichita, KS"},{type:"Author",guid:"4995bc3736794",fullName:"Cedar Garry 3",bookTitle:"The Madness Myth",address:" CalTech, 45 Fifth Ave, New York, NY"},{type:"Author",guid:"4995bc37367a8",fullName:"Sinclair Dale 2",bookTitle:"The Night of the Dominator",address:" New York University, 493 Bloom St, Cambridge, MA"},{type:"Author",guid:"4995bc37367bc",fullName:"Goldie Pickering 1",bookTitle:"Menace of Day",address:" University of Southampton, 216 First St, St. Louis, MO"},{type:"Author",guid:"4995bc37367cf",fullName:"Kaleigh Brooks 2",bookTitle:"The Doom Fury",address:" UC Santa Cruz, 189 Bloom St, London, UK"},{type:"Author",guid:"4995bc37367e3",fullName:"Rain Joyce 3",bookTitle:"The Day",address:" New York University, 499 Dana St, Palo Alto, CA"},{type:"Author",guid:"4995bc37367f7",fullName:"Merton Fillmore 3",bookTitle:"Dreams of Menace",address:" Santa Clara University, 98 Bloom St, Cambridge, MA"},{type:"Author",guid:"4995bc373680b",fullName:"Bekki Blunt 4",bookTitle:"The Whispers of Day",address:" UC Santa Cruz, 112 Lazaneo St, Ann Arbor, MI"},{type:"Author",guid:"4995bc373681f",fullName:"Godric Sommer 1",bookTitle:"Men of Night",address:" College University, 88 Lazaneo St, New York, NY"},{type:"Author",guid:"4995bc3736832",fullName:"Thorburn Smith 4",bookTitle:"Door of Horror",address:" CalTech, 401 Elm St, Santa Clara, CA"},{type:"Author",guid:"4995bc3736846",fullName:"Frankie Giesen 3",bookTitle:"The Jaws",address:" Harvard, 117 Van Ness Blvd, London, UK"},{type:"Author",guid:"4995bc373685a",fullName:"Brock Young 3",bookTitle:"The Killer Key",address:" New York University, 225 Van Ness Blvd, Santa Clara, CA"},{type:"Author",guid:"4995bc373686e",fullName:"Pleasance Mcloskey 1",bookTitle:"Sound of Fear",address:" College University, 331 Fifth Ave, Cupertino, CA"},{type:"Author",guid:"4995bc3736881",fullName:"Colin Hair 3",bookTitle:"The Faceless Universe",address:" Harvard, 185 Broadway Blvd, New York, NY"},{type:"Author",guid:"4995bc3736895",fullName:"Jo Brindle 2",bookTitle:"The Day Ice",address:" UC Santa Cruz, 278 Fifth Ave, Palo Alto, CA"},{type:"Author",guid:"4995bc37368a9",fullName:"Loreen Buck 2",bookTitle:"Underworld of Space",address:" Harvard, 385 Main St, London, UK"},{type:"Author",guid:"4995bc37368bd",fullName:"Darrell Reade 4",bookTitle:"The Madness Seeds",address:" UC Santa Cruz, 423 Dana St, Cambridge, MA"},{type:"Author",guid:"4995bc37368d0",fullName:"Delice Kimmons 2",bookTitle:"The Fear of the Key",address:" MIT, 161 First St, New York, NY"},{type:"Author",guid:"4995bc37368e4",fullName:"Bettye Bode 1",bookTitle:"The Thieves of Time",address:" College University, 207 Main St, Southampton, UK"},{type:"Author",guid:"4995bc37368f8",fullName:"Dillon Rowe 3",bookTitle:"The Mind Wings",address:" Foothill College, 374 Broadway Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc373690c",fullName:"Bennett Little 4",bookTitle:"The Day Nemesis",address:" MIT, 129 Lazaneo St, Los Angeles, CA"},{type:"Author",guid:"4995bc373691f",fullName:"Bevis Powers 4",bookTitle:"The Horror of Madness",address:" Santa Clara University, 68 Oak Ave, St. Louis, MO"},{type:"Author",guid:"4995bc3736933",fullName:"Perce Pennington 3",bookTitle:"The Massacre",address:" New York University, 432 Bloom St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736947",fullName:"America Thigpen 4",bookTitle:"The Long Suns",address:" University of Southampton, 217 University Loop, Cupertino, CA"},{type:"Author",guid:"4995bc373695b",fullName:"Lyndsea Roberts 4",bookTitle:"The Keeper",address:" UC Santa Cruz, 153 Fifth Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc373696f",fullName:"Loreen Buck 1",bookTitle:"The Space of the Devil",address:" CalTech, 65 University Loop, Santa Clara, CA"},{type:"Author",guid:"4995bc3736983",fullName:"Unique Whitten 1",bookTitle:"Infinity of Night",address:" University of Southampton, 238 Dana St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736997",fullName:"Bernadine Raub 4",bookTitle:"The Menace of the Ark",address:" London University, 369 Dana St, London, UK"},{type:"Author",guid:"4995bc37369b2",fullName:"Gabe Milliron 4",bookTitle:"The Machines",address:" UC Santa Cruz, 331 University Loop, London, UK"},{type:"Author",guid:"4995bc37369c6",fullName:"Ronda Higgens 2",bookTitle:"Spiders of Death",address:" Foothill College, 496 Castro St, Cupertino, CA"},{type:"Author",guid:"4995bc37369da",fullName:"Oscar Camp 2",bookTitle:"The Day of the Computers",address:" Santa Clara University, 292 Fifth Ave, New York, NY"},{type:"Author",guid:"4995bc37369ed",fullName:"Hudson Cable 4",bookTitle:"The Fury of the Angel",address:" Stanford University, 116 Oak Ave, San Francisco, CA"},{type:"Author",guid:"4995bc3736a01",fullName:"Willis Costello 4",bookTitle:"The Ghosts of Day",address:" Foothill College, 370 Castro St, Cupertino, CA"},{type:"Author",guid:"4995bc3736a15",fullName:"Douglas Bennett 3",bookTitle:"The Universe",address:" New York University, 74 University Loop, Seattle, WA"},{type:"Author",guid:"4995bc3736a29",fullName:"Chonsie Conkle 1",bookTitle:"The Seas of Fear",address:" Santa Clara University, 479 Main St, London, UK"},{type:"Author",guid:"4995bc3736a3c",fullName:"Lalage Schmidt 3",bookTitle:"The Fear of the Awakening",address:" CalTech, 415 Elm St, St. Louis, MO"},{type:"Author",guid:"4995bc3736a50",fullName:"Patton Kooser 1",bookTitle:"The Madness Nightmares",address:" Stanford University, 38 University Loop, Los Angeles, CA"},{type:"Author",guid:"4995bc3736a64",fullName:"Mya Eckert 3",bookTitle:"The Tenth Web",address:" Harvard, 89 Dana St, New York, NY"},{type:"Author",guid:"4995bc3736a78",fullName:"Kayleen Trout 2",bookTitle:"The Riders",address:" London University, 355 Second St, Wichita, KS"},{type:"Author",guid:"4995bc3736a8c",fullName:"Tawnie Vorrasi 2",bookTitle:"The Runaway Gods",address:" College University, 183 Elm St, Southampton, UK"},{type:"Author",guid:"4995bc3736aa0",fullName:"Marian Gearhart 4",bookTitle:"The Pyramids of Death",address:" UC Santa Cruz, 176 First St, Cambridge, MA"},{type:"Author",guid:"4995bc3736ab4",fullName:"York Merryman 2",bookTitle:"The Horns",address:" New York University, 154 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736ac8",fullName:"Dene Fair 1",bookTitle:"The Menace Pyramid",address:" MIT, 226 First St, Santa Clara, CA"},{type:"Author",guid:"4995bc3736adb",fullName:"Konnor Wells 4",bookTitle:"Planet of Death",address:" UC Santa Cruz, 94 Fifth Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736aef",fullName:"Chanel Boyd 4",bookTitle:"The Horror Alien",address:" CalTech, 125 Broadway Blvd, Cupertino, CA"},{type:"Author",guid:"4995bc3736b03",fullName:"Crispian Nickolson 2",bookTitle:"The Impossible Armageddon",address:" CalTech, 67 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3736b1d",fullName:"Elouise Langston 3",bookTitle:"The Doom of the Night",address:" New York University, 48 University Loop, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736b33",fullName:"Eliza Ropes 4",bookTitle:"The Mirror",address:" CalTech, 158 University Loop, Southampton, UK"},{type:"Author",guid:"4995bc3736b46",fullName:"Raynard Peters 3",bookTitle:"Child of Fear",address:" MIT, 385 Lazaneo St, Seattle, WA"},{type:"Author",guid:"4995bc3736b5a",fullName:"Kaylynn Herndon 4",bookTitle:"The Reign",address:" Stanford University, 237 Van Ness Blvd, Cambridge, MA"},{type:"Author",guid:"4995bc3736b6e",fullName:"Priscilla Dean 4",bookTitle:"The Space of the Horn",address:" CalTech, 317 First St, St. Louis, MO"},{type:"Author",guid:"4995bc3736b81",fullName:"Leighton Wickes 3",bookTitle:"Pyramids of Menace",address:" Springfield University, 313 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3736b9c",fullName:"Anneka Gist 3",bookTitle:"The God",address:" Foothill College, 6 University Loop, Los Angeles, CA"},{type:"Author",guid:"4995bc3736bb0",fullName:"Roseanne Rowley 2",bookTitle:"The Horror of the Ice",address:" Harvard, 253 First St, Seattle, WA"},{type:"Author",guid:"4995bc3736bc4",fullName:"Brandi Bauerle 1",bookTitle:"The Children of Madness",address:" Foothill College, 497 First St, Santa Clara, CA"},{type:"Author",guid:"4995bc3736bd8",fullName:"Kaitlyn Paul 3",bookTitle:"The Mind Massacre",address:" College University, 490 Lazaneo St, St. Louis, MO"},{type:"Author",guid:"4995bc3736beb",fullName:"Silvester Mcfall 3",bookTitle:"The Fear Child",address:" CalTech, 348 Broadway Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3736bff",fullName:"Woodrow Fleming 2",bookTitle:"The Empty Fear",address:" Springfield University, 340 First St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736c13",fullName:"Wynonna Erskine 3",bookTitle:"Cave of Night",address:" UC Santa Cruz, 37 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736c27",fullName:"Lawrie Toyley 2",bookTitle:"The Horror City",address:" Stanford University, 172 University Loop, Southampton, UK"},{type:"Author",guid:"4995bc3736c3b",fullName:"Breana Bastion 3",bookTitle:"The Doomed Whisper",address:" London University, 157 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc3736c4e",fullName:"Delice Kimmons 2",bookTitle:"The Space of the Leisure",address:" Stanford University, 308 Bloom St, Seattle, WA"},{type:"Author",guid:"4995bc3736c62",fullName:"Sybella Henley 2",bookTitle:"The Armageddon",address:" University of Southampton, 314 Lazaneo St, New York, NY"},{type:"Author",guid:"4995bc3736c76",fullName:"Sebastian Stone 2",bookTitle:"The Stone",address:" Springfield University, 348 Second St, St. Louis, MO"},{type:"Author",guid:"4995bc3736c8a",fullName:"Perdita Casteel 2",bookTitle:"The Space Alien",address:" Stanford University, 38 Castro St, Santa Clara, CA"},{type:"Author",guid:"4995bc3736c9e",fullName:"Lyndsea Roberts 4",bookTitle:"The Fear Paradise",address:" New York University, 433 Second St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736cb2",fullName:"Reanna Meyers 2",bookTitle:"Image of Menace",address:" MIT, 452 Second St, San Francisco, CA"},{type:"Author",guid:"4995bc3736cc6",fullName:"Paul Parrish 4",bookTitle:"The Death Angels",address:" MIT, 468 Castro St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736cda",fullName:"Eldred West 2",bookTitle:"The Time of the Mirror",address:" College University, 420 Bloom St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736ced",fullName:"Tawnie Vorrasi 2",bookTitle:"The Madness of the Horror",address:" Michigan State University, 289 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc3736d01",fullName:"Vic Close 4",bookTitle:"The Death of the Pyramid",address:" New York University, 229 Main St, Southampton, UK"},{type:"Author",guid:"4995bc3736d15",fullName:"Shana Owen 4",bookTitle:"The Killer Fury",address:" London University, 438 First St, Southampton, UK"},{type:"Author",guid:"4995bc3736d29",fullName:"Lissa Tillson 1",bookTitle:"The Fear Killers",address:" Harvard, 100 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc3736d3d",fullName:"Gabriel Cherry 1",bookTitle:"The Reign of Madness",address:" Stanford University, 319 Elm St, San Francisco, CA"},{type:"Author",guid:"4995bc3736d51",fullName:"Willis Costello 4",bookTitle:"The Horror Angel",address:" UC Santa Cruz, 411 Van Ness Blvd, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736d65",fullName:"Seward Romanoff 2",bookTitle:"The Day Monster",address:" University of Southampton, 371 University Loop, Wichita, KS"},{type:"Author",guid:"4995bc3736d80",fullName:"Cornelius Metzer 3",bookTitle:"Hive of Menace",address:" CalTech, 99 Second St, Seattle, WA"},{type:"Author",guid:"4995bc3736d94",fullName:"Pansy Summy 4",bookTitle:"The Day Thieves",address:" New York University, 419 University Loop, London, UK"},{type:"Author",guid:"4995bc3736da8",fullName:"Jaymes Cox 3",bookTitle:"The Fear of the Minds",address:" MIT, 54 First St, Palo Alto, CA"},{type:"Author",guid:"4995bc3736dbc",fullName:"Pansy Summy 4",bookTitle:"The Runaway Gods",address:" Foothill College, 85 Elm St, Palo Alto, CA"},{type:"Author",guid:"4995bc3736dcf",fullName:"August Feufer 2",bookTitle:"God of Doom",address:" Michigan State University, 237 Second St, Cambridge, MA"},{type:"Author",guid:"4995bc3736de3",fullName:"Raphael Wilks 4",bookTitle:"The Creature",address:" College University, 46 Main St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736df7",fullName:"Colin Hair 4",bookTitle:"The Horror Child",address:" Foothill College, 244 Castro St, Seattle, WA"},{type:"Author",guid:"4995bc3736e0a",fullName:"Colten Stange 2",bookTitle:"Dreams of Menace",address:" CalTech, 212 Fifth Ave, San Francisco, CA"},{type:"Author",guid:"4995bc3736e1e",fullName:"Chonsie Conkle 3",bookTitle:"The Menace Carnival",address:" CalTech, 470 Broadway Blvd, Southampton, UK"},{type:"Author",guid:"4995bc3736e32",fullName:"Kaleigh Brooks 4",bookTitle:"The Fury Massacre",address:" New York University, 361 Lazaneo St, Cupertino, CA"},{type:"Author",guid:"4995bc3736e46",fullName:"Kaye Harding 3",bookTitle:"The Doom of the Battlefield",address:" Harvard, 246 Castro St, San Francisco, CA"},{type:"Author",guid:"4995bc3736e59",fullName:"Kendal Ritter 1",bookTitle:"The Whisper Faces",address:" Foothill College, 80 Fifth Ave, San Francisco, CA"},{type:"Author",guid:"4995bc3736e6d",fullName:"Eleanor Bennett 4",bookTitle:"The Angels of Madness",address:" CalTech, 263 Oak Ave, San Francisco, CA"},{type:"Author",guid:"4995bc3736e81",fullName:"Lindsey Straub 3",bookTitle:"The Doom of the Jaws",address:" MIT, 146 Van Ness Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3736e95",fullName:"Fawn Carr 1",bookTitle:"Door of Space",address:" Stanford University, 22 Oak Ave, Los Angeles, CA"},{type:"Author",guid:"4995bc3736ea9",fullName:"Deshawn Pyle 3",bookTitle:"The Secret",address:" MIT, 180 University Loop, Wichita, KS"},{type:"Author",guid:"4995bc3736ebd",fullName:"Virgee Mcdonald 1",bookTitle:"The Space Mists",address:" MIT, 288 Lazaneo St, San Francisco, CA"},{type:"Author",guid:"4995bc3736ed0",fullName:"Tex Koster 4",bookTitle:"The Time Ambassador",address:" Santa Clara University, 372 Main St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3736ee4",fullName:"Sorrel Dugmore 2",bookTitle:"The Robber",address:" Stanford University, 390 Oak Ave, Santa Clara, CA"},{type:"Author",guid:"4995bc3736ef8",fullName:"Beverly Harrold 2",bookTitle:"The Planet of Doom",address:" Harvard, 289 Fifth Ave, London, UK"},{type:"Author",guid:"4995bc3736f0c",fullName:"Webster Jelliman 4",bookTitle:"The Madness Masters",address:" Foothill College, 316 First St, London, UK"},{type:"Author",guid:"4995bc3736f24",fullName:"Tracee Martin 4",bookTitle:"The Minds of Fury",address:" UC Santa Cruz, 272 First St, Wichita, KS"},{type:"Author",guid:"4995bc3736f3b",fullName:"Delice Kimmons 2",bookTitle:"The Warrior of Day",address:" University of Southampton, 364 University Loop, London, UK"},{type:"Author",guid:"4995bc3736f5c",fullName:"Godric Sommer 1",bookTitle:"Robots of Menace",address:" MIT, 251 University Loop, Palo Alto, CA"},{type:"Author",guid:"4995bc3736f70",fullName:"Tatianna Johns 3",bookTitle:"The Death of the Riders",address:" Santa Clara University, 416 Oak Ave, St. Louis, MO"},{type:"Author",guid:"4995bc3736f8c",fullName:"Herbert Durstine 1",bookTitle:"The Space of the Devil",address:" New York University, 384 Fifth Ave, Seattle, WA"},{type:"Author",guid:"4995bc3736fa0",fullName:"Myron Rhodes 4",bookTitle:"The Devil",address:" London University, 8 Castro St, Los Angeles, CA"},{type:"Author",guid:"4995bc3736fb3",fullName:"Hank Hughes 2",bookTitle:"The Machine of Doom",address:" Springfield University, 42 First St, London, UK"},{type:"Author",guid:"4995bc3736fc7",fullName:"Fox Omara 2",bookTitle:"The Night of the Leisure",address:" CalTech, 468 Fifth Ave, Wichita, KS"},{type:"Author",guid:"4995bc3736fdb",fullName:"Dyan Bratton 1",bookTitle:"The Child of Space",address:" Springfield University, 463 Castro St, St. Louis, MO"},{type:"Author",guid:"4995bc3736fef",fullName:"Eleanor Bennett 4",bookTitle:"Machine of Night",address:" Springfield University, 301 Second St, London, UK"},{type:"Author",guid:"4995bc3737002",fullName:"Seward Romanoff 3",bookTitle:"The Secret Pit",address:" College University, 353 University Loop, Wichita, KS"},{type:"Author",guid:"4995bc3737016",fullName:"Erick Sulyard 1",bookTitle:"Whispers of Day",address:" Harvard, 223 Castro St, Wichita, KS"},{type:"Author",guid:"4995bc373702a",fullName:"Godric Sommer 3",bookTitle:"The Menace Mist",address:" London University, 260 Van Ness Blvd, Cupertino, CA"},{type:"Author",guid:"4995bc373703d",fullName:" 2",bookTitle:"The Horror Robot",address:" New York University, 499 Castro St, Palo Alto, CA"},{type:"Author",guid:"4995bc3737055",fullName:"Porsche Gilman 3",bookTitle:"The Time Suns",address:" CalTech, 336 First St, San Francisco, CA"},{type:"Author",guid:"4995bc3737069",fullName:"Phineas Poehl 1",bookTitle:"Ark of Day",address:" London University, 162 Bloom St, Wichita, KS"},{type:"Author",guid:"4995bc373707d",fullName:"Tylar Monahan 3",bookTitle:"The Menace of the Robbers",address:" Springfield University, 498 Broadway Blvd, Seattle, WA"},{type:"Author",guid:"4995bc3737091",fullName:"Harvey Wardle 3",bookTitle:"Mutants of Night",address:" MIT, 58 Bloom St, Ann Arbor, MI"},{type:"Author",guid:"4995bc37370a5",fullName:"Thea Sullivan 1",bookTitle:"The Night of the Dominator",address:" Santa Clara University, 443 Lazaneo St, San Francisco, CA"},{type:"Author",guid:"4995bc37370b9",fullName:"Brandie Tue 2",bookTitle:"The Fury Secret",address:" CalTech, 130 Lazaneo St, London, UK"},{type:"Author",guid:"4995bc37370cd",fullName:"Tessa Pullman 3",bookTitle:"The Menace of the Pit",address:" CalTech, 393 Oak Ave, San Francisco, CA"},{type:"Author",guid:"4995bc37370e0",fullName:"Freeman Marcotte 4",bookTitle:"The Jaws of Night",address:" Harvard, 288 Second St, Seattle, WA"},{type:"Author",guid:"4995bc37370f4",fullName:"Tex Koster 2",bookTitle:"The Madness Attack",address:" College University, 233 Fifth Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc3737108",fullName:"Barret Lalty 2",bookTitle:"The Unearthly Assassin",address:" London University, 399 Elm St, Seattle, WA"},{type:"Author",guid:"4995bc373711c",fullName:"Timotha Weeks 4",bookTitle:"The Death Face",address:" Stanford University, 302 Lazaneo St, Cambridge, MA"},{type:"Author",guid:"4995bc3737130",fullName:"Tybalt Hahn 2",bookTitle:"Masque of Space",address:" New York University, 108 Elm St, Los Angeles, CA"},{type:"Author",guid:"4995bc3737144",fullName:"Dewayne Patton 3",bookTitle:"The Armageddon",address:" Harvard, 83 Bloom St, Seattle, WA"},{type:"Author",guid:"4995bc3737158",fullName:"Tommie Keilbach 4",bookTitle:"The First Cave",address:" College University, 124 First St, Ann Arbor, MI"},{type:"Author",guid:"4995bc3737196",fullName:"Boyce Baughman 3",bookTitle:"The Stone of Madness",address:" Stanford University, 366 Second St, London, UK"},{type:"Author",guid:"4995bc37371ac",fullName:"Godric Sommer 3",bookTitle:"Killer of Night",address:" London University, 489 Oak Ave, Southampton, UK"},{type:"Author",guid:"4995bc37371c1",fullName:"Kenelm Tomco 2",bookTitle:"The Fury of the Master",address:" UC Santa Cruz, 142 Bloom St, London, UK"},{type:"Author",guid:"4995bc37371d4",fullName:"Wendell Osteen 3",bookTitle:"The Fear Awakening",address:" New York University, 419 First St, Santa Clara, CA"},{type:"Author",guid:"4995bc37371eb",fullName:"Antwan Biery 4",bookTitle:"The Day of the Invasion",address:" Santa Clara University, 445 Fifth Ave, Cupertino, CA"},{type:"Author",guid:"4995bc37371ff",fullName:"Stacy Moffat 4",bookTitle:"Door of Horror",address:" College University, 282 Oak Ave, Ann Arbor, MI"},{type:"Author",guid:"4995bc3737213",fullName:"Alyx Hincken 3",bookTitle:"The Day Nemesis",address:" CalTech, 235 University Loop, St. Louis, MO"},{type:"Author",guid:"4995bc3737227",fullName:"Silvester Mcfall 1",bookTitle:"The Monster",address:" Springfield University, 86 Lazaneo St, Southampton, UK"},{type:"Author",guid:"4995bc373723a",fullName:"Janella Warner 2",bookTitle:"The Madness Man",address:" Stanford University, 96 Dana St, Ann Arbor, MI"},{type:"Author",guid:"4995bc373724e",fullName:"Braeden Seidner 2",bookTitle:"The Menace Pit",address:" Santa Clara University, 154 Bloom St, New York, NY"},{type:"Author",guid:"4995bc3737263",fullName:"Cyrus Hatfield 2",bookTitle:"The Night Nightmares",address:" Michigan State University, 46 Van Ness Blvd, St. Louis, MO"},{type:"Author",guid:"4995bc3737277",fullName:"Carly Reiss 4",bookTitle:"The Spiders of Fear",address:" CalTech, 420 Dana St, San Francisco, CA"},{type:"Author",guid:"4995bc373728b",fullName:"Anselm Swift 4",bookTitle:"The Final Time",address:" Stanford University, 203 Main St, Seattle, WA"},{type:"Author",guid:"4995bc373729f",fullName:"Dallas Hawker 2",bookTitle:"The Day Galaxy",address:" CalTech, 195 First St, San Francisco, CA"},{type:"Author",guid:"4995bc37372b3",fullName:"Horatio Hutton 1",bookTitle:"The Time Ambassador",address:" Springfield University, 183 Castro St, Palo Alto, CA"},{type:"Author",guid:"4995bc37372c7",fullName:"Trev Hallauer 1",bookTitle:"The Final Time",address:" New York University, 51 Broadway Blvd, Los Angeles, CA"},{type:"Author",guid:"4995bc37372db",fullName:"Sharyn Quinn 4",bookTitle:"The Reign of Day",address:" Foothill College, 493 Lazaneo St, Palo Alto, CA"},{type:"Author",guid:"4995bc37372ee",fullName:"Raphael Wilks 1",bookTitle:"The Masque of Death",address:" New York University, 96 Oak Ave, Los Angeles, CA"}];
sc_require("core");sc_require("models/record");SC.Query=SC.Object.extend(SC.Copyable,SC.Freezable,{isQuery:YES,conditions:null,orderBy:null,recordType:null,recordTypes:null,expandedRecordTypes:function(){var b=SC.CoreSet.create(),a,c;
if(a=this.get("recordType")){this._scq_expandRecordType(a,b)}else{if(a=this.get("recordTypes")){a.forEach(function(d){this._scq_expandRecordType(d,b)
},this)}else{this._scq_expandRecordType(SC.Record,b)}}c=SC.Query._scq_queriesWithExpandedRecordTypes;
if(!c){c=SC.Query._scq_queriesWithExpandedRecordTypes=SC.CoreSet.create()}c.add(this);
return b.freeze()}.property("recordType","recordTypes").cacheable(),_scq_expandRecordType:function(b,a){if(a.contains(b)){return
}a.add(b);if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}b.subclasses.forEach(function(c){this._scq_expandRecordType(c,a)
},this)},parameters:null,location:"local",scope:null,isRemote:function(){return this.get("location")===SC.Query.REMOTE
}.property("location").cacheable(),isLocal:function(){return this.get("location")===SC.Query.LOCAL
}.property("location").cacheable(),isEditable:NO,contains:function(a,d){var e,b=YES;
if(e=this.get("recordTypes")){b=e.find(function(f){return SC.kindOf(a,f)})}else{if(e=this.get("recordType")){b=SC.kindOf(a,e)
}}if(!b){return NO}var c=this.get("scope");if(c&&!c.contains(a)){return NO}if(!this._isReady){this.parse()
}if(!this._isReady){return NO}if(d===undefined){d=this.parameters||this}return this._tokenTree.evaluate(a,d)
},containsRecordTypes:function(a){var b=this.get("recordType");if(b){return !!a.find(function(c){return SC.kindOf(c,b)
})}else{if(b=this.get("recordTypes")){return !!b.find(function(c){return !!a.find(function(d){return SC.kindOf(d,c)
})})}else{return YES}}},compare:function(f,d){var c=0,e,b,a,g;if(f===d){return 0}if(!this._isReady){this.parse()
}if(!this._isReady){return SC.compare(f.get("id"),d.get("id"))}b=this._order;if(SC.typeOf(b)===SC.T_FUNCTION){c=b.call(null,f,d)
}else{a=b?b.length:0;for(g=0;c===0&&(g<a);g++){e=b[g].propertyName;if(SC.Query.comparisons[e]){c=SC.Query.comparisons[e](f.get(e),d.get(e))
}else{c=SC.compare(f.get(e),d.get(e))}if((c!==0)&&b[g].descending){c=(-1)*c}}}if(c!==0){return c
}else{return SC.compare(f.get("id"),d.get("id"))}},_isReady:NO,parse:function(){var c=this.get("conditions"),d=this.get("queryLanguage"),b,a;
b=this._tokenList=this.tokenizeString(c,d);a=this._tokenTree=this.buildTokenTree(b,d);
this._order=this.buildOrder(this.get("orderBy"));this._isReady=!!a&&!a.error;if(a&&a.error){throw a.error
}return this._isReady},queryWithScope:function(c){var b=SC.keyFor("__query__",SC.guidFor(this)),a=c[b];
if(!a){c[b]=a=this.copy();a.set("scope",c);a.freeze()}return a},copyKeys:"conditions orderBy recordType recordTypes parameters location scope".w(),concatenatedProperties:"copyKeys".w(),copy:function(){var d={},c=this.get("copyKeys"),f=c?c.length:0,b,e,a;
while(--f>=0){b=c[f];e=this.get(b);if(e!==undefined){d[b]=e}}a=this.constructor.create(d);
d=null;return a},queryLanguage:{UNKNOWN:{firstCharacter:/[^\s'"\w\d\(\)\{\}]/,notAllowed:/[\s'"\w\d\(\)\{\}]/},PROPERTY:{firstCharacter:/[a-zA-Z_]/,notAllowed:/[^a-zA-Z_0-9]/,evalType:"PRIMITIVE",evaluate:function(b,a){return b.get(this.tokenValue)
}},NUMBER:{firstCharacter:/[\d\-]/,notAllowed:/[^\d\-\.]/,format:/^-?\d+$|^-?\d+\.\d+$/,evalType:"PRIMITIVE",evaluate:function(b,a){return parseFloat(this.tokenValue)
}},STRING:{firstCharacter:/['"]/,delimeted:true,evalType:"PRIMITIVE",evaluate:function(b,a){return this.tokenValue
}},PARAMETER:{firstCharacter:/\{/,lastCharacter:"}",delimeted:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]
}},"%@":{rememberCount:true,reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]
}},OPEN_PAREN:{firstCharacter:/\(/,singleCharacter:true},CLOSE_PAREN:{firstCharacter:/\)/,singleCharacter:true},AND:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return d&&b}},OR:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return d||b}},NOT:{reservedWord:true,rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.rightSide.evaluate(c,a);
return !b}},"=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.isEqual(d,b)}},"!=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return !SC.isEqual(d,b)}},"<":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)==-1}},"<=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)!=1}},">":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)==1}},">=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)!=-1}},BEGINS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.leftSide.evaluate(c,a);
var d=this.rightSide.evaluate(c,a);return(b&&b.indexOf(d)===0)}},ENDS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(d,b){var c=this.leftSide.evaluate(d,b);
var a=this.rightSide.evaluate(d,b);return(c&&c.indexOf(a)===(c.length-a.length))}},CONTAINS:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var d=this.leftSide.evaluate(e,a)||[];
var g=this.rightSide.evaluate(e,a);var c=SC.typeOf(d);if(c===SC.T_STRING){return(d.indexOf(g)!==-1)
}else{if(c===SC.T_ARRAY||d.toArray){if(c!==SC.T_ARRAY){d=d.toArray()}var f=false;
var b=0;while(f===false&&b<d.length){if(g==d[b]){f=true}b++}return f}}}},ANY:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(d,a){var f=this.leftSide.evaluate(d,a);
var b=this.rightSide.evaluate(d,a);var e=false;var c=0;while(e===false&&c<b.length){if(f==b[c]){e=true
}c++}return e}},MATCHES:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);
var b=this.rightSide.evaluate(c,a);return b.test(d)}},TYPE_IS:{reservedWord:true,rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(d,a){var c=SC.Store.recordTypeFor(d.storeKey);
var b=this.rightSide.evaluate(d,a);var e=SC.objectForPropertyPath(b);return c==e}},"null":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return null
}},"undefined":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return undefined
}},"false":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false
}},"true":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true
}},YES:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true
}},NO:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false
}}},tokenizeString:function(v,q){var k=[],s=null,h=null,f=null,u=null,a=null,j=null,d=null,g=null,r=false,b=false,m=false,n=false,o={};
function e(w,c){h=q[w];if(h.format&&!h.format.test(c)){w="UNKNOWN"}if(h.delimeted){n=true
}if(!h.delimeted){for(var i in q){if(q[i].reservedWord&&i==c){w=i}}}h=q[w];if(h&&h.rememberCount){if(!o[w]){o[w]=0
}c=o[w];o[w]+=1}k.push({tokenType:w,tokenValue:c});a=null;j=null;d=null}if(!v){return[]
}var l=v.length;for(var p=0;p<l;p++){r=(p===l-1);s=v.charAt(p);n=false;if(a){h=q[a];
b=h.delimeted?s===g:h.notAllowed.test(s);if(!b){d+=s}if(b||r){e(a,d)}if(r&&!b){n=true
}}if(!a&&!n){for(f in q){h=q[f];if(h.firstCharacter&&h.firstCharacter.test(s)){a=f
}}if(a){h=q[a];d=s;if(h.delimeted){d="";if(h.lastCharacter){g=h.lastCharacter}else{g=s
}}if(h.singleCharacter||r){e(a,d)}}}}return k},buildTokenTree:function(k,a){var o=k.slice();
var q=0;var s=[];var c=false;var p=[];if(!k||k.length===0){return{evaluate:function(){return true
}}}function r(i){var w=i;if(w<0){return false}var l=a[o[w].tokenType];if(!l){p.push("logic for token '"+o[w].tokenType+"' is not defined");
return false}o[w].evaluate=l.evaluate;return l}function b(w,i){var x=i;var l=r(x);
if(!l){return false}if(w=="left"){return l.leftType}if(w=="right"){return l.rightType
}}function n(i){var w=i;var l=r(w);if(!l){return false}else{return l.evalType}}function f(i){o.splice(i,1);
if(i<=q){q--}}function u(i){var l=i||q;if(l>0){return true}else{return false}}function j(i){var l=i;
if(l<0){return true}return(b("left",l)&&!o[l].leftSide)||(b("right",l)&&!o[l].rightSide)
}function h(l,w){var i=(w<l)?"left":"right";if(l<0||w<0){return false}if(!b(i,l)){return false
}if(!n(w)){return false}if(b(i,l)==n(w)){return true}else{return false}}function m(i){var l=i;
if(!j(l)){return false}if(!u(l)){return false}if(h(l,l-1)){return true}else{return false
}}function d(i){var l=i;if(j(l)){return false}if(!u(l)){return false}if(!j(l-1)){return false
}if(h(l-1,l)){return true}else{return false}}function g(i){var l=i;if(l<1){return false
}o[l].leftSide=o[l-1];f(l-1)}function v(i){var l=i;if(l<1){return false}o[l-1].rightSide=o[l];
f(l)}function e(i){f(i);f(s.pop())}for(q=0;q<o.length;q++){c=false;if(o[q].tokenType=="UNKNOWN"){p.push("found unknown token: "+o[q].tokenValue)
}if(o[q].tokenType=="OPEN_PAREN"){s.push(q)}if(o[q].tokenType=="CLOSE_PAREN"){e(q)
}if(m(q)){g(q)}if(d(q)){v(q);c=true}if(c){q--}}if(o.length==1){o=o[0]}else{p.push("string did not resolve to a single tree")
}if(p.length>0){return{error:p.join(",\n"),tree:o}}else{return o}},buildOrder:function(a){if(!a){return[]
}else{if(SC.typeOf(a)===SC.T_FUNCTION){return a}else{var d=a.split(",");for(var b=0;
b<d.length;b++){var c=d[b];c=c.replace(/^\s+|\s+$/,"");c=c.replace(/\s+/,",");c=c.split(",");
d[b]={propertyName:c[0]};if(c[1]&&c[1]=="DESC"){d[b].descending=true}}return d}}}});
SC.Query.mixin({LOCAL:"local",REMOTE:"remote",storeKeyFor:function(a){return a?a.get("storeKey"):null
},containsRecords:function(g,e,d){var f=[];for(var b=0,a=e.get("length");b<a;b++){var c=e.objectAt(b);
if(c&&g.contains(c)){f.push(c.get("storeKey"))}}f=SC.Query.orderStoreKeys(f,g,d);
return f},orderStoreKeys:function(e,f,b){if(e){var a=SC.Query,d=a._TMP_STORES,g=a._TMP_QUERIES;
if(!d){d=a._TMP_STORES=[]}if(!g){g=a._TMP_QUERIES=[]}d.push(b);g.push(f);var c=e.sort(SC.Query.compareStoreKeys);
a._TMP_STORES.pop();a._TMP_QUERIES.pop()}return e},compareStoreKeys:function(h,f){var n=SC.Query,l=n._TMP_STORES,b=n._TMP_QUERIES,o=l[l.length-1],m=b[b.length-1],c=m.compare,d=o.materializeRecord(h),a=o.materializeRecord(f);
if(c!==n.prototype.compare){return c.call(m,d,a)}else{var p=0,k,e,j,g;if(d===a){return 0
}if(!m._isReady){m.parse()}if(!m._isReady){return SC.compare(d.get("id"),a.get("id"))
}e=m._order;if(SC.typeOf(e)===SC.T_FUNCTION){p=e.call(null,d,a)}else{j=e?e.length:0;
for(g=0;p===0&&(g<j);g++){k=e[g].propertyName;if(SC.Query.comparisons[k]){p=SC.Query.comparisons[k](d.get(k),a.get(k))
}else{p=SC.compare(d.get(k),a.get(k))}if((p!==0)&&e[g].descending){p=(-1)*p}}}if(p!==0){return p
}else{return SC.compare(d.get("id"),a.get("id"))}}},build:function(h,c,g,d){var a=null,f,b,i,e;
if(c&&c.isQuery){if(c.get("location")===h){return c}else{return c.copy().set("location",h).freeze()
}}if(typeof c===SC.T_STRING){f=SC.objectForPropertyPath(c);if(!f){throw"%@ did not resolve to a class".fmt(c)
}c=f}else{if(c&&c.isEnumerable){f=[];c.forEach(function(j){if(typeof j===SC.T_STRING){j=SC.objectForPropertyPath(j)
}if(!j){throw"cannot resolve record types: %@".fmt(c)}f.push(j)},this);c=f}else{if(!c){c=SC.Record
}}}if(d===undefined){d=null}if(g===undefined){g=null}if(!d&&(typeof g!==SC.T_STRING)){a=g;
g=null}if(!d&&!a){e=SC.Query._scq_recordTypeCache;if(!e){e=SC.Query._scq_recordTypeCache={}
}b=e[h];if(!b){b=e[h]={}}if(c.isEnumerable){i=c.map(function(j){return SC.guidFor(j)
});i=i.sort().join(":")}else{i=SC.guidFor(c)}if(g){i=[i,g].join("::")}f=b[i];if(!f){if(c.isEnumerable){a={recordTypes:c.copy()}
}else{a={recordType:c}}a.location=h;a.conditions=g;f=b[i]=SC.Query.create(a).freeze()
}}else{if(!a){a={}}if(!a.location){a.location=h}if(c&&c.isEnumerable){a.recordsTypes=c
}else{a.recordType=c}if(g){a.conditions=g}if(d){a.parameters=d}f=SC.Query.create(a).freeze()
}return f},local:function(c,a,b){return this.build(SC.Query.LOCAL,c,a,b)},remote:function(c,a,b){return this.build(SC.Query.REMOTE,c,a,b)
},_scq_didDefineRecordType:function(){var a=SC.Query._scq_queriesWithExpandedRecordTypes;
if(a){a.forEach(function(b){b.notifyPropertyChange("expandedRecordTypes")},this);
a.clear()}}});SC.Query.comparisons={};SC.Query.registerComparison=function(a,b){SC.Query.comparisons[a]=b
};SC.Query.registerQueryExtension=function(b,a){SC.Query.prototype.queryLanguage[b]=a
};SC.Q=SC.Query.from;sc_require("core");sc_require("models/record");sc_require("system/query");
SC.ChildRecord=SC.Record.extend({isChildRecord:YES,type:null,primaryKey:"childRecordKey",_parentRecord:null,status:function(){var a=SC.Record.EMPTY;
if(this._parentRecord){a=this._parentRecord.get("status");this.store.writeStatus(this.storeKey,a);
this.store.dataHashDidChange(this.storeKey)}else{a=this.store.readStatus(this.storeKey)
}return a}.property("storeKey").cacheable(),recordDidChange:function(){if(this._parentRecord&&this._parentRecord.recordDidChange){this._parentRecord.recordDidChange()
}else{arguments.callee.base.apply(this,arguments)}},createChildRecord:function(d,c){var a,b=this._parentRecord;
if(b){a=b.createChildRecord(d,c)}else{a=arguments.callee.base.apply(this,arguments)
}return a}});sc_require("models/record");sc_require("models/child_record");SC.RecordAttribute=SC.Object.extend({defaultValue:null,type:String,key:null,isRequired:NO,isEditable:YES,useIsoDate:YES,aggregate:NO,typeClass:function(){var a=this.get("type");
if(SC.typeOf(a)===SC.T_STRING){a=SC.objectForPropertyPath(a)}return a}.property("type").cacheable(),transform:function(){var a=this.get("typeClass")||String,c=SC.RecordAttribute.transforms,b;
while(a&&!(b=c[SC.guidFor(a)])){if(a.superclass.hasOwnProperty("create")){a=a.superclass
}else{a=SC.T_FUNCTION}}return b}.property("typeClass").cacheable(),toType:function(a,c,e){var b=this.get("transform"),d=this.get("typeClass");
if(b&&b.to){e=b.to(e,this,d,a,c)}return e},fromType:function(a,c,e){var b=this.get("transform"),d=this.get("typeClass");
if(b&&b.from){e=b.from(e,this,d,a,c)}return e},call:function(a,b,c){var d=this.get("key")||b,e;
if((c!==undefined)&&this.get("isEditable")){e=this.fromType(a,b,c);a.writeAttribute(d,e)
}e=c=a.readAttribute(d);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);
if((e!==c)&&a.get("store").readDataHash(a.get("storeKey"))){a.writeAttribute(d,c,true)
}}}else{c=this.toType(a,b,c)}return c},isProperty:YES,isCacheable:YES,dependentKeys:[],init:function(){arguments.callee.base.apply(this,arguments);
this.cacheKey="__cache__"+SC.guidFor(this);this.lastSetValueKey="__lastValue__"+SC.guidFor(this)
}});SC.RecordAttribute.attr=function(a,b){if(!b){b={}}if(!b.type){b.type=a||String
}return this.create(b)};SC.RecordAttribute.transforms={};SC.RecordAttribute.registerTransform=function(a,b){SC.RecordAttribute.transforms[SC.guidFor(a)]=b
};SC.RecordAttribute.registerTransform(Boolean,{to:function(a){return SC.none(a)?null:!!a
}});SC.RecordAttribute.registerTransform(Number,{to:function(a){return SC.none(a)?null:Number(a)
}});SC.RecordAttribute.registerTransform(String,{to:function(a){if(!(typeof a===SC.T_STRING)&&!SC.none(a)&&a.toString){a=a.toString()
}return a}});SC.RecordAttribute.registerTransform(Array,{to:function(a){if(!SC.isArray(a)&&!SC.none(a)){a=[]
}return a}});SC.RecordAttribute.registerTransform(Object,{to:function(a){if(!(typeof a==="object")&&!SC.none(a)){a={}
}return a}});SC.RecordAttribute.registerTransform(SC.Record,{to:function(e,a,d,c){var b=c.get("store");
if(SC.none(e)||(e==="")){return null}else{return b.find(d,e)}},from:function(a){return a?a.get("id"):null
}});SC.RecordAttribute.registerTransform(SC.T_FUNCTION,{to:function(e,a,d,c){d=d.apply(c);
var b=c.get("store");return b.find(d,e)},from:function(a){return a.get("id")}});SC.RecordAttribute.registerTransform(Date,{to:function(i,a){if(i===null){return null
}var c;i=i.toString()||"";if(a.get("useIsoDate")){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",h=i.match(new RegExp(e)),g=0,b=new Date(h[1],0,1),f;
if(h[3]){b.setMonth(h[3]-1)}if(h[5]){b.setDate(h[5])}if(h[7]){b.setHours(h[7])}if(h[8]){b.setMinutes(h[8])
}if(h[10]){b.setSeconds(h[10])}if(h[12]){b.setMilliseconds(Number("0."+h[12])*1000)
}if(h[14]){g=(Number(h[16])*60)+Number(h[17]);g*=((h[15]=="-")?1:-1)}g-=b.getTimezoneOffset();
f=(Number(b)+(g*60*1000));c=new Date();c.setTime(Number(f))}else{c=new Date(Date.parse(i))
}return c},_dates:{},_zeropad:function(a){return((a<0)?"-":"")+((a<10)?"0":"")+Math.abs(a)
},from:function(b){var a=this._dates[b.getTime()];if(a){return a}var d=this._zeropad,c=0-b.getTimezoneOffset()/60;
c=(c===0)?"Z":"%@:00".fmt(d(c));this._dates[b.getTime()]=a="%@-%@-%@T%@:%@:%@%@".fmt(d(b.getFullYear()),d(b.getMonth()+1),d(b.getDate()),d(b.getHours()),d(b.getMinutes()),d(b.getSeconds()),c);
return a}});if(SC.DateTime&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c
}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b
}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})
}sc_require("models/record");sc_require("models/record_attribute");SC.ChildAttribute=SC.RecordAttribute.extend({isChildRecordTransform:YES,toType:function(d,c,e){var b=null,f=SC.keyFor("__kid__",SC.guidFor(this)),g=this.get("typeClass");
if(d[f]){return d[f]}if(!d){throw"SC.Child: Error during transform: Unable to retrieve parent record."
}if(e){var a=d.get("childRecordNamespace");if(e.type&&!SC.none(a)){g=a[e.type]}if(!g||SC.typeOf(g)!==SC.T_CLASS){throw"SC.Child: Error during transform: Invalid record type."
}b=d[f]=d.registerChildRecord(g,e)}return b},fromType:function(a,b,c){return c},call:function(a,b,c){var d=this.get("key")||b,f=SC.keyFor("__kid__",SC.guidFor(this)),e;
if(c!==undefined){this.orphan(a);e=this.fromType(a,b,c);a[f]=null;a.writeAttribute(d,e);
c=this.toType(a,b,c)}else{c=a.readAttribute(d);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);
if(a.attributes()){a.writeAttribute(d,c,true)}}}else{c=this.toType(a,b,c)}}return c
},orphan:function(e){var h=SC.keyFor("__kid__",SC.guidFor(this)),b,f,c,d,g,a;a=e?e[h]:null;
if(a){c=a.get("readOnlyAttributes");for(d in c){g=a[d];if(g&&g.isChildRecordTransform){g.orphan(e)
}}b=a.get("store");if(b){f=a.storeKey}if(f){b.unloadRecord(undefined,undefined,f)
}}}});sc_require("models/record");sc_require("models/record_attribute");sc_require("models/child_attribute");
SC.ChildrenAttribute=SC.ChildAttribute.extend({toType:function(b,d,e){var g=this.get("key")||d,f=SC.keyFor("__kidsArray__",SC.guidFor(this)),c=b[f],h=this.get("typeClass"),a;
if(!c){c=SC.ChildArray.create({record:b,propertyName:g,defaultRecordType:h});b[f]=this._cachedRef=c;
a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},orphan:function(a){var e=this._cachedRef,f,i,h,g,c,b,d;
if(e){e.forEach(function(j){h=j.get("readOnlyAttributes");for(g in h){b=j[g];if(b&&b.isChildRecordTransform){b.orphan(a)
}}f=j.get("store");if(f){i=j.storeKey}if(i){f.unloadRecord(undefined,undefined,i)
}},this)}}});sc_require("models/record");sc_require("models/record_attribute");SC.FetchedAttribute=SC.RecordAttribute.extend({paramValueKey:"link",paramOwnerKey:"owner",paramRelKey:"rel",queryKey:null,isEditable:NO,toType:function(d,i,g){var h=d.get("store");
if(!h){return null}var b=this.get("paramValueKey"),a=this.get("paramOwnerKey"),f=this.get("paramRelKey"),e=this.get("queryKey")||this.get("typeClass"),c={};
if(b){c[b]=g}if(a){c[a]=d}if(f){c[f]=this.get("key")||i}return h.findAll(e,c)},fromType:function(a,b,c){return c
}});sc_require("models/record");sc_require("models/record_attribute");SC.ManyAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,orderBy:null,toType:function(b,d,f){var e=this.get("typeClass"),h=this.get("key")||d,g=SC.keyFor("__manyArray__",SC.guidFor(this)),c=b[g],a;
if(!c){c=SC.ManyArray.create({recordType:e,record:b,propertyName:h,manyAttribute:this});
b[g]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c
},fromType:function(b,e,f){var c=[];if(!SC.isArray(f)){throw"Expects toMany attribute to be an array"
}var a=f.get("length");for(var d=0;d<a;d++){c[d]=f.objectAt(d).get("id")}return c
},inverseDidRemoveRecord:function(a,b,c,d){var e=a.get(b);if(e){e.removeInverseRecord(c)
}},inverseDidAddRecord:function(a,b,c,d){var e=a.get(b);if(e){e.addInverseRecord(c)
}}});sc_require("models/record");sc_require("models/record_attribute");SC.SingleAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,call:function(c,i,b){var a=this.get("key")||i,h,g,j,f,e,d;
if(b!==undefined&&this.get("isEditable")){if(b&&!SC.kindOf(b,SC.Record)){throw"%@ is not an instance of SC.Record".fmt(b)
}h=this.get("inverse");if(h){j=this._scsa_call(c,i)}d=this.fromType(c,i,b);c.writeAttribute(a,d,!this.get("isMaster"));
e=b;if(h&&(j!==b)){if(j&&(f=j[h])){f.inverseDidRemoveRecord(j,h,c,i)}if(b&&(f=b[h])){f.inverseDidAddRecord(b,h,c,i)
}}}else{e=this._scsa_call(c,i,b)}return e},_scsa_call:SC.RecordAttribute.prototype.call,inverseDidRemoveRecord:function(c,f,g,h){var b=this.get("inverse"),e=this._scsa_call(c,f),d=this.get("isMaster"),a;
c.writeAttribute(f,null,!d);c.notifyPropertyChange(f);if((e!==g)||(h!==b)){if(e&&(a=e[b])){a.inverseDidRemoveRecord(e,b,c,f)
}}},inverseDidAddRecord:function(a,h,c,g){var e=this.get("inverse"),i=this._scsa_call(a,h),f=this.get("isMaster"),d,b;
b=this.fromType(a,h,c);a.writeAttribute(h,b,!f);a.notifyPropertyChange(h);if((i!==c)||(g!==e)){if(i&&(d=i[e])){d.inverseDidRemoveRecord(i,e,a,h)
}}}});SC.ChildArray=SC.Object.extend(SC.Enumerable,SC.Array,{defaultRecordType:null,record:null,propertyName:null,children:null,store:function(){return this.get("record").get("store")
}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")
}.property("record").cacheable(),readOnlyChildren:function(){return this.get("record").readAttribute(this.get("propertyName"))
}.property(),editableChildren:function(){var a=this.get("store"),d=this.get("storeKey"),c=this.get("propertyName"),b,e;
b=a.readEditableProperty(d,c);if(!b){e=a.readEditableDataHash(d);b=e[c]=[]}if(b!==this._prevChildren){this.recordPropertyDidChange()
}return b}.property(),length:function(){var a=this.get("readOnlyChildren");return a?a.length:0
}.property("readOnlyChildren"),objectAt:function(b){var e=this._records,d=this.get("readOnlyChildren"),f,c;
var a=d?d.length:0;if(!d){return undefined}if(e&&(c=e[b])){return c}if(!e){this._records=e=[]
}if(b>=a){return undefined}f=d.objectAt(b);if(!f){return undefined}e[b]=c=this._materializeChild(f);
return c},replace:function(k,a,j){var b=this.get("editableChildren"),g=j?(j.get?j.get("length"):j.length):0,f=this.get("record"),d=this.get("propertyName"),h,c;
b.replace(k,a,j);for(var e=k;e<=k+a;e+=1){this.objectAt(e)}f.recordDidChange(d);return this
},normalize:function(){this.forEach(function(b,a){if(b.normalize){b.normalize()}})
},_materializeChild:function(e){var h=this.get("store"),b=this.get("record"),d=this.get("defaultRecordType"),a,f,i,c;
if(!b){return undefined}var g=b.get("childRecordNamespace");if(e.type&&!SC.none(g)){d=g[e.type]
}if(!d||SC.typeOf(d)!==SC.T_CLASS){throw"ChildrenArray: Error during transform: Invalid record type."
}c=d.prototype.primaryKey||"childRecordKey";a=e[c];i=h.storeKeyExists(d,a);if(i){f=h.materializeRecord(i)
}else{f=b.registerChildRecord(d,e)}return f},recordPropertyDidChange:function(d){if(d&&!d.contains(this.get("propertyName"))){return this
}var b=this.get("readOnlyChildren");var c=this._prevChildren,e=this._childrenContentDidChange;
if(b===c){return this}if(c){c.removeObserver("[]",this,e)}this._prevChildren=b;if(b){b.addObserver("[]",this,e)
}var a=(b)?b.propertyRevision:-1;this._childrenContentDidChange(b,"[]",b,a)},_childrenContentDidChange:function(d,b,c,a){this._records=null;
this.enumerableContentDidChange()},init:function(){arguments.callee.base.apply(this,arguments);
this.recordPropertyDidChange()}});SC.ManyArray=SC.Object.extend(SC.Enumerable,SC.Array,{recordType:null,record:null,propertyName:null,manyAttribute:null,store:function(){return this.get("record").get("store")
}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")
}.property("record").cacheable(),readOnlyStoreIds:function(){return this.get("record").readAttribute(this.get("propertyName"))
}.property(),editableStoreIds:function(){var a=this.get("store"),d=this.get("storeKey"),c=this.get("propertyName"),b,e;
b=a.readEditableProperty(d,c);if(!b){e=a.readEditableDataHash(d);b=e[c]=[]}if(b!==this._prevStoreIds){this.recordPropertyDidChange()
}return b}.property(),isEditable:function(){var a=this.manyAttribute;return a?a.get("isEditable"):NO
}.property("manyAttribute").cacheable(),inverse:function(){var a=this.manyAttribute;
return a?a.get("inverse"):null}.property("manyAttribute").cacheable(),isMaster:function(){var a=this.manyAttribute;
return a?a.get("isMaster"):null}.property("manyAttribute").cacheable(),orderBy:function(){var a=this.manyAttribute;
return a?a.get("orderBy"):null}.property("manyAttribute").cacheable(),length:function(){var a=this.get("readOnlyStoreIds");
return a?a.get("length"):0}.property("readOnlyStoreIds"),objectAt:function(a){var g=this._records,f=this.get("readOnlyStoreIds"),c=this.get("store"),h=this.get("recordType"),e,d,b;
if(!f||!c){return undefined}if(g&&(d=g[a])){return d}if(!g){this._records=g=[]}b=f.objectAt(a);
if(b){e=c.storeKeyFor(h,b);if(c.readStatus(e)===SC.Record.EMPTY){c.retrieveRecord(h,null,e)
}g[a]=d=c.materializeRecord(e)}return d},replace:function(n,d,m){if(!this.get("isEditable")){throw"%@.%@[] is not editable".fmt(this.get("record"),this.get("propertyName"))
}var c=this.get("editableStoreIds"),k=m?(m.get?m.get("length"):m.length):0,h=this.get("record"),e=this.get("propertyName"),g,o,a,b,f,l,j;
a=[];for(g=0;g<k;g++){a[g]=m.objectAt(g).get("id")}f=this.get("inverse");if(f&&d>0){b=SC.ManyArray._toRemove;
if(b){SC.ManyArray._toRemove=null}else{b=[]}for(g=0;g<d;g++){b[g]=this.objectAt(n+g)
}}c.replace(n,d,a);if(f){for(g=0;g<d;g++){j=b[g];l=j?j[f]:null;if(l&&l.inverseDidRemoveRecord){l.inverseDidRemoveRecord(j,f,h,e)
}}if(b){b.length=0;if(!SC.ManyArray._toRemove){SC.ManyArray._toRemove=b}}for(g=0;
g<k;g++){j=m.objectAt(g);l=j?j[f]:null;if(l&&l.inverseDidAddRecord){l.inverseDidAddRecord(j,f,h,e)
}}}if(h&&(!f||this.get("isMaster"))){h.recordDidChange(e)}return this},removeInverseRecord:function(c){if(!c){return this
}var e=c.get("id"),d=this.get("editableStoreIds"),a=(d&&e)?d.indexOf(e):-1,b;if(a>=0){d.removeAt(a);
if(this.get("isMaster")&&(b=this.get("record"))){b.recordDidChange(this.get("propertyName"))
}}return this},addInverseRecord:function(d){if(!d){return this}var g=d.get("id"),e=this.get("editableStoreIds"),f=this.get("orderBy"),b=e.get("length"),a,c;
if(f){a=this._findInsertionLocation(d,0,b,f)}else{a=b}e.insertAt(a,d.get("id"));if(this.get("isMaster")&&(c=this.get("record"))){c.recordDidChange(this.get("propertyName"))
}return this},_findInsertionLocation:function(g,d,c,f){var b=d+Math.floor((c-d)/2),e=this.objectAt(b),a=this._compare(g,e,f);
if(a<0){if(b===0){return b}else{return this._findInsertionLocation(g,0,b,f)}}else{if(a>0){if(b>=c){return b
}else{return this._findInsertionLocation(g,b,c,f)}}else{return b}}},_compare:function(f,e,i){var h=SC.typeOf(i),g,d,c;
if(h===SC.T_FUNCTION){g=i(f,e)}else{if(h===SC.T_STRING){g=SC.compare(f,e)}else{c=i.get("length");
g=0;for(d=0;(g===0)&&(d<c);d++){g=SC.compare(f,e)}}}return g},recordPropertyDidChange:function(c){if(c&&!c.contains(this.get("propertyName"))){return this
}var e=this.get("readOnlyStoreIds");var b=this._prevStoreIds,d=this._storeIdsContentDidChange;
if(e===b){return this}if(b){b.removeObserver("[]",this,d)}this._prevStoreIds=e;if(e){e.addObserver("[]",this,d)
}var a=(e)?e.propertyRevision:-1;this._storeIdsContentDidChange(e,"[]",e,a)},_storeIdsContentDidChange:function(d,b,c,a){this._records=null;
this.enumerableContentDidChange()},unknownProperty:function(b,c){var a=this.reducedProperty(b,c);
return a===undefined?arguments.callee.base.apply(this,arguments):a},init:function(){arguments.callee.base.apply(this,arguments);
this.recordPropertyDidChange()}});sc_require("models/record");SC.Store=SC.Object.extend({name:null,nestedStores:null,dataSource:null,isNested:NO,commitRecordsAutomatically:NO,from:function(a){this.set("dataSource",a);
return this},_getDataSource:function(){var a=this.get("dataSource");if(typeof a===SC.T_STRING){a=SC.objectForPropertyPath(a);
if(a){a=a.create()}if(a){this.set("dataSource",a)}}return a},cascade:function(a){var b=SC.A(arguments);
a=SC.CascadeDataSource.create({dataSources:b});return this.from(a)},chain:function(b,c){if(!b){b={}
}b.parentStore=this;if(c){if(SC.typeOf(c)!=="class"){throw new Error("%@ is not a valid class".fmt(c))
}if(!SC.kindOf(c,SC.NestedStore)){throw new Error("%@ is not a type of SC.NestedStore".fmt(c))
}}else{c=SC.NestedStore}var a=c.create(b),d=this.nestedStores;if(!d){d=this.nestedStores=[]
}d.push(a);return a},willDestroyNestedStore:function(a){if(this.nestedStores){this.nestedStores.removeObject(a)
}return this},hasNestedStore:function(a){while(a&&(a!==this)){a=a.get("parentStore")
}return a===this},dataHashes:null,statuses:null,revisions:null,editables:null,changelog:null,recordArraysWithQuery:null,recordErrors:null,queryErrors:null,storeKeyEditState:function(b){var c=this.editables,a=this.locks;
return(c&&c[b])?SC.Store.EDITABLE:SC.Store.LOCKED},readDataHash:function(a){return this.dataHashes[a]
},readEditableDataHash:function(b){var a=this.dataHashes[b];if(!a){return a}var c=this.editables;
if(!c){c=this.editables=[]}if(!c[b]){c[b]=1;a=this.dataHashes[b]=SC.clone(a,YES)}return a
},readEditableProperty:function(c,a){var e=this.readEditableDataHash(c),d=this.editables[c],b=e[a];
if(d===1){d=this.editables[c]={}}if(!d[a]){b=e[a];if(b&&b.isCopyable){b=e[a]=b.copy()
}d[a]=YES}return b},writeDataHash:function(b,d,a){if(d){this.dataHashes[b]=d}if(a){this.statuses[b]=a
}var c=this.editables;if(!c){c=this.editables=[]}c[b]=1;return this},removeDataHash:function(b,a){this.dataHashes[b]=null;
this.statuses[b]=a||SC.Record.EMPTY;var c=this.editables;if(c){c[b]=0}return this
},readStatus:function(a){this.readDataHash(a);return this.statuses[a]||SC.Record.EMPTY
},peekStatus:function(a){return this.statuses[a]||SC.Record.EMPTY},writeStatus:function(b,a){return this.writeDataHash(b,null,a)
},dataHashDidChange:function(h,d,e,f){if(!d){d=SC.Store.generateStoreKey()}var c,b,a,g;
c=SC.typeOf(h)===SC.T_ARRAY;if(c){b=h.length}else{b=1;g=h}for(a=0;a<b;a++){if(c){g=h[a]
}this.revisions[g]=d;this._notifyRecordPropertyChange(g,e,f)}return this},_notifyRecordPropertyChange:function(m,e,l){var a=this.records,g=this.get("nestedStores"),h=SC.Store,c,b,f,k,j,d,n;
f=g?g.length:0;for(k=0;k<f;k++){j=g[k];d=j.peekStatus(m);b=j.storeKeyEditState(m);
if(b===h.INHERITED){j._notifyRecordPropertyChange(m,e,l)}else{if(d&SC.Record.BUSY){if(j.get("hasChanges")){throw h.CHAIN_CONFLICT_ERROR
}j.reset()}}}var i=this.recordPropertyChanges;if(!i){i=this.recordPropertyChanges={storeKeys:SC.CoreSet.create(),records:SC.CoreSet.create(),hasDataChanges:SC.CoreSet.create(),propertyForStoreKeys:{}}
}i.storeKeys.add(m);if(a&&(c=a[m])){i.records.push(m);if(!e){i.hasDataChanges.push(m)
}if(l){if(!(n=i.propertyForStoreKeys[m])){n=i.propertyForStoreKeys[m]=SC.CoreSet.create()
}if(n!=="*"){n.add(l)}}else{i.propertyForStoreKeys[m]="*"}}this.invokeOnce(this.flush);
return this},flush:function(){if(!this.recordPropertyChanges){return this}var i=this.recordPropertyChanges,h=i.storeKeys,l=i.hasDataChanges,a=i.records,f=i.propertyForStoreKeys,d=SC.CoreSet.create(),c,b,e,j,g,k,m;
h.forEach(function(n){if(a.contains(n)){e=l.contains(n)?NO:YES;c=this.records[n];
m=f?f[n]:null;if(m==="*"){m=null}a.remove(n);if(c){c.storeDidChangeProperties(e,m)
}}b=SC.Store.recordTypeFor(n);d.add(b)},this);if(h.get("length")>0){this._notifyRecordArrays(h,d)
}h.clear();l.clear();a.clear();this.recordPropertyChanges.propertyForStoreKeys={};
return this},reset:function(){this.dataHashes={};this.revisions={};this.statuses={};
this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.recordErrors=null;
this.queryErrors=null;var a=this.records,b;if(a){for(b in a){if(!a.hasOwnProperty(b)){continue
}this._notifyRecordPropertyChange(parseInt(b,10),NO)}}this.set("hasChanges",NO)},commitChangesFromNestedStore:function(k,l,c){if(!c){this._verifyLockRevisions(l,k.locks)
}var g=l.length,e,o,f,a,n,b,d,m,j;b=this.revisions;f=this.dataHashes;a=this.statuses;
n=this.editables;if(!n){n=this.editables=[]}d=k.dataHashes;j=k.revisions;m=k.statuses;
for(e=0;e<g;e++){o=l[e];f[o]=d[o];a[o]=m[o];b[o]=j[o];n[o]=0;this._notifyRecordPropertyChange(o,NO)
}var p=this.changelog,h=k.changelog;if(h){if(!p){p=this.changelog=SC.CoreSet.create()
}p.addEach(h)}this.changelog=p;if(!this.get("parentStore")){this.flush()}return this
},_verifyLockRevisions:function(f,h){var a=f.length,c=this.revisions,e,g,d,b;if(h&&c){for(e=0;
e<a;e++){g=f[e];d=h[g]||1;b=c[g]||1;if(d<b){throw SC.Store.CHAIN_CONFLICT_ERROR}}}return this
},find:function(b,a){if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)
}if((arguments.length===1)&&!(b&&b.get&&b.get("isRecord"))){if(!b){throw new Error("SC.Store#find() must pass recordType or query")
}if(!b.isQuery){b=SC.Query.local(b)}return this._findQuery(b,YES,YES)}else{return this._findRecord(b,a)
}},findAll:function(c,a,b){console.warn("SC.Store#findAll() will be removed in a future version of SproutCore.  Use SC.Store#find() instead");
if(!c||!c.isQuery){c=SC.Query.local(c,a,b)}return this._findQuery(c,YES,YES)},_findQuery:function(f,a,e){var b=this._scst_recordArraysByQuery,d=SC.guidFor(f),c,g;
if(!b){b=this._scst_recordArraysByQuery={}}c=b[d];if(!c&&a){b[d]=c=SC.RecordArray.create({store:this,query:f});
g=this.get("recordArrays");if(!g){this.set("recordArrays",g=SC.Set.create())}g.add(c);
if(e){this.refreshQuery(f)}}this.flush();return c},_findRecord:function(c,b){var a;
if(c&&c.get&&c.get("isRecord")){a=c.get("storeKey")}else{a=b?c.storeKeyFor(b):null
}if(a&&(this.readStatus(a)===SC.Record.EMPTY)){a=this.retrieveRecord(c,b)}return a?this.materializeRecord(a):null
},recordArrayWillDestroy:function(b){var a=this._scst_recordArraysByQuery,c=this.get("recordArrays");
if(a){delete a[SC.guidFor(b.get("query"))]}if(c){c.remove(b)}return this},refreshQuery:function(d){if(!d){throw new Error("refreshQuery() requires a query")
}var a=this._scst_recordArraysByQuery,c=a?a[SC.guidFor(d)]:null,b=this._getDataSource();
if(b&&b.fetch){if(c){c.storeWillFetchQuery(d)}b.fetch.call(b,this,d)}return this},_notifyRecordArrays:function(b,a){var c=this.get("recordArrays");
if(!c){return this}c.forEach(function(d){if(d){d.storeDidChangeStoreKeys(b,a)}},this);
return this},recordsFor:function(f){var d=[],a=f.storeKeysById(),e,c,b;for(e in a){c=a[e];
if(this.readStatus(c)!==SC.RECORD_EMPTY){d.push(c)}}if(d.length>0){b=SC.RecordArray.create({store:this,storeKeys:d})
}else{b=d}return b},_TMP_REC_ATTRS:{},materializeRecord:function(d){var a=this.records,c,e,b;
if(!a){a=this.records={}}c=a[d];if(c){return c}e=SC.Store.recordTypeFor(d);if(!e){return null
}b=this._TMP_REC_ATTRS;b.storeKey=d;b.store=this;c=a[d]=e.create(b);return c},createRecord:function(b,d,a){var i,j,c,h=SC.Record,e,g,f;
if(!a&&(i=b.prototype.primaryKey)){a=d[i];g=b.prototype[i]?b.prototype[i].defaultValue:null;
if(!a&&SC.typeOf(g)===SC.T_FUNCTION){a=d[i]=g()}}j=a?b.storeKeyFor(a):SC.Store.generateStoreKey();
c=this.readStatus(j);if((c&h.BUSY)||(c&h.READY)||(c==h.DESTROYED_DIRTY)){throw a?h.RECORD_EXISTS_ERROR:h.BAD_STATE_ERROR
}else{if(!a&&(c==SC.DESTROYED_CLEAN||c==SC.ERROR)){throw h.BAD_STATE_ERROR}}this.writeDataHash(j,(d?d:{}),h.READY_NEW);
SC.Store.replaceRecordTypeFor(j,b);this.dataHashDidChange(j);e=this.changelog;if(!e){e=SC.Set.create()
}e.add(j);this.changelog=e;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)
}f=this.materializeRecord(j);if(f){f.propagateToAggregates()}return f},createRecords:function(d,i,a){var g=[],c,b,e,f=i.length,h;
e=SC.typeOf(d)===SC.T_ARRAY;if(!e){c=d}for(h=0;h<f;h++){if(e){c=d[h]||SC.Record}b=a?a[h]:undefined;
g.push(this.createRecord(c,i[h],b))}return g},unloadRecord:function(f,e,d,c){if(d===undefined){d=f.storeKeyFor(e)
}var b=this.readStatus(d),a=SC.Record;c=c||a.EMPTY;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this
}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{b=c}}this.removeDataHash(d,b);this.dataHashDidChange(d);
return this},unloadRecords:function(d,a,g,e){var h,f,i,b,c,j;if(g===undefined){f=SC.typeOf(d)===SC.T_ARRAY;
if(!f){c=d}if(a===undefined){h=f?d.length:1;for(i=0;i<h;i++){if(f){c=d[i]}g=this.storeKeysFor(c);
this.unloadRecords(undefined,undefined,g,e)}}else{h=a.length;for(i=0;i<h;i++){if(f){c=d[i]||SC.Record
}b=a?a[i]:undefined;this.unloadRecord(c,b,undefined,e)}}}else{h=g.length;for(i=0;
i<h;i++){j=g?g[i]:undefined;this.unloadRecord(undefined,undefined,j,e)}}return this
},destroyRecord:function(f,e,d){if(d===undefined){d=f.storeKeyFor(e)}var b=this.readStatus(d),c,a=SC.Record;
if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b==a.EMPTY){throw a.NOT_FOUND_ERROR
}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{if(b==a.READY_NEW){b=a.DESTROYED_CLEAN
}else{b=a.DESTROYED_DIRTY}}}}this.writeStatus(d,b);this.dataHashDidChange(d);c=this.changelog;
if(!c){c=this.changelog=SC.Set.create()}((b&a.DIRTY)?c.add(d):c.remove(d));this.changelog=c;
if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this
},destroyRecords:function(d,a,f){var g,e,h,b,c,i;if(f===undefined){g=a.length;e=SC.typeOf(d)===SC.T_ARRAY;
if(!e){c=d}for(h=0;h<g;h++){if(e){c=d[h]||SC.Record}b=a?a[h]:undefined;this.destroyRecord(c,b,undefined)
}}else{g=f.length;for(h=0;h<g;h++){i=f?f[h]:undefined;this.destroyRecord(undefined,undefined,i)
}}return this},recordDidChange:function(h,g,f,d,c){if(f===undefined){f=h.storeKeyFor(g)
}var b=this.readStatus(f),e,a=SC.Record;if(b&a.BUSY){throw a.BUSY_ERROR}else{if(!(b&a.READY)){throw a.NOT_FOUND_ERROR
}else{if(b!=a.READY_NEW){this.writeStatus(f,a.READY_DIRTY)}}}this.dataHashDidChange(f,null,c,d);
e=this.changelog;if(!e){e=this.changelog=SC.Set.create()}e.add(f);this.changelog=e;
if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this
},recordsDidChange:function(d,a,f){var g,e,h,b,c,i;if(f===undefined){g=a.length;e=SC.typeOf(d)===SC.T_ARRAY;
if(!e){c=d}for(h=0;h<g;h++){if(e){c=d[h]||SC.Record}b=a?a[h]:undefined;i=f?f[h]:undefined;
this.recordDidChange(c,b,i)}}else{g=f.length;for(h=0;h<g;h++){i=f?f[h]:undefined;
this.recordDidChange(undefined,undefined,i)}}return this},retrieveRecords:function(f,b,i,c){var a=this._getDataSource(),h=SC.typeOf(f)===SC.T_ARRAY,j=(!i)?b.length:i.length,k=[],g=SC.Store.generateStoreKey(),m=SC.Record,d,n,o,e,l;
if(!h){d=f}for(n=0;n<j;n++){if(i){o=i[n]}else{if(h){d=f[n]}o=d.storeKeyFor(b[n])}e=this.readStatus(o);
if((e==m.EMPTY)||(e==m.ERROR)||(e==m.DESTROYED_CLEAN)){this.writeStatus(o,m.BUSY_LOADING);
this.dataHashDidChange(o,g,YES);k.push(o)}else{if(c){if(e&m.READY){this.writeStatus(o,m.BUSY_REFRESH|(e&3));
this.dataHashDidChange(o,g,YES);k.push(o)}else{if((e==m.BUSY_DESTROYING)||(e==m.BUSY_CREATING)||(e==m.BUSY_COMMITTING)){throw m.BUSY_ERROR
}else{if(e==m.DESTROYED_DIRTY){throw m.BAD_STATE_ERROR}}}}}}l=NO;if(a){l=a.retrieveRecords.call(a,this,k,b)
}if(!l){j=k.length;g=SC.Store.generateStoreKey();for(n=0;n<j;n++){o=k[n];e=this.readStatus(o);
if(e===m.BUSY_LOADING){this.writeStatus(o,m.ERROR);this.dataHashDidChange(o,g,YES)
}else{if(e&m.BUSY_REFRESH){this.writeStatus(o,m.READY|(e&3));this.dataHashDidChange(o,g,YES)
}}}k.length=0}return k},_TMP_RETRIEVE_ARRAY:[],retrieveRecord:function(f,e,b,c){var d=this._TMP_RETRIEVE_ARRAY,a;
if(b){d[0]=b;b=d;e=null}else{d[0]=e;e=d}a=this.retrieveRecords(f,e,b,c);d.length=0;
return a[0]},refreshRecord:function(c,b,a){return !!this.retrieveRecord(c,b,a,YES)
},refreshRecords:function(b,c,d){var a=this.retrieveRecords(b,c,d,YES);return a&&a.length>0
},commitRecords:function(e,l,b,o){var k=this._getDataSource(),g=SC.typeOf(e)===SC.T_ARRAY,c=[],i=[],j=[],p=SC.Store.generateStoreKey(),f=SC.Record,a,h,d,m,r,q,n;
if(!e&&!l&&!b){b=this.changelog}n=b?b.get("length"):(l?l.get("length"):0);for(h=0;
h<n;h++){if(b){d=b[h]}else{if(g){a=e[h]||SC.Record}else{a=e}d=a.storeKeyFor(l[h])
}m=this.readStatus(d);if((m==f.EMPTY)||(m==f.ERROR)){throw f.NOT_FOUND_ERROR}else{if(m==f.READY_NEW){this.writeStatus(d,f.BUSY_CREATING);
this.dataHashDidChange(d,p,YES);c.push(d)}else{if(m==f.READY_DIRTY){this.writeStatus(d,f.BUSY_COMMITTING);
this.dataHashDidChange(d,p,YES);i.push(d)}else{if(m==f.DESTROYED_DIRTY){this.writeStatus(d,f.BUSY_DESTROYING);
this.dataHashDidChange(d,p,YES);j.push(d)}else{if(m==f.DESTROYED_CLEAN){this.dataHashDidChange(d,p,YES)
}}}}}}if(k&&(n>0||o)){q=k.commitRecords.call(k,this,c,i,j,o)}if(q&&!e&&!l){if(b===this.changelog){this.changelog=null
}else{this.changelog.removeEach(b)}}return q},commitRecord:function(f,e,b,c){var d=this._TMP_RETRIEVE_ARRAY,a;
if(e===undefined&&b===undefined){return NO}if(b!==undefined){d[0]=b;b=d;e=null}else{d[0]=e;
e=d}a=this.commitRecords(f,e,b,c);d.length=0;return a},cancelRecords:function(e,b,i){var a=this._getDataSource(),g=SC.typeOf(e)===SC.T_ARRAY,k=SC.Record,j=[],f,h,l,c,d,m;
h=(i===undefined)?b.length:i.length;for(l=0;l<h;l++){if(g){d=e[l]||SC.Record}else{d=e||SC.Record
}c=b?b[l]:undefined;if(i===undefined){m=d.storeKeyFor(c)}else{m=i?i[l]:undefined}if(m){f=this.readStatus(m);
if((f==k.EMPTY)||(f==k.ERROR)){throw k.NOT_FOUND_ERROR}j.push(m)}}if(a){a.cancel.call(a,this,j)
}return this},cancelRecord:function(e,d,b){var c=this._TMP_RETRIEVE_ARRAY,a;if(b!==undefined){c[0]=b;
b=c;d=null}else{c[0]=d;d=c}a=this.cancelRecords(e,d,b);c.length=0;return this},loadRecord:function(g,d,f){var a=SC.Record,c,b,e;
g=g||SC.Record;b=g.prototype.primaryKey;f=f||d[b];c=e=g.storeKeyFor(f);if(this.readStatus(e)&a.BUSY){this.dataSourceDidComplete(e,d,f)
}else{this.pushRetrieve(g,f,d,e)}return c},loadRecords:function(d,m,a){var f=SC.typeOf(d)===SC.T_ARRAY,g=m.get("length"),h=[],i=SC.Record,c,b,k,j,e,l;
if(!f){c=d||SC.Record;k=c.prototype.primaryKey}for(j=0;j<g;j++){e=m.objectAt(j);if(f){c=d.objectAt(j)||SC.Record;
k=c.prototype.primaryKey}b=(a)?a.objectAt(j):e[k];h[j]=this.loadRecord(c,e,b)}return h
},readError:function(a){var b=this.recordErrors;return b?b[a]:undefined},readQueryError:function(a){var b=this.queryErrors;
return b?b[SC.guidFor(a)]:undefined},dataSourceDidCancel:function(c){var b=this.readStatus(c),a=SC.Record;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}switch(b){case a.BUSY_LOADING:b=a.EMPTY;break;
case a.BUSY_CREATING:b=a.READY_NEW;break;case a.BUSY_COMMITTING:b=a.READY_DIRTY;break;
case a.BUSY_REFRESH_CLEAN:b=a.READY_CLEAN;break;case a.BUSY_REFRESH_DIRTY:b=a.READY_DIRTY;
break;case a.BUSY_DESTROYING:b=a.DESTROYED_DIRTY;break;default:throw a.BAD_STATE_ERROR
}this.writeStatus(c,b);this.dataHashDidChange(c,null,YES);return this},dataSourceDidComplete:function(f,e,d){var b=this.readStatus(f),a=SC.Record,c;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}if(b===a.BUSY_DESTROYING){throw a.BAD_STATE_ERROR
}else{b=a.READY_CLEAN}this.writeStatus(f,b);if(e){this.writeDataHash(f,e,b)}if(d){SC.Store.replaceIdFor(f,d)
}c=e||d?NO:YES;this.dataHashDidChange(f,null,c);return this},dataSourceDidDestroy:function(c){var b=this.readStatus(c),a=SC.Record;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}else{b=a.DESTROYED_CLEAN}this.removeDataHash(c,b);
this.dataHashDidChange(c);return this},dataSourceDidError:function(d,c){var b=this.readStatus(d),e=this.recordErrors,a=SC.Record;
if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}else{b=a.ERROR}if(c&&c.isError){if(!e){e=this.recordErrors=[]
}e[d]=c}this.writeStatus(d,b);this.dataHashDidChange(d,null,YES);return this},pushRetrieve:function(f,e,c,d){var b=SC.Record,a;
if(d===undefined){d=f.storeKeyFor(e)}a=this.readStatus(d);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.READY_CLEAN;
if(c===undefined){this.writeStatus(d,a)}else{this.writeDataHash(d,c,a)}this.dataHashDidChange(d);
return d}return NO},pushDestroy:function(e,d,c){var b=SC.Record,a;if(c===undefined){c=e.storeKeyFor(d)
}a=this.readStatus(c);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.DESTROYED_CLEAN;
this.removeDataHash(c,a);this.dataHashDidChange(c);return c}return NO},pushError:function(g,f,c,d){var b=SC.Record,a,e=this.recordErrors;
if(d===undefined){d=g.storeKeyFor(f)}a=this.readStatus(d);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.ERROR;
if(c&&c.isError){if(!e){e=this.recordErrors=[]}e[d]=c}this.writeStatus(d,a);this.dataHashDidChange(d,null,YES);
return d}return NO},loadQueryResults:function(c,a){if(c.get("location")===SC.Query.LOCAL){throw new Error("Cannot load query results for a local query")
}var b=this._findQuery(c,YES,NO);if(b){b.set("storeKeys",a)}this.dataSourceDidFetchQuery(c);
return this},dataSourceDidFetchQuery:function(a){return this._scstore_dataSourceDidFetchQuery(a,YES)
},_scstore_dataSourceDidFetchQuery:function(d,a){var c=this._findQuery(d,a,NO),b=this.get("nestedStores"),e=b?b.get("length"):0;
if(c){c.storeDidFetchQuery(d)}while(--e>=0){b[e]._scstore_dataSourceDidFetchQuery(d,NO)
}return this},dataSourceDidCancelQuery:function(a){return this._scstore_dataSourceDidCancelQuery(a,YES)
},_scstore_dataSourceDidCancelQuery:function(d,a){var c=this._findQuery(d,a,NO),b=this.get("nestedStores"),e=b?b.get("length"):0;
if(c){c.storeDidCancelQuery(d)}while(--e>=0){b[e]._scstore_dataSourceDidCancelQuery(d,NO)
}return this},dataSourceDidErrorQuery:function(b,a){var c=this.queryErrors;if(a&&a.isError){if(!c){c=this.queryErrors={}
}c[SC.guidFor(b)]=a}return this._scstore_dataSourceDidErrorQuery(b,YES)},_scstore_dataSourceDidErrorQuery:function(d,a){var c=this._findQuery(d,a,NO),b=this.get("nestedStores"),e=b?b.get("length"):0;
if(c){c.storeDidErrorQuery(d)}while(--e>=0){b[e]._scstore_dataSourceDidErrorQuery(d,NO)
}return this},init:function(){arguments.callee.base.apply(this,arguments);this.reset()
},toString:function(){var b=this.get("name");if(!b){return arguments.callee.base.apply(this,arguments)
}else{var a=arguments.callee.base.apply(this,arguments);return"%@ (%@)".fmt(b,a)}},idFor:function(a){return SC.Store.idFor(a)
},recordTypeFor:function(a){return SC.Store.recordTypeFor(a)},storeKeyFor:function(b,a){return b.storeKeyFor(a)
},storeKeyExists:function(b,a){return b.storeKeyExists(a)},storeKeysFor:function(f){var a=[],e=f&&f.isEnumerable,c,d,b;
if(!this.statuses){return a}for(d in SC.Store.recordTypesByStoreKey){c=SC.Store.recordTypesByStoreKey[d];
if(e){b=f.contains(c)}else{b=c===f}if(b&&this.statuses[d]){a.push(parseInt(d,10))
}}return a},storeKeys:function(){var a=[],b;if(!this.statuses){return a}for(b in this.statuses){if(this.statuses[b]!=SC.Record.EMPTY){a.push(parseInt(b,10))
}}return a},statusString:function(a){var b=this.materializeRecord(a);return b.statusString()
}});SC.Store.mixin({CHAIN_CONFLICT_ERROR:new Error("Nested Store Conflict"),NO_PARENT_STORE_ERROR:new Error("Parent Store Required"),NESTED_STORE_UNSUPPORTED_ERROR:new Error("Unsupported In Nested Store"),NESTED_STORE_RETRIEVE_DIRTY_ERROR:new Error("Cannot Retrieve Dirty Record in Nested Store"),EDITABLE:"editable",LOCKED:"locked",INHERITED:"inherited",idsByStoreKey:[],recordTypesByStoreKey:{},queriesByStoreKey:[],nextStoreKey:1,generateStoreKey:function(){return this.nextStoreKey++
},idFor:function(a){return this.idsByStoreKey[a]},queryFor:function(a){return this.queriesByStoreKey[a]
},recordTypeFor:function(a){return this.recordTypesByStoreKey[a]},replaceIdFor:function(c,a){var d=this.idsByStoreKey[c],e,b;
if(d!==a){e=this.recordTypeFor(c);if(!e){throw new Error("replaceIdFor: storeKey %@ does not exist".fmt(c))
}this.idsByStoreKey[c]=a;b=e.storeKeysById();delete b[d];b[a]=c}return this},replaceRecordTypeFor:function(a,b){this.recordTypesByStoreKey[a]=b;
return this}});SC.Store.prototype.nextStoreIndex=1;SC.Store._getDefaultStore=function(){var a=this._store;
if(!a){this._store=a=SC.Store.create()}return a};SC.Store.updateRecords=function(f,g,h,c){console.warn("SC.Store.updateRecords() is deprecated.  Use loadRecords() instead");
var d=this._getDefaultStore(),b=f.length,a,e;if(!h){h=[];for(a=0;a<b;a++){h[a]=f[a].recordType
}}e=d.loadRecords(h,f);b=e.length;for(a=0;a<b;a++){e[a]=d.materializeRecord(e[a])
}return e};SC.Store.find=function(a,b){return this._getDefaultStore().find(b,a)};
SC.Store.findAll=function(a,b){return this._getDefaultStore().findAll(a,b)};sc_require("system/store");
SC.NestedStore=SC.Store.extend({hasChanges:NO,parentStore:null,isNested:YES,lockOnRead:YES,locks:null,chainedChanges:null,find:function(a){if(a&&a.isQuery&&a.get("location")!==SC.Query.LOCAL){throw"SC.Store#find() can only accept LOCAL queries in nested stores"
}return arguments.callee.base.apply(this,arguments)},commitChanges:function(b){if(this.get("hasChanges")){var a=this.get("parentStore");
a.commitChangesFromNestedStore(this,this.chainedChanges,b)}this.reset();return this
},discardChanges:function(){var c,f;if((c=this.records)&&(f=this.locks)){var b=this.get("parentStore"),h=b.revisions;
var g=this.revisions,e,d,a;for(e in c){if(!c.hasOwnProperty(e)){continue}if(!(d=f[e])){continue
}a=h[e];if((a!==d)||(g[e]>a)){this._notifyRecordPropertyChange(parseInt(e,10))}}}this.reset();
this.flush();return this},destroy:function(){this.discardChanges();var a=this.get("parentStore");
if(a){a.willDestroyNestedStore(this)}arguments.callee.base.apply(this,arguments);
return this},reset:function(){var a=this.get("parentStore");if(!a){throw SC.Store.NO_PARENT_STORE_ERROR
}this.dataHashes=SC.beget(a.dataHashes);this.revisions=SC.beget(a.revisions);this.statuses=SC.beget(a.statuses);
this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.set("hasChanges",NO)
},refreshQuery:function(b){var a=this.get("parentStore");if(a){a.refreshQuery(b)}return this
},readError:function(b){var a=this.get("parentStore");return a?a.readError(b):null
},readQueryError:function(b){var a=this.get("parentStore");return a?a.readQueryError(b):null
},storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:(a&&a[b])?SC.Store.LOCKED:SC.Store.INHERITED
},_lock:function(e){var d=this.locks,a,f;if(d&&d[e]){return this}if(!d){d=this.locks=[]
}f=this.editables;if(f){f[e]=0}var c=this.get("parentStore"),b;while(c&&(b=c.storeKeyEditState(e))===SC.Store.INHERITED){c=c.get("parentStore")
}if(c&&b===SC.Store.EDITABLE){this.dataHashes[e]=SC.clone(c.dataHashes[e],YES);if(!f){f=this.editables=[]
}f[e]=1}else{this.dataHashes[e]=this.dataHashes[e]}this.statuses[e]=this.statuses[e];
a=this.revisions[e]=this.revisions[e];d[e]=a||1;return this},readDataHash:function(a){if(this.get("lockOnRead")){this._lock(a)
}return this.dataHashes[a]},readEditableDataHash:function(a){this._lock(a);return arguments.callee.base.apply(this,arguments)
},writeDataHash:function(d,f,b){var c=this.locks,g=NO,a;if(f){this.dataHashes[d]=f
}else{this._lock(d);g=YES}if(b){this.statuses[d]=b}else{if(!g){this.statuses[d]=(this.statuses[d]||SC.Record.READY_NEW)
}}if(!g){a=this.revisions[d]=this.revisions[d];if(!c){c=this.locks=[]}if(!c[d]){c[d]=a||1
}}var e=this.editables;if(!e){e=this.editables=[]}e[d]=1;return this},removeDataHash:function(c,a){var b=this.locks;
if(!b){b=this.locks=[]}if(!b[c]){b[c]=this.revisions[c]||1}return arguments.callee.base.apply(this,arguments)
},dataHashDidChange:function(d,b,a,h){if(!b){b=SC.Store.generateStoreKey()}var c,e,g,i;
c=SC.typeOf(d)===SC.T_ARRAY;if(c){e=d.length}else{e=1;i=d}var f=this.chainedChanges;
if(!f){f=this.chainedChanges=SC.Set.create()}for(g=0;g<e;g++){if(c){i=d[g]}this._lock(i);
this.revisions[i]=b;f.add(i);this._notifyRecordPropertyChange(i,a,h)}this.setIfChanged("hasChanges",YES);
return this},commitChangesFromNestedStore:function(e,f,a){arguments.callee.base.apply(this,arguments);
var b=this.get("parentStore"),h=b.revisions,c;var k=this.locks,g=this.chainedChanges,d,j;
if(!k){k=this.locks=[]}if(!g){g=this.chainedChanges=SC.Set.create()}d=f.length;for(c=0;
c<d;c++){j=f[c];if(!k[j]){k[j]=h[j]||1}g.add(j)}this.setIfChanged("hasChanges",g.get("length")>0);
this.flush();return this},queryFor:function(c,a,b){return this.get("parentStore").queryFor(c,a,b)
},findAll:function(e,b,d,c,a){if(!a){a=this}return this.get("parentStore").findAll(e,b,d,c,a)
},retrieveRecords:function(f,m,b,c){var a=this.get("parentStore"),k,d,p,o=(!b)?m.length:b.length,i=SC.Record,n;
if(c){for(k=0;k<o;k++){d=!b?a.storeKeyFor(f,m[k]):b[k];n=this.peekStatus(d);if(n&i.DIRTY){throw SC.Store.NESTED_STORE_RETRIEVE_DIRTY_ERROR
}else{var g=this.dataHashes,j=this.revisions,h=this.statuses,l=this.editables,r=this.locks;
var e=NO;var q=NO;if(g&&g.hasOwnProperty(d)){delete g[d];e=YES}if(j&&j.hasOwnProperty(d)){delete j[d];
e=YES}if(l){delete l[d]}if(r){delete r[d]}if(h&&h.hasOwnProperty(d)){delete h[d];
if(!e){q=YES}e=YES}if(e){this._notifyRecordPropertyChange(d,q)}}}}return a.retrieveRecords(f,m,b,c)
},commitRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},commitRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},cancelRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},cancelRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},dataSourceDidCancel:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidComplete:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},dataSourceDidDestroy:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidError:function(b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},pushRetrieve:function(d,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushDestroy:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR
},pushError:function(d,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}});sc_require("models/record");
SC.RecordArray=SC.Object.extend(SC.Enumerable,SC.Array,{store:null,query:null,storeKeys:null,status:SC.Record.EMPTY,isEditable:function(){var a=this.get("query");
return a?a.get("isEditable"):NO}.property("query").cacheable(),length:function(){this.flush();
var a=this.get("storeKeys");return a?a.get("length"):0}.property("storeKeys").cacheable(),_scra_records:null,objectAt:function(a){this.flush();
var f=this._scra_records,e=this.get("storeKeys"),b=this.get("store"),d,c;if(!e||!b){return undefined
}if(f&&(c=f[a])){return c}if(!f){this._scra_records=f=[]}d=e.objectAt(a);if(d){if(b.peekStatus(d)===SC.Record.EMPTY){b.retrieveRecord(null,null,d)
}f[a]=c=b.materializeRecord(d)}return c},forEach:function(h,d){this.flush();var e=this._scra_records,b=this.get("storeKeys"),f=this.get("store"),c=b?b.get("length"):0,g,i,a;
if(!b||!f){return this}if(!e){e=this._scra_records=[]}if(!d){d=this}for(g=0;g<c;g++){a=e[g];
if(!a){a=e[g]=f.materializeRecord(b.objectAt(g))}h.call(d,a,g,this)}return this},replace:function(b,h,g){this.flush();
var e=this.get("storeKeys"),a=g?(g.get?g.get("length"):g.length):0,c,d;if(!e){throw"storeKeys required"
}var f=this.get("query");if(f&&!f.get("isEditable")){throw SC.RecordArray.NOT_EDITABLE
}d=[];for(c=0;c<a;c++){d[c]=g.objectAt(c).get("storeKey")}e.replace(b,h,d);return this
},contains:function(a){return this.indexOf(a)>=0},indexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using indexOf on %@ with an object that is not an SC.Record".fmt(b));
return -1}this.flush();var d=b.get("storeKey"),c=this.get("storeKeys");return c?c.indexOf(d,a):-1
},lastIndexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using lastIndexOf on %@ with an object that is not an SC.Record".fmt(b));
return -1}this.flush();var d=b.get("storeKey"),c=this.get("storeKeys");return c?c.lastIndexOf(d,a):-1
},add:function(a){if(!SC.kindOf(a,SC.Record)){return this}if(this.indexOf(a)<0){this.pushObject(a)
}return this},remove:function(a){if(!SC.kindOf(a,SC.Record)){return this}this.removeObject(a);
return this},find:function(a,b){if(a&&a.isQuery){return this.get("store").find(a.queryWithScope(this))
}else{return arguments.callee.base.apply(this,arguments)}},refresh:function(){this.get("store").refreshQuery(this.get("query"));
return this},reload:function(){this.flush(YES);return this},destroy:function(){if(!this.get("isDestroyed")){this.get("store").recordArrayWillDestroy(this)
}arguments.callee.base.apply(this,arguments)},storeWillFetchQuery:function(c){var b=this.get("status"),a=SC.Record;
if((b===a.EMPTY)||(b===a.ERROR)){b=a.BUSY_LOADING}if(b&a.READY){b=a.BUSY_REFRESH}this.setIfChanged("status",b);
return this},storeDidFetchQuery:function(a){this.setIfChanged("status",SC.Record.READY_CLEAN);
return this},storeDidCancelQuery:function(c){var b=this.get("status"),a=SC.Record;
if(b===a.BUSY_LOADING){b=a.EMPTY}else{if(b===a.BUSY_REFRESH){b=a.READY_CLEAN}}this.setIfChanged("status",b);
return this},storeDidErrorQuery:function(a){this.setIfChanged("status",SC.Record.ERROR);
return this},storeDidChangeStoreKeys:function(b,a){var c=this.get("query");if(c.get("location")!==SC.Query.LOCAL){return this
}if(!c.containsRecordTypes(a)){return this}var d=this._scq_changedStoreKeys;if(!d){d=this._scq_changedStoreKeys=SC.IndexSet.create()
}d.addEach(b);this.set("needsFlush",YES);this.enumerableContentDidChange();return this
},flush:function(a){if(this._insideFlush){this.set("needsFlush",YES);return this}if(!this.get("needsFlush")&&!a){return this
}this.set("needsFlush",NO);var i=this.get("query"),l=this.get("store");if(!l||!i||i.get("location")!==SC.Query.LOCAL){return this
}this._insideFlush=YES;var g=this.get("storeKeys"),e=this._scq_changedStoreKeys,f=NO,j=SC.Record,c,d,b,n,m,h;
var k=g;if(g&&!a){if(e){e.forEach(function(o){d=l.peekStatus(o);if(!(d&j.EMPTY)&&!((d&j.DESTROYED)||(d===j.BUSY_DESTROYING))){c=l.materializeRecord(o);
h=!!(c&&i.contains(c))}else{h=NO}if(h){if(g.indexOf(o)<0){if(!f){g=g.copy()}g.pushObject(o)
}}else{if(g.indexOf(o)>=0){if(!f){g=g.copy()}g.removeObject(o)}}},this);f=YES}}else{if(m=i.get("scope")){n=m.flush().get("storeKeys")
}else{if(b=i.get("expandedRecordTypes")){n=SC.IndexSet.create();b.forEach(function(o){n.addEach(l.storeKeysFor(b))
})}}g=[];n.forEach(function(o){d=l.peekStatus(o);if(!(d&j.EMPTY)&&!((d&j.DESTROYED)||(d===j.BUSY_DESTROYING))){c=l.materializeRecord(o);
if(c&&i.contains(c)){g.push(o)}}});f=YES}if(e){e.clear()}if(f){if(g&&(g===k)){g=g.copy()
}g=SC.Query.orderStoreKeys(g,i,l);if(SC.compare(k,g)!==0){this.set("storeKeys",SC.clone(g))
}}this._insideFlush=NO;return this},needsFlush:YES,isError:function(){return this.get("status")&SC.Record.ERROR
}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null
}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");
return a.readQueryError(this.get("query"))||SC.Record.GENERIC_ERROR}else{return null
}}.property("isError").cacheable(),_storeKeysDidChange:function(){var d=this.get("storeKeys");
var c=this._prevStoreKeys,e=this._storeKeysContentDidChange,a=this._storeKeysStateDidChange;
if(d===c){return}if(c){c.removeObserver("[]",this,e)}this._prevStoreKeys=d;if(d){d.addObserver("[]",this,e)
}var b=(d)?d.propertyRevision:-1;this._storeKeysContentDidChange(d,"[]",d,b)}.observes("storeKeys"),_storeKeysContentDidChange:function(d,b,c,a){if(this._scra_records){this._scra_records.length=0
}this.beginPropertyChanges().notifyPropertyChange("length").enumerableContentDidChange().endPropertyChanges()
},init:function(){arguments.callee.base.apply(this,arguments);this._storeKeysDidChange()
}});SC.RecordArray.mixin({NOT_EDITABLE:SC.Error.desc("SC.RecordArray is not editable")});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore/datastore");
/* @license
==========================================================================
SproutCore -- JavaScript Application Framework
copyright 2006-2011, Strobe Inc., Apple Inc. and contributors.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.

SproutCore and the SproutCore logo are trademarks of Strobe Inc.

For more information about SproutCore, visit http://www.sproutcore.com


==========================================================================
@license */
}if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("sproutcore")
}SC.stringsFor("English",{});CcChat=SC.Object.create({NAMESPACE:"CcChat",VERSION:"0.1.0",store:SC.Store.create().from(SC.Record.fixtures)});
CcChat.chatController=SC.ObjectController.create({comet:function(){if(!this._comet){this._comet=typeof("Faye")!=="undefined"?new Faye.Client("/chat/comet"):null
}return this._comet}.property().cacheable(),chatHasInitialized:NO,username:"",usersInRoom:[],latestChat:null,subscribedChannels:[],initChat:function(b){this.unsubscribeFromExistingChannels();
var a=CcChat.chatRoomController.validateChannel(b);CcChat.chatRoomController.set("channel",b);
var c=this.get("username");if(c.length<1){c="Test User";this.set("username",c)}this.get("comet").set_username(c);
this.subscribeToChannel(a,this.receiveChat);this.subscribeToUserList(a);CcChat.chatController.set("chatHasInitialized",YES);
this.propertyDidChange("chatHasInitialized");return b},unsubscribeFromExistingChannels:function(){var c=this.get("subscribedChannels");
for(var a=0;a<c.length;a++){var b=c[a];this.unsubscribeFromChannel(b);this.unsubscribeFromUserList(b)
}this.set("subscribedChannels",[])},sendChat:function(c,b){if(!this.chatHasInitialized){SC.Logger.log("initializing chat");
this.initChat("test")}var a={author:this.username,message:c,item:b};this.post(CcChat.chatRoomController.get("channel"),a);
SC.Logger.log("sent: "+c)},post:function(b,a){b=CcChat.chatRoomController.validateChannel(b);
SC.Logger.log("sending on "+b);this.get("comet").publish(b,a)},receiveChat:function(a){SC.Logger.log("received: "+a.message);
this.addMessage(a)},addMessage:function(b){SC.RunLoop.begin();var a=CcChat.store.createRecord(CcChat.ChatMessage,{author:b.author,message:b.message,time:this._now(),item:b.item});
this.set("latestChat",a);SC.RunLoop.end()},subscribeToChannel:function(b,d){var a=CcChat.chatRoomController.validateChannel(b);
this.get("comet").subscribe(a,d,this);var c=this.get("subscribedChannels");c.push(a);
this.set("subscribedChannels",c)},unsubscribeFromChannel:function(b){var a=CcChat.chatRoomController.validateChannel(b);
this.get("comet").unsubscribe(a)},subscribeToUserList:function(c){var b=CcChat.chatRoomController.validateChannel(c);
var a=this;function d(f){var e=[].concat(f);a.set("usersInRoom",e)}this.subscribeToChannel("/smeta/clients"+c,d)
},unsubscribeFromUserList:function(b){var a=CcChat.chatRoomController.validateChannel(b);
this.set("usersInRoom",[]);this.unsubscribeFromChannel("/smeta/clients"+b)},_usernameSet:function(){if(this.chatHasInitialized){var a=this.get("username");
this.get("comet").set_username(a)}}.observes("username"),_now:function(){return new Date().getTime()
}});CcChat.chatComposeController=SC.ObjectController.create({textAreaValue:null,item:null,sendAction:function(){var b=this.get("textAreaValue");
SC.Logger.log("textAreaValue: "+b);var a="User";CcChat.chatController.sendChat(b,this.get("item"));
this.set("textAreaValue","");this.set("item",null)},imageUrl:function(){var a=CcChat.chatComposeController.get("item");
if(a!==null&&a.imageUrl!==undefined&&a.imageUrl!==null){return a.imageUrl}return""
}.property("item"),imageWidth:function(){if(this.get("imageUrl").length>0){return 40
}else{return 0}}.property("imageUrl"),clearButtonTitle:"Remove item",showClearButton:function(){if(this.get("item")!==null){return true
}return false}.property("item"),clearItem:function(){this.set("item",null)}});CcChat.chatListController=SC.ArrayController.create({});
CcChat.chatRoomController=SC.ObjectController.create({channel:"",baseChannelName:function(){return this.get("channel").split("NUM")[0]
}.property("channel"),channelIndex:function(){var a=this.get("channel").split("NUM");
if(a.length>1){return parseInt(a[a.length-1],10)}else{return 0}}.property("channel"),getFirstChannelWithSpace:function(a,b,c){(function(f,j,l){f=CcChat.chatRoomController.validateChannel(f);
var g=f.split("NUM");var d=g[0];var e=0;if(g.length>1){var i=parseInt(g[1],10);e=i+1
}var h=d+"NUM"+e;SC.Logger.log("newChannelName = "+h);function k(m){if(m<j){l(h)}else{CcChat.chatRoomController.getFirstChannelWithSpace(h,j,l)
}}CcChat.chatRoomController.getNumClientsInChannel(h,k)})(a,b,c)},getNumClientsInChannel:function(a,b){(function(d,f){function c(h){var g=[].concat(h);
SC.Logger.log("clients in "+d+": "+g);var i=CcChat.chatController.get("comet");i.unsubscribe("/smeta/clients"+d);
f(g.length,d)}var e=CcChat.chatController.get("comet");e.subscribe("/smeta/clients"+d,c,this)
})(a,b)},validateChannel:function(a){if(a.slice(0,1)!="/"){a="/"+a}return a}});CcChat.loginController=SC.ObjectController.create({textAreaValue:null,username:null,passwordValue:null,retypePasswordValue:null,usernameBinding:"CcChat.chatController.username",showRetypeField:NO,test:35,welcomeMessage:function(){var a=this.get("username");
if(a!==undefined&&a!==null&&a.length>0){return"Welcome "+a}else{return""}}.property("username"),login:function(){var a=this.get("textAreaValue");
CcChat.chatController.set("username",a);this.set("textAreaValue","")},register:function(){if(!this.get("showRetypeField")){this.set("showRetypeField",YES)
}else{if(this.get("passwordValue")===this.get("retypePasswordValue")){var a=this.get("textAreaValue");
alert("Welcome "+a+"!");CcChat.chatController.set("username",a)}else{alert("The two passwords do not match")
}}}});CcChat.userListController=SC.ArrayController.create({contentBinding:"CcChat.chatController.usersInRoom"});
CcChat.ChatMessage=SC.Record.extend({author:SC.Record.attr(String),message:SC.Record.attr(String),time:SC.Record.attr(Number),item:SC.Record.attr(Object)});
sc_require("models/chat_message");CcChat.ChatMessage.FIXTURES=[];CcChat.ChatComposeView=SC.View.extend(SC.StaticLayout,{childViews:"inputView imageView clearImageView sendView".w(),inputView:SC.View.design(SC.StaticLayout,{layout:{left:0,top:0,right:0,height:35},useStaticLayout:YES,childViews:"textFieldView".w(),textFieldView:SC.TextFieldView.design({isTextArea:NO,valueBinding:"CcChat.chatComposeController.textAreaValue",keyUp:function(a){if(a.keyCode===13){CcChat.chatComposeController.sendAction()
}this.fieldValueDidChange();a.allowDefault();return YES}})}),imageView:SC.ImageView.design({layout:{top:2,left:0,height:35,width:this.imageWidth},value:"",valueBinding:"CcChat.chatComposeController.imageUrl"}),clearImageView:SC.ButtonView.design({layout:{top:45,height:24,right:125,width:120},titleBinding:"CcChat.chatComposeController.clearButtonTitle",target:"CcChat.chatComposeController",action:"clearItem",isVisibleBinding:"CcChat.chatComposeController.showClearButton"}),sendView:SC.ButtonView.design({layout:{top:45,height:24,right:20,width:100},title:"Chat",action:"CcChat.chatComposeController.sendAction"}),_adjust_size:function(){var a=CcChat.chatComposeController.get("imageWidth");
this.inputView.adjust("left",a)}.observes("CcChat.chatComposeController.item"),destroy:function(){CcChat.chatComposeController.removeObserver("item",this,this._adjust_size);
arguments.callee.base.apply(this,arguments)}});CcChat.ChatMessageView=SC.View.extend(SC.ContentDisplay,{contentDisplayProperties:"author message".w(),useStaticLayout:YES,render:function(a,h){var e=this.get("content");
var b=e.get("author");b=(b===null)?"":b;var d=e.get("message");var f=e.get("time");
var g="";var c=e.get("item");if(c!==null){if(c!==null&&c.imageUrl!==undefined&&c.imageUrl!==null){g='<img style="float: left" src="'+c.imageUrl+'" height="40px"></img>'
}}a=a.begin().addClass("top");a=a.begin("p").addClass("name").push(g+"<b>%@</b>: %@".fmt(b,d)).end();
a=a.end();arguments.callee.base.apply(this,arguments)}});CcChat.LoginView=SC.View.extend({showPasswordField:YES,childViews:"nameLabel nameField passwordLabel passwordField retypePasswordLabel retypePasswordField loginButtonView registerButtonView welcomeView".w(),nameLabel:SC.LabelView.design({layout:{left:40,top:5,width:80,height:24},value:"Username",fontWeight:SC.BOLD_WEIGHT}),nameField:SC.TextFieldView.design({layout:{left:130,top:5,width:200,height:24},isTextArea:NO,valueBinding:"CcChat.loginController.textAreaValue",keyUp:function(a){if(a.keyCode===13){CcChat.loginController.login()
}this.fieldValueDidChange();a.allowDefault();return YES}}),passwordLabel:SC.LabelView.design({layout:{left:40,top:35,width:80,height:24},value:"Password",fontWeight:SC.BOLD_WEIGHT,isVisibleBinding:"*parentView.showPasswordField"}),passwordField:SC.TextFieldView.design({layout:{left:130,top:35,width:200,height:24},isPassword:YES,isTextArea:NO,valueBinding:"CcChat.loginController.passwordValue",keyUp:function(a){if(a.keyCode===13){CcChat.loginController.login()
}this.fieldValueDidChange();a.allowDefault();return YES},isVisibleBinding:"*parentView.showPasswordField"}),retypePasswordLabel:SC.LabelView.design({layout:{left:0,top:65,width:120,height:24},value:"Retype Password",fontWeight:SC.BOLD_WEIGHT,isVisibleBinding:"CcChat.loginController.showRetypeField"}),retypePasswordField:SC.TextFieldView.design({layout:{left:130,top:65,width:200,height:24},isPassword:YES,isTextArea:NO,valueBinding:"CcChat.loginController.retypePasswordValue",keyUp:function(a){if(a.keyCode===13){CcChat.loginController.login()
}this.fieldValueDidChange();a.allowDefault();return YES},isVisibleBinding:"CcChat.loginController.showRetypeField"}),loginButtonView:SC.ButtonView.design({layout:{top:35,height:24,left:350,width:100},title:"Log in",target:"CcChat.loginController",action:"login",isVisibleBinding:SC.Binding.not("CcChat.loginController.showRetypeField"),init:function(){if(!this.get("parentView").get("showPasswordField")){this.adjust({top:5})
}arguments.callee.base.apply(this,arguments)}}),registerButtonView:SC.ButtonView.design({layout:{top:65,height:24,left:350,width:140},title:"Register new user",target:"CcChat.loginController",action:"register",isVisibleBinding:"*parentView.showPasswordField"}),welcomeView:SC.LabelView.design({layout:{top:5,height:24,left:370,width:200},value:"",valueBinding:SC.Binding.from("CcChat.loginController.welcomeMessage").oneWay()})});
CcChat.UserListView=SC.ScrollView.extend({hasHorizontalScroller:NO,layout:{height:100},backgroundColor:"white",contentView:SC.ListView.design({contentBinding:"CcChat.userListController.arrangedObjects",selectionBinding:"CcChat.userListController.selection",rowHeight:30,canEditContent:NO,isSelectable:YES,showAlternatingRows:YES})});
if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("cc/cc_chat")
}SC.stringsFor("English",{});CC=SC.Object.create({NAMESPACE:"CC",VERSION:"0.1.0"});
CC.Question=SC.Object.extend({prompt:"This is a prompt",input:"This in an input"});
sc_require("models/question");CC.Question.FIXTURES=[{guid:1,prompt:"This is a question prompt. What is the answer?",input:"This is the answer."}];
SC.Logger.log("Loading CC HEX_SHA1 function");HEX_SHA1=function(n){var o=0;var x="";
function j(A){return b(a(p(A)))}function z(A,B){return d(a(p(A)),B)}function f(s,A){return y(h(p(s),p(A)))
}function i(s,A){return b(h(p(s),p(A)))}function e(s,B,A){return d(h(p(s),p(B)),A)
}function c(){return hex_sha1("abc").toLowerCase()=="a9993e364706816aba3e25717850c26c9cd0d89d"
}function a(A){return l(g(q(A),A.length*8))}function h(B,E){var D=q(B);if(D.length>16){D=g(D,B.length*8)
}var s=Array(16),C=Array(16);for(var A=0;A<16;A++){s[A]=D[A]^909522486;C[A]=D[A]^1549556828
}var F=g(s.concat(q(E)),512+E.length*8);return l(g(C.concat(F),512+160))}function y(B){var D=o?"0123456789ABCDEF":"0123456789abcdef";
var A="";var s;for(var C=0;C<B.length;C++){s=B.charCodeAt(C);A+=D.charAt((s>>>4)&15)+D.charAt(s&15)
}return A}function b(B){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
var A="";var s=B.length;for(var D=0;D<s;D+=3){var F=(B.charCodeAt(D)<<16)|(D+1<s?B.charCodeAt(D+1)<<8:0)|(D+2<s?B.charCodeAt(D+2):0);
for(var C=0;C<4;C++){if(D*8+C*6>B.length*8){A+=x}else{A+=E.charAt((F>>>6*(3-C))&63)
}}}return A}function d(I,B){var A=B.length;var H=Array();var G,s,J,D;var F=Array(Math.ceil(I.length/2));
for(G=0;G<F.length;G++){F[G]=(I.charCodeAt(G*2)<<8)|I.charCodeAt(G*2+1)}while(F.length>0){D=Array();
J=0;for(G=0;G<F.length;G++){J=(J<<16)+F[G];s=Math.floor(J/A);J-=s*A;if(D.length>0||s>0){D[D.length]=s
}}H[H.length]=J;F=D}var C="";for(G=H.length-1;G>=0;G--){C+=B.charAt(H[G])}var E=Math.ceil(I.length*8/(Math.log(B.length)/Math.log(2)));
for(G=C.length;G<E;G++){C=B[0]+C}return C}function p(B){var A="";var C=-1;var s,D;
while(++C<B.length){s=B.charCodeAt(C);D=C+1<B.length?B.charCodeAt(C+1):0;if(55296<=s&&s<=56319&&56320<=D&&D<=57343){s=65536+((s&1023)<<10)+(D&1023);
C++}if(s<=127){A+=String.fromCharCode(s)}else{if(s<=2047){A+=String.fromCharCode(192|((s>>>6)&31),128|(s&63))
}else{if(s<=65535){A+=String.fromCharCode(224|((s>>>12)&15),128|((s>>>6)&63),128|(s&63))
}else{if(s<=2097151){A+=String.fromCharCode(240|((s>>>18)&7),128|((s>>>12)&63),128|((s>>>6)&63),128|(s&63))
}}}}}return A}function v(A){var s="";for(var B=0;B<A.length;B++){s+=String.fromCharCode(A.charCodeAt(B)&255,(A.charCodeAt(B)>>>8)&255)
}return s}function k(A){var s="";for(var B=0;B<A.length;B++){s+=String.fromCharCode((A.charCodeAt(B)>>>8)&255,A.charCodeAt(B)&255)
}return s}function q(A){var s=Array(A.length>>2);var B=0;for(B=0;B<s.length;B++){s[B]=0
}for(B=0;B<A.length*8;B+=8){s[B>>5]|=(A.charCodeAt(B/8)&255)<<(24-B%32)}return s}function l(A){var s="";
for(var B=0;B<A.length*32;B+=8){s+=String.fromCharCode((A[B>>5]>>>(24-B%32))&255)
}return s}function g(M,G){M[G>>5]|=128<<(24-G%32);M[((G+64>>9)<<4)+15]=G;var N=Array(80);
var L=1732584193;var K=-271733879;var J=-1732584194;var I=271733878;var H=-1009589776;
for(var D=0;D<M.length;D+=16){var F=L;var E=K;var C=J;var B=I;var s=H;for(var A=0;
A<80;A++){if(A<16){N[A]=M[D+A]}else{N[A]=w(N[A-3]^N[A-8]^N[A-14]^N[A-16],1)}var O=r(r(w(L,5),u(A,K,J,I)),r(r(H,N[A]),m(A)));
H=I;I=J;J=w(K,30);K=L;L=O}L=r(L,F);K=r(K,E);J=r(J,C);I=r(I,B);H=r(H,s)}return Array(L,K,J,I,H)
}function u(A,s,C,B){if(A<20){return(s&C)|((~s)&B)}if(A<40){return s^C^B}if(A<60){return(s&C)|(s&B)|(C&B)
}return s^C^B}function m(s){return(s<20)?1518500249:(s<40)?1859775393:(s<60)?-1894007588:-899497514
}function r(s,C){var B=(s&65535)+(C&65535);var A=(s>>16)+(C>>16)+(B>>16);return(A<<16)|(B&65535)
}function w(s,A){return(s<<A)|(s>>>(32-A))}return y(a(p(n)))};CC.AppletView=SC.View.extend({jarUrls:"",code:"",params:"",width:600,height:400,appletInstance:function(){return this.$("#"+this.get("appletId"))[0]
},render:function(a,b){this.renderAppletHtml(a)},renderAppletHtml:function(b){var a=b.begin("applet");
a.attr("id",this.get("appletId"));a.attr("archive",this.get("jarUrls"));a.attr("code",this.get("code"));
a.attr("width","100%");a.attr("height",this.get("height"));a.attr("MAYSCRIPT","true");
a.push(this.get("params"));a.end()},classNames:"applet",layout:{centerX:0,centerY:0,width:600,height:400},appletId:function(){return this.get("layerId")+"-applet"
}.property("layerId").cacheable(),run:function(a){a(this.appletInstance())}});CC.AutoScrollView=SC.ScrollView.extend({autoScrollTrigger:null,autoScroll:function(){var a=this;
function b(){var c=a.get("maximumVerticalScrollOffset");a.set("verticalScrollOffset",c)
}a.invokeLast(function(){a.invokeLast(b)})}.observes("autoScrollTrigger")});CC.QuestionView=SC.StackedView.extend(SC.StaticLayout,{layout:{top:0,left:0,right:0},classNames:["question","open-response-question"],contentDisplayProperties:"prompt".w(),prompt:"[prompt]",useStaticLayout:NO,childViews:"promptView inputView".w(),promptView:SC.LabelView.design(SC.StaticLayout,{classNames:"question-prompt",useStaticLayout:YES,escapeHTML:NO,layout:{left:5,right:5},valueBinding:"*parentView.prompt"}),inputView:SC.View.design(SC.StaticLayout,{layout:{left:20,top:5,width:600,height:95},useStaticLayout:YES,childViews:"textFieldView".w(),textFieldView:SC.TextFieldView.design({classNames:"question-input",isTextArea:YES})})});
require("views/question");CC.MultipleChoiceQuestionView=CC.QuestionView.extend({classNames:["question","multiple-choice-question"],choices:"1 2 3 4".w(),canSelectMultipleAnswers:NO,inputView:SC.RadioView.design(SC.StaticLayout,{layout:{left:20,top:5,width:600,height:95},useStaticLayout:YES,classNames:"question-input",itemsBinding:"*parentView.choices",itemsChanged:function(){this.replaceLayer()
}.observes("items")})});CC.MwAppletView=CC.AppletView.extend({cmlUrl:"",params:function(){return'<param name="script" value="page:0:import '+this.get("cmlUrl")+'"/>'
}.property("cmlUrl"),jarUrls:"http://mw2.concord.org/public/lib/mwapplet.jar",code:"org.concord.modeler.MwApplet",width:600,height:400,classNames:"mw-applet",layout:{centerX:0,centerY:0,width:600,height:400}});
sc_require("views/applet");CC.SensorAppletView=CC.AppletView.extend({listenerPath:"defaultDataListener",safariSensorStatePath:null,dataRecieved:function(a,c,b){},dataStreamEvent:function(a,c,b){},sensorsReady:function(){},resourcePath:"/simple.otml",isSafari:function(){if(typeof(navigator)!="undefined"&&typeof(navigator.vendor)!="undefined"&&navigator.vendor.indexOf("Apple")!=-1){return YES
}return NO}(),sensorStatePath:function(){if(this.get("isSafari")){return this.get("safariSensorStatePath")
}return null}.property("isSafari","safariSensorStatePath"),sensorState:"ready",appletName:"sensorApplet",params:function(){var a=['<param name="resource" value="'+this.get("resourcePath")+'" />','<param name="listenerPath" value="'+this.get("listenerPath")+'" />','<param name="name" value="'+this.get("appletName")+'" />'];
if(this.get("sensorStatePath")!==null){a.pushObject('<param name="sensorStatePath" value="'+this.get("sensorStatePath")+'" />')
}return a.join("")}.property("resourcePath"),jarUrls:["http://jnlp.concord.org/dev/org/concord/sensor/sensor-applets/sensor-applets.jar?version-id=0.1.0-20100601.160817-14","http://jnlp.concord.org/dev/org/concord/otrunk/otrunk.jar?version-id=0.2.0-20100519.081729-231","http://jnlp.concord.org/dev/org/concord/framework/framework.jar?version-id=0.1.0-20100518.155205-550","http://jnlp.concord.org/dev/org/concord/frameworkview/frameworkview.jar?version-id=0.1.0-20100518.160605-394","http://jnlp.concord.org/dev/org/concord/swing/swing.jar?version-id=0.1.0-20100518.155225-382","http://jnlp.concord.org/dev/jug/jug/jug.jar?version-id=1.1.2","http://jnlp.concord.org/dev/jdom/jdom/jdom.jar?version-id=1.0","http://jnlp.concord.org/dev/org/concord/apple-support/apple-support.jar?version-id=0.1.0-20100518.155355-314","http://jnlp.concord.org/dev/org/concord/utilities/response-cache/response-cache.jar?version-id=0.1.0-20100503.180141-215","http://jnlp.concord.org/dev/org/concord/sensor-native/sensor-native.jar?version-id=0.1.0-20100520.192620-460","http://jnlp.concord.org/dev/org/concord/sensor/sensor.jar?version-id=0.2.0-20100519.082617-265","http://jnlp.concord.org/dev/org/concord/data/data.jar?version-id=0.2.0-20100518.160532-268","http://jnlp.concord.org/dev/org/concord/external/rxtx/rxtx-comm/rxtx-comm.jar?version-id=2.1.7-r2"].join(", "),code:"org.concord.sensor.applet.OTSensorApplet",width:160,height:40,classNames:"sensor-applet",layout:{centerX:0,centerY:0,width:160,height:40},start:function(){this.set("sensorState","running");
if(this.get("isSafari")==NO||this.get("sensorStatePath")===null){this.run(function(a){a.startCollecting()
})}},stop:function(){this.set("sensorState","stopped");if(this.get("isSafari")==NO||this.get("sensorStatePath")===null){this.run(function(a){a.stopCollecting()
})}},reset:function(){this.set("sensorState","ready");if(this.get("isSafari")==NO||this.get("sensorStatePath")===null){this.run(function(a){a.stopCollecting()
})}}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("cc/cc")
}if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("cc")}window.Ki=window.Ki||SC.Object.create();
window.KI=window.KI||window.Ki;Ki.State=SC.Object.extend({name:null,parentState:null,historyState:null,initialSubstate:null,substatesAreConcurrent:NO,substates:null,statechart:null,stateIsInitialized:NO,currentSubstates:null,enteredSubstates:null,trace:function(){var a=this.getPath("statechart.statechartTraceKey");
return this.getPath("statechart.%@".fmt(a))}.property().cacheable(),owner:function(){var c=this.get("statechart"),b=c?c.get("statechartOwnerKey"):null,a=c?c.get(b):null;
return a?a:c}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);
this._registeredEventHandlers={};this._registeredStringEventHandlers={};this._registeredRegExpEventHandlers=[];
this._registeredStateObserveHandlers={};var b=this.get("statechart"),c=b?b.get("statechartOwnerKey"):null,a=b?b.get("statechartTraceKey"):null;
if(b){b.addObserver(c,this,"_statechartOwnerDidChange");b.addObserver(a,this,"_statechartTraceDidChange")
}},destroy:function(){var c=this.get("statechart"),d=c?c.get("statechartOwnerKey"):null,a=c?c.get("statechartTraceKey"):null;
if(c){c.removeObserver(d,this,"_statechartOwnerDidChange");c.removeObserver(a,this,"_statechartTraceDidChange")
}var b=this.get("substates");if(b){b.forEach(function(e){e.destroy()})}this._teardownAllStateObserveHandlers();
this.set("substates",null);this.set("currentSubstates",null);this.set("enteredSubstates",null);
this.set("parentState",null);this.set("historyState",null);this.set("initialSubstate",null);
this.set("statechart",null);this.notifyPropertyChange("trace");this.notifyPropertyChange("owner");
this._registeredEventHandlers=null;this._registeredStringEventHandlers=null;this._registeredRegExpEventHandlers=null;
this._registeredStateObserveHandlers=null;arguments.callee.base.apply(this,arguments)
},initState:function(){if(this.get("stateIsInitialized")){return}this._registerWithParentStates();
var l=null,k=null,b=null,m=[],j=NO,h=this.get("initialSubstate"),f=this.get("substatesAreConcurrent"),d=this.get("statechart"),c=0,g=0,e=NO,a=null;
if(SC.kindOf(h,Ki.HistoryState)&&h.isClass){a=this.createHistoryState(h,{parentState:this,statechart:d});
this.set("initialSubstate",a);if(SC.none(a.get("defaultState"))){this.stateLogError("Initial substate is invalid. History state requires the name of a default state to be set");
this.set("initialSubstate",null);a=null}}for(l in this){k=this[l];e=SC.typeOf(k)===SC.T_FUNCTION;
if(e&&k.isEventHandler){this._registerEventHandler(l,k);continue}if(e&&k.isStateObserveHandler){this._registerStateObserveHandler(l,k);
continue}if(e&&k.statePlugin){k=k.apply(this)}if(SC.kindOf(k,Ki.State)&&k.isClass&&this[l]!==this.constructor){b=this.createSubstate(k,{name:l,parentState:this,statechart:d});
m.push(b);this[l]=b;b.initState();if(l===h){this.set("initialSubstate",b);j=YES}else{if(a&&a.get("defaultState")===l){a.set("defaultState",b);
j=YES}}}}if(!SC.none(h)&&!j){this.stateLogError("Unable to set initial substate %@ since it did not match any of state's %@ substates".fmt(h,this))
}if(m.length===0){if(!SC.none(h)){this.stateLogWarning("Unable to make %@ an initial substate since state %@ has no substates".fmt(h,this))
}}else{if(m.length>0){if(SC.none(h)&&!f){b=this.createEmptyState({parentState:this,statechart:d});
this.set("initialSubstate",b);m.push(b);this[b.get("name")]=b;b.initState();this.stateLogWarning("state %@ has no initial substate defined. Will default to using an empty state as initial substate".fmt(this))
}else{if(!SC.none(h)&&f){this.set("initialSubstate",null);this.stateLogWarning("Can not use %@ as initial substate since substates are all concurrent for state %@".fmt(h,this))
}}}}this.set("substates",m);this.set("currentSubstates",[]);this.set("enteredSubstates",[]);
this.set("stateIsInitialized",YES)},createSubstate:function(b,a){return b.create(a)
},createHistoryState:function(b,a){return b.create(a)},createEmptyState:function(a){return Ki.EmptyState.create(a)
},_registerEventHandler:function(b,e){var d=e.events,f=null,a=d.length,c=0;this._registeredEventHandlers[b]=e;
for(;c<a;c+=1){f=d[c];if(SC.typeOf(f)===SC.T_STRING){this._registeredStringEventHandlers[f]={name:b,handler:e};
continue}if(f instanceof RegExp){this._registeredRegExpEventHandlers.push({name:b,handler:e,regexp:f});
continue}this.stateLogError("Invalid event %@ for event handler %@ in state %@".fmt(f,b,this))
}},_registerStateObserveHandler:function(d,f){var e=0,c=f.args,b=c.length,a,g=YES;
for(;e<b;e+=1){a=c[e];if(SC.typeOf(a)!==SC.T_STRING||SC.empty(a)){this.stateLogError("Invalid argument %@ for state observe handler %@ in state %@".fmt(a,d,this));
g=NO}}if(!g){return}this._registeredStateObserveHandlers[d]=f.args},_registerWithParentStates:function(){this._registerSubstate(this);
var a=this.get("parentState");while(!SC.none(a)){a._registerSubstate(this);a=a.get("parentState")
}},_registerSubstate:function(b){var c=b.pathRelativeTo(this);if(SC.none(c)){return
}if(SC.none(this._registeredSubstatePaths)){this._registeredSubstatePaths={};this._registeredSubstates=[]
}this._registeredSubstates.push(b);var a=this._registeredSubstatePaths;if(a[b.get("name")]===undefined){a[b.get("name")]={__ki_paths__:[]}
}var d=a[b.get("name")];d[c]=b;d.__ki_paths__.push(c)},pathRelativeTo:function(b){var c=this.get("name"),a=this.get("parentState");
while(!SC.none(a)&&a!==b){c="%@.%@".fmt(a.get("name"),c);a=a.get("parentState")}if(a!==b&&b!==this){this.stateLogError("Can not generate relative path from %@ since it not a parent state of %@".fmt(b,this));
return null}return c},getSubstate:function(c){var f=SC.typeOf(c);if(f===SC.T_OBJECT){return this._registeredSubstates.indexOf(c)>-1?c:null
}if(f!==SC.T_STRING){this.stateLogError("Can not find matching subtype. value must be an object or string: %@".fmt(c));
return null}var b=c.match(/(^|\.)(\w+)$/);if(!b){return null}var e=this._registeredSubstatePaths[b[2]];
if(SC.none(e)){return null}var a=e[c];if(!SC.none(a)){return a}if(b[1]===""){if(e.__ki_paths__.length===1){return e[e.__ki_paths__[0]]
}if(e.__ki_paths__.length>1){var d="Can not find substate matching %@ in state %@. Ambiguous with the following: %@";
this.stateLogError(d.fmt(c,this,e.__ki_paths__))}}return null},gotoState:function(b,a){var c=null;
if(this.get("isCurrentState")){c=this}else{if(this.get("hasCurrentSubstates")){c=this.get("currentSubstates")[0]
}}this.get("statechart").gotoState(b,c,a)},gotoHistoryState:function(c,a,b){var d=null;
if(this.get("isCurrentState")){d=this}else{if(this.get("hasCurrentSubstates")){d=this.get("currentSubstates")[0]
}}this.get("statechart").gotoHistoryState(c,d,a,b)},resumeGotoState:function(){this.get("statechart").resumeGotoState()
},stateIsCurrentSubstate:function(a){if(SC.typeOf(a)===SC.T_STRING){a=this.get("statechart").getState(a)
}var b=this.get("currentSubstates");return !!b&&b.indexOf(a)>=0},stateIsEnteredSubstate:function(b){if(SC.typeOf(b)===SC.T_STRING){b=this.get("statechart").getState(b)
}var a=this.get("enteredSubstates");return !!a&&a.indexOf(b)>=0},isRootState:function(){return this.getPath("statechart.rootState")===this
}.property(),isCurrentState:function(){return this.stateIsCurrentSubstate(this)}.property("currentSubstates").cacheable(),isConcurrentState:function(){return this.getPath("parentState.substatesAreConcurrent")
}.property(),isEnteredState:function(){return this.stateIsEnteredSubstate(this)}.property("enteredSubstates").cacheable(),hasSubstates:function(){return this.getPath("substates.length")>0
}.property("substates"),hasCurrentSubstates:function(){var a=this.get("currentSubstates");
return !!a&&a.get("length")>0}.property("currentSubstates").cacheable(),hasEnteredSubstates:function(){var a=this.get("enteredSubstates");
return !!a&&a.get("length")>0}.property("enteredSubstates").cacheable(),reenter:function(){var a=this.get("statechart");
if(this.get("isCurrentState")){a.gotoState(this)}else{SC.Logger.error("Can not re-enter state %@ since it is not a current state in the statechart".fmt(this))
}},tryToHandleEvent:function(f,c,b){var g=this.get("trace");if(this._registeredEventHandlers[f]){this.stateLogWarning("state %@ can not handle event %@ since it is a registered event handler".fmt(this,f));
return NO}if(this._registeredStateObserveHandlers[f]){this.stateLogWarning("state %@ can not handle event %@ since it is a registered state observe handler".fmt(this,f));
return NO}if(SC.typeOf(this[f])===SC.T_FUNCTION){if(g){this.stateLogTrace("will handle event %@".fmt(f))
}return(this[f](c,b)!==NO)}var e=this._registeredStringEventHandlers[f];if(e){if(g){this.stateLogTrace("%@ will handle event %@".fmt(e.name,f))
}return(e.handler.call(this,f,c,b)!==NO)}var a=this._registeredRegExpEventHandlers.length,d=0;
for(;d<a;d+=1){e=this._registeredRegExpEventHandlers[d];if(f.match(e.regexp)){if(g){this.stateLogTrace("%@ will handle event %@".fmt(e.name,f))
}return(e.handler.call(this,f,c,b)!==NO)}}if(SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION){if(g){this.stateLogTrace("unknownEvent will handle event %@".fmt(f))
}return(this.unknownEvent(f,c,b)!==NO)}return NO},enterState:function(a){},stateWillBecomeEntered:function(){},stateDidBecomeEntered:function(){this._setupAllStateObserveHandlers()
},exitState:function(a){},stateWillBecomeExited:function(){this._teardownAllStateObserveHandlers()
},stateDidBecomeExited:function(){},_setupAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("addObserver")
},_teardownAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("removeObserver")
},_configureAllStateObserveHandlers:function(b){var g,h,f,a,j,d,c,e;for(g in this._registeredStateObserveHandlers){h=this._registeredStateObserveHandlers[g];
for(c=0;c<h.length;c+=1){j=h[c];d=g;a=j.indexOf(".");if(a<0){this[b](j,this,d)}else{if(j.indexOf("*")===0){this[b](j.slice(1),this,d)
}else{e=null;if(a===0){e=this;j=j.slice(1)}else{if(a===4&&j.slice(0,5)==="this."){e=this;
j=j.slice(5)}else{if(a<0&&j.length===4&&j==="this"){e=this;j=""}}}SC.Observers[b](j,this,d,e)
}}}}},performAsync:function(c,b,a){return Ki.Async.perform(c,b,a)},respondsToEvent:function(d){if(this._registeredEventHandlers[d]){return false
}if(SC.typeOf(this[d])===SC.T_FUNCTION){return true}if(this._registeredStringEventHandlers[d]){return true
}if(this._registeredStateObserveHandlers[d]){return false}var a=this._registeredRegExpEventHandlers.length,b=0,c;
for(;b<a;b+=1){c=this._registeredRegExpEventHandlers[b];if(d.match(c.regexp)){return true
}}return SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION},fullPath:function(){var a=this.getPath("statechart.rootState");
if(!a){return this.get("name")}return this.pathRelativeTo(a)}.property("name","parentState").cacheable(),toString:function(){var a=SC._object_className(this.constructor);
return"%@<%@, %@>".fmt(a,this.get("fullPath"),SC.guidFor(this))},_statechartTraceDidChange:function(){this.notifyPropertyChange("trace")
},_statechartOwnerDidChange:function(){this.notifyPropertyChange("owner")},stateLogTrace:function(b){var a=this.get("statechart");
a.statechartLogTrace("%@: %@".fmt(this,b))},stateLogWarning:function(b){var a=this.get("statechart");
a.statechartLogWarning(b)},stateLogError:function(b){var a=this.get("statechart");
a.statechartLogError(b)}});Ki.State.plugin=function(c){var a=SC.A(arguments);a.shift();
var b=function(){var d=SC.objectForPropertyPath(c);return d.extend.apply(d,a)};b.statePlugin=YES;
return b};Ki.State.design=Ki.State.extend;Function.prototype.handleEvents=function(){this.isEventHandler=YES;
this.events=arguments;return this};Function.prototype.stateObserves=function(){this.isStateObserveHandler=YES;
this.args=SC.A(arguments);return this};Ki.HistoryState=SC.Object.extend({isRecursive:NO,defaultState:null,statechart:null,parentState:null,state:function(){var b=this.get("defaultState"),a=this.getPath("parentState.historyState");
return !!a?a:b}.property().cacheable(),parentHistoryStateDidChange:function(){this.notifyPropertyChange("state")
}.observes("*parentState.historyState")});Ki.EMPTY_STATE_NAME="__EMPTY_STATE__";Ki.EmptyState=Ki.State.extend({name:Ki.EMPTY_STATE_NAME,enterState:function(){this.stateLogWarning("No initial substate was defined for state %@. Entering default empty state".fmt(this.get("parentState")))
}});sc_require("system/state");Ki.StatechartManager={isResponderContext:YES,isStatechart:YES,statechartIsInitialized:NO,rootState:null,rootStateExample:Ki.State,initialState:null,statesAreConcurrent:NO,monitorIsActive:NO,monitor:null,statechartTraceKey:"trace",trace:NO,statechartOwnerKey:"owner",owner:null,autoInitStatechart:YES,suppressStatechartWarnings:NO,initMixin:function(){if(this.get("autoInitStatechart")){this.initStatechart()
}},destroyMixin:function(){var b=this.get("rootState"),a=this.get("statechartTraceKey");
this.removeObserver(a,this,"_statechartTraceDidChange");b.destroy();this.set("rootState",null)
},initStatechart:function(){if(this.get("statechartIsInitialized")){return}this._gotoStateLocked=NO;
this._sendEventLocked=NO;this._pendingStateTransitions=[];this._pendingSentEvents=[];
this.sendAction=this.sendEvent;if(this.get("monitorIsActive")){this.set("monitor",Ki.StatechartMonitor.create({statechart:this}))
}var a=this.get("statechartTraceKey");this.addObserver(a,this,"_statechartTraceDidChange");
this._statechartTraceDidChange();var d=this.get("allowStatechartTracing"),c=this.get("rootState"),e;
if(d){this.statechartLogTrace("BEGIN initialize statechart")}if(!c){c=this._constructRootStateClass()
}else{if(SC.typeOf(c)===SC.T_FUNCTION&&c.statePlugin){c=c.apply(this)}}if(!(SC.kindOf(c,Ki.State)&&c.isClass)){e="Unable to initialize statechart. Root state must be a state class";
this.statechartLogError(e);throw e}c=this.createRootState(c,{statechart:this,name:Ki.ROOT_STATE_NAME});
this.set("rootState",c);c.initState();if(SC.kindOf(c.get("initialSubstate"),Ki.EmptyState)){e="Unable to initialize statechart. Root state must have an initial substate explicilty defined";
this.statechartLogError(e);throw e}if(!SC.empty(this.get("initialState"))){var b="initialState";
this.set(b,c.get(this.get(b)))}this.set("statechartIsInitialized",YES);this.gotoState(c);
if(d){this.statechartLogTrace("END initialize statechart")}},createRootState:function(b,a){if(!a){a={}
}b=b.create(a);return b},currentStates:function(){return this.getPath("rootState.currentSubstates")
}.property().cacheable(),firstCurrentState:function(){var a=this.get("currentStates");
return a?a.objectAt(0):null}.property("currentStates").cacheable(),currentStateCount:function(){return this.getPath("currentStates.length")
}.property("currentStates").cacheable(),stateIsCurrentState:function(a){return this.get("rootState").stateIsCurrentSubstate(a)
},enteredStates:function(){return this.getPath("rootState.enteredSubstates")}.property().cacheable(),stateIsEntered:function(a){return this.get("rootState").stateIsEnteredSubstate(a)
},doesContainState:function(a){return !SC.none(this.getState(a))},getState:function(a){return this.get("rootState").getSubstate(a)
},gotoState:function(b,k,l,c){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@. statechart has not yet been initialized".fmt(b));
return}if(this.get("isDestroyed")){this.statechartLogError("can not go to state %@. statechart is destroyed".fmt(this));
return}var i=this._processGotoStateArgs(arguments);b=i.state;k=i.fromCurrentState;
l=i.useHistory;c=i.context;var n=null,j=[],m=[],f=this.get("allowStatechartTracing"),a=this.get("rootState"),h=b,e=k;
b=a.getSubstate(b);if(SC.none(b)){this.statechartLogError("Can not to goto state %@. Not a recognized state in statechart".fmt(h));
return}if(this._gotoStateLocked){this._pendingStateTransitions.push({state:b,fromCurrentState:k,useHistory:l,context:c});
return}this._gotoStateLocked=YES;if(!SC.none(k)){k=a.getSubstate(k);if(SC.none(k)||!k.get("isCurrentState")){var d="Can not to goto state %@. %@ is not a recognized current state in statechart";
this.statechartLogError(d.fmt(h,e));this._gotoStateLocked=NO;return}}else{if(this.getPath("currentStates.length")>0){k=this.get("currentStates")[0]
}}if(f){this.statechartLogTrace("BEGIN gotoState: %@".fmt(b));this.statechartLogTrace("starting from current state: %@".fmt(k));
this.statechartLogTrace("current states before: %@".fmt(this.get("currentStates")))
}if(!SC.none(k)){j=this._createStateChain(k)}m=this._createStateChain(b);n=this._findPivotState(j,m);
if(n){if(f){this.statechartLogTrace("pivot state = %@".fmt(n))}if(n.get("substatesAreConcurrent")){this.statechartLogError("Can not go to state %@ from %@. Pivot state %@ has concurrent substates.".fmt(b,k,n));
this._gotoStateLocked=NO;return}}var g=[];this._traverseStatesToExit(j.shift(),j,n,g);
if(n!==b){this._traverseStatesToEnter(m.pop(),m,n,l,g)}else{this._traverseStatesToExit(n,[],null,g);
this._traverseStatesToEnter(n,null,null,l,g)}this._executeGotoStateActions(b,g,null,c)
},gotoStateActive:function(){return this._gotoStateLocked}.property(),gotoStateSuspended:function(){return this._gotoStateLocked&&!!this._gotoStateSuspendedPoint
}.property(),resumeGotoState:function(){if(!this.get("gotoStateSuspended")){this.statechartLogError("Can not resume goto state since it has not been suspended");
return}var a=this._gotoStateSuspendedPoint;this._executeGotoStateActions(a.gotoState,a.actions,a.marker,a.context)
},_executeGotoStateActions:function(g,f,b,c){var e=null,a=f.length,d=null;b=SC.none(b)?0:b;
for(;b<a;b+=1){e=f[b];switch(e.action){case Ki.EXIT_STATE:d=this._exitState(e.state,c);
break;case Ki.ENTER_STATE:d=this._enterState(e.state,e.currentState,c);break}if(SC.kindOf(d,Ki.Async)){this._gotoStateSuspendedPoint={gotoState:g,actions:f,marker:b+1,context:c};
d.tryToPerform(e.state);return}}this.beginPropertyChanges();this.notifyPropertyChange("currentStates");
this.notifyPropertyChange("enteredStates");this.endPropertyChanges();if(this.get("allowStatechartTracing")){this.statechartLogTrace("current states after: %@".fmt(this.get("currentStates")));
this.statechartLogTrace("END gotoState: %@".fmt(g))}this._gotoStateSuspendedPoint=null;
this._gotoStateLocked=NO;this._flushPendingStateTransition()},_exitState:function(d,b){var c;
if(d.get("currentSubstates").indexOf(d)>=0){c=d.get("parentState");while(c){c.get("currentSubstates").removeObject(d);
c=c.get("parentState")}}c=d;while(c){c.get("enteredSubstates").removeObject(d);c=c.get("parentState")
}if(this.get("allowStatechartTracing")){this.statechartLogTrace("exiting state: %@".fmt(d))
}d.set("currentSubstates",[]);d.notifyPropertyChange("isCurrentState");d.stateWillBecomeExited();
var a=this.exitState(d,b);d.stateDidBecomeExited();if(this.get("monitorIsActive")){this.get("monitor").pushExitedState(d)
}d._traverseStatesToExit_skipState=NO;return a},exitState:function(b,a){return b.exitState(a)
},_enterState:function(d,e,b){var c=d.get("parentState");if(c&&!d.get("isConcurrentState")){c.set("historyState",d)
}if(e){c=d;while(c){c.get("currentSubstates").pushObject(d);c=c.get("parentState")
}}c=d;while(c){c.get("enteredSubstates").pushObject(d);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("entering state: %@".fmt(d))
}d.notifyPropertyChange("isCurrentState");d.stateWillBecomeEntered();var a=this.enterState(d,b);
d.stateDidBecomeEntered();if(this.get("monitorIsActive")){this.get("monitor").pushEnteredState(d)
}return a},enterState:function(b,a){return b.enterState(a)},gotoHistoryState:function(f,e,c,d){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@'s history state. Statechart has not yet been initialized".fmt(f));
return}var b=this._processGotoStateArgs(arguments);f=b.state;e=b.fromCurrentState;
c=b.useHistory;d=b.context;f=this.getState(f);if(!f){this.statechartLogError("Can not to goto state %@'s history state. Not a recognized state in statechart".fmt(f));
return}var a=f.get("historyState");if(!c){if(a){this.gotoState(a,e,d)}else{this.gotoState(f,e,d)
}}else{this.gotoState(f,e,YES,d)}},sendEvent:function(b,g,f){if(this.get("isDestroyed")){this.statechartLogError("can send event %@. statechart is destroyed".fmt(b));
return}var c=NO,k=NO,h=this.get("currentStates").slice(),j=0,e=0,a=null,d=this.get("allowStatechartTracing");
if(this._sendEventLocked||this._goStateLocked){this._pendingSentEvents.push({event:b,arg1:g,arg2:f});
return}this._sendEventLocked=YES;if(d){this.statechartLogTrace("BEGIN sendEvent: event<%@>".fmt(b))
}j=h.get("length");for(;e<j;e+=1){k=NO;a=h[e];if(!a.get("isCurrentState")){continue
}while(!k&&a){k=a.tryToHandleEvent(b,g,f);if(!k){a=a.get("parentState")}else{c=YES
}}}this._sendEventLocked=NO;if(d){if(!c){this.statechartLogTrace("No state was able handle event %@".fmt(b))
}this.statechartLogTrace("END sendEvent: event<%@>".fmt(b))}var l=this._flushPendingSentEvents();
return c?this:(l?this:null)},_createStateChain:function(b){var a=[];while(b){a.push(b);
b=b.get("parentState")}return a},_findPivotState:function(c,b){if(c.length===0||b.length===0){return null
}var a=c.find(function(e,d){if(b.indexOf(e)>=0){return YES}});return a},_traverseStatesToExit:function(b,k,d,h){if(!b||b===d){return
}var e=this.get("allowStatechartTracing");if(b.get("substatesAreConcurrent")){var f=0,g=b.get("currentSubstates"),j=g.length,c=null;
for(;f<j;f+=1){c=g[f];if(c._traverseStatesToExit_skipState===YES){continue}var a=this._createStateChain(c);
this._traverseStatesToExit(a.shift(),a,b,h)}}h.push({action:Ki.EXIT_STATE,state:b});
if(b.get("isCurrentState")){b._traverseStatesToExit_skipState=YES}this._traverseStatesToExit(k.shift(),k,d,h)
},_traverseStatesToEnter:function(b,e,i,g,d){if(!b){return}var c=this.get("allowStatechartTracing");
if(i){if(b!==i){this._traverseStatesToEnter(e.pop(),e,i,g,d)}else{this._traverseStatesToEnter(e.pop(),e,null,g,d)
}}else{if(!e||e.length===0){var h={action:Ki.ENTER_STATE,state:b,currentState:NO};
d.push(h);var f=b.get("initialSubstate"),a=b.get("historyState");if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),null,g,d)
}else{if(b.get("hasSubstates")&&a&&g){this._traverseStatesToEnter(a,null,null,g,d)
}else{if(f){if(SC.kindOf(f,Ki.HistoryState)){if(!g){g=f.get("isRecursive")}f=f.get("state")
}this._traverseStatesToEnter(f,null,null,g,d)}else{h.currentState=YES}}}}else{if(e.length>0){d.push({action:Ki.ENTER_STATE,state:b});
var j=e.pop();this._traverseStatesToEnter(j,e,null,g,d);if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),j,g,d)
}}}}},respondsTo:function(d){var b=this.get("currentStates"),a=b.get("length"),c=0,e=null;
for(;c<a;c+=1){e=b.objectAt(c);while(e){if(e.respondsToEvent(d)){return true}e=e.get("parentState")
}}return SC.typeOf(this[d])===SC.T_FUNCTION},tryToPerform:function(c,b,a){if(this.respondsTo(c)){if(SC.typeOf(this[c])===SC.T_FUNCTION){return(this[c](b,a)!==NO)
}else{return !!this.sendEvent(c,b,a)}}return NO},invokeStateMethod:function(k,j,c){if(k==="unknownEvent"){this.statechartLogError("can not invoke method unkownEvent");
return}j=SC.A(arguments);j.shift();var f=j.length,m=f>0?j[f-1]:null,l=SC.typeOf(m)===SC.T_FUNCTION?j.pop():null,e=this.get("currentStates"),d=0,b=null,h={},a,n=undefined,g=0;
f=e.get("length");for(;d<f;d+=1){b=e.objectAt(d);while(b){if(h[b.get("fullPath")]){break
}h[b.get("fullPath")]=YES;a=b[k];if(SC.typeOf(a)===SC.T_FUNCTION&&!a.isEventHandler){n=a.apply(b,j);
if(l){l.call(this,b,n)}g+=1;break}b=b.get("parentState")}}return g===1?n:undefined
},_traverseConcurrentStatesToEnter:function(d,c,f,b){var e=0,a=d.length,g=null;for(;
e<a;e+=1){g=d[e];if(g!==c){this._traverseStatesToEnter(g,null,null,f,b)}}},_flushPendingStateTransition:function(){if(!this._pendingStateTransitions){this.statechartLogError("Unable to flush pending state transition. _pendingStateTransitions is invalid");
return}var a=this._pendingStateTransitions.shift();if(!a){return}this.gotoState(a.state,a.fromCurrentState,a.useHistory,a.context)
},_flushPendingSentEvents:function(){var a=this._pendingSentEvents.shift();if(!a){return null
}return this.sendEvent(a.event,a.arg1,a.arg2)},_monitorIsActiveDidChange:function(){if(this.get("monitorIsActive")&&SC.none(this.get("monitor"))){this.set("monitor",Ki.StatechartMonitor.create())
}}.observes("monitorIsActive"),_processGotoStateArgs:function(b){var d={state:null,fromCurrentState:null,useHistory:false,context:null},a=null,c=null;
b=SC.$A(b);b=b.filter(function(e){return !(e===undefined)});a=b.length;if(a<1){return d
}d.state=b[0];if(a===2){c=b[1];switch(SC.typeOf(c)){case SC.T_BOOL:d.useHistory=c;
break;case SC.T_HASH:d.context=c;break;default:d.fromCurrentState=c}}else{if(a===3){c=b[1];
if(SC.typeOf(c)===SC.T_BOOL){d.useHistory=c;d.context=b[2]}else{d.fromCurrentState=c;
c=b[2];if(SC.typeOf(c)===SC.T_BOOL){d.useHistory=c}else{d.context=c}}}else{d.fromCurrentState=b[1];
d.useHistory=b[2];d.context=b[3]}}return d},_constructRootStateClass:function(){var d="rootStateExample",e=this.get(d),b=this.get("initialState"),c=this.get("statesAreConcurrent"),a=0,i,g,f,h={};
if(SC.typeOf(e)===SC.T_FUNCTION&&e.statePlugin){e=e.apply(this)}if(!(SC.kindOf(e,Ki.State)&&e.isClass)){this._logStatechartCreationError("Invalid root state example");
return null}if(c&&!SC.empty(b)){this._logStatechartCreationError("Can not assign an initial state when states are concurrent")
}else{if(c){h.substatesAreConcurrent=YES}else{if(SC.typeOf(b)===SC.T_STRING){h.initialSubstate=b
}else{this._logStatechartCreationError("Must either define initial state or assign states as concurrent");
return null}}}for(i in this){if(i===d){continue}g=this[i];f=SC.typeOf(g)===SC.T_FUNCTION;
if(f&&g.statePlugin){g=g.apply(this)}if(SC.kindOf(g,Ki.State)&&g.isClass&&this[i]!==this.constructor){h[i]=g;
a+=1}}if(a===0){this._logStatechartCreationError("Must define one or more states");
return null}return e.extend(h)},_logStatechartCreationError:function(a){SC.Logger.error("Unable to create statechart for %@: %@.".fmt(this,a))
},statechartLogTrace:function(a){SC.Logger.info("%@: %@".fmt(this.get("statechartLogPrefix"),a))
},statechartLogError:function(a){SC.Logger.error("ERROR %@: %@".fmt(this.get("statechartLogPrefix"),a))
},statechartLogWarning:function(a){if(this.get("suppressStatechartWarnings")){return
}SC.Logger.warn("WARN %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogPrefix:function(){var b=SC._object_className(this.constructor),a=this.get("name"),c;
if(SC.empty(a)){c="%@<%@>".fmt(b,SC.guidFor(this))}else{c="%@<%@, %@>".fmt(b,a,SC.guidFor(this))
}return c}.property().cacheable(),allowStatechartTracing:function(){var a=this.get("statechartTraceKey");
return this.get(a)}.property().cacheable(),_statechartTraceDidChange:function(){this.notifyPropertyChange("allowStatechartTracing")
}};Ki.ROOT_STATE_NAME="__ROOT_STATE__";Ki.EXIT_STATE=0;Ki.ENTER_STATE=1;Ki.Statechart=SC.Object.extend(Ki.StatechartManager,{autoInitStatechart:NO});
Ki.Statechart.design=Ki.Statechart.extend;Ki.Async=SC.Object.extend({func:null,arg1:null,arg2:null,tryToPerform:function(d){var c=this.get("func"),b=this.get("arg1"),a=this.get("arg2"),e=SC.typeOf(c);
if(e===SC.T_STRING){d.tryToPerform(c,b,a)}else{if(e===SC.T_FUNCTION){c.apply(d,[b,a])
}}}});Ki.Async.mixin({perform:function(c,b,a){return Ki.Async.create({func:c,arg1:b,arg2:a})
}});if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("ki/foundation");
/* @license
==========================================================================
Ki -- A Statechart Framework for Sproutcore
copyright 2010, 2011 Michael Cohen, and contributors. All rights reserved.

Some portions of the Ki framework were derived from the statechart
framework in SproutCore whose original authors consist of Michael Ball,
Evin Grano and Michael Cohen.

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.

For more information about SproutCore, visit http://github.com/FrozenCanuck/Ki

==========================================================================
@license */
}if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("ki")
}SC.Page=SC.Page.extend({init:function(){arguments.callee.base.apply(this,arguments);
var a=SC.Page.instances;if(!a){a=SC.Page.instances=[]}a.push(this)}});SC.XHRResponse.prototype.invokeTransport=function(){var d,g,b,c,f;
function e(){for(var h=0;h<arguments.length;h++){try{var j=arguments[h]();return j
}catch(k){}}return NO}d=e(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")
},function(){return new ActiveXObject("Microsoft.XMLHTTP")});if("withCredentials" in d){d.withCredentials=true
}this.set("rawRequest",d);c=!!this.getPath("request.isAsynchronous");if(c){if(!SC.browser.msie&&!SC.browser.opera){SC.Event.add(d,"readystatechange",this,this.finishRequest,d)
}else{g=this;b=function(){if(!g){return null}var h=g.finishRequest();if(h){g=null
}return h};d.onreadystatechange=b}}d.open(this.get("type"),this.get("address"),c);
f=this.getPath("request.headers");for(var a in f){d.setRequestHeader(a,f[a])}d.send(this.getPath("request.encodedBody"));
if(!c){this.finishRequest()}return d};Geniverse=SC.Application.create({NAMESPACE:"Geniverse",VERSION:"0.1.0",store:SC.Store.create().from("Geniverse.RailsDataSource"),userDefaults:SC.UserDefaults.create({appDomain:"Geniverse"}),railsBackedTypes:[],NEVER_SAVE_MATCH_DRAGONS:YES,isLoaded:NO});
Geniverse.NO_DRAGON=SC.Object.create({imageURL:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/question-mark.png",alleles:""});
Geniverse.doWhenReady=function(b,a,c){Geniverse.doWhen(b,a,c,SC.Record.READY)};Geniverse.doWhenReadyClean=function(b,a,c){Geniverse.doWhen(b,a,c,SC.Record.READY_CLEAN)
};Geniverse.doWhen=function(d,b,g,f){var a=d;var c=this;var e=function(){var h=b.get("status");
if(h&f){b.removeObserver("status",c,e);g.call(d)}else{b.addObserver("status",c,e)
}};e()};(function(){var b=function(e){var d=document.createElement("a");d.href=e;
return d};if(typeof(Geniverse.resourcesBase)=="undefined"){if(typeof(window.CC_RESOURCES_BASE)!=="undefined"){Geniverse.resourcesBase=window.CC_RESOURCES_BASE
}else{Geniverse.resourcesBase="http://resources.geniverse.dev.concord.org"}}if(typeof(Geniverse.portalBase)=="undefined"){if(typeof(window.CC_PORTAL_BASE)!=="undefined"){Geniverse.portalBase=window.CC_PORTAL_BASE
}else{Geniverse.portalBase="/portal"}}if(typeof(Geniverse.railsBackendBase)=="undefined"){if(typeof(window.CC_RAILS_BACKEND_BASE)!=="undefined"){Geniverse.railsBackendBase=window.CC_RAILS_BACKEND_BASE;
var a=b(Geniverse.railsBackendBase),c="";if(a.hostname){if(a.protocol){c+=a.protocol
}else{c+=window.location.protocol}c+="//"+a.hostname}Geniverse.railsBackendHostOnly=c
}else{Geniverse.railsBackendBase="/rails";Geniverse.railsBackendHostOnly=""}}})();
Geniverse.resourceURL=function(a){return Geniverse.resourcesBase+a};Geniverse.activityController=SC.ObjectController.create({activity:null,activityTitle:null,caseTitle:function(){var a=this.get("title");
if(!!a&&a.search(/:/)!=-1){return a.replace(/:.*/,":")}return""}.property("*content.title"),actTitle:function(){var a=this.get("title");
if(!!a){if(a.search(/:/)!=-1){return a.replace(/.*?:\s+/,"")}else{return a}}return""
}.property("*content.title"),startActivity:function(){if(Geniverse.ENABLE_CHAT){var a=CcChat.chatRoomController.get("channel");
if(this.get("sendBredDragons")){CcChat.chatController.subscribeToChannel(a+"/org",this.receiveDragon)
}}},initCase:function(){var a=this.get("myCase");if(!!a){var b=function(){a.removeObserver("status",this,b);
Geniverse.introScreenController.set("imageUrl",a.get("introImageUrl"))};if(a.get("status")&SC.Record.READY){b()
}else{a.addObserver("status",this,b)}}else{Geniverse.introScreenController.set("imageUrl",null)
}}.observes("*content"),getConfigurationAsArray:function(isMatchingDragons){var initialAlleles=isMatchingDragons?this.get("matchDragonAlleles"):this.get("initialAlleles");
var initialAllelesAsArray=eval(initialAlleles);return initialAllelesAsArray},getConfigurationForRoom:function(d,e){var a=this.getConfigurationAsArray(e);
if(!a){return[]}var c=a.length;if(c===undefined||c<1){return[]}var b=d%c;var f=a[b];
if(f===undefined||f===null){return[]}return f},getConfigurationForRoomMember:function(b,f,c){var e=Geniverse.activityController.getConfigurationForRoom(b,c);
if(!e||e.length<1){SC.Logger.info("No room config for room",b);return[]}var a=e;if(!!a[0].alleles){SC.Logger.warn("Room Configuration only has one set of starter Alleles in it..");
return e}var d=f%a.length;return a[d]},getActivityList:function(){var a=this.get("myCase");
if(a){return a.get("activities")}else{return[]}},getNextActivity:function(){var a=this.getActivityList();
if(a.get("length")<2){return null}var c=a.get("length");for(var b=0;b<(c-1);b++){if(a.objectAt(b)==this.get("content")){return a.objectAt(b+1)
}}return null},getPreviousActivity:function(){var a=this.getActivityList();if(a.get("length")<2){return null
}var c=a.get("length");for(var b=1;b<c;b++){if(a.objectAt(b)==this.get("content")){return a.objectAt(b-1)
}}return null},hiddenGenes:function(){return this.getHiddenOrStaticGenes("hiddenGenes")
}.property("*content").cacheable(),staticGenes:function(){return this.getHiddenOrStaticGenes("staticGenes")
}.property("*content").cacheable(),getHiddenOrStaticGenes:function(property,sex){var activity=this.get("content");
if(!!activity){var genes="";var rawGenes=activity.get(property);if(!!rawGenes){var genesHash=eval("("+rawGenes+")");
if(sex===0){genes=genesHash.male}else{if(sex===1){genes=genesHash.female}}if(!genes){genes=genesHash.all
}}if(!!genes){genes=genes.split(/,[ ]*/);var extras=[];for(var i in genes){if(genes[i]==="a"){extras.push("a1","a2")
}else{if(genes[i]==="d"){extras.push("dl")}else{if(genes[i]==="m"){extras.push("mt")
}}}}for(var j in extras){if(SC.typeOf(extras[j])===SC.T_STRING){genes.push(extras[j])
}}return genes}else{return[]}}else{return[]}},initStars:function(){var a=this.get("thresholdTwoStars");
var b=this.get("thresholdThreeStars");if(typeof a=="number"){Geniverse.scoringController.set("twoStarThreshold",a)
}else{Geniverse.scoringController.set("twoStarThreshold",1)}if(typeof b=="number"){Geniverse.scoringController.set("threeStarThreshold",b)
}else{Geniverse.scoringController.set("threeStarThreshold",0)}Geniverse.scoringController.set("minimumScore",0)
}.observes("*content"),startNewSession:function(){this.set("currentSession",Math.floor(Math.random()*100000))
},pageContainsApplet:function(){return $("applet").length>0}.property(),iframeLayerToAppend:function(){var a=this.get("pageType");
return Lab[a].mainPane.mainAppView}.property()});Geniverse.allBredOrganismsController=SC.ArrayController.create(SC.CollectionViewDelegate,{collectionViewDeleteContent:function(a,e,d){var c=d.map(function(f){return this.objectAt(f)
},this);c.invoke("destroy");var b=d.get("min")-1;if(b<0){b=0}this.selectObject(this.objectAt(b))
}});Geniverse.allSelectedDragonsController=SC.ArrayController.create(SC.CollectionViewDelegate,{});
Geniverse.appController=SC.ObjectController.create({userLoggedIn:NO,loginView:null,mainPane:null,containerView:null,mainAppView:null});
Geniverse.articleController=SC.ObjectController.create({article:null,isStaticVisible:YES,isEditingVisible:NO,isDraftDirty:NO,isDraftChanged:NO,loadTimer:null,articleDraftChannel:null,articlePublishingChannel:null,claimValue:"<i>Write your thoughts here.</i>",evidenceValue:"",reasoningValue:"",combinedArticle:function(){var c=this._htmlize(this.get("claimValue"));
var b=this._htmlize(this.get("evidenceValue"));var a=this._htmlize(this.get("reasoningValue"));
if(c!==null&&c.length>0){c="<div class='claim'>"+c+"</div>"}if(b!==null&&b.length>0){b="<div class='evidence'>"+b+"</div>"
}if(a!==null&&a.length>0){a="<div class='reasoning'>"+a+"</div>"}var d="<div id='article'>"+c+b+a+"</div>";
return d}.property("claimValue","evidenceValue","reasoningValue").cacheable(),currentArticle:null,publishedArticle:null,nowShowing:"Geniverse.yourArticleView",started:NO,initArticle:function(){var a=this.get("content");
if(!this.get("started")&&!!a&&a.get("length")>0){var b=a.lastObject();this.set("article",b);
if(!!b.get("text")){this.setClaimAndEvidence(b.get("text"))}Geniverse.articleController.set("isDraftDirty",NO);
Geniverse.articleController.set("isDraftChanged",(b!==Geniverse.articleController.get("publishedArticle")));
this.set("started",YES)}else{if(!this.get("started")){this.set("claimValue","<i>Write your thoughts here.</i>");
this.set("evidenceValue","");this.set("reasoningValue","");this.set("started",YES)
}}}.observes("content"),newPaperAction:function(){var a=Geniverse.userController.get("content");
var b=Geniverse.store.createRecord(Geniverse.Article,{group:a.get("groupId"),activity:Geniverse.activityController.getPath("content.id")});
SC.RunLoop.begin();this.set("article",b);this.set("claimValue","<i>Write your thoughts here.</i>");
this.set("evidenceValue","");this.set("reasoningValue","");SC.RunLoop.end();this.editAction()
},editAction:function(){var a=this.get("combinedArticle");SC.Logger.log("editing, comb = "+a);
this.set("combinedArticle",a);this.set("currentArticle",a);this.setClaimAndEvidence(a);
this.set("isStaticVisible",NO);this.set("isEditingVisible",YES)},setClaimAndEvidence:function(f){var e=/<div class='claim'>(.*?)<\/div>/;
var d=f.match(e);var c=d!==null?d[1]:"";e=/<div class='evidence'>(.*?)<\/div>/;d=f.match(e);
var b=d!==null?d[1]:"";e=/<div class='reasoning'>(.*?)<\/div>/;d=f.match(e);var a=d!==null?d[1]:"";
this.set("claimValue",this._stringize(c));this.set("evidenceValue",this._stringize(b));
this.set("reasoningValue",this._stringize(a))},previewDraftAction:function(){var a=this.get("combinedArticle");
var b=true;if(b){this.set("isDraftDirty",YES)}var c=this._htmlize(a);this.set("isDraftChanged",(YES||c!==this.get("publishedArticle")));
this.set("combinedArticle",c);this.set("isStaticVisible",YES);this.set("isEditingVisible",NO)
},sendDraftAction:function(i){var d=Geniverse.userController.get("content");var a=this._htmlize(this.get("combinedArticle"));
var b=new Date().getTime();var g=this.get("article");if(!g){g=Geniverse.store.createRecord(Geniverse.Article,{group:d.get("groupId"),activity:Geniverse.activityController.getPath("content.id")});
this.set("article",g)}g.set("text",a);g.set("time",b);g.set("submitted",NO);g.set("accepted",NO);
Geniverse.store.commitRecords();var h=this.get("articleDraftChannel");SC.Logger.log("Article Draft Channel = "+h);
if(h!==null){var e=CcChat.chatController.get("username");var j={article:a,author:e};
CcChat.chatController.post(h,j);var c=CcChat.chatRoomController.get("channel");var f={message:"<i>"+e+" has just updated the draft paper.</i>"};
CcChat.chatController.post(c,f)}},publishAction:function(){var a=Geniverse.userController.get("content");
var d=this._htmlize(this.get("combinedArticle"));var b=new Date().getTime();var f=this.get("article");
if(!f){f=Geniverse.store.createRecord(Geniverse.Article,{group:a.get("groupId"),activity:Geniverse.activityController.getPath("content.id")});
this.set("article",f)}f.set("text",d);f.set("time",b);f.set("submitted",YES);f.set("accepted",YES);
Geniverse.store.commitRecords();var c=this.get("articlePublishingChannel");if(c!==null){var g="Group "+a.get("groupId");
var e={article:d,author:g,group:a.get("groupId")};CcChat.chatController.post(c,e);
this.set("publishedArticle",d)}},_subscribeToArticleChannels:function(){if(CcChat.chatController.chatHasInitialized&&CcChat.chatRoomController.get("channel").length>0){var a=CcChat.chatRoomController.get("channel")+"/articles";
this.set("articleDraftChannel",a);CcChat.chatController.subscribeToChannel(a,this.receiveDraftArticle,this)
}}.observes("CcChat.chatRoomController.channel"),receiveDraftArticle:function(a){var b=a.article;
Geniverse.articleController.setClaimAndEvidence(b);Geniverse.articleController.set("isDraftDirty",NO);
Geniverse.articleController.set("isDraftChanged",(b!==Geniverse.articleController.get("publishedArticle")))
},_htmlize:function(a){if(!a){return""}a=a.replace(/\n/g,"<br>");return a},_stringize:function(a){if(!a){return""
}a=a.replace(/<br>/g,"\n");return a}});Array.prototype.compareArrays=function(a){if(this.length!=a.length){return false
}for(var b=0;b<a.length;b++){if(this[b].compareArrays){if(!this[b].compareArrays(a[b])){return false
}else{continue}}if(this[b]!=a[b]){return false}}return true};Geniverse.SimpleButton={target:null,action:null,hasState:NO,hasHover:NO,inState:NO,_hover:NO,stateClass:"state",hoverClass:"hover",activeClass:"active",alwaysEnableToolTip:NO,_isMouseDown:NO,_isContinuedMouseDown:NO,_canFireAction:NO,displayProperties:["inState","isEnabled"],mouseDown:function(a){if(!this.get("isEnabledInPane")){return YES
}this._isMouseDown=this._isContinuedMouseDown=this._canFireAction=YES;this.displayDidChange();
return YES},mouseExited:function(a){if(this.get("hasHover")){this._hover=NO}if(this._isMouseDown){this._isMouseDown=NO;
this._canFireAction=NO}this.displayDidChange();return YES},mouseEntered:function(a){if(this.get("hasHover")){this._hover=YES
}if(this._isContinuedMouseDown){this._isMouseDown=YES;this._canFireAction=YES}this.displayDidChange();
return YES},mouseUp:function(a){this._isMouseDown=this._isContinuedMouseDown=false;
if(!this.get("isEnabledInPane")){return YES}var e=this.get("target")||null;var c=this.get("action");
if(this._canFireAction){if(this._hasLegacyActionHandler()){this._triggerLegacyActionHandler(a)
}else{var b=this.getPath("pane.rootResponder");var d=this.get("pane");if(b){b.sendAction(c,e,this,d)
}else{b=SC.RootResponder.responder;SC.Logger.warn("Resorted to using _rootResponder = SC.RootResponder.responder:",b);
if(b){b.sendAction(c,e,this,d)}else{SC.Logger.error("Both pane.rootResponder and SC.RootResponder.responder were undefined for pane ",d)
}}}}if(this.get("hasState")){this.set("inState",!this.get("inState"))}this._canFireAction=false;
this.displayDidChange();return YES},touchStart:function(a){return this.mouseDown(a)
},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)
},touchExited:function(a){return this.mouseExited(a)},renderMixin:function(c,f){if(this.get("hasHover")){var d=this.get("hoverClass");
c.setClass(d,this._hover&&!this._isMouseDown)}if(this.get("hasState")){var e=this.get("stateClass");
c.setClass(e,this.inState)}var b=this.get("activeClass");c.setClass(b,this._isMouseDown);
var a=this.get("toolTip");if(this.get("alwaysEnableToolTip")&&!a){a=this.get("title")
}if(SC.typeOf(a)===SC.T_STRING){if(this.get("localize")){a=a.loc()}c.attr("title",a);
c.attr("alt",a)}},_hasLegacyActionHandler:function(){var a=this.get("action");if(a&&(SC.typeOf(a)===SC.T_FUNCTION)){return true
}if(a&&(SC.typeOf(a)===SC.T_STRING)&&(a.indexOf(".")!==-1)){return true}return false
},_triggerLegacyActionHandler:function(evt){var target=this.get("target");var action=this.get("action");
if(target===undefined&&SC.typeOf(action)===SC.T_FUNCTION){this.action(evt)}else{if(target!==undefined&&SC.typeOf(action)===SC.T_FUNCTION){action.apply(target,[evt])
}}if(SC.typeOf(action)===SC.T_STRING){eval("this.action = function(e) { return "+action+"(this, e); };");
this.action(evt)}}};sc_require("mixins/simple_button");Geniverse.BlogPostView=SC.PalettePane.design({layout:{width:497,height:547,centerX:0,centerY:0},isModal:NO,defaultResponder:"Lab.statechart",contentView:SC.View.extend({childViews:"titleView blogTitleView blogPostView1 blogPostView2 blogPostView3 blogPostView4 cancelButton saveButton saveAndCloseButton postButton".w(),classNames:"parchment".w(),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:5,width:497},value:"Post to the Journal",controlSize:"info-title",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,}),blogTitleView:SC.LabelView.design({layout:{left:10,top:29,width:477,height:42},controlSize:"info-title",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,valueBinding:"Geniverse.blogPostController.title"}),cancelButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:5,left:5,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"cancelButton".w(),alt:"Cancel",title:"Cancel",action:"closePanel"}),saveButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:5,left:128,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"saveButton".w(),alt:"Save a draft of your work",title:"Save draft",action:"save"}),saveAndCloseButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:5,left:251,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"saveAndCloseButton".w(),alt:"Save a draft of your work and close this form",title:"Save and Close",action:"saveAndClose"}),postButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:5,left:374,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"postButton".w(),alt:"Post to blog",title:"Save and Post",action:"post"}),blogPostView1:SC.TextFieldView.design({layout:{left:10,top:72,width:477,height:35},hint:"Type your CLAIM here",fontWeight:SC.BOLD_WEIGHT,isEditable:YES,isTextArea:NO,valueBinding:"Geniverse.blogPostController.content1"}),blogPostView2:SC.TextFieldView.design({layout:{left:10,top:112,width:477,height:174},hint:"Type your EVIDENCE here",isEditable:YES,isTextArea:YES,valueBinding:"Geniverse.blogPostController.content2"}),blogPostView3:SC.TextFieldView.design({layout:{left:10,top:287,width:477,height:28},hint:"Evidence URL",isEditable:YES,isTextArea:NO,valueBinding:"Geniverse.blogPostController.content3"}),blogPostView4:SC.TextFieldView.design({layout:{left:10,top:322,width:477,height:190},hint:"Type your REASONING here",isEditable:YES,isTextArea:YES,valueBinding:"Geniverse.blogPostController.content4"})})});
sc_require("views/blog_post");Geniverse.blogPostController=SC.Controller.create({title:function(){var b=Geniverse.userController.get("content"),e=b.get("firstName")+" "+b.get("lastName"),a=Geniverse.activityController.get("title"),f=new Date(),c=(f.getMonth()+1)+"-"+f.getDate()+"-"+f.getFullYear();
return e+" - "+a+" - "+c}.property("Geniverse.activityController.title"),content1:"",content2:"",content3:"",content4:"",content:function(){var a="<b>Claim</b><p>${claim}</p><b>Evidence</b><p>${evidence}</br><a href='${url}'>${url}</a></p><b>Reasoning</b><p>${reasoning}</p>";
a=a.replace(/\$\{claim\}/g,this.get("content1")).replace(/\$\{evidence\}/g,this.get("content2")).replace(/\$\{url\}/g,this.get("content3")).replace(/\$\{reasoning\}/g,this.get("content4"));
return a}.property("content1","content2","content3","content4"),blogPostView:null,iframe:null,showBlogPane:function(){this.restoreDraftBlogPost();
this.blogPostView=Geniverse.BlogPostView.create();this.set("iframe",SC.WebView.create({layoutBinding:"Geniverse.blogPostController.blogPostView.layout",value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/empty.html"}));
if(Geniverse.activityController.get("pageContainsApplet")){Geniverse.activityController.get("iframeLayerToAppend").appendChild(this.get("iframe"))
}this.blogPostView.append()},hideBlogPane:function(){this.blogPostView.remove();if(this.get("iframe")&&this.get("iframe").get("parentView")){this.get("iframe").get("parentView").removeChild(this.get("iframe"))
}},saveBlogPost:function(){var a=Geniverse.activityController.get("route");if(a===null&&Geniverse.activityController.get("title")=="Case Log"){a="caselog"
}Geniverse.doWhenReady(this,Geniverse.userController.get("content"),function(){Geniverse.userController.saveBlogPost(a);
Geniverse.store.commitRecords()})},saveDraftBlogPost:function(){var a=Geniverse.activityController.get("route");
if(a===null&&Geniverse.activityController.get("title")=="Case Log"){a="caselog"}Geniverse.doWhenReady(this,Geniverse.userController.get("content"),function(){Geniverse.userController.saveBlogDraft(a);
Geniverse.store.commitRecords()})},restoreDraftBlogPost:function(){var a=Geniverse.activityController.get("route");
if(a===null&&Geniverse.activityController.get("title")=="Case Log"){a="caselog"}draft=Geniverse.userController.getBlogDraft(a);
this.set("content1",draft.content1||"");this.set("content2",draft.content2||"");this.set("content3",draft.content3||"");
this.set("content4",draft.content4||"")}});Geniverse.breedDragonController=SC.Controller.create({gwtReadyBinding:"Geniverse.gwtController.isReady",isBreeding:NO,mother:null,father:null,child:null,newChild:null,resetCount:0,breedCount:0,numberOfOffspring:20,trackScore:NO,hasParents:function(){var b=this.get("mother");
var a=this.get("father");return !!(b&&b!=Geniverse.NO_DRAGON&&a&&a!=Geniverse.NO_DRAGON)
}.property("mother","father").cacheable(),parentsChanged:function(){this.set("newChild",null);
this.set("resetCount",this.get("resetCount")+1);this.set("isBreeding",NO)}.observes("mother","father"),reset:function(){this.set("mother",null);
this.set("father",null);this.set("child",null);this.set("newChild",null);this.set("resetCount",this.get("resetCount")+1);
this.set("breedCount",0);this.set("isBreeding",NO)},breedAndIncrementScore:function(){this.breed();
Geniverse.scoringController.incrementScore(1)},breed:function(){if(this.get("mother").characteristicValue("Liveliness").indexOf("Alive")<0||this.get("father").characteristicValue("Liveliness").indexOf("Alive")<0){SC.AlertPane.error("","You can't breed a dead Drake!");
return}var b=this;var d=0;this.set("isBreeding",YES);Geniverse.eggsController.removeAllEggs();
if(this._callback_version===undefined){this._callback_version=0}this._callback_version++;
var a=new Date().getTime();this.set("breedCount",this.get("breedCount")+1);if(this.get("trackScore")){Geniverse.scoringController.incrementScore(1)
}var c=function(e){return function(f){if(e!==b._callback_version){console.log("breedDragonController: rejecting callback from earlier breed() (callback version = %d, current version = %d)",e,b._callback_version);
return}if(!b.get("isBreeding")){SC.Logger.log("breedDragonController: rejecting callback when we're not breeding!");
return}SC.RunLoop.begin();b.set("child",f);b.set("newChild",f);if(f.get("isEgg")===null){f.set("isEgg",true);
f.set("isInMarketplace",true)}f.set("breedTime",a);Geniverse.eggsController.addObject(f);
SC.RunLoop.end();d++;if(d==b.get("numberOfOffspring")){SC.RunLoop.begin();b.set("isBreeding",NO);
Lab.statechart.sendAction("didBreed");SC.RunLoop.end()}else{if(d>b.get("numberOfOffspring")){throw"Oops; GWT called back one too many times!"
}}}}(this._callback_version);Geniverse.gwtController.breedOrganisms(this.get("numberOfOffspring"),this.get("mother"),this.get("father"),c)
}});Geniverse.casesController=SC.ArrayController.create({});Geniverse.challengePoolController=SC.ArrayController.create(SC.CollectionViewDelegate,{selectionBinding:"Geniverse.allSelectedDragonsController.selection",males:[],females:[],dragonsChanged:function(){if(this.get("length")>0){var a=this.filterProperty("sex",1);
this.set("females",a);var b=null;if(a.get("length")>0){b=a[0];this.set("firstFemale",b)
}else{this.set("firstFemale",null)}a=this.filterProperty("sex",0);this.set("males",a);
if(a.get("length")>0){b=a[0];this.set("firstMale",b)}else{this.set("firstMale",null)
}}else{this.set("firstFemale",null);this.set("firstMale",null)}}.observes("length"),configContains:function(e){var a=Geniverse.userController.get("content");
var f=a.get("groupId")-1;var g=a.get("memberId")-1;var b=Geniverse.activityController.getConfigurationForRoomMember(f,g,false);
for(var c=0,d=b.length;c<d;c++){if(b[c].sex===e){return true}}return false},firstFemale:null,firstMale:null});
Geniverse.challengePoolFemalesController=SC.ArrayController.create(SC.CollectionViewDelegate,{contentBinding:"Geniverse.challengePoolController.females",selectionBinding:"Geniverse.challengePoolController.selection"});
Geniverse.challengePoolMalesController=SC.ArrayController.create(SC.CollectionViewDelegate,{contentBinding:"Geniverse.challengePoolController.males",selectionBinding:"Geniverse.challengePoolController.selection"});
Geniverse.chatListController=SC.ArrayController.create({});Geniverse.chromosomeController=SC.ObjectController.create({initRandomDragon:function(){var a=this;
if(typeof(generateDragonWithCallback)!="undefined"){Geniverse.gwtController.generateRandomDragon(function(b){SC.run(function(){a.set("content",b)
})})}},allAlleles:[["T","Tk","t"],["M","m"],["W","w"],["H","h"],["C","c"],["Fl","fl"],["Hl","hl"],["A1","A2","a"],["B","b"],["D","d"],["Bog","bog"],["Rh","rh"]],allelesMap:{t:"1",tk:"1",m:"1",mt:"1",w:"1",h:"1",c:"2",fl:"2",hl:"2",a:"2",a1:"2",a2:"2",b:"2",d:"X",dl:"X",bog:"X",rh:"X"},getChromosome:function(a){return this.get("allelesMap")[a.toLowerCase()]
},chromosomeAlleles:{a:this.allAlleles,b:this.allAlleles},updateDragon:function(e,d){if(!this._allelesEqual(e,this.chromosomeAlleles.a)||!this._allelesEqual(d,this.chromosomeAlleles.b)){var b="";
for(var c=0;c<e.length;c++){b+="a:"+e[c]+",";if(!!d[c]){b+="b:"+d[c]+","}}b=b.substring(0,b.length-1);
var a=this;Geniverse.gwtController.generateDragonWithAlleles(b,this.get("sex"),this.get("name"),function(f){SC.run(function(){a.set("content",f)
})})}},_allelesEqual:function(a,c){for(var b=0;b<a.length;b++){if(a[b]!==c[b][0]){return false
}}return true},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Metallic",m:"Nonmetallic",W:"Wings",w:"No wings",H:"No horns",h:"Horns",C:"Colored",c:"Colorless",Fl:"Forelimbs",fl:"No forelimbs",Hl:"Hindlimbs",hl:"No hindlimbs",A1:"'A1' armor",A2:"'A2' armor",a:"'a' armor",B:"Black",b:"Brown",D:"Full color",d:"Dilute color",dl:"dl",Bog:"Normal metabolism",bog:"Bog breath",Rh:"Nose spike",rh:"No nose spike",Y:"Y","":""},titleForAllele:function(a){var b=this.alleleLabelMap[a];
if(b!==undefined){return b}return a},processAlleleString:function(g){var a=this.get("allelesMap");
if(g===null||typeof(g)=="undefined"){return[]}var c=g.split(/,/);var b=[];for(var d=0;
d<c.length;d++){var h=c[d].split(/:/);var j=""+a[h[1].toLowerCase()];var e=h[0].toUpperCase();
if(!b[j]||!b[j][e]){var f=[h[1]];if(!b[j]){b[j]=[]}b[j][e]=f}else{b[j][e].pushObject(h[1])
}}return b}});Geniverse.scoringController=SC.Controller.create({currentScore:0,currentChallengeScore:0,numberOfTrials:1,minimumScore:0,cumulativeChallengeMinimumScores:0,challengeMinimumScore:function(){return this.get("cumulativeChallengeMinimumScores")+this.get("minimumScore")
}.property("cumulativeChallengeMinimumScores","minimumScore").cacheable(),twoStarThreshold:2,threeStarThreshold:1,twoStarChallengeThreshold:function(){return this.get("twoStarThreshold")*this.get("numberOfTrials")
}.property("twoStarThreshold","numberOfTrials").cacheable(),threeStarChallengeThreshold:function(){return this.get("threeStarThreshold")*this.get("numberOfTrials")
}.property("threeStarThreshold","numberOfTrials").cacheable(),targetScore:function(){return this.get("minimumScore")+this.get("threeStarThreshold")
}.property("minimumScore","threeStarThreshold").cacheable(),targetChallengeScore:function(){return this.get("challengeMinimumScore")+this.get("threeStarChallengeThreshold")
}.property("challengeMinimumScore","threeStarThreshold","numberOfTrials").cacheable(),achievedStars:function(){var b=this.get("minimumScore");
var c=this.get("threeStarThreshold")+b;var a=this.get("twoStarThreshold")+b;var d=this.get("currentScore");
return this._stars(d,c,a)}.property("minimumScore","currentScore","twoStarThreshold","threeStarThreshold").cacheable(),achievedChallengeStars:function(){var b=this.get("challengeMinimumScore");
var c=this.get("threeStarChallengeThreshold")+b;var a=this.get("twoStarChallengeThreshold")+b;
var d=this.get("currentChallengeScore");return this._stars(d,c,a)}.property("challengeMinimumScore","currentChallengeScore","twoStarThreshold","threeStarThreshold").cacheable(),_stars:function(c,b,a){if(c<=b){return 3
}else{if(c<=a){return 2}else{return 1}}},incrementScore:function(a){this.set("currentScore",this.get("currentScore")+a);
this.set("currentChallengeScore",this.get("currentChallengeScore")+a)},updateChallengeMinimumScore:function(){},resetScore:function(){this.set("cumulativeChallengeMinimumScores",this.get("cumulativeChallengeMinimumScores")+this.get("minimumScore"));
this.set("currentScore",0)},resetChallengeScore:function(){this.set("currentChallengeScore",0);
this.set("cumulativeChallengeMinimumScores",0)}});sc_require("controllers/chromosome");
sc_require("controllers/scoring");Geniverse.DragonChromosomeView=SC.View.extend({alleles:[],hiddenGenesBinding:"*parentView.hiddenGenes",staticGenesBinding:"*parentView.staticGenes",isEditableBinding:"*parentView.isEditable",showEmptyOptionInPulldowns:NO,startWithEmptyOption:NO,classNames:["opaque"],chromosome:"1",side:"A",showLines:NO,trackScore:NO,oldAlleles:[],chromoImageUrls:{1:{A:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/A1-chromosome.png",B:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/B1-chromosome.png"},2:{A:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/A2-chromosome.png",B:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/B2-chromosome.png"},X:{A:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/AX-chromosome.png",B:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/BX-chromosome.png"},Y:{B:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/BY-chromosome.png"}},lineImageUrls:{1:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/1-lines.png",2:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/2-lines.png",X:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/X-lines.png",Y:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/Y-lines.png"},showPulldowns:function(){return this.get("alleles").length>0
}.property("alleles"),resetPulldowns:function(){this.get("pullDowns").resetPulldowns()
},allAllelesSelected:YES,pulldownsDidChange:function(d){if(this.get("trackScore")&&!d&&!this.get("pullDowns").get("autoChangingPulldowns")){Geniverse.scoringController.incrementScore(1)
}var c=this.getPath("pullDowns.childViews");if(!!c){for(var b=0;b<c.length;b++){var a=c[b];
if(a.get("fieldValue")==" "){this.set("allAllelesSelected",NO);this.propertyDidChange("allAllelesSelected");
return}}}this.set("allAllelesSelected",YES);this.propertyDidChange("allAllelesSelected")
},childViews:"chromoImage linesImage pullDowns".w(),chromoImage:SC.ImageView.design({layout:{top:0,left:0,width:22},chromosomeBinding:"*parentView.chromosome",sideBinding:"*parentView.side",chromoImageUrlsBinding:"*parentView.chromoImageUrls",classNames:["opaque"],chromosomeDidChange:function(){this._setChromoImage()
}.observes("chromosome","side"),_setChromoImage:function(){var b=this.get("chromoImageUrls");
if(!!b){var c=b[this.get("chromosome")];if(c!==undefined&&c!==null){var a=c[this.get("side")];
this.set("value",a)}}}}),linesImage:SC.ImageView.design({layout:{top:0,left:22,width:22},isVisibleBinding:"*parentView.showLines",chromosomeBinding:"*parentView.chromosome",lineImageUrlsBinding:"*parentView.lineImageUrls",chromosomeDidChange:function(){var a=this.get("lineImageUrls");
if(!!a){this.set("value",a[this.get("chromosome")])}}.observes("chromosome")}),pullDowns:SC.View.design({layout:{top:0,left:30},isVisibleBinding:"*parentView.showPulldowns",alleles:function(){if(!!this.get("parentView")){return this.get("parentView").get("alleles")
}return[]}.property("*parentView.alleles"),alleleToPulldown:[],hiddenGenesBinding:"*parentView.hiddenGenes",staticGenesBinding:"*parentView.staticGenes",isEditableBinding:"*parentView.isEditable",ignoreChanges:NO,autoChangingPulldowns:NO,init:function(){arguments.callee.base.apply(this,arguments);
this.invokeLast(function(){this._setupPulldowns()})},allelesDidChange:function(){if(!Geniverse.activityController.get("content")){return
}this.set("ignoreChanges",YES);this.set("autoChangingPulldowns",YES);var d=this.get("alleles");
var a=this.get("alleleToPulldown");if(!a[this]){this._setupPulldowns();if(!a[this]){return
}}for(var g=0;g<d.length;g++){var m=a[this][d[g].toLowerCase()];if(!m){var h;var b=Geniverse.chromosomeController.get("allAlleles");
for(var f in b){for(var e in b[f]){if(b[f][e]===d[g]){h=b[f];break}}}for(var c in h){if(SC.typeOf(h[c])===SC.T_STRING){m=a[this][h[c].toLowerCase()];
if(!!m){break}}}}if(!!m&&m.get("fieldValue")!=d[g]){if(m instanceof SC.SelectFieldView){m.set("title",Geniverse.chromosomeController.titleForAllele(d[g]));
m.set("value",d[g])}else{m.set("value",Geniverse.chromosomeController.titleForAllele(d[g]))
}}}this.set("autoChangingPulldowns",NO)}.observes("*parentView.alleles.[]"),isEditableDidChange:function(){this.resetPulldowns()
}.observes("isEditable"),hiddenGenesDidChange:function(){this.resetPulldowns()}.observes("hiddenGenes"),staticGenesDidChange:function(){this.resetPulldowns()
}.observes("staticGenes"),resetPulldowns:function(){var b=this.get("childViews");
var a=b.objectAt(b.get("length")-1);while(!!a){this.removeChild(a);a.destroy();a=b.objectAt(b.get("length")-1)
}var c=this.get("alleleToPulldown");c[this]=null;this.allelesDidChange()},_setupPulldowns:function(){var c=this.get("alleles");
var e=this.get("hiddenGenes");var d=this.get("staticGenes");var b=this.get("isEditable");
for(var a=0;a<c.length;a++){if(e.indexOf(c[a].toLowerCase())==-1){if(b&&d.indexOf(c[a].toLowerCase())==-1){this._createPulldown(c[a],a*30,a)
}else{this._createStaticAllele(c[a],a*30)}}}},_createPulldown:function(d,p,m){var b=this.get("alleleToPulldown");
var o;var f=Geniverse.chromosomeController.get("allAlleles");for(var h in f){for(var g in f[h]){if(f[h][g]===d){o=f[h]
}}}var n=[];for(var h in o){if(SC.typeOf(o[h])===SC.T_STRING){var c=o[h];var l=SC.Object.create({value:c,title:Geniverse.chromosomeController.titleForAllele(c),index:m});
n.unshift(l)}}var a=d;var e=SC.Object.create({value:" ",title:" ",index:m});if(this.get("parentView").get("showEmptyOptionInPulldowns")){n.unshift(e);
if(this.getPath("parentView.startWithEmptyOption")){a=" "}}var k=SC.SelectFieldView.create({layout:{top:p,left:0,height:25,width:105},objects:n,value:a,nameKey:"title",valueKey:"value",updater:function(r){if(!!this.get("value")){var q=this.get("objects")[0];
var j=q.get("index");var i=this.get("parentView").get("parentView").get("alleles");
if(this.get("value").length<5){i[j]=this.get("value");this.get("parentView").get("parentView").set("alleles",i);
this.get("parentView").get("parentView").propertyDidChange("alleles");this.get("parentView").get("parentView").pulldownsDidChange(r===true)
}}}.observes("value")});if(!b[this]){b[this]=[]}b[this][d.toLowerCase()]=k;this.appendChild(k);
k.updater(true)},_createStaticAllele:function(d,c){var b=this.get("alleleToPulldown");
var a=SC.LabelView.create({layout:{top:c,left:0,height:20,width:90},classNames:["static-allele"],textAlign:SC.ALIGN_CENTER,value:d});
if(!b[this]){b[this]=[]}b[this][d.toLowerCase()]=a;this.appendChild(a)}})});Geniverse.OrganismView=SC.View.extend({label:"Organism",showLabel:false,content:null,childViews:"labelView colorLabelView imageView revealButtonView".w(),parent:"",sex:null,isDropTarget:NO,acceptsOffspringDrop:YES,canDrag:NO,showBackground:YES,hideDragon:NO,useRevealButton:NO,revealButtonEnabled:YES,trackScore:NO,glow:NO,showColorLabelsBinding:"Geniverse.activityController.showColorLabels",colorLabelVisible:function(){return(this.get("showColorLabels")||false)&&!this.get("hideDragon")
}.property("hideDragon","showColorLabels"),colorLabelBinding:"*content.color",imageView:SC.ImageView.design({layout:{top:0,bottom:0,left:0,right:0},contentBinding:"*parentView.content",hideDragonBinding:"*parentView.hideDragon",useRevealButtonBinding:"*parentView.useRevealButton",hideImage:function(){return this.get("hideDragon")||this.get("useRevealButton")
}.property("hideDragon","useRevealButton").cacheable(),classNames:["opaque"],valueNeedsRecalculated:YES,value:function(){if(!this.get("content")){return""
}if(this.get("hideImage")){return"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/question_mark.png"
}var b=this.get("content").get("imageURL");var a=this.get("clippingFrame").height;
if(!a){return b}if(a<=75){b=b.replace(/^(.*)\/(.*?)$/,"$1/75/$2")}return b}.property("content","valueNeedsRecalculated","clippingFrame").cacheable(),viewDidResize:function(){this.set("valueNeedsRecalculated",(!this.get("valueNeedsRecalculated")))
},canLoadInBackground:NO,useImageCache:NO}),labelView:SC.LabelView.design({isVisibleBinding:"*parentView.showLabel",layout:{height:20,left:0,top:0,right:0},valueBinding:"*parentView.label",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER}),colorLabelView:SC.LabelView.design({isVisibleBinding:"*parentView.colorLabelVisible",colorOffsetBinding:"*parentView.colorOffset",layout:function(){var b=10;
var c=this.get("colorOffset");if(c){b+=c}var a=this.getPath("parentView.clippingFrame").height;
if(a<=75){b=-5;this.set("classNames",["sc-view","sc-label-view","small-color-label"])
}else{this.set("classNames",["sc-view","sc-label-view","normal-color-label"])}return{height:20,left:0,bottom:b,right:0}
}.property("*parentView.clippingFrame").cacheable(),valueBinding:"*parentView.colorLabel",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER}),revealButtonView:SC.ButtonView.design({isVisibleBinding:"*parentView.useRevealButton",layout:{height:24,bottom:0,left:5,right:5},title:"Reveal",isEnabledBinding:"*parentView.revealButtonEnabled",action:"revealClicked",target:"Lab.statechart"}),init:function(){this.invokeLast(function(){this._checkForNullDragon()
});if(this.get("glow")){var a=this.get("layout").width,b=a>=200?"glow":a>=170?"glow-180":"glow-82";
this.set("classNames",["sc-view organism-view opaque "+b])}else{this.set("classNames",["sc-view organism-view opaque"])
}arguments.callee.base.apply(this,arguments)},isAddedToParent:NO,didAddToParent:function(a){this.set("isAddedToParent",YES)
},scheduledForDestruction:NO,didRemoveFromParent:function(b){var a=this;if(!this.get("scheduledForDestruction")){this.set("scheduledForDestruction",YES);
window.setTimeout(function(){if(!a.get("isAddedToParent")){a.destroy()}},2000)}},destroy:function(){Geniverse.allSelectedDragonsController.removeObserver("selection",this,"selectionDidChange");
Geniverse.allSelectedDragonsController.removeObserver("selection",this,this.selectionDidChange);
arguments.callee.base.apply(this,arguments)},contentDidChange:function(){SC.RunLoop.begin();
this._checkForNullDragon();this._setClassNames();this.setPath("imageView.layerNeedsUpdate",YES);
SC.RunLoop.end()}.observes("*content"),selectionDidChange:function(){if(Geniverse.allSelectedDragonsController.get("selection").contains(this.get("content"))){this.set("isSelected",YES)
}else{this.set("isSelected",NO)}}.observes("Geniverse.allSelectedDragonsController.selection"),isSelectedDidChange:function(){this._setClassNames()
}.observes("isSelected"),render:function(a,b){this._setClassNames();arguments.callee.base.apply(this,arguments)
},_isNull:function(a){if(a===null||typeof(a)=="undefined"){return YES}return NO},_checkForNullDragon:function(){var a=this.get("content");
if(this._isNull(a)){this.set("content",this.get("defaultContent"));return YES}return NO
},_setClassNames:function(){var a=[];if(this.get("showBackground")){if(this.get("isSelected")){a.push((this.getPath("content.sex")===0)?"male-selected":"female-selected")
}else{if(!!this.get("content")){a.push((this.getPath("content.sex")===0)?"male":"female")
}a.push("empty")}this.get("imageView").set("classNames",a);this.get("imageView").displayDidChange()
}},insideGridView:function(){return !!this.get("parentView")&&""+this.get("parentView").constructor==="SC.GridView"
},mouseDownEvent:null,mouseDown:function(a){if(this.insideGridView()){return NO}var b=SC.SelectionSet.create();
b.addObject(this.get("content"));Geniverse.allSelectedDragonsController.set("selection",b);
this.set("mouseDownEvent",a);return YES},isDragging:NO,dragDidEnd:function(a,b,c){this.set("isDragging",NO)
},mouseDragged:function(b){if(this.get("canDrag")&&!this.get("isDragging")){var a=SC.Drag.start({event:this.get("mouseDownEvent"),source:this,dragView:this,ghost:NO,slideBack:YES,ghostActsLikeCursor:NO});
this.set("isDragging",YES)}},mouseUp:function(a){this.set("isDragging",NO)},touchStart:function(a){this.set("touchStartEvent",a);
return YES},touchesDragged:function(b,c){if(!this.get("isDragging")&&(this.get("canDrag")||this.insideGridView())){var a=SC.Drag.start({event:this.get("touchStartEvent"),source:this,dragView:this,ghost:NO,slideBack:YES,ghostActsLikeCursor:NO});
this.set("isDragging",YES)}},touchEnd:function(a){this.set("isDragging",NO)},acceptDragOperation:function(b,c){var a=this._getSourceDragon(b);
if(!this._canDrop(a)){return NO}SC.Logger.info("can drop");return YES},performDragOperation:function(c,g){var b=this._getSourceDragon(c);
var f=this.get("parent");if(!!f&&!!this.get("parentView")){SC.RunLoop.begin();if(b.get("isEgg")){var e=Geniverse.stableOrganismsController.get("length");
var d=Geniverse.stableOrganismsController.get("maxSize");if(e>=d){Lab.logController.logEvent(Lab.EVENT.KEPT_OFFSPRING_FAILED,{alleles:b.get("alleles"),draggedToParentSlot:true});
SC.AlertPane.error("Can't move dragon","Your stable is full. If you want to save more dragons, sell some to the marketplace");
return}Lab.logController.logEvent(Lab.EVENT.KEPT_OFFSPRING,{alleles:b.get("alleles"),draggedToParentSlot:true});
b.set("isEgg",NO);var a=Geniverse.eggsController.get("content");Geniverse.eggsController.set("content",a.without(b))
}Lab.logController.logEvent(Lab.EVENT.SELECTED_PARENT,{alleles:b.get("alleles"),sex:b.get("sex")});
this.get("parentView").set(f,b);this.get("parentView").set("child",null);setSelection=function(){selection=SC.SelectionSet.create();
selection.addObject(b);Geniverse.allSelectedDragonsController.set("selection",selection)
};this.invokeLast(setSelection);setTimeout(setSelection,1);SC.RunLoop.end()}else{SC.RunLoop.begin();
this.set("content",b);SC.RunLoop.end()}if(this.get("trackScore")){Geniverse.scoringController.incrementScore(1)
}this._setClassNames();return g},computeDragOperations:function(b,a){return SC.DRAG_ANY
},dragEntered:function(b,a){if(this._canDrop(this._getSourceDragon(b))){SC.RunLoop.begin();
this.set("isSelected",YES);SC.RunLoop.end()}},dragExited:function(b,a){this.set("isSelected",NO)
},_canDrop:function(a){if(this._isNull(a)||(a.get("bred")&&!this.get("acceptsOffspringDrop"))){return NO
}var c=this.get("sex");if(c!==null){var b=a.get("sex");if(b!==c){return NO}}return YES
},_getSourceDragon:function(a){var b;if((""+a.get("source").constructor==="Geniverse.OrganismView")){b=a.get("source").get("content")
}else{b=a.get("source").get("selection").get("firstObject")}return b}});sc_require("views/dragon_chromosome");
sc_require("views/organism");Geniverse.DragonGenomeView=SC.View.extend({index:1,childViews:"motherLabel fatherLabel chromosomeA1View chromosomeA2View chromosomeAXView chromosomeB1View chromosomeB2View chromosomeBXView generateNewDragonButton isEditableCheck allelesOutputTitle allelesOutput dragonView".w(),showDragon:YES,generateDragonAtStart:NO,showGenerateNewDragon:YES,isEditable:YES,showSwitchSex:NO,showIsEditableCheck:NO,showAllelesOutput:NO,showEmptyOptions:NO,startWithEmptyOptions:NO,showFromLabels:YES,authoredAlleleString:null,displayChallengeDragon:NO,dragonOnRight:NO,useRevealButton:NO,hideDragon:NO,revealButtonEnabled:YES,sex:null,fixedAlleles:null,alleles:[],ignoreUpdate:YES,resetDragonOnInit:NO,trackScore:NO,activityBinding:"Geniverse.activityController.content",init:function(){arguments.callee.base.apply(this,arguments)
},initializeView:function(){if(this.get("resetDragonOnInit")){return}var a="Geniverse.dragonGenomeController."+Geniverse.dragonGenomeController.get("dragonIndexMap")[this.get("index")];
this.bind("dragon",a)}.observes("activity","Geniverse.activityController.content"),updateDragon:function(){if(this.get("resetDragonOnInit")){return
}var d=this.get("index"),c=this.get("alleles"),a=this.getPath("dragon.sex"),b=this.getPath("dragon.name"),e=this.get("hiddenGenes");
Geniverse.dragonGenomeController.updateDragon(d,c,a,b,e)},_processAlleleString:function(){SC.RunLoop.begin();
var c=this.get("dragon");if(c===null||typeof(c)=="undefined"){this.set("alleles",[]);
return}var b=c.get("alleles");var a=Geniverse.chromosomeController.processAlleleString(b);
if(this.get("alleles")!=a){this.set("alleles",a)}this.set("sex",c.get("sex"));SC.RunLoop.end()
}.observes("dragon"),hiddenGenes:function(){return Geniverse.activityController.getHiddenOrStaticGenes("hiddenGenes",this.get("sex"))
}.property("activity").cacheable(),staticGenes:function(){return Geniverse.activityController.getHiddenOrStaticGenes("staticGenes",this.get("sex"))
}.property("activity").cacheable(),dragonImageLeft:function(){var a=this.get("dragonOnRight");
if(a){return 0}else{return 283}}.property("dragonOnRight").cacheable(),chromosomeLeft:function(){var a=this.get("dragonOnRight");
if(a){return 205}else{return 0}}.property("dragonOnRight").cacheable(),destroy:function(){Geniverse.challengePoolController.removeObserver("length",this,this._loadChallengeDragon);
arguments.callee.base.apply(this,arguments)},a1Alleles:function(){return this.getAllelesFor(1,"A")
}.property("alleles"),b1Alleles:function(){return this.getAllelesFor(1,"B")}.property("alleles"),a2Alleles:function(){return this.getAllelesFor(2,"A")
}.property("alleles"),b2Alleles:function(){return this.getAllelesFor(2,"B")}.property("alleles"),aXAlleles:function(){return this.getAllelesFor("X","A")
}.property("alleles"),bXAlleles:function(){return this.getAllelesFor("X","B")}.property("alleles"),dragonView:Geniverse.OrganismView.design({layout:function(){return{top:18,left:this.getPath("parentView.dragonImageLeft"),width:200,height:215}
}.property(),contentBinding:"*parentView.dragon",allowDrop:YES,isVisibleBinding:"*parentView.showDragon",useRevealButtonBinding:"*parentView.useRevealButton",revealButtonEnabledBinding:"*parentView.revealButtonEnabled",hideDragonBinding:"*parentView.hideDragon",showBackground:NO,glow:YES}),generateNewDragonButton:SC.ButtonView.extend({layout:function(){return{top:280,left:this.getPath("parentView.dragonImageLeft"),width:200,height:25}
}.property(),title:"Create a new dragon",target:"parentView",action:"initRandomDragon",isVisibleBinding:"*parentView.showGenerateNewDragon"}),motherLabel:SC.LabelView.design({layout:function(){return{top:0,left:this.getPath("parentView.chromosomeLeft"),width:100,height:25}
}.property(),value:"From mother",isVisibleBinding:"*parentView.showFromLabels"}),fatherLabel:SC.LabelView.design({layout:function(){return{top:0,left:this.getPath("parentView.chromosomeLeft")+145,width:100,height:25}
}.property(),value:"From father",isVisibleBinding:"*parentView.showFromLabels"}),switchSex:function(){this.set("sex",(this.get("sex")+1)%2);
Geniverse.dragonGenomeController._initFixedDragon(this.get("sex"),this.getPath("dragon.alleles"),this.get("index"));
if(this.get("trackScore")){Geniverse.scoringController.incrementScore(1)}},allAllelesSelected:NO,a1AllSelectedBinding:"*chromosomeA1View.allAllelesSelected",b1AllSelectedBinding:"*chromosomeB1View.allAllelesSelected",a2AllSelectedBinding:"*chromosomeA2View.allAllelesSelected",b2AllSelectedBinding:"*chromosomeB2View.allAllelesSelected",aXAllSelectedBinding:"*chromosomeAXView.allAllelesSelected",bXAllSelectedBinding:"*chromosomeBXView.allAllelesSelected",pulldownsDidChange:function(){this.set("allAllelesSelected",(this.get("a1AllSelected")&&this.get("b1AllSelected")&&this.get("a2AllSelected")&&this.get("b2AllSelected")&&this.get("aXAllSelected")&&this.get("bXAllSelected")))
}.observes("a1AllSelected","a2AllSelected","aXAllSelected","b1AllSelected","b2AllSelected","bXAllSelected"),chromosomeA1View:Geniverse.DragonChromosomeView.design({layout:function(){return{top:25,left:this.getPath("parentView.chromosomeLeft")}
}.property(),updateDragon:function(){var b=this.get("alleles"),a=this.get("oldAlleles");
if(b.compareArrays(a)){}this.set("oldAlleles",b);if(!!this.get("parentView")){this.get("parentView").updateDragon()
}}.observes("alleles"),updateAlleles:function(){if(!!this.get("parentView")){this.set("alleles",this.get("parentView").get("a1Alleles"))
}}.observes("*parentView.a1Alleles"),hiddenGenesBinding:"*parentView.hiddenGenes",showEmptyOptionInPulldowns:function(){return(this.getPath("parentView.showAllelesOutput")||this.getPath("parentView.showEmptyOptions"))
}.property(),startWithEmptyOptionBinding:"*parentView.startWithEmptyOptions",trackScoreBinding:"*parentView.trackScore",chromosome:"1",side:"A"}),chromosomeB1View:Geniverse.DragonChromosomeView.design({layout:function(){return{top:25,left:this.getPath("parentView.chromosomeLeft")+145}
}.property(),updateDragon:function(){var b=this.get("alleles"),a=this.get("oldAlleles");
if(b.compareArrays(a)){}this.set("oldAlleles",b);if(!!this.get("parentView")){this.get("parentView").updateDragon()
}}.observes("alleles"),updateAlleles:function(){if(!!this.get("parentView")){this.set("alleles",this.get("parentView").get("b1Alleles"))
}}.observes("*parentView.b1Alleles"),hiddenGenesBinding:"*parentView.hiddenGenes",showEmptyOptionInPulldowns:function(){return(this.getPath("parentView.showAllelesOutput")||this.getPath("parentView.showEmptyOptions"))
}.property(),startWithEmptyOptionBinding:"*parentView.startWithEmptyOptions",trackScoreBinding:"*parentView.trackScore",chromosome:"1",side:"B"}),chromosomeA2View:Geniverse.DragonChromosomeView.design({layout:function(){return{top:170,left:this.getPath("parentView.chromosomeLeft")}
}.property(),updateDragon:function(){var b=this.get("alleles"),a=this.get("oldAlleles");
if(b.compareArrays(a)){}this.set("oldAlleles",b);if(!!this.get("parentView")){this.get("parentView").updateDragon()
}}.observes("alleles"),updateAlleles:function(){if(!!this.get("parentView")){this.set("alleles",this.get("parentView").get("a2Alleles"))
}}.observes("*parentView.a2Alleles"),hiddenGenesBinding:"*parentView.hiddenGenes",showEmptyOptionInPulldowns:function(){return(this.getPath("parentView.showAllelesOutput")||this.getPath("parentView.showEmptyOptions"))
}.property(),startWithEmptyOptionBinding:"*parentView.startWithEmptyOptions",trackScoreBinding:"*parentView.trackScore",chromosome:"2",side:"A"}),chromosomeB2View:Geniverse.DragonChromosomeView.design({layout:function(){return{top:170,left:this.getPath("parentView.chromosomeLeft")+145}
}.property(),updateDragon:function(){var b=this.get("alleles"),a=this.get("oldAlleles");
if(b.compareArrays(a)){}this.set("oldAlleles",b);if(!!this.get("parentView")){this.get("parentView").updateDragon()
}}.observes("alleles"),updateAlleles:function(){if(!!this.get("parentView")){this.set("alleles",this.get("parentView").get("b2Alleles"))
}}.observes("*parentView.b2Alleles"),hiddenGenesBinding:"*parentView.hiddenGenes",showEmptyOptionInPulldowns:function(){return(this.getPath("parentView.showAllelesOutput")||this.getPath("parentView.showEmptyOptions"))
}.property(),startWithEmptyOptionBinding:"*parentView.startWithEmptyOptions",trackScoreBinding:"*parentView.trackScore",chromosome:"2",side:"B"}),chromosomeAXView:Geniverse.DragonChromosomeView.design({layout:function(){return{top:315,left:this.getPath("parentView.chromosomeLeft")}
}.property(),updateDragon:function(){var b=this.get("alleles"),a=this.get("oldAlleles");
if(b.compareArrays(a)){return}this.set("oldAlleles",b);if(!!this.get("parentView")){this.get("parentView").updateDragon()
}}.observes("alleles"),updateAlleles:function(){if(!!this.get("parentView")){this.set("alleles",this.get("parentView").get("aXAlleles"))
}}.observes("*parentView.aXAlleles"),hiddenGenesBinding:"*parentView.hiddenGenes",showEmptyOptionInPulldowns:function(){return(this.getPath("parentView.showAllelesOutput")||this.getPath("parentView.showEmptyOptions"))
}.property(),startWithEmptyOptionBinding:"*parentView.startWithEmptyOptions",trackScoreBinding:"*parentView.trackScore",chromosome:"X",side:"A"}),chromosomeBXView:Geniverse.DragonChromosomeView.design({layout:function(){return{top:315,left:this.getPath("parentView.chromosomeLeft")+145}
}.property(),hiddenGenesBinding:"*parentView.hiddenGenes",showEmptyOptionInPulldowns:function(){return(this.getPath("parentView.showAllelesOutput")||this.getPath("parentView.showEmptyOptions"))
}.property(),startWithEmptyOptionBinding:"*parentView.startWithEmptyOptions",trackScoreBinding:"*parentView.trackScore",updateDragon:function(){var b=this.get("alleles"),a=this.get("oldAlleles");
if(b.compareArrays(a)){}this.set("oldAlleles",b);if(!!this.get("parentView")){this.get("parentView").updateDragon()
}}.observes("alleles"),updateAlleles:function(){if(!!this.get("parentView")){this.set("alleles",this.get("parentView").get("bXAlleles"))
}}.observes("*parentView.bXAlleles"),chromosome:function(){if(this.get("alleles").length<1){return"Y"
}return"X"}.property("alleles"),side:"B"}),isEditableCheck:SC.CheckboxView.design({layout:function(){return{top:370,left:this.getPath("parentView.dragonImageLeft")+10,width:250,height:18}
}.property(),title:"Editable",isVisibleBinding:"*parentView.showIsEditableCheck",valueBinding:"*parentView.isEditable"}),allelesOutputTitle:SC.LabelView.design({layout:{top:410,left:0,width:250,height:18},value:"Alleles:",isTextSelectable:NO,isVisibleBinding:"*parentView.showAllelesOutput"}),allelesOutput:SC.LabelView.design({layout:{top:430,left:0,width:410,height:18},value:null,valueSetter:function(){if(!!this.get("parentView")){var a=this.get("parentView").get("authoredAlleleString");
if(!!a){this.set("value",a)}else{this.set("value",this.get("parentView").getPath("dragon.alleles"))
}}}.observes("*parentView.dragon.alleles"),isTextSelectable:YES,isVisibleBinding:"*parentView.showAllelesOutput",classNames:["allele-string"]}),getAllelesFor:function(b,c){var a=this.get("alleles");
if(!a||!a[b]||!a[b][c]){return[]}return a[b][c]},secondXAlleles:null});Geniverse.PopupChromosomeView=SC.PalettePane.extend({layout:{width:488,height:430,centerX:0,centerY:0},isModal:NO,classNames:["popup-chromosome-view"],contentView:SC.View.design({childViews:"titleView noticeLabel chromosomeView hideButton".w(),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,width:488},value:"Dragon Chromosomes  -  drag here to move",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"sc-pane sc-main sc-theme".w()}),noticeLabel:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:24,width:488},value:"Select a drake to see its traits",controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,dragonBinding:"Geniverse.chromosomeToolController.dragon",isVisible:function(){return !Geniverse.chromosomeToolController.get("dragon")
}.property("dragon")}),hideButton:SC.ButtonView.design({layout:{bottom:5,right:5,width:80,height:24},title:"Close",action:"closePane",target:"Geniverse.chromosomeToolController"}),chromosomeView:Geniverse.DragonGenomeView.design({layout:{left:10,top:24,width:468,height:400},isEditable:NO,showGenerateNewDragon:NO,ignoreUpdate:NO,resetDragonOnInit:YES,dragon:null,dragonDidChange:function(){var a=this.get("dragon");
if(!!a){if(a.get("bred")){this.set("showFromLabels",YES);return}}this.set("showFromLabels",NO)
}.observes("dragon"),init:function(){arguments.callee.base.apply(this,arguments);
this.bind("dragon",SC.Binding.from("Geniverse.chromosomeToolController.dragon").oneWay())
}})})});sc_require("views/dragon_genome");sc_require("views/popup_chromosome");Geniverse.chromosomeToolController=SC.Controller.create({dragon:null,_pane:Geniverse.PopupChromosomeView,paneInstance:null,showPane:function(){SC.RunLoop.begin();
this.closePane();this.paneInstance=this._pane.create();Geniverse.chromosomeToolController.notifyPropertyChange("dragon");
this.paneInstance.append();SC.RunLoop.end()},closePane:function(){if(!!this.paneInstance){this.paneInstance.remove();
this.paneInstance.destroy()}}});Geniverse.dragonBinController=SC.ArrayController.create({content:[],isEmpty:function(){return this.get("length")===0
}.property("[]").cacheable(),clearDragons:function(){this.set("content",[])}});Geniverse.dragonGenomeController=SC.Object.create({firstDragon:null,secondDragon:null,thirdDragon:null,dragonIndexMap:{1:"firstDragon",2:"secondDragon",3:"thirdDragon"},dragonAllelesMap:{},secondXAllelesMap:{},waitingForMap:{},initDragonForView:function(a,c,b){this.waitingForMap[a]=null;
if(b){this._generateChallengeDragon(c,a)}else{this._generateRandomDragon(c,a)}},updateDragon:function(h,d,k,a,n){if(!d||!d[1]){return
}var c="";for(var f=1;f<4;f++){if(f===3){f="X"}if(!!d[f]&&!!d[f].A){for(var e=0;e<d[f].A.length;
e++){c+=!!d[f].A[e]?"a:"+d[f].A[e]+",":"";c+=(!!d[f].B&&!!d[f].B[e])?"b:"+d[f].B[e]+",":""
}}}c=c.substring(0,c.length-1);var l=c.replace(/.: ,/g,"");n=n.join();var b=new RegExp(".:["+n+"],","ig");
l=l.replace(b,"");if(c===this.dragonAllelesMap[h]){return}if(this.dragonAllelesMap[h]){Lab.logController.logEvent(Lab.EVENT.CHANGED_ALLELE,{drakeId:h,oldAlleles:this.dragonAllelesMap[h],newAlleles:c})
}this.dragonAllelesMap[h]=c;var m=this;var g;g=this.waitingForMap[h]=Math.floor(Math.random()*1000);
Geniverse.gwtController.generateDragonWithAlleles(c,k,a,function(i){SC.run(function(){m._setDragon(h,i,g)
})})},_generateChallengeDragon:function(d,b){var a=this;function c(){var e=(d===1)?Geniverse.challengePoolController.get("firstFemale"):Geniverse.challengePoolController.get("firstMale");
if(!e&&!Geniverse.challengePoolController.configContains(d)){e=(d===0)?Geniverse.challengePoolController.get("firstFemale"):Geniverse.challengePoolController.get("firstMale")
}if(!!e){Geniverse.challengePoolController.removeObserver("firstFemale",c);Geniverse.challengePoolController.removeObserver("firstMale",c);
a._setDragon(b,e)}}if(Geniverse.challengePoolController.get("firstFemale")||Geniverse.challengePoolController.get("firstMale")){c()
}else{Geniverse.challengePoolController.addObserver("firstFemale",c);Geniverse.challengePoolController.addObserver("firstMale",c)
}},_generateRandomDragon:function(b,a){this._initFixedDragon(b,"",a)},_initFixedDragon:function(f,a,d){if(!a){return
}var b=this;var c=this.get(this.dragonIndexMap[d]);if(f===1&&!!c&&c.get("sex")===0&&!!this.secondXAllelesMap[d]){a=a+","+this.secondXAllelesMap[d];
this.secondXAllelesMap[d]=null}var g;g=this.waitingForMap[d]=Math.floor(Math.random()*1000);
function e(i){if(f===0&&!!c&&c.get("sex")===1){var h=c.get("alleles").split(",");
var k=i.get("alleles").split(",");var j=h.filter(function(l){return k.indexOf(l)===-1
});b.secondXAllelesMap[d]=j.join(",")}SC.run(function(){b._setDragon(d,i,g)})}if(f!==undefined&&f!==null&&a!==undefined&&a!==null){Geniverse.gwtController.generateDragonWithAlleles(a,f,"",e)
}else{if(f!==undefined&&f!==null){Geniverse.gwtController.generateDragon(f,"",e)}else{if(a!==undefined&&a!==null){Geniverse.gwtController.generateDragonWithAlleles(a,-1,"",e)
}else{Geniverse.gwtController.generateRandomDragon(e)}}}},_setDragon:function(a,b,c){if(!!this.waitingForMap[a]&&this.waitingForMap[a]!==c){return
}this.set(this.dragonIndexMap[a],b);Lab.statechart.sendAction("chromosomeDragonChanged")
},reset:function(){this.set("firstDragon",null);this.set("secondDragon",null);this.set("thirdDragon",null)
}});Geniverse.eggsController=SC.ArrayController.create(SC.CollectionViewDelegate,{selectionBinding:"Geniverse.allSelectedDragonsController.selection",removeAllEggs:function(){if(this.get("content")!==null){this.get("content").forEach(Geniverse.eggsController._destroyEgg);
Geniverse.store.commitRecords()}this.set("content",[])},_destroyEgg:function(a){if(a.get("state")&SC.Record.READY){a.removeObserver("state",Geniverse.eggsController,"_destroyEgg");
Geniverse.store.unloadRecord(Geniverse.Dragon,a.id);a.destroy()}else{a.addObserver("state",Geniverse.eggsController,"_destroyEgg")
}},saveData:function(){Geniverse.store.commitRecords()}.observes("[]"),collectionViewDeleteContent:function(a,e,d){var c=d.map(function(f){return this.objectAt(f)
},this);c.invoke("destroy");var b=d.get("min")-1;if(b<0){b=0}this.selectObject(this.objectAt(b))
},reset:function(){this.removeAllEggs()}.observes("Geniverse.breedDragonController.resetCount")});
Geniverse.gwtController=SC.Object.create({bredOrganisms:[],pendingOrganisms:[],drakesArePending:function(){return this.pendingOrganisms.length>0
}.property("*pendingOrganisms.[]"),addPendingDrake:function(){var a=Math.floor(Math.random()*100000);
this.pendingOrganisms.push(a);return a},removePendingDrake:function(a){this.pendingOrganisms.removeObject(a);
if(this.pendingOrganisms.length===0){this.propertyDidChange("drakesArePending")}},breedOrganism:function(c,b,d){var a=this;
if(c!==null&&c.get("gOrganism")!==null&&b!==null&&b.get("gOrganism")!==null){var e=function(g){var f=Geniverse.store.createRecord(Geniverse.Dragon,{bred:YES,mother:c.get("id"),father:b.get("id"),activity:Geniverse.activityController.getPath("content.id"),user:Geniverse.userController.get("content").get("id"),isInMarketplace:NO,isEgg:YES});
f.set("user",Geniverse.userController.get("content"));f.set("gOrganism",g);d(f);Geniverse.store.commitRecords()
};GenGWT.breedDragon(c.get("gOrganism"),b.get("gOrganism"),e)}},breedOrganisms:function(d,c,b,f){var a=this;
SC.Logger.info("Breeding "+d+" dragons");var e=false;if(!!Geniverse.activityController.get("content")){e=Geniverse.activityController.get("crossoverWhenBreeding")
}if(c!==null&&c.get("gOrganism")!==null&&b!==null&&b.get("gOrganism")!==null){var g=function(m){window.DragonSet=m;
var l=null;var j=m.array;for(var h=0;h<d;h++){l=j[h];var k=Geniverse.store.createRecord(Geniverse.Dragon,{bred:YES,mother:c.get("id"),father:b.get("id"),activity:Geniverse.activityController.getPath("content.id"),user:Geniverse.userController.get("content").get("id"),breeder:Geniverse.userController.get("content").get("id"),isInMarketplace:NO,isEgg:YES});
k.set("gOrganism",l);f(k)}Geniverse.store.commitRecords()};GenGWT.breedDragons(d,c.get("gOrganism"),b.get("gOrganism"),e,g)
}},generateRandomDragon:function(c){var b=this;var a=function(d){var e=Geniverse.store.createRecord(Geniverse.Dragon,{bred:NO});
e.set("activity",Geniverse.activityController.get("content"));e.set("user",Geniverse.userController.get("content"));
e.set("gOrganism",d);c(e);Geniverse.store.commitRecords()};GenGWT.generateDragon(a)
},generateDragon:function(d,c,e){var b=this;var a=function(f){var g=Geniverse.store.createRecord(Geniverse.Dragon,{bred:NO});
g.set("activity",Geniverse.activityController.get("content"));g.set("user",Geniverse.userController.get("content"));
g.set("name",c);g.set("gOrganism",f);e(g);Geniverse.store.commitRecords()};GenGWT.generateDragonWithSex(d,a)
},generateDragonWithAlleles:function(c,e,a,f,g){var d=0;var i=this;var b=this.addPendingDrake();
var h=function(j){if(!!g){if(j.getCharacteristic("liveliness")=="Dead"){d++;if(d>10){SC.Logger.log("Tried too many times to create this dragon, it insists on being dead")
}else{GenGWT.generateDragonWithAlleleStringAndSex(c,e,h);return}}}var k=Geniverse.store.createRecord(Geniverse.Dragon,{bred:NO});
k.set("activity",Geniverse.activityController.get("content"));k.set("user",Geniverse.userController.get("content"));
k.set("name",a);k.set("gOrganism",j);f(k);Geniverse.store.commitRecords();i.removePendingDrake(b)
};GenGWT.generateDragonWithAlleleStringAndSex(c,e,h)},generateGOrganismWithAlleles:function(a,b,c){GenGWT.generateDragonWithAlleleStringAndSex(a,b,c)
}});sc_require("views/blog_post");Geniverse.introScreenController=SC.Controller.create({imageUrl:""});
sc_require("views/blog_post");Geniverse.invisibleGenomeController=SC.ObjectController.create({genomeSolutionView:null,allFields:null,timesAttempted:0,showGenomePane:function(){if(!this.genomeSolutionView){if(this.get("sex")===0){layout={width:360,height:490,centerX:310,centerY:50}
}else{layout={width:360,height:490,centerX:-310,centerY:50}}this.genomeSolutionView=Geniverse.GenomeSolutionView.create({layout:layout})
}this.genomeSolutionView.append()},hideGenomePane:function(){this.genomeSolutionView.remove()
},activityObserver:function(){this.genomeSolutionView=null;this.timesAttempted=0}.observes("Geniverse.activityController.content"),allAlleles:null,_processAlleleString:function(){SC.RunLoop.begin();
var b=this.get("content");if(b===null||typeof(b)=="undefined"){this.set("allAlleles",[]);
return}var a=this.get("alleles");var c=Geniverse.chromosomeController.processAlleleString(a);
this.set("allAlleles",c);SC.RunLoop.end()}.observes("content"),hiddenGenes:function(){return Geniverse.activityController.getHiddenOrStaticGenes("hiddenGenes",this.get("sex"))
}.property(),staticGenes:function(){return Geniverse.activityController.getHiddenOrStaticGenes("staticGenes",this.get("sex"))
}.property(),addField:function(a){if(!this.allFields){this.allFields={}}this.allFields[a]=false
},setFieldCorrect:function(b,a){this.allFields[b]=a},isAllCorrect:function(){var a=this.allFields,b=true;
for(key in a){if(!a.hasOwnProperty(key)){continue}if(!a[key]){b=false}}Lab.logController.logEvent(Lab.EVENT.DRAKE_SUBMITTED,{correctGenotypes:this.allFields,correct:b});
return b}});Geniverse.loginController=SC.ObjectController.create({textAreaValue:null,username:null,passwordValue:null,retypePasswordValue:null,usernameBinding:"CcChat.chatController.username",showRetypeField:NO,loggedIn:NO,test:35,groupNumber:2,memberNumber:2,login:function(){SC.Logger.log("login");
var d=this.get("passwordValue");var a=SHA256(d);var c=this;var b=this.username;var e=function(f){if(typeof f=="undefined"){SC.Logger.info("No User exists for that login. Creating account.");
f=Geniverse.userController.createUser(b,d)}c.checkUserPassword(f,a)};Geniverse.userController.findUser(this.username,e);
this.set("textAreaValue","")},autoLogin:function(c){var a=this;var b=function(d){if(typeof d=="undefined"){SC.Logger.info("No User exists for that login. Please log in again.");
Geniverse.appController.logout()}else{a.finishLogin(d)}};Geniverse.userController.findUser(c,b)
},checkUserPassword:function(b,a){var d=b.username;var c=b.get("passwordHash");SC.Logger.log("hash from rails = "+c);
SC.Logger.log("hash from user = "+a);if(c===a){SC.Logger.log("passwords match!");
this.finishLogin(b)}else{SC.AlertPane.error("","Passwords do not match")}},finishLogin:function(a){Geniverse.userController.set("content",a);
Geniverse.loginController.set("loggedIn",YES)},welcomeMessage:function(){var b="[Not set]";
var a=this.get("username");var c=this.get("groupNumber");var d=this.get("memberNumber");
b="Welcome %@, you are user #%@ in group %@".fmt(a,d,c);return b}.property("groupNumber","memberNumber","username").cacheable()});
Geniverse.MatchOrganism={isDropTarget:YES,mouseDown:function(a){return NO},acceptDragOperation:function(b,c){var a=this._getSourceDragon(b);
if(this._canDrag(a)){Lab.statechart.sendAction("checkMatchDragon",[this.get("content"),a],this);
if(this.get("trackScore")){Geniverse.scoringController.incrementScore(1)}}return NO
},dragEntered:function(b,a){if(this._canDrag(this._getSourceDragon(b))){SC.RunLoop.begin();
this.set("isSelected",YES);SC.RunLoop.end();this._setClassNames()}},_setClassNames:function(){var a=this.get("imageView");
if(this.getPath("content.hasBeenMatched")){a.set("classNames",["matched"])}else{if(this.get("isSelected")){a.set("classNames",["male-selected"])
}else{a.set("classNames",["empty"])}}a.displayDidChange()},_canDrag:function(a){var b=a.get("bred");
return a.get("bred")}};Geniverse.ShiftedOrganism={originalTop:null,initMixin:function(c,b,a){this.addObserver("clippingFrame",this,"adjustLayout")
},adjustLayout:function(){if(this.get("isVisible")){var d=this.get("layout").top;
var e=this.get("originalTop");if(e===null){e=d;this.set("originalTop",d)}var c=Math.round(this.get("clippingFrame").height/8);
var b=e-c;var a=this;this.invokeLast(function(){a.adjust("top",b)})}}};sc_require("mixins/match_organism");
sc_require("mixins/shifted_organism");Geniverse.MatchView=SC.View.extend({dragonsBinding:"Geniverse.matchController.arrangedObjects",dragonSize:83,dragonExampleView:Geniverse.OrganismView.extend(Geniverse.MatchOrganism,Geniverse.ShiftedOrganism,{glow:YES,oneAtATimeBinding:SC.Binding.oneWay("Geniverse.matchController.oneAtATime").bool(),colorOffset:function(){if(!this.get("oneAtATime")){return -15
}else{return 0}}.property("oneAtATime").cacheable()}),onlyOneBinding:"Geniverse.matchController.oneAtATime",labelPosition:"bottom",dragonsView:null,dragonView:null,titleView:null,updateCurrentDragon:function(){this.setPath("dragonView.content",Geniverse.matchController.get("currentDragon"));
if(!!this.get("dragonView")){this.get("dragonView").contentDidChange()}}.observes("Geniverse.matchController.currentDragonIdx","Geniverse.matchController.arrangedObjects.[]","Geniverse.matchController.currentDragon"),isVisible:function(){return Geniverse.matchController.get("length")>0
}.property("Geniverse.matchController.length"),updateIsVisible:function(){this.propertyDidChange("isVisible")
}.observes("Geniverse.matchController.arrangedObjects.[]"),destroy:function(){Geniverse.matchController.removeObserver("arrangedObjects",this,this.updateIsVisible);
Geniverse.matchController.removeObserver("[]",this,this.updateIsVisible);Geniverse.matchController.removeObserver("arrangedObjects",this,this.updateCurrentDragon);
Geniverse.matchController.removeObserver("[]",this,this.updateCurrentDragon);Geniverse.matchController.removeObserver("currentDragonIdx",this,this.updateCurrentDragon);
arguments.callee.base.apply(this,arguments)},createChildViews:function(){var f=[];
if(this.get("onlyOne")){this.dragonView=this.createChildView(this.get("dragonExampleView").extend({layout:{left:0,top:20,width:this.get("dragonSize"),height:this.get("dragonSize")},content:Geniverse.NO_DRAGON,glow:YES}));
f.push(this.dragonView);var e=this.get("labelPosition");var c,d,a;if(e=="right"){c={height:42,width:90,right:0,centerY:0}
}else{c={height:42,left:13,right:13,bottom:0}}this.backgroundView=this.createChildView(SC.View.design({layout:c,classNames:["genome-view-intro"],childViews:"title count".w(),title:SC.LabelView.design({layout:{top:0,left:0,right:0,height:23},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,value:"TRIAL"}),count:SC.LabelView.design({layout:{bottom:0,left:0,right:0,height:23},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,valueBinding:"Geniverse.matchController.matchedCountLabel"})}));
f.push(this.backgroundView)}else{var b={top:0,height:21,left:0,right:0,minWidth:130};
this.titleView=this.createChildView(SC.LabelView.design({layout:b,controlSize:SC.REGULAR_CONTROL_SIZE,textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,value:"Target Drake"+(this.get("onlyOne")?"":"s")}));
f.push(this.titleView);this.dragonsView=this.createChildView(this._getDragonsViewDesign({centerX:0,top:22,bottom:0,width:100}));
f.push(this.dragonsView)}this.set("childViews",f)},updateWidth:function(){if(!this.get("onlyOne")&&this.get("dragonsView")&&this.get("dragonsView").get("isVisibleInWindow")){var b=Geniverse.matchController.get("length"),c=(b*(this.get("dragonSize")+4))+16,a=this.createChildView(this._getDragonsViewDesign({centerX:0,top:22,bottom:0,width:c}));
this.get("dragonsView").destroy();this.set("dragonsView",a);this.appendChild(a);this.displayDidChange()
}}.observes("Geniverse.matchController.length"),_getDragonsViewDesign:function(a){dragonSize=this.get("dragonSize");
exampleView=this.get("dragonExampleView");return SC.GridView.design({layout:a,classNames:["trans-grid"],contentBinding:"Geniverse.matchController.arrangedObjects",selectionBinding:"Geniverse.matchController.selection",rowHeight:dragonSize,columnWidth:dragonSize,canEditContent:NO,exampleView:exampleView,isSelectable:NO,useFastPath:NO,dragDataTypes:["dragon"]})
}});Geniverse.PopupMatchView=SC.PalettePane.create({layout:{width:488,height:194,centerX:0,centerY:0},isModal:NO,contentView:SC.View.extend({childViews:"titleView matchView hideButton".w(),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,right:0},value:"Dragons to Match  -  drag here to move",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"sc-pane sc-main sc-theme".w()}),hideButton:SC.ButtonView.extend({layout:{bottom:5,right:5,width:80,height:24},title:"Close",action:"remove",target:"Geniverse.matchController.pane"}),matchView:Geniverse.MatchView.design({layout:{left:0,top:24,right:0,height:130}})})});
sc_require("views/match");sc_require("views/popup_match");Geniverse.matchController=SC.ArrayController.create(SC.CollectionViewDelegate,{allowsSelection:NO,pane:Geniverse.PopupMatchView,showPane:function(){var a=(Geniverse.matchController.get("length")*130);
a=a<130?130:a;this.get("pane").get("layout").width=260;this.get("pane").layoutDidChange();
if(!this.get("pane").get("isVisibleInWindow")){this.get("pane").append()}},oneAtATime:NO,currentDragonIdx:-1,currentDragon:null,updateCurrentDragon:function(){if(!Geniverse.activityController.get("content")){return
}if(this.get("currentDragonIdx")===-1){this.set("currentDragonIdx",0)}var a=this.get("arrangedObjects");
var b=Geniverse.NO_DRAGON;if(a&&a.get("length")>0){b=a.objectAt(this.get("currentDragonIdx"))
}if(this.get("currentDragon")!==b){this.set("currentDragon",b);this.propertyDidChange("matchedCountLabel");
Lab.statechart.sendAction("matchDragonChanged")}}.observes("currentDragonIdx","*arrangedObjects.length"),matchedCountLabel:"",matchedCountShouldChange:function(){var a=this.get("arrangedObjects").get("length");
this.set("matchedCountLabel",""+(this.get("currentDragonIdx")+1)+" of "+a)}.observes("currentDragonIdx","*arrangedObjects.length"),nextDragon:function(){SC.RunLoop.begin();
var a=(this.get("currentDragonIdx")+1)%this.get("arrangedObjects").length();if(isNaN(a)){a=-1
}this.set("currentDragonIdx",a);SC.RunLoop.end()},isLastDragon:function(){var a=this.get("currentDragonIdx");
return(a+1)>=this.get("length")},doesMatch:function(b,c){var a=b.get("imageURL")===c.get("imageURL");
Lab.logController.logEvent(Lab.EVENT.DRAKE_SUBMITTED,{submittedImage:c.get("imageURL"),correctImage:b.get("imageURL"),correct:a});
if(a){return YES}return NO},doesMatchCurrent:function(a){return this.doesMatch(this.get("currentDragon"),a)
},numberOfMovesToReachCurrent:function(d){var b=0,a=d.get("characteristicMap"),e=this.get("currentDragon"),f=e.get("characteristicMap"),c=Geniverse.Dragon.traitRules;
b=this.numberOfAlleleChangesToReachPhenotype(a,f,d.get("alleles"),c);if(d.get("sex")!=e.get("sex")){b++
}return b},numberOfBreedingMovesToReachCurrent:function(c,a,d,b){return this.numberOfBreedingMovesToReachDrake(c,a,d,b,this.get("currentDragon"))
},numberOfBreedingMovesToReachDrake:function(b,a,q,p,c){var A=0,r=b.get("alleles").split(",").map(function(i){return i.split(":")[1]
}),d=a.get("alleles").split(",").map(function(i){return i.split(":")[1]}),s=c,z=s.get("characteristicMap"),f=Geniverse.Dragon.traitRules;
for(var k in f){if(f.hasOwnProperty(k)){var h=f[k][z[k]],g=Infinity;if(h&&h.length){for(var x=0,l=h.length;
x<l;x++){var m=h[x],o=0,n=0;for(var w=0,y=m.length;w<y;w++){var v=m[w],u=w%2===0?m[w+1]:m[w-1],e=0;
if(r.indexOf(v)===-1){if(v&&(q.indexOf(v)>-1||q.indexOf(v.toLowerCase())>-1)){e++
}else{e=Infinity}}if(d.indexOf(u)===-1){if(u&&(p.indexOf(u)>-1||p.indexOf(u.toLowerCase())>-1)){e++
}else{e=Infinity}}if(w%2===0){o+=e}else{n+=e}}g=Math.min(g,Math.min(o,n))}A+=g}}}return A
},numberOfAlleleChangesToReachPhenotype:function(s,b,o,q){var c=o.split(",").map(function(i){return i.split(":")[1]
}),a=0;for(var n in q){if(q.hasOwnProperty(n)){if(s[n]!==b[n]){var l=this._collectAllAllelesForTrait(n,q),g=[];
for(var f=0,p=c.length;f<p;f++){if(l.indexOf(c[f])>=0){g.push(c[f])}}var k=q[n][b[n]],e=Infinity;
for(f=0,p=k.length;f<p;f++){var m=k[f].copy(),r=0;for(var d=0,h=g.length;d<h;d++){if(m.indexOf(g[d])==-1){r++
}else{m.removeAt(m.indexOf(g[d]))}}e=(r<e)?r:e}a+=e}}}return a},_collectAllAllelesForTrait:function(g,j){if(!!this.possibleAllelesForTrait[g]){return this.possibleAllelesForTrait[g]
}var a={},c=[];for(var e in j[g]){for(var d in j[g][e]){if(j[g][e].hasOwnProperty(d)){for(var f=0,h=j[g][e][d].length;
f<h;f++){a[j[g][e][d][f]]=1}}}}for(var b in a){c.push(b)}this.possibleAllelesForTrait[g]=c;
return c},possibleAllelesForTrait:{}});Geniverse.AnimationView=SC.View.extend({layout:{centerX:0,centerY:0,height:400,width:400},jsondataurl:null,jsondataurlDidChange:function(){this.drawAnimationOnceAppended()
}.observes("jsondataurl"),jsonData:null,jsonDataDidChange:function(){this.drawAnimationOnceAppended()
}.observes("jsonData"),mode:"offspring",swapping:"none",meiosisOwner:"offspring",completedAnimationCalled:NO,trackScoreOnPlayButton:NO,dragon:null,dragonDidChange:function(){var a=this.get("dragon");
if(a!==null&&typeof a!="undefined"){this.set("jsonData",Geniverse.meiosisAnimationController.allelesToJSON(a.get("alleles")));
this.set("completedAnimationCalled",NO);Lab.statechart.sendAction("meiosisAnimationReady")
}else{this.set("jsonData",null)}}.observes("dragon"),resetMother:function(){if(this.get("meiosisOwner")==="mother"){this.dragonDidChange();
SC.RunLoop.begin();this.set("gameteJson",null);SC.RunLoop.end();Lab.logController.logEvent(Lab.EVENT.RESTARTED_MEIOSIS,{sex:0})
}}.observes("Geniverse.meiosisAnimationController.retryMother"),resetFather:function(){if(this.get("meiosisOwner")==="father"){this.dragonDidChange();
SC.RunLoop.begin();this.set("gameteJson",null);SC.RunLoop.end();Lab.logController.logEvent(Lab.EVENT.RESTARTED_MEIOSIS,{sex:1})
}}.observes("Geniverse.meiosisAnimationController.retryFather"),clearOnVisibliity:function(){if((this.get("isVisibleInWindow")&&(this.get("dragon")===null))&&(this.get("jsondataurl")===null)){this.drawAnimationOnceAppended()
}}.observes("isVisibleInWindow"),motherJson:null,fatherJson:null,jsonDidChange:function(){if(this.get("mode")=="offspring"){var b=this.get("motherJson");
var a=this.get("fatherJson");if(b!==null&&a!==null){Lab.statechart.sendAction("fertilizationReady");
this._combineMotherFatherJson(b,a)}else{if(b!==null){this.set("jsonData",b)}else{if(a!==null){this.set("jsonData",a)
}else{this.set("jsonData",null)}}}this.set("completedAnimationCalled",NO)}}.observes("motherJson","fatherJson"),_combineMotherFatherJson:function(b,a){var c={chromosomes:[]};
c.chromosomes=b.chromosomes.concat(a.chromosomes);this.set("jsonData",c)},animationLoaded:function(){SC.Logger.log("loaded animation")
},animationComplete:function(){if(this.get("completedAnimationCalled")){return}this.set("completedAnimationCalled",YES);
if(this.get("mode")=="offspring"){var c=function(d){SC.Logger.info("Created offspring dragon",d);
Geniverse.meiosisAnimationController.set("offspring",d);d.bred=true;d.mother=Geniverse.meiosisAnimationController.get("mother");
d.father=Geniverse.meiosisAnimationController.get("father");Lab.statechart.sendAction("meiosisOffspringReady");
Lab.statechart.sendAction("didBreedMeiosis")};SC.Logger.info("Animation completed.",this.get("jsonData"));
var a=Geniverse.meiosisAnimationController.JSONToAlleles(Geniverse.meiosisAnimationController.get("motherGameteJson"),Geniverse.meiosisAnimationController.get("fatherGameteJson"));
var b=Geniverse.meiosisAnimationController.getOffspringSex();Geniverse.gwtController.generateDragonWithAlleles(a,b,"Meiosis Child",c)
}else{var b=this.get("meiosisOwner")=="mother"?1:0;Lab.logController.logEvent(Lab.EVENT.COMPLETED_MEIOSIS,{sex:b})
}Lab.statechart.sendAction("meiosisAnimationCompleted",this.get("mode"))},playButtonPressed:function(){if(this.get("trackScoreOnPlayButton")){SC.RunLoop.begin();
Geniverse.scoringController.incrementScore(1);SC.RunLoop.end()}},endButtonPressed:function(a){if(!a&&this.get("trackScoreOnPlayButton")){SC.RunLoop.begin();
Geniverse.scoringController.incrementScore(1);SC.RunLoop.end()}},reachedRecombination:function(){Lab.statechart.sendAction("showInitialRecobinationMsg")
},allelesSelected:function(){Lab.statechart.sendAction("showSelectTargetnMsg")},ySwapAttempted:function(){Lab.statechart.sendAction("showYSwapAttemptedMsg")
},swapCompleted:function(){Lab.statechart.sendAction("showTryMoreRecombinationMsg")
},gameteJson:null,gameteSelected:function(c){SC.Logger.dir(c);SC.RunLoop.begin();
this.set("gameteJson",c);SC.RunLoop.end();var b=this.get("meiosisOwner")=="mother"?1:0,a=this._chromosomeJsonToString(c);
Lab.logController.logEvent(Lab.EVENT.SELECTED_GAMETE,{alleles:a,sex:b})},_chromosomeJsonToString:function(d){var g="",c,e,a,b,f;
for(c=0,e=d.chromosomes.length;c<e;c++){a=d.chromosomes[c].alleles;for(b=0,f=a.length;
b<f;b++){g+=a[b].gene+","}}return g.slice(0,-1)},hasAppended:NO,didAppendToDocument:function(){this.set("hasAppended",YES);
if(this.get("jsonData")!==null||this.get("jsondataurl")!==null){this.drawAnimation()
}},drawAnimationOnceAppended:function(){var a=this;function b(){a.removeObserver("hasAppended",b);
a.drawAnimation()}if(this.get("hasAppended")){this.drawAnimation()}else{this.addObserver("hasAppended",b)
}},drawAnimation:function(){SC.Logger.log("loading animation:",this);var d=this.get("jsonData");
if(d===null){d=this.get("jsondataurl")}SC.Logger.log("jsonData:",d);var e="#"+this.get("layerId")+" #"+this.get("meiosisOwner");
SC.Logger.log("looking for id:",e);var b=$(e);SC.Logger.log("found jQuery selector geniverseAnimation:",b);
var a={mode:this.get("mode"),swap:this.get("swapping"),owner:this.get("meiosisOwner"),mother:(this.get("motherJson")!==null),father:(this.get("fatherJson")!==null),segMoveSpeed:5,width:320,height:320,context:this,loaded:this.animationLoaded,animationComplete:this.animationComplete,gameteSelected:this.gameteSelected,playButtonPressed:this.playButtonPressed,endButtonPressed:this.endButtonPressed,reachedRecombination:this.reachedRecombination,allelesSelected:this.allelesSelected,swapCompleted:this.swapCompleted,ySwapAttempted:this.ySwapAttempted};
if(b.length>0){SC.Logger.log("calling animation init:");SC.Logger.dir(d);var c=this.get("initialHtml");
if(d){b.html(c).geniverse(d,a)}else{b.html(c)}}},initialHtml:function(){var a="";
a+='<div class="cell ui-state-default ui-corner-all"></div>';a+='<div class="controls">';
a+='<button class="stop"><img src="/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/meiosis_stop_small.png" /></button>';
a+='<button class="play"><img src="/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/meiosis_play_small.png" /></button>';
a+='<button class="end"><img src="/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/meiosis_end_small.png" /></button>';
if((this.get("mode")==="parent")&&this.get("swapping")){a+='<button class="swap"><img src="/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/meiosis_exchange_16x16_monochrome.png" /></button>'
}if(this.get("mode")==="parent"){a+='<button class="retry"><img src="/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/meiosis_retry_monochrome.png" /></button>'
}a+='<div class="scrub"></div>';a+="</div>";return a}.property("mode").cacheable(),render:function(a,b){a.push('<div id="'+this.get("meiosisOwner")+'" class="meiosis ui-state-default ui-corner-all">');
a.push(this.get("initialHtml"));a.push("</div>")}});sc_require("views/animation");
Geniverse.PopupAnimationView=SC.PalettePane.design({layout:{width:440,height:430,centerX:0,centerY:0},isModal:NO,contentView:SC.View.extend({childViews:"titleView meiosisView hideButton".w(),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,width:440},value:"Dragon Animations  -  drag here to move",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"sc-pane sc-main sc-theme".w()}),hideButton:SC.ButtonView.extend({layout:{bottom:5,right:5,width:80,height:24},title:"Close",action:"close",target:"Geniverse.meiosisAnimationController"}),meiosisView:Geniverse.AnimationView.design({layout:{left:10,top:24,width:420,height:400},jsondataurl:null})})});
sc_require("views/animation");sc_require("views/popup_animation");Geniverse.meiosisAnimationController=SC.ObjectController.create({content:SC.Object.create({dragon:null,pane:null,isEnabledButton:NO,mother:null,father:null,offspring:null,fatherGameteJson:null,motherGameteJson:null,retryMother:false,retryFather:false}),reset:function(){this.set("dragon",null);
this.set("mother",null);this.set("father",null);this.set("offspring",null);this.set("fatherGameteJson",null);
this.set("motherGameteJson",null)},clearOffspring:function(){this.set("offspring",null)
}.observes("mother","father","fatherGameteJson","motherGameteJson"),clearMotherGamete:function(){this.set("motherGameteJson",null)
}.observes("mother"),clearFatherGamete:function(){this.set("fatherGameteJson",null)
}.observes("father"),allelesToJSON:function(g){if(g!==null&&typeof(g)!="undefined"){SC.Logger.info("alleles: "+g);
var b=Geniverse.chromosomeController.processAlleleString(g);document.alleles=b;var f=[];
for(var d=1;d<4;d++){if(d===3){d="X"}var k=[];for(var c=0;c<b[d].A.length;c++){var a={sex:"female",gene:b[d].A[c]};
k.push(a)}f.push({alleles:k});k=[];if(b[d].B!==null&&typeof b[d].B!="undefined"){for(c=0;
c<b[d].B.length;c++){var e={sex:"male",gene:b[d].B[c]};k.push(e)}f.push({alleles:k})
}else{SC.Logger.info("No B side!");f.push({alleles:[{sex:"male",gene:""},{sex:"male",gene:""}]})
}}var h={chromosomes:f};return h}return null},JSONToAlleles:function(b,d){var a="";
var c=this._JSONToAlleles(b,"a:");var e=this._JSONToAlleles(d,"b:");SC.Logger.log("ALLELES : "+c+e);
return c+e},_JSONToAlleles:function(e,f){var a="";for(var d=0;d<e.chromosomes.length;
d++){var b=e.chromosomes[d];for(var c=0;c<b.alleles.length;c++){a+=f+b.alleles[c].gene+","
}}return a},getOffspringSex:function(){var a=Geniverse.meiosisAnimationController.get("fatherGameteJson").chromosomes[2].alleles;
var b=1;if(a.length===0){b=0}else{if(a[0].gene===""||a[0].gene==="Y"){b=0}}return b
},showPane:function(){this.set("pane",Geniverse.PopupAnimationView.create());var b=this.get("pane");
var c=this.get("dragon");var a=this.allelesToJSON(c.get("alleles"));b.contentView.meiosisView.set("jsonData",a);
if(!b.get("isVisibleInWindow")){b.append();this.set("isEnabledButton",NO)}},close:function(){var a=this.pane.remove();
this.set("isEnabledButton",YES)}});Geniverse.NotepadView=SC.PalettePane.design({layout:{width:440,height:430,centerX:0,centerY:0},isModal:NO,contentView:SC.View.extend({childViews:"titleView notepadView cancelButton hideButton".w(),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,width:440},value:"Note Pad",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"sc-pane sc-main sc-theme".w()}),cancelButton:SC.ButtonView.extend({layout:{bottom:5,right:210,width:150,height:24},title:"Cancel",action:"cancel",target:"Geniverse.notepadController"}),hideButton:SC.ButtonView.extend({layout:{bottom:5,right:5,width:200,height:24},title:"Save and Close",action:"commitAndRemoveView",target:"Geniverse.notepadController"}),notepadView:SC.TextFieldView.design({layout:{left:10,top:24,width:420,height:375},hint:"Type your personal lab notes into this Note Pad",isEditable:YES,isTextArea:YES,value:"",notepadViewValueDidChange:function(){var a=this.get("value");
Geniverse.notepadController.set("content",a)}.observes("value")})})});sc_require("views/notepad");
Geniverse.notepadController=SC.ObjectController.create({pane:null,contentBinding:"Geniverse.userController*content.note",isEnabledButton:YES,iframe:null,showPane:function(d){var e=Geniverse.userController.get("username");
if(e){var b=Geniverse.userController.get("note");var a=Geniverse.NotepadView.create();
this.set("pane",a);var c=this.get("pane");if(!c.get("isVisibleInWindow")){this.set("iframe",SC.WebView.create({layoutBinding:"Geniverse.notepadController.pane.layout",value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/empty.html"}));
if(Geniverse.activityController.get("pageContainsApplet")){Geniverse.activityController.get("iframeLayerToAppend").appendChild(this.get("iframe"))
}c.append();this.updateView(this.get("content"));this.set("isEnabledButton",NO);Lab.logController.logEvent(Lab.EVENT.OPENED_NOTEPAD)
}Lab.statechart.sendAction("warnUserBeforeLeaving")}else{SC.AlertPane.error("","You must be logged in first to use your Note Pad.")
}},contentDidChange:function(){var a=this.get("content");this.updateView(a)}.observes("content"),fixLineBreaks:function(b){if(b){var a=b.toString();
if(a){return a.replace(/\n/g,"\r")}}return b},cancel:function(){Geniverse.userController.get("content").refresh();
var a=this.get("content");var d=Geniverse.userController.get("note");if(d!=a){this.set("content",d);
this.updateView(this.get("content"))}var c=this.pane.remove();var b=this.get("iframe").get("parentView");
if(!!b){b.removeChild(this.get("iframe"))}this.set("isEnabledButton",YES);Lab.statechart.sendAction("dontWarnUserBeforeLeaving");
Lab.logController.logEvent(Lab.EVENT.CLOSED_NOTEPAD)},commitAndRemoveView:function(){var a=this.get("content");
var e=Geniverse.userController.get("note");if(e!=a){Geniverse.userController.set("note",a)
}Geniverse.userController.set("note",this.fixLineBreaks(Geniverse.userController.get("note")));
var b=Geniverse.store.commitRecords();var d=this.pane.remove();var c=this.get("iframe").get("parentView");
if(!!c){c.removeChild(this.get("iframe"))}this.set("isEnabledButton",YES);Lab.statechart.sendAction("dontWarnUserBeforeLeaving");
Lab.logController.logEvent(Lab.EVENT.SAVED_NOTEPAD)},updateView:function(a){if(this.pane){this.pane.contentView.notepadView.set("value",a)
}}});Geniverse.proposedController=SC.ArrayController.create(SC.CollectionViewDelegate,{selectionBinding:"Geniverse.allSelectedDragonsController.selection"});
Geniverse.publishedArticlesController=SC.ArrayController.create({articleText:function(){var a=this.get("selection").firstObject();
if(a!==undefined&&a!==null){return a.get("text")}else{return""}}.property("selection").cacheable(),dragons:function(){var a=this.get("selection").firstObject();
if(a!==undefined&&a!==null){return a.get("dragons")}else{return[]}}.property("selection").cacheable()});
Geniverse.stableOrganismsController=SC.ArrayController.create(SC.CollectionViewDelegate,{maxSize:20,selectionBinding:"Geniverse.allSelectedDragonsController.selection",collectionViewDeleteContent:function(a,e,d){var c=d.map(function(f){return this.objectAt(f)
},this);c.invoke("destroy");var b=d.get("min")-1;if(b<0){b=0}this.selectObject(this.objectAt(b))
},nowShowing:"Geniverse.mainChatExamplePage.bredDragonsScrollView",saveData:function(){Geniverse.store.commitRecords()
}.observes("[]")});Geniverse.statisticsController=SC.Controller.create({isBreedingBinding:"Geniverse.breedDragonController.isBreeding",dragonsBinding:"Geniverse.eggsController.content",previousBreedingStatus:NO,breedingComplete:YES,dragonGroups:{},dragonSize:0,cumulativeCounts:{},cumulativeSize:0,traitList:[{title:"Horns"},{title:"Wings"},{title:"Forelimbs"},{title:"Hindlimbs"},{title:"Armor"},{title:"Tail"},{title:"Color"},{title:"Nose spike"},{title:"Health"}],breedingStatus:function(){if(this.get("isBreeding")==NO){this.calculateStats()
}}.observes("isBreeding"),calculateStats:function(){var a={};var c=this.get("cumulativeCounts");
var b=this.get("cumulativeSize");var d=this.get("dragons");if(d!==null){d.forEach(function(h){var e=this.get("traitList");
b++;for(var g=0;g<e.length;g++){var f=e[g].title;var k=h.characteristicValue(f);var j=h.sexAsString();
if(!a[f]){a[f]={}}if(!a[f][k]){a[f][k]={};a[f][k].Male=0;a[f][k].Female=0}if(!c[f]){c[f]={}
}if(!c[f][k]){c[f][k]={};c[f][k].Male=0;c[f][k].Female=0}a[f][k][j]+=1;c[f][k][j]+=1
}},this);this.set("dragonGroups",a);this.set("cumulativeCounts",c);this.set("cumulativeSize",b);
this.set("breedingComplete",!this.get("breedingComplete"))}},reset:function(){this.set("cumulativeCounts",{});
this.set("cumulativeSize",0)}});Geniverse.statsController=SC.Controller.create({red:0,green:0,yellow:0,purple:0,brown:0,redLabel:"--",greenLabel:"--",yellowLabel:"--",purpleLabel:"--",brownLabel:"--",labelNames:"red green yellow purple brown".w(),total:0,label:function(a){return(this.get(a)+" -"+this.percent(this.get(a))+"%")
},reset:function(){this.set("red",0);this.set("green",0);this.set("yellow",0);this.set("purple",0);
this.set("brown",0);this.set("total",0);this.updateLabels()}.observes("Geniverse.breedDragonController.resetCount"),newChildObserver:function(){this.updateStats(Geniverse.breedDragonController.get("newChild"))
}.observes("Geniverse.breedDragonController.newChild"),updateStats:function(d){if(d){var a=d.get("color").toLowerCase();
var c=this.get(a)+1;var b=this.total+1;this.set("total",b);this.set(a,c);this.updateLabels()
}},updateLabels:function(){var c=this.get("labelNames");var d=0;for(d=0;d<c.length;
d++){var a=c[d];var b=a+"Label";this.set(b,this.label(a))}},percent:function(b){var a=this.get("total");
if(a===0){return 0}return(((b/a)*100)+" ").substring(0,3)}});Geniverse.unlockablesController=SC.Object.create({userBinding:"Geniverse.userController.content",loaded:NO,loadQueries:function(){if(!this.get("loaded")){this.set("all",Geniverse.store.find(SC.Query.local(Geniverse.Unlockable,{orderBy:"title ASC"})));
this.set("unlocked",Geniverse.store.find(SC.Query.local(Geniverse.Unlockable,{conditions:"unlocked = true",orderBy:"title ASC"})));
this.set("locked",Geniverse.store.find(SC.Query.local(Geniverse.Unlockable,{conditions:"unlocked = false",orderBy:"title ASC"})));
this.set("viewed",Geniverse.store.find(SC.Query.local(Geniverse.Unlockable,{conditions:"unlocked = true AND viewed = true",orderBy:"title ASC"})));
this.set("notViewed",Geniverse.store.find(SC.Query.local(Geniverse.Unlockable,{conditions:"unlocked = true AND viewed = false",orderBy:"title ASC"})));
this.set("loaded",YES)}},loadUnlockables:function(){this.loadQueries();var a=this.get("user");
var b=this.get("all");if(typeof(a)!="undefined"&&a!==null){var c=function(){b.forEach(function(e){var d=0;
if(Geniverse.userController.isAccelerated()){d=1}else{if(Geniverse.userController.isUnlocked("unlockables",e.get("title"))){d=1
}else{d=Geniverse.userController.getPageStars(e.get("trigger"))}}if(d>0){e.set("unlocked",YES);
e.set("viewed",YES)}})};if(b.get("status")==SC.Record.READY_CLEAN){c()}else{b.addObserver("status",function(){if(b.get("status")==SC.Record.READY_CLEAN){b.removeObserver("status",this);
c()}})}}}.observes("user"),unlockAllLocked:function(){var b=this;this.loadQueries();
var a=this.get("locked");a.forEach(function(c){c.set("unlocked",YES);b.notifyUnlockable(c)
});this.get("all").reload();this.propertyDidChange("all");this.propertyDidChange("locked");
this.propertyDidChange("unlocked")},all:null,unlocked:null,locked:null,viewed:null,notViewed:null,unlockFor:function(b,d){var e=this;
var a=this.get("locked").filter(function(f){return f.get("trigger")==b});var c=[];
a.forEach(function(f){f.set("unlocked",YES);Geniverse.doWhenReady(this,Geniverse.userController.get("content"),function(){Geniverse.userController.setUnlocked("unlockables",f.get("title"));
if(!d){e.notifyUnlockable(f)}});c.push(f)});this.get("all").reload();this.propertyDidChange("all");
this.propertyDidChange("locked");this.propertyDidChange("unlocked");return c},toNotify:[],currentNotification:null,notifyUnlockable:function(a){this.get("toNotify").push(a);
this.notifyNextUnlockable()},notifyNextUnlockable:function(){if(!this.get("currentNotification")&&!this.getPath("selectedUnlockable.content")){var c=this.get("toNotify").shift();
if(c&&c.get("openAutomatically")){this.set("selectedUnlockable",c)}else{if(c){var b=this;
var a=Geniverse.UnlockableNotificationView.create({message:c.get("title"),click:function(){b.removeCurrentNotification(true);
b.set("selectedUnlockable",c)}});this.set("currentNotification",a);a.append()}}}},removeCurrentNotification:function(a){_this=Geniverse.unlockablesController;
if(!!_this.get("currentNotification")){_this.get("currentNotification").remove();
_this.set("currentNotification",null)}if(!a){_this.notifyNextUnlockable()}},displayUnlockable:function(){var a=this.get("selectedUnlockable");
if(a&&a.get("content")){a.set("viewed",YES);this.showPane()}}.observes("selectedUnlockable"),selectedUnlockable:null,pane:null,showPane:function(){var a=Geniverse.UnlockableView;
this.set("pane",a);if(!a.get("isVisibleInWindow")){a.append()}},removePane:function(){var a=this.get("pane");
if(this.get("pane")){this.get("pane").remove();this.set("pane",null);this.set("selectedUnlockable",SC.Object.create())
}this.notifyNextUnlockable()}});Geniverse.userController=SC.ObjectController.create({usernameBinding:"*user.username",isAccelerated:function(){return this.getUserMetadata().accelerated||NO
}.property("*user","*user.metadata.accelerated"),setAccelerated:function(a){var b=this.getUserMetadata();
b.accelerated=a;this.setUserMetadata(b);Geniverse.store.commitRecords()},createUser:function(d,c){if(!c){c=""
}var a=SHA256(c);var b=Geniverse.store.createRecord(Geniverse.User,{username:d,passwordHash:a,groupId:1,memberId:1,note:""});
this.set("content",b);Geniverse.store.commitRecords();return b},findUser:function(f,e){var a=this;
var c=SC.Query.local(Geniverse.User,{conditions:'username = "'+f+'"',restParams:Geniverse.makeRestParams({username:f})});
var d=Geniverse.store.find(c);var b=function(){var g=d.firstObject();e(g)};Geniverse.doWhenReadyClean(a,d,b)
},findOrCreateUser:function(d,c){var a=this;var b=function(e){if(e){SC.Logger.log("found user %@",e);
c(e)}else{e=a.createUser(d);SC.Logger.log("couldn't find user %@",d);var f=function(){SC.Logger.log("created username %@",d);
c(e)};Geniverse.doWhenReadyClean(a,e,f)}};a.findUser(d,b)},getUserMetadata:function(){var a=this.get("metadata");
if(!a){a={}}return a},setUserMetadata:function(b){var a=this.get("content");a.set("metadata",b);
a.recordDidChange()},isUnlocked:function(b,a){var c=this.getUserMetadata();if(c.unlockedCases&&c.unlockedCases[b]){return c.unlockedCases[b][a]||false
}return false},setUnlocked:function(b,a){var c=this.getUserMetadata();if(!c.unlockedCases){c.unlockedCases={}
}if(!c.unlockedCases[b]){c.unlockedCases[b]={}}c.unlockedCases[b][a]=true;this.setUserMetadata(c)
},setPageStars:function(b,a){var c=Geniverse.userController.getUserMetadata();if(!c.stars){c.stars={}
}if(!c.stars[b]){c.stars[b]=[]}c.stars[b].push({stars:a,time:this._getCurrentTimestring()});
Geniverse.userController.setUserMetadata(c)},getPageStars:function(b){var g=this.getUserMetadata(),a=g.stars||{},j=a[b]||[],c=[];
for(var e=0;e<j.length;e++){var f=j[e];var h=0;if(typeof(f)=="object"){h=f.stars||0
}else{if(typeof(f)=="number"){h=f}}c.push(h)}return Math.max.apply([],[0].concat(c))
},saveBlogPost:function(b){var f=Geniverse.userController.getUserMetadata();if(!f.posts){f.posts={}
}var e=Geniverse.blogPostController.get("content1");var d=Geniverse.blogPostController.get("content2");
var c=Geniverse.blogPostController.get("content3");var a=Geniverse.blogPostController.get("content4");
if(!f.posts[b]){f.posts[b]=[]}f.posts[b].push({time:this._getCurrentTimestring(),claim:e,evidence:d,url:c,reasoning:a});
Geniverse.userController.setUserMetadata(f)},saveBlogDraft:function(b){var f=Geniverse.userController.getUserMetadata();
if(!f.drafts){f.drafts={}}var e=Geniverse.blogPostController.get("content1");var d=Geniverse.blogPostController.get("content2");
var c=Geniverse.blogPostController.get("content3");var a=Geniverse.blogPostController.get("content4");
f.drafts[b]={time:this._getCurrentTimestring(),content1:e,content2:d,content3:c,content4:a};
Geniverse.userController.setUserMetadata(f)},getBlogDraft:function(a){var c=this.getUserMetadata(),b=c.drafts||{};
return b[a]||{}},_getCurrentTimestring:function(){var a=SC.DateTime.create().toTimezone(300);
return a.toFormattedString("%Y-%m-%d %i:%M %p")}});(function(){var a={}.hasOwnProperty,b=[].indexOf||function(e){for(var d=0,c=this.length;
d<c;d++){if(d in this&&this[d]===e){return d}}return -1};Array.prototype.remove=function(e,d){var c;
c=this.slice((d||e)+1||this.length);this.length=e<0?this.length+e:e;return this.push.apply(this,c)
};Array.prototype.removeObj=function(d){var c;c=this.indexOf(d);if(~c){this.remove(c);
return true}else{return false}};Array.prototype.replaceFirst=function(d,c){return this[this.indexOf(d)]=c
};Array.prototype.shuffle=function(){var e,c,d;d=this.length;if(d){while(--d){e=Math.floor(Math.random()*(d+1));
c=this[e];this[e]=this[d];this[d]=c}}return this};window.ExtMath={};ExtMath.randomInt=function(c){return Math.floor(Math.random()*c)
};ExtMath.flip=function(){return ExtMath.randomInt(2)};window.BioLogica={};BioLogica.FEMALE=1;
BioLogica.MALE=0;BioLogica.combinations=function(i){var f,l,k,c,d,m,h,g,j,e;m=[];
k=i[0];if(i.length===1){return k.slice(0)}l=BioLogica.combinations(i.slice(1));for(h=0,j=l.length;
h<j;h++){f=l[h];if(typeof f==="string"){f=[f]}for(g=0,e=k.length;g<e;g++){c=k[g];
d=f.slice(0);d.unshift(c);m.push(d)}}return m.slice(0)};BioLogica.Chromosome=(function(){function c(n,d,m,e){var l,j,o,h,f,g,k=this;
this.species=n;this.chromosome=d;h=[];this.alleles=e.sort(function(p,i){if(k.getAllelesPosition(p)>k.getAllelesPosition(i)){return 1
}else{return -1}}).filter(function(i){var p;p=k.getGeneOfAllele(i);if(h.indexOf(p)!==-1){if(typeof console!=="undefined"&&console!==null){console.warn("Duplicate allele found: "+i)
}return false}h.push(p);return true});if(typeof m==="object"){this.side=m[0]}else{this.side=m
}this.allelesWithSides=[];for(j=f=0,g=this.alleles.length;0<=g?f<g:f>g;j=0<=g?++f:--f){l=this.alleles[j];
o=typeof m==="object"?m[j]:this.side;this.allelesWithSides.push({allele:l,side:o})
}}c.prototype.clone=function(d){return new BioLogica.Chromosome(this.species,this.chromosome,d||this.side,this.alleles.slice(0))
};c.prototype.lengthInCentimorgans=100;c.prototype.getlengthInBasePairs=function(){return this.species.chromosomesLength[this.chromosome]
};c.prototype.getGeneOfAllele=function(d){var g,f,e;e=this.species.geneList;for(f in e){if(!a.call(e,f)){continue
}g=e[f];if(~g.alleles.indexOf(d)){return f}}};c.prototype.getAllelesPosition=function(d){var f,e;
f=this.getGeneOfAllele(d);return((e=this.species.geneList[f])!=null?e.start:void 0)||-1
};return c})();BioLogica.Chromosome.createChromosome=function(m,l,g){var c,h,f,j,d,k,e;
f=[];j=[];e=m.alleles;for(h=d=0,k=e.length;d<k;h=++d){c=e[h];if(m.getAllelesPosition(c)<g){f.push(c);
j.push(m.allelesWithSides[h].side)}else{f.push(l.alleles[h]);j.push(l.allelesWithSides[h].side)
}}return new BioLogica.Chromosome(m.species,m.chromosome,j,f)};BioLogica.Genotype=(function(){function c(l,d,j){var h,e,k,f,i,g;
this.sex=j;this.chromosomes={};this.allAlleles=[];for(e in d){if(!a.call(d,e)){continue
}f=d[e];this.chromosomes[e]={};for(k in f){if(!a.call(f,k)){continue}h=f[k];if(k==="y"){h=[]
}this.chromosomes[e][k]=new BioLogica.Chromosome(l,e,k,h.slice(0));this.allAlleles=this.allAlleles.concat(h.slice(0))
}}if((i=this.sex)==null){this.sex=((g=this.chromosomes.XY)!=null?g.y:void 0)!=null?BioLogica.MALE:BioLogica.FEMALE
}}c.prototype.containsAlleles=function(e){var h,f,g,d;h=this.allAlleles.slice(0);
if(this.sex===BioLogica.MALE){h.push("Y")}for(g=0,d=e.length;g<d;g++){f=e[g];if(!h.removeObj(f)){return false
}}return true};c.prototype.replaceAllele=function(d,e,f){d.alleles.replaceFirst(e,f);
return this.allAlleles.replaceFirst(e,f)};c.prototype.getAlleleString=function(){var f,s,j,n,p,e,d,m,r,o,k,q,l,h,g;
s="";l=this.chromosomes;for(p in l){if(!a.call(l,p)){continue}d=l[p];for(o in d){if(!a.call(d,o)){continue
}e=d[o];j=e.alleles;r=o==="x"?"y":o==="x1"?"x2":"b";if(o==="x"||o==="x1"){o="a"}if(o!=="a"){continue
}for(m=k=0,q=j.length;k<q;m=++k){f=j[m];s+=""+o+":"+f+",";if(d[r]){n=(h=d[r])!=null?h.alleles[m]:void 0;
if(n){s+="b:"+((g=d[r])!=null?g.alleles[m]:void 0)+","}}}}}return s.substring(0,s.length-1)
};return c})();BioLogica.Genetics=(function(){function c(f,e,g){var d;this.species=f;
this.alleles=e;d=typeof this.alleles==="string"?this.convertAlleleStringToGenotypeHash(this.alleles,g):this.alleles;
this.topUpChromosomes(d);this.genotype=new BioLogica.Genotype(this.species,d,g)}c.prototype.convertAlleleStringToGenotypeHash=function(q,l){var g,i,o,d,m,f,n,j,h,p,e,k;
n=BioLogica.Genetics.parseAlleleString(q);d={};k=this.species.chromosomeNames;for(j=0,p=k.length;
j<p;j++){o=k[j];d[o]={};f=this.getSides(o,l);d[o][f[0]]=[];d[o][f[1]]=[]}for(m in n){if(!a.call(n,m)){continue
}i=n[m];if(!i){continue}for(h=0,e=i.length;h<e;h++){g=i[h];o=this.findChromosome(g);
if(!o){continue}f=this.getSides(o,l);d[o][m==="a"?f[0]:f[1]].push(g)}}return d};c.prototype.getAlleleString=function(){return this.genotype.getAlleleString()
};c.prototype.topUpChromosomes=function(d){var h,f,j,i,g,e;e=[];for(h in d){if(!a.call(d,h)){continue
}f=d[h];i=this.species.chromosomeGeneMap[h];e.push((function(){var m,k,l;l=[];for(m=0,k=i.length;
m<k;m++){j=i[m];l.push((function(){var n;n=[];for(g in f){if(!a.call(f,g)){continue
}if(!(this.chromosomeContainsGene(d[h][g],j)||g==="y")){n.push(d[h][g].push(this.getRandomAllele(j)))
}else{n.push(void 0)}}return n}).call(this))}return l}).call(this))}return e};c.prototype.getSides=function(d,e){if(d!=="XY"){return["a","b"]
}else{if(e===BioLogica.FEMALE){return["x1","x2"]}else{return["x","y"]}}};c.prototype.isAlleleOfGene=function(d,g){var e,h,f;
f=this.species.geneList;for(h in f){if(!a.call(f,h)){continue}e=this.species.geneList[h].alleles;
if(b.call(e,d)>=0&&b.call(e,g)>=0){return true}}return false};c.prototype.findChromosome=function(g){var e,j,f,i,d,h;
h=this.species.chromosomeGeneMap;for(e in h){f=h[e];for(i=0,d=f.length;i<d;i++){j=f[i];
if(this.isAlleleOfGene(g,j)){return e}}}return false};c.prototype.chromosomeContainsGene=function(e,h){var f,g,d;
for(g=0,d=e.length;g<d;g++){f=e[g];if(this.isAlleleOfGene(f,h)){return true}}return false
};c.prototype.getRandomAllele=function(h){var f,i,e,d,g;g=this.species.geneList;for(i in g){if(!a.call(g,i)){continue
}d=this.species.geneList[i].alleles;if(b.call(d,h)>=0){f=d;break}}e=Math.floor(Math.random()*f.length);
return f[e]};c.prototype.filter=function(d,e){var f=this;return d.filter(function(h){var j,i,g;
for(i=0,g=e.length;i<g;i++){j=e[i];if(f.isAlleleOfGene(h,j)){return true}}return false
})};c.prototype.performMeiosis=function(p){var e,l,v,z,q,u,w,n,o,k,s,y,x,g,A,m,f,d,B,r,h;
l=[{},{},{},{}];s={};r=this.genotype.chromosomes;for(q in r){if(!a.call(r,q)){continue
}w=r[q];m={};A=["b2","b1","a2","a1"];n=false;for(g in w){if(!a.call(w,g)){continue
}u=w[g];m[A.pop()]=u.clone();m[A.pop()]=u.clone();if(g==="y"){n=true}}if(p&&!n){k=this.crossover(m)
}A=["b2","b1","a2","a1"].shuffle();for(y=f=0,B=l.length;f<B;y=++f){e=l[y];z=A[y];
v=m[z];if(!p){v.side=this.getHaploidChromatidSide(v)}e[q]=v;if(k!=null){for(x=d=0,h=k.length;
0<=h?d<h:d>h;x=0<=h?++d:--d){o=k[x];if(o.start===z){o.start_cell=y}if(o.end===z){o.end_cell=y
}}}}s[q]=k}return{cells:l,crossInfo:s}};c.prototype.getHaploidChromatidSide=function(d){if(d.side==="b"){return"a"
}else{if(d.side==="x1"||d.side==="x2"){return"x"}else{return d.side}}};c.prototype.crossover=function(d){var h,g,k,l,j,f,e,i;
h=this.createCrossoverPoints(d.a1);g=[];for(e=0,i=h.length;e<i;e++){j=h[e];f=["a1","a2"][ExtMath.flip()];
k=["b1","b2"][ExtMath.flip()];g.push({start:f,end:k,point:j});l=this.crossChromatids(d[f],d[k],j);
d[f]=l[0];d[k]=l[1]}return g};c.prototype.crossChromatids=function(f,e,d){return[BioLogica.Chromosome.createChromosome(e,f,d),BioLogica.Chromosome.createChromosome(f,e,d)]
};c.prototype.createCrossoverPoints=function(j){var g,k,h,d,m,e,f,l;e=Math.floor(j.lengthInCentimorgans/10);
k=(function(){var n,i;i=[];for(h=n=0;0<=e?n<e:n>e;h=0<=e?++n:--n){if(Math.random()<0.2){i.push(h)
}}return i})();while(k.length>3){k.remove(ExtMath.randomInt(k.length))}d=j.getlengthInBasePairs()/e;
for(h=f=0,l=k.length;f<l;h=++f){g=k[h];m=ExtMath.randomInt(d);k[h]=(g*d)+m}return k
};return c})();BioLogica.Genetics.parseAlleleString=function(d){var e,c;return{a:(e=d.match(/a:([^,])*/g))!=null?e.map(function(g){var f;
return(f=g.match(/[^:]+$/))!=null?f[0]:void 0}):void 0,b:(c=d.match(/b:([^,])*/g))!=null?c.map(function(f){var g;
return(g=f.match(/[^:]+$/))!=null?g[0]:void 0}):void 0}};BioLogica.Phenotype=(function(){function c(f){var h,e,g,d,k,i,l,j;
this.characteristics={};this.allCharacteristics=[];j=f.species.traitRules;for(k in j){if(!a.call(j,k)){continue
}d=j[k];for(g in d){if(!a.call(d,g)){continue}e=d[g];for(i=0,l=e.length;i<l;i++){h=e[i];
if(f.genotype.containsAlleles(h)){this.characteristics[k]=g;this.allCharacteristics.push(g);
break}}if(this.characteristics[k]){break}}}}return c})();BioLogica.Organism=(function(){function c(e,d,f){var g;
this.species=e;this.sex=f;this.alleles=typeof d==="string"?this.preProcessAlleleString(d):d;
this.genetics=new BioLogica.Genetics(this.species,this.alleles,this.sex);if((g=this.sex)==null){this.sex=this.genetics.genotype.sex
}this.resetPhenotype()}c.prototype.getGenotype=function(){return this.genetics.genotype
};c.prototype.resetPhenotype=function(){return this.phenotype=new BioLogica.Phenotype(this.genetics)
};c.prototype.getCharacteristic=function(d){return this.phenotype.characteristics[d]
};c.prototype.getAllCharacteristics=function(){return this.phenotype.allCharacteristics
};c.prototype.getImageName=function(){return this.species.getImageName(this)};c.prototype.getAlleleString=function(){return this.genetics.getAlleleString()
};c.prototype.createGametes=function(j,e){var d,f,h,g;if(e==null){e=true}d=[];for(f=h=0,g=Math.floor(j/4);
0<=g?h<g:h>g;f=0<=g?++h:--h){d=d.concat(this.genetics.performMeiosis(e).cells)}d=d.concat(this.genetics.performMeiosis(e).cells.slice(0,j%4));
if(d.length===1){return d[0]}else{return d}};c.prototype.createGametesWithCrossInfo=function(h){var d,e,g,f;
d=[];for(e=g=0,f=Math.floor(h/4);0<=f?g<f:g>f;e=0<=f?++g:--g){d=d.concat(this.genetics.performMeiosis(true))
}if(h%4!==0){d=d.concat(this.genetics.performMeiosis(true))}return d};c.prototype.preProcessAlleleString=function(d){return d.replace(/,+$/,"")
};c.prototype.toString=function(){var d,e;e=this.sex===BioLogica.FEMALE?"female":"male";
d=this.genetics.genotype.allAlleles;return"Organism: {sex: "+e+", authored alleles: "+this.alleles+", alleles: "+d
};return c})();BioLogica.Organism.createOrganism=function(d,c,e){if(c==null){c=""
}if(e==null){e=ExtMath.flip()?BioLogica.FEMALE:BioLogica.MALE}return new BioLogica.Organism(d,c,e)
};BioLogica.Organism.createLiveOrganism=function(d,c,e){var f;if(c==null){c=""}if(e==null){e=ExtMath.flip()?BioLogica.FEMALE:BioLogica.MALE
}f=new BioLogica.Organism(d,c,e);f.species.makeAlive(f);return f};BioLogica.Organism.createFromGametes=function(l,k,e){var h,f,j,d,c,g;
for(g in e){d=e[g];if(d.side==="a"){d.side="b"}}for(g in k){d=k[g];if(d.side==="b"){d.side="a"
}}if(e.XY.side==="y"){k.XY.side="x"}else{k.XY.side="x1";e.XY.side="x2"}c={};for(j in k){if(!a.call(k,j)){continue
}h=k[j];f=e[j];c[j]={};c[j][h.side]=h.alleles;c[j][f.side]=f.alleles}return new BioLogica.Organism(l,c)
};BioLogica.breed=function(f,e,g){var d,c;d=f.createGametes(1,g);c=e.createGametes(1,g);
return BioLogica.Organism.createFromGametes(f.species,d,c)};BioLogica.Species=BioLogica.Species||{};
BioLogica.Species.Drake={name:"Drake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["t","m","w","h"],"2":["c","b","fl","hl","a"],XY:["d","rh","bog"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T","Tk","t"],start:10000000,length:10584},metalic:{alleles:["M","m"],start:20000000,length:259610},wings:{alleles:["W","w"],start:70000000,length:9094},horns:{alleles:["H","h"],start:85000000,length:19421},color:{alleles:["C","c"],start:15000000,length:64572},black:{alleles:["B","b"],start:25000000,length:17596},forelimbs:{alleles:["Fl","fl"],start:80000000,length:122234},hindlimbs:{alleles:["Hl","hl"],start:85000000,length:6371},armor:{alleles:["A1","A2","a"],start:90000000,length:425156},dilute:{alleles:["D","d","dl"],start:20000000,length:152673},bogbreath:{alleles:["Bog","bog"],start:22000000,length:199642},nose:{alleles:["Rh","rh"],start:60000000,length:2950}},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Metallic",m:"Nonmetallic",W:"Wings",w:"No wings",H:"No horns",h:"Horns",C:"Colored",c:"Colorless",Fl:"Forelimbs",fl:"No forelimbs",Hl:"Hindlimbs",hl:"No hindlimbs",A1:"'A1' armor",A2:"'A2' armor",a:"'a' armor",B:"Black",b:"Brown",D:"Full color",d:"Dilute color",dl:"dl",Rh:"Nose spike",rh:"No nose spike",Bog:"Healthy",bog:"Bog breath",Y:"Y","":""},traitRules:{armor:{"Five armor":[["A1","A1"],["A1","A2"]],"Three armor":[["A1","a"],["A2","A2"]],"One armor":[["A2","a"]],"No armor":[["a","a"]]},tail:{"Long tail":[["T","T"],["T","Tk"],["T","t"]],"Kinked tail":[["Tk","Tk"],["Tk","t"]],"Short tail":[["t","t"]]},forelimbs:{Forelimbs:[["Fl","Fl"],["Fl","fl"]],"No forelimbs":[["fl","fl"]]},hindlimbs:{Hindlimbs:[["Hl","Hl"],["Hl","hl"]],"No hindlimbs":[["hl","hl"]]},horns:{Hornless:[["H","H"],["H","h"]],Horns:[["h","h"]]},"nose spike":{"Nose spike":BioLogica.combinations([["Rh"],["Rh","rh","Y"]]),"No nose spike":[["rh","rh"],["rh","Y"]]},wings:{Wings:[["W","W"],["W","w"]],"No wings":[["w","w"]]},color:{Frost:[["c","c"]],Steel:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Copper:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Silver:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Gold:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["d","dl"],["d","dl","Y"]]),Charcoal:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Lava:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Ash:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Sand:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["d","dl"],["d","dl","Y"]])},health:{"Bog breath":[["bog","bog"],["bog","Y"]],Healthy:[["Bog","Bog"],["Bog","bog"],["Bog","Y"]]},liveliness:{Alive:BioLogica.combinations([["D","d"],["D","d","dl","Y"]]),Dead:[["dl","dl"],["dl","Y"]]}},getImageName:function(g){var c,f,d,e;
d=function(h){return g.getCharacteristic(h)};if(d("liveliness")==="Dead"){return"dead-drake.png"
}c="";e=d("color");if(e==="Silver"){e="Argent"}else{if(e==="Lava"){e="Earth"}else{if(e==="Ash"){e="Dust"
}}}c+=e.toLowerCase().substring(0,2)+"_";c+=g.sex===BioLogica.FEMALE?"f_":"m_";c+=d("wings")==="Wings"?"wing_":"noWing_";
f="";if(d("forelimbs")==="Forelimbs"){if(d("hindlimbs")==="Hindlimbs"){f="allLimb_"
}else{f="fore_"}}else{if(d("hindlimbs")==="Hindlimbs"){f="hind_"}else{f="noLimb_"
}}c+=f;c+=(function(){switch(d("armor")){case"Five armor":return"a5_";case"Three armor":return"a3_";
case"One armor":return"a1_";default:return"a0_"}})();c+=(function(){switch(d("tail")){case"Long tail":return"flair_";
case"Kinked tail":return"kink_";default:return"short_"}})();c+=d("horns")==="Horns"?"horn_":"noHorn_";
c+=d("nose spike")==="Nose spike"?"rostral_":"noRostral_";c+=d("health")==="Bog breath"?"bogbreath":"healthy";
return c+=".png"},makeAlive:function(f){var e,d,c;if(f.getCharacteristic("liveliness")==="Dead"){c=f.sex===BioLogica.MALE?"x":ExtMath.flip()?"x1":"x2";
e=f.getGenotype().chromosomes.XY[c];d=ExtMath.flip()?"D":"d";f.getGenotype().replaceAllele(e,"dl",d);
return f.resetPhenotype()}}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGDrake={name:"GGDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["t","m","w","h"],"2":["c","b","fl","s"],XY:["d","fb"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T","Tk","t"],start:10000000,length:10584},metalic:{alleles:["M","m"],start:20000000,length:259610},wings:{alleles:["W","w"],start:70000000,length:9094},horns:{alleles:["H","h"],start:85000000,length:19421},color:{alleles:["C","c"],start:15000000,length:64572},black:{alleles:["B","b"],start:25000000,length:17596},forelimbs:{alleles:["Fl","fl"],start:80000000,length:122234},spikes:{alleles:["S","s"],start:90000000,length:6371},dilute:{alleles:["D","d","dl"],start:20000000,length:152673},firebreathing:{alleles:["Fb","fb"],start:60000000,length:1000}},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Metallic",m:"Nonmetallic",W:"Wings",w:"No wings",H:"No horns",h:"Horns",C:"Colored",c:"Colorless",Fl:"Short forelimbs",fl:"Long forelimbs",S:"Spikes wide",s:"Spikes narrow",B:"Black",b:"Brown",D:"Full color",d:"Dilute color",dl:"dl",Rh:"Nose spike",rh:"No nose spike",Fb:"No fire breathing",fb:"Fire breathing",Y:"Y","":""},traitRules:{tail:{"Long tail":[["T","T"],["T","Tk"],["T","t"]],"Kinked tail":[["Tk","Tk"],["Tk","t"]],"Short tail":[["t","t"]]},wings:{Wings:[["W","W"],["W","w"]],"No wings":[["w","w"]]},horns:{Hornless:[["H","H"],["H","h"]],Horns:[["h","h"]]},forelimbs:{"Short forelimbs":[["Fl","Fl"],["Fl","fl"]],"Long forelimbs":[["fl","fl"]]},spikes:{"Wide spikes":[["S","S"]],"Medium spikes":[["S","s"]],"Narrow spikes":[["s","s"]]},"fire breathing":{"No fire breathing":[["Fb"]],"Fire breathing":[["fb","fb"],["fb","Y"]]},color:{Gray:[["M"]],Green:[["m","m"]]}},getImageName:function(c){},makeAlive:function(c){}}
}).call(this);sc_require("resources/lib/biologica.js");var imageUrlStart="/resources/drakes/images/";
Geniverse.Dragon=SC.Record.extend({name:SC.Record.attr(String),sex:SC.Record.attr(Number),alleles:SC.Record.attr(String),imageURL:SC.Record.attr(String),mother:SC.Record.toOne("Geniverse.Dragon"),father:SC.Record.toOne("Geniverse.Dragon"),bred:SC.Record.attr(Boolean),user:SC.Record.toOne("Geniverse.User"),breeder:SC.Record.toOne("Geniverse.User"),breedTime:SC.Record.attr(Number),stableOrder:SC.Record.attr(Number),isEgg:SC.Record.attr(Boolean),isInMarketplace:SC.Record.attr(Boolean),isMatchDragon:SC.Record.attr(Boolean,{defaultValue:NO}),activity:SC.Record.toOne("Geniverse.Activity"),articles:SC.Record.toMany("Geniverse.Articles",{inverse:"dragons",isMaster:NO}),saveToBackend:SC.Record.attr(Boolean,{defaultValue:NO}),gOrganism:null,characteristics:null,metaInfo:null,characteristicMap:null,hasBeenMatched:NO,session:null,gOrganismDefined:function(){var a=this.get("gOrganism");
var b=(a!==null&&(typeof a!="undefined")&&(typeof a.alleles!="undefined"))?YES:NO;
return b}.property("gOrganism").cacheable(),color:function(){var a=this.characteristicValue("color");
if(a){return a.toLowerCase()}else{return null}}.property("alleles").cacheable(),init:function(){var a=this;
this.invokeLast(function(){if(a.get("gOrganismDefined")==NO){if(a.get("status")&&SC.Record.READY){a.createGOrganism()
}else{a.addObserver("status",a.createGOrganism)}}})},createGOrganism:function(){if(this.get("status")&SC.Record.READY){this.removeObserver("status",this);
var a=this;Geniverse.gwtController.generateGOrganismWithAlleles(this.get("alleles"),this.get("sex"),function(b){a.set("gOrganism",b)
})}},setAttributes:function(){if(this.get("status")&SC.Record.DESTROYED){return}var b=this.get("gOrganism");
if(this.get("gOrganismDefined")){this.set("sex",b.sex);characteristicMap=b.phenotype.characteristics;
characteristicsArray=[];for(var a in characteristicMap){if(!characteristicMap.hasOwnProperty(a)){continue
}characteristicsArray.push(characteristicMap[a])}this.set("characteristics",characteristicsArray);
this.set("characteristicMap",characteristicMap);this.set("alleles",b.genetics.genotype.getAlleleString());
this.set("imageURL",Geniverse.resourceURL(imageUrlStart+b.getImageName()))}}.observes("gOrganism"),sexAsString:function(){var a=this.get("sex");
if(a===0){return"Male"}else{if(a===1){return"Female"}else{if(a===-1){return"Random"
}else{return"Unknown"}}}}.property("sex").cacheable(),characteristicsAsString:function(){var a="";
var c=this.get("characteristics");for(var b=0;b<c.length;b++){if(b===0){a+=c[b]}else{a+=", "+c[b]
}}return a}.property("characteristics").cacheable(),info:function(){return this.get("sexAsString")+" -- "+this.get("characteristicsAsString")
}.property("sexAsString","characteristicsAsString").cacheable(),characteristicValue:function(a){var b=this.get("characteristicMap");
if(b&&a!==null&&typeof a!="undefined"){return b[a.toLowerCase()]}return""}});Geniverse.Dragon.modelName="dragon";
Geniverse.Dragon.modelsName="dragons";Geniverse.Dragon.readOnly=NO;Geniverse.Dragon.saveToBackendOptional=YES;
Geniverse.railsBackedTypes.push(Geniverse.Dragon.modelName);Geniverse.Dragon.traitRules=BioLogica.Species.Drake.traitRules;
sc_require("models/dragon");Geniverse.DRAGONS_QUERY=SC.Query.local(Geniverse.Dragon,{orderBy:"name"});
Geniverse.RailsDataSource=SC.DataSource.extend({_jsonGet:function(a,d,c){c=SC.A(arguments).slice(1);
c.unshift(this);var b=SC.Request.getUrl(a).header({Accept:"application/json"}).json();
b.notify.apply(b,c);b.send()},fetch:function(a,b){if(b.LOCAL_SEARCH_ONLY){return NO
}var e=b.recordType;if(Geniverse.railsBackedTypes.indexOf(e.modelName)!=-1){var d=b.restParams?b.restParams:"";
var c=Geniverse.railsBackendBase+"/%@.json%@".fmt(e.modelsName,d);this._jsonGet(c,"didFetchRecords",a,b);
return YES}return NO},didFetchRecords:function(b,a,d){if(SC.ok(b)){var c=b.get("body").content;
var e=d.recordType;a.loadRecords(e,c);a.dataSourceDidFetchQuery(d)}else{a.dataSourceDidErrorQuery(d,b)
}},retrieveRecord:function(a,c){var b=a.idFor(c);this._jsonGet(Geniverse.railsBackendHostOnly+"%@.json".fmt(b),"didRetrieveRecord",a,c);
return YES},didRetrieveRecord:function(b,a,d){if(SC.ok(b)){var c=b.get("body").content;
a.dataSourceDidComplete(d,c)}else{a.dataSourceDidError(d)}},createRecord:function(b,e){var f=b.recordTypeFor(e),c=b.readDataHash(e);
if(Geniverse.railsBackedTypes.indexOf(f.modelName)!=-1){if(f.readOnly||(f.saveToBackendOptional&&c&&!c.saveToBackend)){window.setTimeout(function(){b.dataSourceDidComplete(e)
},2)}else{var a=f.modelName;var d={};d[a]=c;delete d[a].saveToBackend;SC.Request.postUrl(Geniverse.railsBackendBase+"/"+f.modelsName).header({Accept:"application/json"}).json().notify(this,this.didCreateRecord,b,e).send(d)
}return YES}return NO},didCreateRecord:function(b,a,d){if(SC.ok(b)){var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;
var c=e.exec(b.header("Location"))[8];a.dataSourceDidComplete(d,null,c)}else{a.dataSourceDidError(d,b)
}},updateRecord:function(b,e){var f=b.recordTypeFor(e);if(Geniverse.railsBackedTypes.indexOf(f.modelName)!=-1){if(f.readOnly){window.setTimeout(function(){b.dataSourceDidComplete(e)
},2)}else{var a=f.modelName;var d={};d[a]=b.readDataHash(e);var c=b.idFor(e);SC.Request.putUrl(Geniverse.railsBackendHostOnly+c+".json").header({Accept:"application/json"}).json().notify(this,this.didUpdateRecord,b,e).send(d)
}return YES}return NO},didUpdateRecord:function(b,a,d){if(SC.ok(b)){var c=a.idFor(d);
try{a.dataSourceDidComplete(d,null,c)}catch(f){SC.Logger.error("Error in dataSourceDidComplete for ",d,c)
}}else{a.dataSourceDidError(d,b)}},destroyRecord:function(a,b){window.setTimeout(function(){a.dataSourceDidDestroy(b)
},2);return YES}});sc_require("data_sources/rails");Geniverse.CascadeDataSource=SC.CascadeDataSource.extend({dataSources:"rails fixtures".w(),rails:Geniverse.RailsDataSource.create(),fixtures:SC.FixturesDataSource.extend({simulateRemoteResponse:YES,latency:1000}).create()});
Geniverse.Activity=SC.Record.extend({title:SC.Record.attr(String,{defaultValue:"Geniverse"}),baseChannelName:SC.Record.attr(String),maxUsersInRoom:SC.Record.attr(Number,{defaultValue:3}),initialAlleles:SC.Record.attr(String),matchDragonAlleles:SC.Record.attr(String),sendBredDragons:SC.Record.attr(Boolean,{defaultValue:NO}),route:SC.Record.attr(String),pageType:SC.Record.attr(String),hiddenGenes:SC.Record.attr(String),staticGenes:SC.Record.attr(String),crossoverWhenBreeding:SC.Record.attr(Boolean),message:SC.Record.attr(String),isArgumentationChallenge:SC.Record.attr(Boolean,{defaultValue:NO}),showTooltips:SC.Record.attr(Boolean,{defaultValue:NO}),myCase:SC.Record.toOne("Geniverse.Case"),myCaseOrder:SC.Record.attr(Number,{defaultValue:1}),currentSession:null});
Geniverse.Activity.modelName="activity";Geniverse.Activity.modelsName="activities";
Geniverse.Activity.readOnly=YES;Geniverse.railsBackedTypes.push(Geniverse.Activity.modelName);
sc_require("models/activity");Geniverse.Activity.FIXTURES=[{guid:1,title:"Fixture Geniverse Activity",baseChannelName:"geniverse-chat-trial-b",maxUsersInRoom:4,initialAlleles:"[ [ [ {alleles: 'a:A,b:A,a:B,b:B', sex: 1, name: 'Starting Mother'}, {alleles: 'a:A,b:a,a:B,b:B', sex: 0, name: 'Starting Father'}, {alleles: 'a:a,b:a,a:B,b:B', sex: 1, name: 'Starting Mother2'}, {alleles: 'a:a,b:a,a:B,b:B', sex: 0, name: 'Starting Father2'} ],[ {alleles: 'a:A,b:A,a:B,b:B', sex: 1, name: 'Starting Mother'}, {alleles: 'a:A,b:a,a:B,b:B', sex: 0, name: 'Starting Father'}, {alleles: 'a:a,b:a,a:B,b:B', sex: 1, name: 'Starting Mother2'}, {alleles: 'a:a,b:a,a:B,b:B', sex: 0, name: 'Starting Father2'} ] ] ];",matchDragonAlleles:"[ [ [ {alleles: 'a:h,b:h', sex: 1, name: 'Starting Mother'}, {alleles: 'a:h,b:h', sex: 0, name: 'Starting Father'} ] ] ];",sendBredDragons:NO,route:"test/test",pageType:"breedingPage"}];
Geniverse.Article=SC.Record.extend({group:SC.Record.attr(Number),activity:SC.Record.toOne("Geniverse.Activity"),text:SC.Record.attr(String),dragons:SC.Record.toMany("Geniverse.Dragon",{inverse:"articles",isMaster:NO}),time:SC.Record.attr(Number),submitted:SC.Record.attr(Boolean,{defaultValue:NO}),teacherComment:SC.Record.attr(String),accepted:SC.Record.attr(Boolean,{defaultValue:NO})});
Geniverse.Article.modelName="article";Geniverse.Article.modelsName="articles";Geniverse.Article.readOnly=NO;
Geniverse.railsBackedTypes.push(Geniverse.Article.modelName);sc_require("models/article");
Geniverse.Article.FIXTURES=[{guid:1,group:1,activity:[1],text:"<div class='claim'>Paper for group 1 in activity 1</div>",submitted:NO,published:NO},{guid:2,group:2,activity:[1],text:"<div class='claim'>Published Paper for group 2 in activity 1</div>",submitted:YES,published:YES}];
sc_require("models/dragon");Geniverse.Dragon.FIXTURES=[];Geniverse.DragonBundle=SC.Record.extend({dragon:null,image:"",imageURL:"",chatHistory:[],userHistory:[],lastChat:"",mother:null,father:null});
Geniverse.DragonBundle.modelName="dragonBundle";Geniverse.DragonBundle.modelsName="dragonBundles";
sc_require("models/dragon_bundle");Geniverse.DragonBundle.FIXTURES=[];Geniverse.User=SC.Record.extend({allClassNames:[],isTeacher:false,username:SC.Record.attr(String),passwordHash:SC.Record.attr(String),firstName:SC.Record.attr(String),lastName:SC.Record.attr(String),groupId:SC.Record.attr(Number),memberId:SC.Record.attr(Number),note:SC.Record.attr(String),avatar:SC.Record.attr(String),metadata:SC.Record.attr(Object),className:SC.Record.attr(String)});
Geniverse.User.modelName="user";Geniverse.User.modelsName="users";Geniverse.User.readOnly=NO;
Geniverse.railsBackedTypes.push(Geniverse.User.modelName);sc_require("models/user");
Geniverse.User.FIXTURES=[{guid:1,username:"Tester",firstName:"Test",lastName:"er",groupId:1,memberId:1,note:"note"},{guid:2,username:"student",firstName:"Jackie",lastName:"FIXTURES",groupId:1,memberId:1,note:"note",passwordHash:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"}];
(function(c){function h(j,i){return j-i}var f={linear:function(j,k,i,m,l){return m*k/l+i
},inOutQuad:function(j,k,i,m,l){if((k/=l/2)<1){return m/2*k*k+i}else{return -m/2*((--k)*(k-2)-1)+i
}},inOutCubic:function(j,k,i,m,l){if((k/=l/2)<1){return m/2*k*k*k+i}else{return m/2*((k-=2)*k*k+2)+i
}},inBounce:function(j,k,i,m,l){return m-f.outBounce(j,l-k,0,m,l)+i},outBounce:function(j,k,i,m,l){if((k/=l)<(1/2.75)){return m*(7.5625*k*k)+i
}else{if(k<(2/2.75)){return m*(7.5625*(k-=(1.5/2.75))*k+0.75)+i}else{if(k<(2.5/2.75)){return m*(7.5625*(k-=(2.25/2.75))*k+0.9375)+i
}else{return m*(7.5625*(k-=(2.625/2.75))*k+0.984375)+i}}}},inOutBounce:function(j,k,i,m,l){if(k<l/2){return f.inBounce(j,k*2,0,m,l)*0.5+i
}else{return f.outBounce(j,k*2-l,0,m,l)*0.5+m*0.5+i}}};var g=function g(){this.timelines={};
this.loaded={};this.fps=30;this.timelineCount=0;this.onframe=undefined};g.prototype.timeline=function(k,n,j,l,i,m){return this.timelines[k]||(arguments.length>1?this.timelines[k]=new e(k,n,j,l,i,m,this):undefined)
};g.prototype.load=function(i){return this.loaded[i]||(function(){for(var j in this.timelines){if(this.timelines[j].name===i){return(this.loaded[j]=this.timelines[j])
}}}).call(this);return false};g.prototype.unload=function(i){delete this.loaded[i];
return true};g.prototype.play=function(){var i=this;window.clearInterval(this.interval);
this.interval=window.setInterval(function(){i.frame()},1000/this.fps)};g.prototype.frame=function(k){if(this.onframe){this.onframe()
}for(var j in this.loaded){if(this.hasOwnProperty("loaded")){this.loaded[j].play(k)
}}};g.prototype.stop=function(){window.clearInterval(this.interval)};var e=function e(k,o,j,m,i,n,l){l.timelineCount++;
this.name=k;this.start=this.frame=o;this.end=j;this.speed=m;this.loop=i;this.callback=n;
this.parent=l;this.objects={};return this};e.prototype.obj=function(i,j){return this.objects[i]||(this.objects[i]=new b(i,j,this))
};e.prototype.play=function(n){this.frame=n||(this.frame+=this.speed);if(this.loop){if(this.frame>this.end){this.frame=this.start
}if(this.frame<this.start){this.frame=this.end}}else{if(this.frame>=this.end){this.frame=this.end;
if(this.callback){this.callback(this.frame)}}if(this.frame<=this.start){this.frame=this.start;
if(this.callback){this.callback(this.frame)}}}var m;for(var l in this.objects){thisObject=this.objects[l];
for(var k in thisObject.tracks){thisObject.tracks[k].play(this.frame)}}if(this.always){this.always.call(this,this.frame)
}};var b=function b(i,k,j){this.name=i;this.objRef=k;this.parent=j;this.tracks={};
return this};b.prototype.track=function(i){return this.tracks[i]||(this.tracks[i]=new d(i,this))
};var d=function d(j,i){this.prop=j;this.parent=i;this.keys=[];this.unit=typeof this.parent.objRef[j]==="number"?undefined:this.parent.objRef[j].replace(/[.0-9]/g,"");
this.alwaysCallback;return this};d.prototype.key=function(m,u,p,v){for(var r=0,n=this.keys.length;
r<n;r++){if(this.keys[r].frame===m){return this.keys[r]}}if(arguments.length>1){var k=[],o=[],s=this.keys[this.keys.length]=new a(m,u,p,v,this);
for(r=0;r<this.keys.length;r++){k[r]=this.keys[r].frame}k.sort(h);for(r=0;r<this.keys.length;
r++){for(var q=0;q<this.keys.length;q++){if(k[r]==this.keys[q].frame){o[r]=this.keys[q]
}}}this.keys=[];for(r=0,n=o.length;r<n;r++){this.keys[r]=o[r]}return s}else{return false
}};d.prototype.play=function(o){var p,j,n;for(var m=0,k=this.keys.length;m<k;m++){p=this.keys[m];
j=this.keys[m+1];if(j===undefined&&m+1>k-1){j=this.keys[k-1]}if(o>=p.frame&&o<j.frame){n=f[p.ease](0,o-p.frame,p.value,j.value-p.value,j.frame-p.frame);
if(this.lastKeyFired&&this.lastKeyFired.frame!=p.frame){this.lastKeyFired.callbackFired=false
}if(p.callback&&!p.callbackFired){p.callback.call(this.parent.objRef,{frame:o,prop:this.prop,burstTrack:this});
p.callbackFired=true;this.lastKeyFired=p}}else{if(o>=j.frame||o===0){n=p.value}}}if(this.alwaysCallback){this.alwaysCallback.call(this.parent.objRef,{frame:o,prop:this.prop,burstTrack:this})
}this.parent.objRef[this.prop]=n+(this.unit||0)};d.prototype.always=function(i){this.alwaysCallback=i;
return this};d.prototype.obj=function(i,k){var j=this.parent.parent;return j.obj.call(j,i,k)
};var a=function a(l,j,k,m,i){this.frame=l;this.value=j;this.ease=k||"linear";this.callback=m;
this.callbackFired=false;this.parent=i;return this};a.prototype.obj=function(i,k){var j=this.parent.parent.parent;
return j.obj.call(j,i,k)};a.prototype.track=function(i,k,l){var j=this.parent.parent;
return j.track.call(j,i,k,l)};a.prototype.key=function(l,j,k,m){var i=this.parent;
return i.key.call(i,l,j,k,m)};a.prototype.always=function(j){var i=this.parent;return i.always.call(i,j)
};c.Burst=g})(this);
/*
 * jQuery UI 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(d,b){function a(c){return !d(c).parents().andSelf().filter(function(){return d.curCSS(this,"visibility")==="hidden"||d.expr.filters.hidden(this)
}).length}d.ui=d.ui||{};if(!d.ui.version){d.extend(d.ui,{version:"1.8.4",plugin:{add:function(f,c,h){f=d.ui[f].prototype;
for(var g in h){f.plugins[g]=f.plugins[g]||[];f.plugins[g].push([c,h[g]])}},call:function(f,c,h){if((c=f.plugins[c])&&f.element[0].parentNode){for(var g=0;
g<c.length;g++){f.options[c[g][0]]&&c[g][1].apply(f.element,h)}}}},contains:function(e,c){return document.compareDocumentPosition?e.compareDocumentPosition(c)&16:e!==c&&e.contains(c)
},hasScroll:function(e,c){if(d(e).css("overflow")==="hidden"){return false}c=c&&c==="left"?"scrollLeft":"scrollTop";
var f=false;if(e[c]>0){return true}e[c]=1;f=e[c]>0;e[c]=0;return f},isOverAxis:function(e,c,f){return e>c&&e<c+f
},isOver:function(f,c,l,k,j,g){return d.ui.isOverAxis(f,l,j)&&d.ui.isOverAxis(c,k,g)
},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});
d.fn.extend({_focus:d.fn.focus,focus:function(e,c){return typeof e==="number"?this.each(function(){var f=this;
setTimeout(function(){d(f).focus();c&&c.call(f)},e)}):this._focus.apply(this,arguments)
},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")
},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")
},scrollParent:function(){var c;c=d.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.curCSS(this,"position",1))&&/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))
}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))
}).eq(0);return/fixed/.test(this.css("position"))||!c.length?d(document):c},zIndex:function(e){if(e!==b){return this.css("zIndex",e)
}if(this.length){e=d(this[0]);for(var c;e.length&&e[0]!==document;){c=e.css("position");
if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(e.css("zIndex"));if(!isNaN(c)&&c!=0){return c
}}e=e.parent()}}return 0}});d.each(["Width","Height"],function(f,c){function l(n,i,h,e){d.each(k,function(){i-=parseFloat(d.curCSS(n,"padding"+this,true))||0;
if(h){i-=parseFloat(d.curCSS(n,"border"+this+"Width",true))||0}if(e){i-=parseFloat(d.curCSS(n,"margin"+this,true))||0
}});return i}var k=c==="Width"?["Left","Right"]:["Top","Bottom"],j=c.toLowerCase(),g={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};
d.fn["inner"+c]=function(e){if(e===b){return g["inner"+c].call(this)}return this.each(function(){d.style(this,j,l(this,e)+"px")
})};d.fn["outer"+c]=function(h,e){if(typeof h!=="number"){return g["outer"+c].call(this,h)
}return this.each(function(){d.style(this,j,l(this,h,true,e)+"px")})}});d.extend(d.expr[":"],{data:function(e,c,f){return !!d.data(e,f[3])
},focusable:function(e){var c=e.nodeName.toLowerCase(),f=d.attr(e,"tabindex");if("area"===c){c=e.parentNode;
f=c.name;if(!e.href||!f||c.nodeName.toLowerCase()!=="map"){return false}e=d("img[usemap=#"+f+"]")[0];
return !!e&&a(e)}return(/input|select|textarea|button|object/.test(c)?!e.disabled:"a"==c?e.href||!isNaN(f):!isNaN(f))&&a(e)
},tabbable:function(e){var c=d.attr(e,"tabindex");return(isNaN(c)||c>=0)&&d(e).is(":focusable")
}})}})(jQuery);
/*
 * jQuery UI Widget 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a,d){var c=a.fn.remove;
a.fn.remove=function(b,e){return this.each(function(){if(!e){if(!b||a.filter(b,[this]).length){a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")
})}}return c.call(a(this),b,e)})};a.widget=function(b,j,i){var h=b.split(".")[0],g;
b=b.split(".")[1];g=h+"-"+b;if(!i){i=j;j=a.Widget}a.expr[":"][g]=function(e){return !!a.data(e,b)
};a[h]=a[h]||{};a[h][b]=function(e,f){arguments.length&&this._createWidget(e,f)};
j=new j;j.options=a.extend(true,{},j.options);a[h][b].prototype=a.extend(true,j,{namespace:h,widgetName:b,widgetEventPrefix:a[h][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},i);
a.widget.bridge(b,a[h][b])};a.widget.bridge=function(b,e){a.fn[b]=function(k){var j=typeof k==="string",i=Array.prototype.slice.call(arguments,1),g=this;
k=!j&&i.length?a.extend.apply(null,[true,k].concat(i)):k;if(j&&k.substring(0,1)==="_"){return g
}j?this.each(function(){var h=a.data(this,b),f=h&&a.isFunction(h[k])?h[k].apply(h,i):h;
if(f!==h&&f!==d){g=f;return false}}):this.each(function(){var f=a.data(this,b);if(f){k&&f.option(k);
f._init()}else{a.data(this,b,new e(k,this))}});return g}};a.Widget=function(b,e){arguments.length&&this._createWidget(b,e)
};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,f){a.data(f,this.widgetName,this);
this.element=a(f);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(f)[this.widgetName],b);
var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);
this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")
},widget:function(){return this.element},option:function(b,h){var g=b,f=this;if(arguments.length===0){return a.extend({},f.options)
}if(typeof b==="string"){if(h===d){return this.options[b]}g={};g[b]=h}a.each(g,function(i,e){f._setOption(i,e)
});return f},_setOption:function(b,e){this.options[b]=e;if(b==="disabled"){this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e)
}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)
},_trigger:function(b,j,i){var h=this.options[b];j=a.Event(j);j.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();
i=i||{};if(j.originalEvent){b=a.event.props.length;for(var g;b;){g=a.event.props[--b];
j[g]=j.originalEvent[g]}}this.element.trigger(j,i);return !(a.isFunction(h)&&h.call(this.element[0],j,i)===false||j.isDefaultPrevented())
}}})(jQuery);
/*
 * jQuery UI Mouse 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;
this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)
}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;
c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)
},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(d);
this._mouseDownEvent=d;var c=this,h=d.which==1,g=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;
if(!h||g||!this._mouseCapture(d)){return true}this.mouseDelayMet=!this.options.delay;
if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true
},this.options.delay)}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;
if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(b){return c._mouseMove(b)
};this._mouseUpDelegate=function(b){return c._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);
a.browser.safari||d.preventDefault();return d.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b)
}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b)
}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);
if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=b.target==this._mouseDownEvent.target;
this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance
},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true
}})})(jQuery);(function(f){f.ui=f.ui||{};var a=/left|center|right/,e=/top|center|bottom/,d=f.fn.position,b=f.fn.offset;
f.fn.position=function(j){if(!j||!j.of){return d.apply(this,arguments)}j=f.extend({},j);
var c=f(j.of),o=(j.collision||"flip").split(" "),n=j.offset?j.offset.split(" "):[0,0],m,l,k;
if(j.of.nodeType===9){m=c.width();l=c.height();k={top:0,left:0}}else{if(j.of.scrollTo&&j.of.document){m=c.width();
l=c.height();k={top:c.scrollTop(),left:c.scrollLeft()}}else{if(j.of.preventDefault){j.at="left top";
m=l=0;k={top:j.of.pageY,left:j.of.pageX}}else{m=c.outerWidth();l=c.outerHeight();
k=c.offset()}}}f.each(["my","at"],function(){var g=(j[this]||"").split(" ");if(g.length===1){g=a.test(g[0])?g.concat(["center"]):e.test(g[0])?["center"].concat(g):["center","center"]
}g[0]=a.test(g[0])?g[0]:"center";g[1]=e.test(g[1])?g[1]:"center";j[this]=g});if(o.length===1){o[1]=o[0]
}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(j.at[0]==="right"){k.left+=m
}else{if(j.at[0]==="center"){k.left+=m/2}}if(j.at[1]==="bottom"){k.top+=l}else{if(j.at[1]==="center"){k.top+=l/2
}}k.left+=n[0];k.top+=n[1];return this.each(function(){var p=f(this),h=p.outerWidth(),g=p.outerHeight(),i=f.extend({},k);
if(j.my[0]==="right"){i.left-=h}else{if(j.my[0]==="center"){i.left-=h/2}}if(j.my[1]==="bottom"){i.top-=g
}else{if(j.my[1]==="center"){i.top-=g/2}}i.left=parseInt(i.left);i.top=parseInt(i.top);
f.each(["left","top"],function(s,q){f.ui.position[o[s]]&&f.ui.position[o[s]][q](i,{targetWidth:m,targetHeight:l,elemWidth:h,elemHeight:g,offset:n,my:j.my,at:j.at})
});f.fn.bgiframe&&p.bgiframe();p.offset(f.extend(i,{using:j.using}))})};f.ui.position={fit:{left:function(g,c){var h=f(window);
c=g.left+c.elemWidth-h.width()-h.scrollLeft();g.left=c>0?g.left-c:Math.max(0,g.left)
},top:function(g,c){var h=f(window);c=g.top+c.elemHeight-h.height()-h.scrollTop();
g.top=c>0?g.top-c:Math.max(0,g.top)}},flip:{left:function(h,c){if(c.at[0]!=="center"){var k=f(window);
k=h.left+c.elemWidth-k.width()-k.scrollLeft();var j=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,i=-2*c.offset[0];
h.left+=h.left<0?j+c.targetWidth+i:k>0?j-c.targetWidth+i:0}},top:function(i,c){if(c.at[1]!=="center"){var m=f(window);
m=i.top+c.elemHeight-m.height()-m.scrollTop();var l=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,k=c.at[1]==="top"?c.targetHeight:-c.targetHeight,j=-2*c.offset[1];
i.top+=i.top<0?l+c.targetHeight+j:m>0?l+k+j:0}}}};if(!f.offset.setOffset){f.offset.setOffset=function(i,c){if(/static/.test(f.curCSS(i,"position"))){i.style.position="relative"
}var m=f(i),l=m.offset(),k=parseInt(f.curCSS(i,"top",true),10)||0,j=parseInt(f.curCSS(i,"left",true),10)||0;
l={top:c.top-l.top+k,left:c.left-l.left+j};"using" in c?c.using.call(i,l):m.css(l)
};f.fn.offset=function(g){var c=this[0];if(!c||!c.ownerDocument){return null}if(g){return this.each(function(){f.offset.setOffset(this,g)
})}return b.call(this)}}})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"
}this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");
this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");
this._mouseDestroy();return this}},_mouseCapture:function(d){var c=this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle")){return false
}this.handle=this._getHandle(d);if(!this.handle){return false}return true},_mouseStart:function(d){var c=this.options;
this.helper=this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this
}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();
this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};
a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;
this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();
if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();
a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");
this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);
this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});
return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"
}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"
}a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(e){var d=false;
if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,e)}if(this.dropped){d=this.dropped;
this.dropped=false}if(!this.element[0]||!this.element[0].parentNode){return false
}if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var f=this;
a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",e)!==false&&f._clear()
})}else{this._trigger("stop",e)!==false&&this._clear()}return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();
return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;
a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==d.target){c=true
}});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone():this.element;
d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);
d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");
return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")
}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left
}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left
}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top
}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();
if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();
b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}
}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();
return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}
}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}
},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}
},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode
}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]
}if(!/^(document|window|parent)$/.test(e.containment)&&e.containment.constructor!=Array){var d=a(e.containment)[0];
if(d){e=a(e.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]
}}else{if(e.containment.constructor==Array){this.containment=e.containment}}},_convertPositionTo:function(e,d){if(!d){d=this.position
}e=e=="absolute"?1:-1;var h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(h[0].tagName);
return{top:d.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:h.scrollTop())*e),left:d.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*e)}
},_generatePosition:function(h){var d=this.options,l=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(l[0].tagName),k=h.pageX,i=h.pageY;
if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){k=this.containment[0]+this.offset.click.left
}if(h.pageY-this.offset.click.top<this.containment[1]){i=this.containment[1]+this.offset.click.top
}if(h.pageX-this.offset.click.left>this.containment[2]){k=this.containment[2]+this.offset.click.left
}if(h.pageY-this.offset.click.top>this.containment[3]){i=this.containment[3]+this.offset.click.top
}}if(d.grid){i=this.originalPageY+Math.round((i-this.originalPageY)/d.grid[1])*d.grid[1];
i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<this.containment[1])?i-d.grid[1]:i+d.grid[1]:i;
k=this.originalPageX+Math.round((k-this.originalPageX)/d.grid[0])*d.grid[0];k=this.containment?!(k-this.offset.click.left<this.containment[0]||k-this.offset.click.left>this.containment[2])?k:!(k-this.offset.click.left<this.containment[0])?k-d.grid[0]:k+d.grid[0]:k
}}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:l.scrollTop()),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:l.scrollLeft())}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();
this.helper=null;this.cancelHelperRemoval=false},_trigger:function(e,d,f){f=f||this._uiHash();
a.ui.plugin.call(this,e,[d,f]);if(e=="drag"){this.positionAbs=this._convertPositionTo("absolute")
}return a.Widget.prototype._trigger.call(this,e,d,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}
}});a.extend(a.ui.draggable,{version:"1.8.4"});a.ui.plugin.add("draggable","connectToSortable",{start:function(g,d){var j=a(this).data("draggable"),h=j.options,i=a.extend({},d,{item:j.element});
j.sortables=[];a(h.connectToSortable).each(function(){var b=a.data(this,"sortable");
if(b&&!b.options.disabled){j.sortables.push({instance:b,shouldRevert:b.options.revert});
b._refreshItems();b._trigger("activate",g,i)}})},stop:function(e,d){var h=a(this).data("draggable"),g=a.extend({},d,{item:h.element});
a.each(h.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;h.cancelHelperRemoval=true;
this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true
}this.instance._mouseStop(e);this.instance.options.helper=this.instance.options._helper;
h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})
}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",e,g)
}})},drag:function(e,d){var h=a(this).data("draggable"),g=this;a.each(h.sortables,function(){this.instance.positionAbs=h.positionAbs;
this.instance.helperProportions=h.helperProportions;this.instance.offset.click=h.offset.click;
if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;
this.instance.currentItem=a(g).clone().appendTo(this.instance.element).data("sortable-item",true);
this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0]
};e.target=this.instance.currentItem[0];this.instance._mouseCapture(e,true);this.instance._mouseStart(e,true,true);
this.instance.offset.click.top=h.offset.click.top;this.instance.offset.click.left=h.offset.click.left;
this.instance.offset.parent.left-=h.offset.parent.left-this.instance.offset.parent.left;
this.instance.offset.parent.top-=h.offset.parent.top-this.instance.offset.parent.top;
h._trigger("toSortable",e);h.dropped=this.instance.element;h.currentItem=h.element;
this.instance.fromOutside=h}this.instance.currentItem&&this.instance._mouseDrag(e)
}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;
this.instance.options.revert=false;this.instance._trigger("out",e,this.instance._uiHash(this.instance));
this.instance._mouseStop(e,true);this.instance.options.helper=this.instance.options._helper;
this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();
h._trigger("fromSortable",e);h.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;
if(d.css("cursor")){c._cursor=d.css("cursor")}d.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;
b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=a(this).data("draggable").options;
a(b.iframeFix===true?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")
})},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)
})}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;
if(d.css("opacity")){c._opacity=d.css("opacity")}d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;
d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");
if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset()
}},drag:function(e){var d=a(this).data("draggable"),h=d.options,g=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!h.axis||h.axis!="x"){if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-e.pageY<h.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop+h.scrollSpeed
}else{if(e.pageY-d.overflowOffset.top<h.scrollSensitivity){d.scrollParent[0].scrollTop=g=d.scrollParent[0].scrollTop-h.scrollSpeed
}}}if(!h.axis||h.axis!="y"){if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-e.pageX<h.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft+h.scrollSpeed
}else{if(e.pageX-d.overflowOffset.left<h.scrollSensitivity){d.scrollParent[0].scrollLeft=g=d.scrollParent[0].scrollLeft-h.scrollSpeed
}}}}else{if(!h.axis||h.axis!="x"){if(e.pageY-a(document).scrollTop()<h.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()-h.scrollSpeed)
}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<h.scrollSensitivity){g=a(document).scrollTop(a(document).scrollTop()+h.scrollSpeed)
}}}if(!h.axis||h.axis!="y"){if(e.pageX-a(document).scrollLeft()<h.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()-h.scrollSpeed)
}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<h.scrollSensitivity){g=a(document).scrollLeft(a(document).scrollLeft()+h.scrollSpeed)
}}}}g!==false&&a.ui.ddmanager&&!h.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,e)
}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;
d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var e=a(this),b=e.offset();
this!=d.element[0]&&d.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:b.top,left:b.left})
})},drag:function(L,K){for(var J=a(this).data("draggable"),H=J.options,I=H.snapTolerance,G=K.offset.left,z=G+J.helperProportions.width,A=K.offset.top,y=A+J.helperProportions.height,F=J.snapElements.length-1;
F>=0;F--){var E=J.snapElements[F].left,C=E+J.snapElements[F].width,D=J.snapElements[F].top,B=D+J.snapElements[F].height;
if(E-I<G&&G<C+I&&D-I<A&&A<B+I||E-I<G&&G<C+I&&D-I<y&&y<B+I||E-I<z&&z<C+I&&D-I<A&&A<B+I||E-I<z&&z<C+I&&D-I<y&&y<B+I){if(H.snapMode!="inner"){var x=Math.abs(D-y)<=I,w=Math.abs(B-A)<=I,v=Math.abs(E-z)<=I,u=Math.abs(C-G)<=I;
if(x){K.position.top=J._convertPositionTo("relative",{top:D-J.helperProportions.height,left:0}).top-J.margins.top
}if(w){K.position.top=J._convertPositionTo("relative",{top:B,left:0}).top-J.margins.top
}if(v){K.position.left=J._convertPositionTo("relative",{top:0,left:E-J.helperProportions.width}).left-J.margins.left
}if(u){K.position.left=J._convertPositionTo("relative",{top:0,left:C}).left-J.margins.left
}}var d=x||w||v||u;if(H.snapMode!="outer"){x=Math.abs(D-A)<=I;w=Math.abs(B-y)<=I;
v=Math.abs(E-G)<=I;u=Math.abs(C-z)<=I;if(x){K.position.top=J._convertPositionTo("relative",{top:D,left:0}).top-J.margins.top
}if(w){K.position.top=J._convertPositionTo("relative",{top:B-J.helperProportions.height,left:0}).top-J.margins.top
}if(v){K.position.left=J._convertPositionTo("relative",{top:0,left:E}).left-J.margins.left
}if(u){K.position.left=J._convertPositionTo("relative",{top:0,left:C-J.helperProportions.width}).left-J.margins.left
}}if(!J.snapElements[F].snapping&&(x||w||v||u||d)){J.options.snap.snap&&J.options.snap.snap.call(J.element,L,a.extend(J._uiHash(),{snapItem:J.snapElements[F].item}))
}J.snapElements[F].snapping=x||w||v||u||d}else{J.snapElements[F].snapping&&J.options.snap.release&&J.options.snap.release.call(J.element,L,a.extend(J._uiHash(),{snapItem:J.snapElements[F].item}));
J.snapElements[F].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;
d=a.makeArray(a(d.stack)).sort(function(e,b){return(parseInt(a(e).css("zIndex"),10)||0)-(parseInt(a(b).css("zIndex"),10)||0)
});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(b){this.style.zIndex=c+b
});this[0].style.zIndex=c+d.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);
c=a(this).data("draggable").options;if(d.css("zIndex")){c._zIndex=d.css("zIndex")
}d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;
d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;
this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(b){return b.is(c)
};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};
a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);
d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;
c<d.length;c++){d[c]==this&&d.splice(c,1)}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");
return this},_setOption:function(d,c){if(d=="accept"){this.accept=a.isFunction(c)?c:function(b){return b.is(c)
}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;
this.options.activeClass&&this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))
},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);
c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;
if(!(!c||(c.currentItem||c.element)[0]==this.element[0])){if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);
this._trigger("over",d,this.ui(c))}}},_out:function(d){var c=a.ui.ddmanager.current;
if(!(!c||(c.currentItem||c.element)[0]==this.element[0])){if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);
this._trigger("out",d,this.ui(c))}}},_drop:function(f,d){var h=d||a.ui.ddmanager.current;
if(!h||(h.currentItem||h.element)[0]==this.element[0]){return false}var g=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");
if(b.options.greedy&&!b.options.disabled&&b.options.scope==h.options.scope&&b.accept.call(b.element[0],h.currentItem||h.element)&&a.ui.intersect(h,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){g=true;
return false}});if(g){return false}if(this.accept.call(this.element[0],h.currentItem||h.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);
this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",f,this.ui(h));
return this.element}return false},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}
}});a.extend(a.ui.droppable,{version:"1.8.4"});a.ui.intersect=function(w,v,u){if(!v.offset){return false
}var s=(w.positionAbs||w.position.absolute).left,q=s+w.helperProportions.width,r=(w.positionAbs||w.position.absolute).top,p=r+w.helperProportions.height,o=v.offset.left,m=o+v.proportions.width,n=v.offset.top,d=n+v.proportions.height;
switch(u){case"fit":return o<=s&&q<=m&&n<=r&&p<=d;case"intersect":return o<s+w.helperProportions.width/2&&q-w.helperProportions.width/2<m&&n<r+w.helperProportions.height/2&&p-w.helperProportions.height/2<d;
case"pointer":return a.ui.isOver((w.positionAbs||w.position.absolute).top+(w.clickOffset||w.offset.click).top,(w.positionAbs||w.position.absolute).left+(w.clickOffset||w.offset.click).left,n,o,v.proportions.height,v.proportions.width);
case"touch":return(r>=n&&r<=d||p>=n&&p<=d||r<n&&p>d)&&(s>=o&&s<=m||q>=o&&q<=m||s<o&&q>m);
default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(i,d){var n=a.ui.ddmanager.droppables[i.options.scope]||[],m=d?d.type:null,k=(i.currentItem||i.element).find(":data(droppable)").andSelf(),l=0;
i:for(;l<n.length;l++){if(!(n[l].options.disabled||i&&!n[l].accept.call(n[l].element[0],i.currentItem||i.element))){for(var j=0;
j<k.length;j++){if(k[j]==n[l].element[0]){n[l].proportions.height=0;continue i}}n[l].visible=n[l].element.css("display")!="none";
if(n[l].visible){n[l].offset=n[l].element.offset();n[l].proportions={width:n[l].element[0].offsetWidth,height:n[l].element[0].offsetHeight};
m=="mousedown"&&n[l]._activate.call(n[l],d)}}}},drop:function(e,d){var f=false;a.each(a.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(e,this,this.options.tolerance)){f=f||this._drop.call(this,d)
}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=1;
this.isover=0;this._deactivate.call(this,d)}}});return f},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);
a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var h=a.ui.intersect(d,this,this.options.tolerance);
if(h=!h&&this.isover==1?"isout":h&&this.isover==0?"isover":null){var f;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");
if(b.length){f=a.data(b[0],"droppable");f.greedyChild=h=="isover"?1:0}}if(f&&h=="isover"){f.isover=0;
f.isout=1;f._out.call(f,c)}this[h]=1;this[h=="isout"?"isover":"isout"]=0;this[h=="isover"?"_over":"_out"].call(this,c);
if(f&&h=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}}}})}}})(jQuery);(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var e=this,h=this.options;
this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null});
if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&c.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});
this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));
this.element=this.element.parent().data("resizable",this.element.data("resizable"));
this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});
this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});
this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");
this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()
}this.handles=h.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});
if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"
}var l=this.handles.split(",");this.handles={};for(var k=0;k<l.length;k++){var j=c.trim(l[k]),i=c('<div class="ui-resizable-handle '+("ui-resizable-"+j)+'"></div>');
/sw|se|ne|nw/.test(j)&&i.css({zIndex:++h.zIndex});"se"==j&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
this.handles[j]=".ui-resizable-"+j;this.element.append(i)}}this._renderAxis=function(m){m=m||this.element;
for(var g in this.handles){if(this.handles[g].constructor==String){this.handles[g]=c(this.handles[g],this.element).show()
}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var f=c(this.handles[g],this.element),d=0;
d=/sw|ne|nw|se|n|s/.test(g)?f.outerHeight():f.outerWidth();f=["padding",/ne|nw|n/.test(g)?"Top":/se|sw|s/.test(g)?"Bottom":/^e$/.test(g)?"Right":"Left"].join("");
m.css(f,d);this._proportionallyResize()}c(this.handles[g])}};this._renderAxis(this.element);
this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!e.resizing){if(this.className){var d=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)
}e.axis=d&&d[1]?d[1]:"se"}});if(h.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){c(this).removeClass("ui-resizable-autohide");
e._handles.show()},function(){if(!e.resizing){c(this).addClass("ui-resizable-autohide");
e._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
};if(this.elementIsWrapper){d(this.element);var e=this.element;e.after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()
}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);
return this},_mouseCapture:function(d){var e=false;for(var f in this.handles){if(c(this.handles[f])[0]==d.target){e=true
}}return !this.options.disabled&&e},_mouseStart:function(e){var g=this.options,j=this.element.position(),i=this.element;
this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};
if(i.is(".ui-draggable")||/absolute/.test(i.css("position"))){i.css({position:"absolute",top:j.top,left:j.left})
}c.browser.opera&&/relative/.test(i.css("position"))&&i.css({position:"relative",top:"auto",left:"auto"});
this._renderProxy();j=a(this.helper.css("left"));var h=a(this.helper.css("top"));
if(g.containment){j+=c(g.containment).scrollLeft()||0;h+=c(g.containment).scrollTop()||0
}this.offset=this.helper.offset();this.position={left:j,top:h};this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};
this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()};
this.originalPosition={left:j,top:h};this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()};
this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=typeof g.aspectRatio=="number"?g.aspectRatio:this.originalSize.width/this.originalSize.height||1;
g=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",g=="auto"?this.axis+"-resize":g);
i.addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var f=this.helper,h=this.originalMousePosition,g=this._change[this.axis];
if(!g){return false}h=g.apply(this,[e,e.pageX-h.left||0,e.pageY-h.top||0]);if(this._aspectRatio||e.shiftKey){h=this._updateRatio(h,e)
}h=this._respectSize(h,e);this._propagate("resize",e);f.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});
!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();
this._updateCache(h);this._trigger("resize",e,this.ui());return false},_mouseStop:function(e){this.resizing=false;
var h=this.options,l=this;if(this._helper){var k=this._proportionallyResizeElements,j=k.length&&/textarea/i.test(k[0].nodeName);
k=j&&c.ui.hasScroll(k[0],"left")?0:l.sizeDiff.height;j={width:l.size.width-(j?0:l.sizeDiff.width),height:l.size.height-k};
k=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null;
var i=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null;
h.animate||this.element.css(c.extend(j,{top:i,left:k}));l.helper.height(l.size.height);
l.helper.width(l.size.width);this._helper&&!h.animate&&this._proportionallyResize()
}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");
this._propagate("stop",e);this._helper&&this.helper.remove();return false},_updateCache:function(d){this.offset=this.helper.offset();
if(b(d.left)){this.position.left=d.left}if(b(d.top)){this.position.top=d.top}if(b(d.height)){this.size.height=d.height
}if(b(d.width)){this.size.width=d.width}},_updateRatio:function(e){var f=this.position,h=this.size,g=this.axis;
if(e.height){e.width=h.height*this.aspectRatio}else{if(e.width){e.height=h.width/this.aspectRatio
}}if(g=="sw"){e.left=f.left+(h.width-e.width);e.top=null}if(g=="nw"){e.top=f.top+(h.height-e.height);
e.left=f.left+(h.width-e.width)}return e},_respectSize:function(s){var u=this.options,r=this.axis,q=b(s.width)&&u.maxWidth&&u.maxWidth<s.width,p=b(s.height)&&u.maxHeight&&u.maxHeight<s.height,o=b(s.width)&&u.minWidth&&u.minWidth>s.width,n=b(s.height)&&u.minHeight&&u.minHeight>s.height;
if(o){s.width=u.minWidth}if(n){s.height=u.minHeight}if(q){s.width=u.maxWidth}if(p){s.height=u.maxHeight
}var m=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,e=/sw|nw|w/.test(r);
r=/nw|ne|n/.test(r);if(o&&e){s.left=m-u.minWidth}if(q&&e){s.left=m-u.maxWidth}if(n&&r){s.top=l-u.minHeight
}if(p&&r){s.top=l-u.maxHeight}if((u=!s.width&&!s.height)&&!s.left&&s.top){s.top=null
}else{if(u&&!s.top&&s.left){s.left=null}}return s},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var e=this.helper||this.element,g=0;
g<this._proportionallyResizeElements.length;g++){var j=this._proportionallyResizeElements[g];
if(!this.borderDif){var i=[j.css("borderTopWidth"),j.css("borderRightWidth"),j.css("borderBottomWidth"),j.css("borderLeftWidth")],h=[j.css("paddingTop"),j.css("paddingRight"),j.css("paddingBottom"),j.css("paddingLeft")];
this.borderDif=c.map(i,function(f,d){f=parseInt(f,10)||0;d=parseInt(h[d],10)||0;return f+d
})}c.browser.msie&&(c(e).is(":hidden")||c(e).parents(":hidden").length)||j.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})
}}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();
if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');
var e=c.browser.msie&&c.browser.version<7,f=e?1:0;e=e?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++d.zIndex});
this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(d,e){return{width:this.originalSize.width+e}
},w:function(d,e){return{left:this.originalPosition.left+e,width:this.originalSize.width-e}
},n:function(d,e,f){return{top:this.originalPosition.top+f,height:this.originalSize.height-f}
},s:function(d,e,f){return{height:this.originalSize.height+f}},se:function(d,e,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,e,f]))
},sw:function(d,e,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,e,f]))
},ne:function(d,e,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,e,f]))
},nw:function(d,e,f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,e,f]))
}},_propagate:function(d,e){c.ui.plugin.call(this,d,[e,this.ui()]);d!="resize"&&this._trigger(d,e,this.ui())
},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}
}});c.extend(c.ui.resizable,{version:"1.8.4"});c.ui.plugin.add("resizable","alsoResize",{start:function(){var d=c(this).data("resizable").options,e=function(f){c(f).each(function(){var g=c(this);
g.data("resizable-alsoresize",{width:parseInt(g.width(),10),height:parseInt(g.height(),10),left:parseInt(g.css("left"),10),top:parseInt(g.css("top"),10),position:g.css("position")})
})};if(typeof d.alsoResize=="object"&&!d.alsoResize.parentNode){if(d.alsoResize.length){d.alsoResize=d.alsoResize[0];
e(d.alsoResize)}else{c.each(d.alsoResize,function(f){e(f)})}}else{e(d.alsoResize)
}},resize:function(e,i){var n=c(this).data("resizable");e=n.options;var m=n.originalSize,l=n.originalPosition,k={height:n.size.height-m.height||0,width:n.size.width-m.width||0,top:n.position.top-l.top||0,left:n.position.left-l.left||0},j=function(f,d){c(f).each(function(){var g=c(this),o=c(this).data("resizable-alsoresize"),s={},h=d&&d.length?d:g.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];
c.each(h,function(q,p){if((q=(o[p]||0)+(k[p]||0))&&q>=0){s[p]=q||null}});if(c.browser.opera&&/relative/.test(g.css("position"))){n._revertToRelativePosition=true;
g.css({position:"absolute",top:"auto",left:"auto"})}g.css(s)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?c.each(e.alsoResize,function(f,d){j(f,d)
}):j(e.alsoResize)},stop:function(){var d=c(this).data("resizable"),e=d.options,f=function(g){c(g).each(function(){var h=c(this);
h.css({position:h.data("resizable-alsoresize").position})})};if(d._revertToRelativePosition){d._revertToRelativePosition=false;
typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?c.each(e.alsoResize,function(g){f(g)
}):f(e.alsoResize)}c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","animate",{stop:function(e){var i=c(this).data("resizable"),n=i.options,m=i._proportionallyResizeElements,l=m.length&&/textarea/i.test(m[0].nodeName),k=l&&c.ui.hasScroll(m[0],"left")?0:i.sizeDiff.height;
l={width:i.size.width-(l?0:i.sizeDiff.width),height:i.size.height-k};k=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null;
var j=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;
i.element.animate(c.extend(l,j&&k?{top:j,left:k}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var d={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};
m&&m.length&&c(m[0]).css({width:d.width,height:d.height});i._updateCache(d);i._propagate("resize",e)
}})}});c.ui.plugin.add("resizable","containment",{start:function(){var e=c(this).data("resizable"),i=e.element,n=e.options.containment;
if(i=n instanceof c?n.get(0):/parent/.test(n)?i.parent().get(0):n){e.containerElement=c(i);
if(/document/.test(n)||n==document){e.containerOffset={left:0,top:0};e.containerPosition={left:0,top:0};
e.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}
}else{var m=c(i),l=[];c(["Top","Right","Left","Bottom"]).each(function(f,d){l[f]=a(m.css("padding"+d))
});e.containerOffset=m.offset();e.containerPosition=m.position();e.containerSize={height:m.innerHeight()-l[3],width:m.innerWidth()-l[1]};
n=e.containerOffset;var k=e.containerSize.height,j=e.containerSize.width;j=c.ui.hasScroll(i,"left")?i.scrollWidth:j;
k=c.ui.hasScroll(i)?i.scrollHeight:k;e.parentData={element:i,left:n.left,top:n.top,width:j,height:k}
}}},resize:function(e){var i=c(this).data("resizable"),n=i.options,m=i.containerOffset,l=i.position;
e=i._aspectRatio||e.shiftKey;var k={top:0,left:0},j=i.containerElement;if(j[0]!=document&&/static/.test(j.css("position"))){k=m
}if(l.left<(i._helper?m.left:0)){i.size.width+=i._helper?i.position.left-m.left:i.position.left-k.left;
if(e){i.size.height=i.size.width/n.aspectRatio}i.position.left=n.helper?m.left:0}if(l.top<(i._helper?m.top:0)){i.size.height+=i._helper?i.position.top-m.top:i.position.top;
if(e){i.size.width=i.size.height*n.aspectRatio}i.position.top=i._helper?m.top:0}i.offset.left=i.parentData.left+i.position.left;
i.offset.top=i.parentData.top+i.position.top;n=Math.abs((i._helper?i.offset.left-k.left:i.offset.left-k.left)+i.sizeDiff.width);
m=Math.abs((i._helper?i.offset.top-k.top:i.offset.top-m.top)+i.sizeDiff.height);l=i.containerElement.get(0)==i.element.parent().get(0);
k=/relative|absolute/.test(i.containerElement.css("position"));if(l&&k){n-=i.parentData.left
}if(n+i.size.width>=i.parentData.width){i.size.width=i.parentData.width-n;if(e){i.size.height=i.size.width/i.aspectRatio
}}if(m+i.size.height>=i.parentData.height){i.size.height=i.parentData.height-m;if(e){i.size.width=i.size.height*i.aspectRatio
}}},stop:function(){var e=c(this).data("resizable"),j=e.options,p=e.containerOffset,o=e.containerPosition,n=e.containerElement,m=c(e.helper),l=m.offset(),k=m.outerWidth()-e.sizeDiff.width;
m=m.outerHeight()-e.sizeDiff.height;e._helper&&!j.animate&&/relative/.test(n.css("position"))&&c(this).css({left:l.left-o.left-p.left,width:k,height:m});
e._helper&&!j.animate&&/static/.test(n.css("position"))&&c(this).css({left:l.left-o.left-p.left,width:k,height:m})
}});c.ui.plugin.add("resizable","ghost",{start:function(){var d=c(this).data("resizable"),e=d.options,f=d.size;
d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:"");
d.ghost.appendTo(d.helper)},resize:function(){var d=c(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})
},stop:function(){var d=c(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))
}});c.ui.plugin.add("resizable","grid",{resize:function(){var e=c(this).data("resizable"),i=e.options,n=e.size,m=e.originalSize,l=e.originalPosition,k=e.axis;
i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var j=Math.round((n.width-m.width)/(i.grid[0]||1))*(i.grid[0]||1);
i=Math.round((n.height-m.height)/(i.grid[1]||1))*(i.grid[1]||1);if(/^(se|s|e)$/.test(k)){e.size.width=m.width+j;
e.size.height=m.height+i}else{if(/^(ne)$/.test(k)){e.size.width=m.width+j;e.size.height=m.height+i;
e.position.top=l.top-i}else{if(/^(sw)$/.test(k)){e.size.width=m.width+j;e.size.height=m.height+i
}else{e.size.width=m.width+j;e.size.height=m.height+i;e.position.top=l.top-i}e.position.left=l.left-j
}}}});var a=function(d){return parseInt(d,10)||0},b=function(d){return !isNaN(parseInt(d,10))
}})(jQuery);(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var d=this;
this.element.addClass("ui-selectable");this.dragged=false;var b;this.refresh=function(){b=a(d.options.filter,d.element[0]);
b.each(function(){var e=a(this),c=e.offset();a.data(this,"selectable-item",{element:this,$element:e,left:c.left,top:c.top,right:c.left+e.outerWidth(),bottom:c.top+e.outerHeight(),startselected:false,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})
})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")
},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");
this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");
this._mouseDestroy();return this},_mouseStart:function(g){var b=this;this.opos=[g.pageX,g.pageY];
if(!this.options.disabled){var e=this.options;this.selectees=a(e.filter,this.element[0]);
this._trigger("start",g);a(e.appendTo).append(this.helper);this.helper.css({left:g.clientX,top:g.clientY,width:0,height:0});
e.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=a.data(this,"selectable-item");
c.startselected=true;if(!g.metaKey){c.$element.removeClass("ui-selected");c.selected=false;
c.$element.addClass("ui-unselecting");c.unselecting=true;b._trigger("unselecting",g,{unselecting:c.element})
}});a(g.target).parents().andSelf().each(function(){var c=a.data(this,"selectable-item");
if(c){var d=!g.metaKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");
c.unselecting=!d;c.selecting=d;(c.selected=d)?b._trigger("selecting",g,{selecting:c.element}):b._trigger("unselecting",g,{unselecting:c.element});
return false}})}},_mouseDrag:function(q){var o=this;this.dragged=true;if(!this.options.disabled){var p=this.options,e=this.opos[0],n=this.opos[1],m=q.pageX,l=q.pageY;
if(e>m){var k=m;m=e;e=k}if(n>l){k=l;l=n;n=k}this.helper.css({left:e,top:n,width:m-e,height:l-n});
this.selectees.each(function(){var b=a.data(this,"selectable-item");if(!(!b||b.element==o.element[0])){var c=false;
if(p.tolerance=="touch"){c=!(b.left>m||b.right<e||b.top>l||b.bottom<n)}else{if(p.tolerance=="fit"){c=b.left>e&&b.right<m&&b.top>n&&b.bottom<l
}}if(c){if(b.selected){b.$element.removeClass("ui-selected");b.selected=false}if(b.unselecting){b.$element.removeClass("ui-unselecting");
b.unselecting=false}if(!b.selecting){b.$element.addClass("ui-selecting");b.selecting=true;
o._trigger("selecting",q,{selecting:b.element})}}else{if(b.selecting){if(q.metaKey&&b.startselected){b.$element.removeClass("ui-selecting");
b.selecting=false;b.$element.addClass("ui-selected");b.selected=true}else{b.$element.removeClass("ui-selecting");
b.selecting=false;if(b.startselected){b.$element.addClass("ui-unselecting");b.unselecting=true
}o._trigger("unselecting",q,{unselecting:b.element})}}if(b.selected){if(!q.metaKey&&!b.startselected){b.$element.removeClass("ui-selected");
b.selected=false;b.$element.addClass("ui-unselecting");b.unselecting=true;o._trigger("unselecting",q,{unselecting:b.element})
}}}}});return false}},_mouseStop:function(d){var b=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");
c.$element.removeClass("ui-unselecting");c.unselecting=false;c.startselected=false;
b._trigger("unselected",d,{unselected:c.element})});a(".ui-selecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");
c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=false;
c.selected=true;c.startselected=true;b._trigger("selected",d,{selected:c.element})
});this._trigger("stop",d);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.4"})
})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){this.containerCache={};
this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;
this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");
this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")
}return this},_setOption:function(d,c){if(d==="disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")
}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(g,d){if(this.reverting){return false
}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(g);
var j=null,i=this;a(g.target).parents().each(function(){if(a.data(this,"sortable-item")==i){j=a(this);
return false}});if(a.data(g.target,"sortable-item")==i){j=a(g.target)}if(!j){return false
}if(this.options.handle&&!d){var h=false;a(this.options.handle,j).find("*").andSelf().each(function(){if(this==g.target){h=true
}});if(!h){return false}}this.currentItem=j;this._removeCurrentsFromItems();return true
},_mouseStart:function(f,d,h){d=this.options;var g=this;this.currentContainer=this;
this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();
this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();
this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};
this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");
a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;
d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
d.containment&&this._setContainment();if(d.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")
}a("body").css("cursor",d.cursor)}if(d.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")
}this.helper.css("opacity",d.opacity)}if(d.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")
}this.helper.css("zIndex",d.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()
}this._trigger("start",f,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();
if(!h){for(h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",f,g._uiHash(this))
}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,f);
this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);
return true},_mouseDrag:function(g){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");
if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var d=this.options,j=false;
if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-g.pageY<d.scrollSensitivity){this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop+d.scrollSpeed
}else{if(g.pageY-this.overflowOffset.top<d.scrollSensitivity){this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop-d.scrollSpeed
}}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-g.pageX<d.scrollSensitivity){this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft+d.scrollSpeed
}else{if(g.pageX-this.overflowOffset.left<d.scrollSensitivity){this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft-d.scrollSpeed
}}}else{if(g.pageY-a(document).scrollTop()<d.scrollSensitivity){j=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed)
}else{if(a(window).height()-(g.pageY-a(document).scrollTop())<d.scrollSensitivity){j=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed)
}}if(g.pageX-a(document).scrollLeft()<d.scrollSensitivity){j=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed)
}else{if(a(window).width()-(g.pageX-a(document).scrollLeft())<d.scrollSensitivity){j=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)
}}}j!==false&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,g)
}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"
}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"
}for(d=this.items.length-1;d>=0;d--){j=this.items[d];var i=j.item[0],h=this._intersectsWithPointer(j);
if(h){if(i!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=i&&!a.ui.contains(this.placeholder[0],i)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],i):true)){this.direction=h==1?"down":"up";
if(this.options.tolerance=="pointer"||this._intersectsWithSides(j)){this._rearrange(g,j)
}else{break}this._trigger("change",g,this._uiHash());break}}}this._contactContainers(g);
a.ui.ddmanager&&a.ui.ddmanager.drag(this,g);this._trigger("sort",g,this._uiHash());
this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,d){if(e){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,e);
if(this.options.revert){var f=this;d=f.placeholder.offset();f.reverting=true;a(this.helper).animate({left:d.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(e)
})}else{this._clear(e,d)}return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp();
this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));
if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));
this.containers[c].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();
a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem);
return this},serialize:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];
e=e||{};a(d).each(function(){var b=(a(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);
if(b){f.push((e.key||b[1]+"[]")+"="+(e.key&&e.expression?b[1]:b[2]))}});!f.length&&e.key&&f.push(e.key+"=");
return f.join("&")},toArray:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];
e=e||{};d.each(function(){f.push(a(e.item||this).attr(e.attribute||"id")||"")});return f
},_intersectsWith:function(w){var v=this.positionAbs.left,u=v+this.helperProportions.width,s=this.positionAbs.top,r=s+this.helperProportions.height,q=w.left,p=q+w.width,o=w.top,m=o+w.height,n=this.offset.click.top,d=this.offset.click.left;
n=s+n>o&&s+n<m&&v+d>q&&v+d<p;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>w[this.floating?"width":"height"]?n:q<v+this.helperProportions.width/2&&u-this.helperProportions.width/2<p&&o<s+this.helperProportions.height/2&&r-this.helperProportions.height/2<m
},_intersectsWithPointer:function(e){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height);
e=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);d=d&&e;
e=this._getDragVerticalDirection();var f=this._getDragHorizontalDirection();if(!d){return false
}return this.floating?f&&f=="right"||e=="down"?2:1:e&&(e=="down"?2:1)},_intersectsWithSides:function(f){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+f.height/2,f.height);
f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+f.width/2,f.width);
var h=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&f||g=="left"&&!f:h&&(h=="down"&&d||h=="up"&&!d)
},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;
return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;
return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();
return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith
},_getItemsAsjQuery:function(i){var d=[],n=[],m=this._connectWith();if(m&&i){for(i=m.length-1;
i>=0;i--){for(var l=a(m[i]),k=l.length-1;k>=0;k--){var j=a.data(l[k],"sortable");
if(j&&j!=this&&!j.options.disabled){n.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])
}}}}n.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
for(i=n.length-1;i>=0;i--){n[i][0].each(function(){d.push(this)})}return a(d)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),d=0;
d<this.items.length;d++){for(var f=0;f<e.length;f++){e[f]==this.items[d].item[0]&&this.items.splice(d,1)
}}},_refreshItems:function(j){this.items=[];this.containers=[this];var d=this.items,p=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],j,{item:this.currentItem}):a(this.options.items,this.element),this]],o=this._connectWith();
if(o){for(var n=o.length-1;n>=0;n--){for(var m=a(o[n]),l=m.length-1;l>=0;l--){var k=a.data(m[l],"sortable");
if(k&&k!=this&&!k.options.disabled){p.push([a.isFunction(k.options.items)?k.options.items.call(k.element[0],j,{item:this.currentItem}):a(k.options.items,k.element),k]);
this.containers.push(k)}}}}for(n=p.length-1;n>=0;n--){j=p[n][1];o=p[n][0];l=0;for(m=o.length;
l<m;l++){k=a(o[l]);k.data("sortable-item",j);d.push({item:k,instance:j,width:0,height:0,left:0,top:0})
}}},refreshPositions:function(f){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()
}for(var d=this.items.length-1;d>=0;d--){var h=this.items[d],g=this.options.toleranceElement?a(this.options.toleranceElement,h.item):h.item;
if(!f){h.width=g.outerWidth();h.height=g.outerHeight()}g=g.offset();h.left=g.left;
h.top=g.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)
}else{for(d=this.containers.length-1;d>=0;d--){g=this.containers[d].element.offset();
this.containers[d].containerCache.left=g.left;this.containers[d].containerCache.top=g.top;
this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()
}}return this},_createPlaceholder:function(f){var d=f||this,h=d.options;if(!h.placeholder||h.placeholder.constructor==String){var g=h.placeholder;
h.placeholder={element:function(){var b=a(document.createElement(d.currentItem[0].nodeName)).addClass(g||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
if(!g){b.style.visibility="hidden"}return b},update:function(c,b){if(!(g&&!h.forcePlaceholderSize)){b.height()||b.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10));
b.width()||b.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10))
}}}}d.placeholder=a(h.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);
h.placeholder.update(d,d.placeholder)},_contactContainers:function(i){for(var d=null,n=null,m=this.containers.length-1;
m>=0;m--){if(!a.ui.contains(this.currentItem[0],this.containers[m].element[0])){if(this._intersectsWith(this.containers[m].containerCache)){if(!(d&&a.ui.contains(this.containers[m].element[0],d.element[0]))){d=this.containers[m];
n=m}}else{if(this.containers[m].containerCache.over){this.containers[m]._trigger("out",i,this._uiHash(this));
this.containers[m].containerCache.over=0}}}}if(d){if(this.containers.length===1){this.containers[n]._trigger("over",i,this._uiHash(this));
this.containers[n].containerCache.over=1}else{if(this.currentContainer!=this.containers[n]){d=10000;
m=null;for(var l=this.positionAbs[this.containers[n].floating?"left":"top"],k=this.items.length-1;
k>=0;k--){if(a.ui.contains(this.containers[n].element[0],this.items[k].item[0])){var j=this.items[k][this.containers[n].floating?"left":"top"];
if(Math.abs(j-l)<d){d=Math.abs(j-l);m=this.items[k]}}}if(m||this.options.dropOnEmpty){this.currentContainer=this.containers[n];
m?this._rearrange(i,m,null,true):this._rearrange(i,null,this.containers[n].element,true);
this._trigger("change",i,this._uiHash());this.containers[n]._trigger("change",i,this._uiHash(this));
this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[n]._trigger("over",i,this._uiHash(this));
this.containers[n].containerCache.over=1}}}}},_createHelper:function(d){var c=this.options;
d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;
d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);
if(d[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}
}if(d[0].style.width==""||c.forceHelperSize){d.width(this.currentItem.width())}if(d[0].style.height==""||c.forceHelperSize){d.height(this.currentItem.height())
}return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")
}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left
}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left
}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top
}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();
if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();
b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}
}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();
return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}
}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}
},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}
},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode
}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]
}if(!/^(document|window|parent)$/.test(e.containment)){var d=a(e.containment)[0];
e=a(e.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]
}},_convertPositionTo:function(f,d){if(!d){d=this.position}f=f=="absolute"?1:-1;var h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(h[0].tagName);
return{top:d.top+this.offset.relative.top*f+this.offset.parent.top*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:h.scrollTop())*f),left:d.left+this.offset.relative.left*f+this.offset.parent.left*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*f)}
},_generatePosition:function(h){var d=this.options,l=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=/(html|body)/i.test(l[0].tagName);
if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()
}var j=h.pageX,i=h.pageY;if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){j=this.containment[0]+this.offset.click.left
}if(h.pageY-this.offset.click.top<this.containment[1]){i=this.containment[1]+this.offset.click.top
}if(h.pageX-this.offset.click.left>this.containment[2]){j=this.containment[2]+this.offset.click.left
}if(h.pageY-this.offset.click.top>this.containment[3]){i=this.containment[3]+this.offset.click.top
}}if(d.grid){i=this.originalPageY+Math.round((i-this.originalPageY)/d.grid[1])*d.grid[1];
i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<this.containment[1])?i-d.grid[1]:i+d.grid[1]:i;
j=this.originalPageX+Math.round((j-this.originalPageX)/d.grid[0])*d.grid[0];j=this.containment?!(j-this.offset.click.left<this.containment[0]||j-this.offset.click.left>this.containment[2])?j:!(j-this.offset.click.left<this.containment[0])?j-d.grid[0]:j+d.grid[0]:j
}}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():k?0:l.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():k?0:l.scrollLeft())}
},_rearrange:function(h,d,l,k){l?l[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?d.item[0]:d.item[0].nextSibling);
this.counter=this.counter?++this.counter:1;var j=this,i=this.counter;window.setTimeout(function(){i==j.counter&&j.refreshPositions(!k)
},0)},_clear:function(f,d){this.reverting=false;var h=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);
this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS){if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static"){this._storedCSS[g]=""
}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()
}this.fromOutside&&!d&&h.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))
});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d){h.push(function(b){this._trigger("update",b,this._uiHash())
})}if(!a.ui.contains(this.element[0],this.currentItem[0])){d||h.push(function(b){this._trigger("remove",b,this._uiHash())
});for(g=this.containers.length-1;g>=0;g--){if(a.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!d){h.push(function(b){return function(c){b._trigger("receive",c,this._uiHash(this))
}}.call(this,this.containers[g]));h.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))
}}.call(this,this.containers[g]))}}}for(g=this.containers.length-1;g>=0;g--){d||h.push(function(b){return function(c){b._trigger("deactivate",c,this._uiHash(this))
}}.call(this,this.containers[g]));if(this.containers[g].containerCache.over){h.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))
}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);
this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)
}this.dragging=false;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",f,this._uiHash());
for(g=0;g<h.length;g++){h[g].call(this,f)}this._trigger("stop",f,this._uiHash())}return false
}d||this._trigger("beforeStop",f,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(g=0;
g<h.length;g++){h[g].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;
return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()
},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}
}});a.extend(a.ui.sortable,{version:"1.8.4"})})(jQuery);(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()
}},_create:function(){var e=this,c=e.options;e.running=0;e.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
e.headers=e.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")
}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")
}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")
}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")
});e.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(c.navigation){var h=e.element.find("a").filter(c.navigationFilter).eq(0);if(h.length){var g=h.closest(".ui-accordion-header");
e.active=g.length?g:h.closest(".ui-accordion-content").prev()}}e.active=e._findActive(e.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all ui-corner-top");
e.active.next().addClass("ui-accordion-content-active");e._createIcons();e.resize();
e.element.attr("role","tablist");e.headers.attr("role","tab").bind("keydown.accordion",function(b){return e._keydown(b)
}).next().attr("role","tabpanel");e.headers.not(e.active||"").attr({"aria-expanded":"false",tabIndex:-1}).next().hide();
e.active.length?e.active.attr({"aria-expanded":"true",tabIndex:0}):e.headers.eq(0).attr("tabIndex",0);
a.browser.safari||e.headers.find("a").attr("tabIndex",-1);c.event&&e.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(b){e._clickHandler.call(e,b,this);
b.preventDefault()})},_createIcons:function(){var b=this.options;if(b.icons){a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);
this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);
this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();
this.element.removeClass("ui-accordion-icons")},destroy:function(){var d=this.options;
this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");
this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");
if(d.autoHeight||d.fillHeight){c.css("height","")}return a.Widget.prototype.destroy.call(this)
},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d=="active"&&this.activate(c);
if(d=="icons"){this._destroyIcons();c&&this._createIcons()}if(d=="disabled"){this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")
}},_keydown:function(e){if(!(this.options.disabled||e.altKey||e.ctrlKey)){var c=a.ui.keyCode,j=this.headers.length,i=this.headers.index(e.target),h=false;
switch(e.keyCode){case c.RIGHT:case c.DOWN:h=this.headers[(i+1)%j];break;case c.LEFT:case c.UP:h=this.headers[(i-1+j)%j];
break;case c.SPACE:case c.ENTER:this._clickHandler({target:e.target},e.target);e.preventDefault()
}if(h){a(e.target).attr("tabIndex",-1);a(h).attr("tabIndex",0);h.focus();return false
}return true}},resize:function(){var e=this.options,c;if(e.fillSpace){if(a.browser.msie){var f=this.element.parent().css("overflow");
this.element.parent().css("overflow","hidden")}c=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",f);
this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))
}).css("overflow","auto")}else{if(e.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())
}).height(c)}}return this},activate:function(b){this.options.active=b;b=this._findActive(b)[0];
this._clickHandler({target:b},b);return this},_findActive:function(b){return b?typeof b==="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)")
},_clickHandler:function(e,c){var l=this.options;if(!l.disabled){if(e.target){e=a(e.currentTarget||c);
c=e[0]===this.active[0];l.active=l.collapsible&&c?false:this.headers.index(e);if(!(this.running||!l.collapsible&&c)){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(l.icons.headerSelected).addClass(l.icons.header);
if(!c){e.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(l.icons.header).addClass(l.icons.headerSelected);
e.next().addClass("ui-accordion-content-active")}i=e.next();k=this.active.next();
j={options:l,newHeader:c&&l.collapsible?a([]):e,oldHeader:this.active,newContent:c&&l.collapsible?a([]):i,oldContent:k};
l=this.headers.index(this.active[0])>this.headers.index(e[0]);this.active=c?a([]):e;
this._toggle(i,k,j,c,l)}}else{if(l.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(l.icons.headerSelected).addClass(l.icons.header);
this.active.next().addClass("ui-accordion-content-active");var k=this.active.next(),j={options:l,newHeader:a([]),oldHeader:l.active,newContent:a([]),oldContent:k},i=this.active=a([]);
this._toggle(i,k,j)}}}},_toggle:function(u,s,r,p,o){var n=this,q=n.options;n.toShow=u;
n.toHide=s;n.data=r;var l=function(){if(n){return n._completed.apply(n,arguments)
}};n._trigger("changestart",null,n.data);n.running=s.size()===0?u.size():s.size();
if(q.animated){r={};r=q.collapsible&&p?{toShow:a([]),toHide:s,complete:l,down:o,autoHeight:q.autoHeight||q.fillSpace}:{toShow:u,toHide:s,complete:l,down:o,autoHeight:q.autoHeight||q.fillSpace};
if(!q.proxied){q.proxied=q.animated}if(!q.proxiedDuration){q.proxiedDuration=q.duration
}q.animated=a.isFunction(q.proxied)?q.proxied(r):q.proxied;q.duration=a.isFunction(q.proxiedDuration)?q.proxiedDuration(r):q.proxiedDuration;
p=a.ui.accordion.animations;var m=q.duration,c=q.animated;if(c&&!p[c]&&!a.easing[c]){c="slide"
}p[c]||(p[c]=function(b){this.slide(b,{easing:c,duration:m||700})});p[c](r)}else{if(q.collapsible&&p){u.toggle()
}else{s.hide();u.show()}l(true)}s.prev().attr({"aria-expanded":"false",tabIndex:-1}).blur();
u.prev().attr({"aria-expanded":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;
if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});
this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data)
}}});a.extend(a.ui.accordion,{version:"1.8.4",animations:{slide:function(i,c){i=a.extend({easing:"swing",duration:300},i,c);
if(i.toHide.size()){if(i.toShow.size()){var n=i.toShow.css("overflow"),l=0,k={},j={},m;
c=i.toShow;m=c[0].style.width;c.width(parseInt(c.parent().width(),10)-parseInt(c.css("paddingLeft"),10)-parseInt(c.css("paddingRight"),10)-(parseInt(c.css("borderLeftWidth"),10)||0)-(parseInt(c.css("borderRightWidth"),10)||0));
a.each(["height","paddingTop","paddingBottom"],function(b,d){j[d]="hide";b=(""+a.css(i.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);
k[d]={value:b[1],unit:b[2]||"px"}});i.toShow.css({height:0,overflow:"hidden"}).show();
i.toHide.filter(":hidden").each(i.complete).end().filter(":visible").animate(j,{step:function(b,d){if(d.prop=="height"){l=d.end-d.start===0?0:(d.now-d.start)/(d.end-d.start)
}i.toShow[0].style[d.prop]=l*k[d.prop].value+k[d.prop].unit},duration:i.duration,easing:i.easing,complete:function(){i.autoHeight||i.toShow.css("height","");
i.toShow.css({width:m,overflow:n});i.complete()}})}else{i.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},i)
}}else{i.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},i)
}},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})
}}})})(jQuery);(function(a){a.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},_create:function(){var d=this,c=this.element[0].ownerDocument;
this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){if(!d.options.disabled){var b=a.ui.keyCode;
switch(e.keyCode){case b.PAGE_UP:d._move("previousPage",e);break;case b.PAGE_DOWN:d._move("nextPage",e);
break;case b.UP:d._move("previous",e);e.preventDefault();break;case b.DOWN:d._move("next",e);
e.preventDefault();break;case b.ENTER:case b.NUMPAD_ENTER:d.menu.element.is(":visible")&&e.preventDefault();
case b.TAB:if(!d.menu.active){return}d.menu.select(e);break;case b.ESCAPE:d.element.val(d.term);
d.close(e);break;default:clearTimeout(d.searching);d.searching=setTimeout(function(){if(d.term!=d.element.val()){d.selectedItem=null;
d.search(null,e)}},d.options.delay);break}}}).bind("focus.autocomplete",function(){if(!d.options.disabled){d.selectedItem=null;
d.previous=d.element.val()}}).bind("blur.autocomplete",function(b){if(!d.options.disabled){clearTimeout(d.searching);
d.closing=setTimeout(function(){d.close(b);d._change(b)},150)}});this._initSource();
this.response=function(){return d._response.apply(d,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(e){var b=d.menu.element[0];
e.target===b&&setTimeout(function(){a(document).one("mousedown",function(g){g.target!==d.element[0]&&g.target!==b&&!a.ui.contains(b,g.target)&&d.close()
})},1);setTimeout(function(){clearTimeout(d.closing)},13)}).menu({focus:function(e,b){b=b.item.data("item.autocomplete");
false!==d._trigger("focus",null,{item:b})&&/^key/.test(e.originalEvent.type)&&d.element.val(b.value)
},selected:function(g,e){e=e.item.data("item.autocomplete");var b=d.previous;if(d.element[0]!==c.activeElement){d.element.focus();
d.previous=b}false!==d._trigger("select",g,{item:e})&&d.element.val(e.value);d.close(g);
d.selectedItem=e},blur:function(){d.menu.element.is(":visible")&&d.element.val()!==d.term&&d.element.val(d.term)
}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()
},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);
d==="source"&&this._initSource();if(d==="appendTo"){this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0])
}},_initSource:function(){var d,c;if(a.isArray(this.options.source)){d=this.options.source;
this.source=function(e,b){b(a.ui.autocomplete.filter(d,e.term))}}else{if(typeof this.options.source==="string"){c=this.options.source;
this.source=function(e,b){a.getJSON(c,e,b)}}else{this.source=this.options.source}}},search:function(d,c){d=d!=null?d:this.element.val();
if(d.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);
if(this._trigger("search")!==false){return this._search(d)}},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();
this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);
this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")
},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);
this.menu.element.hide();this.menu.deactivate()}},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})
},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}
}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(e){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1),f;
this._renderMenu(d,e);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position(a.extend({of:this.element},this.options.position));
e=d.width("").outerWidth();f=this.element.outerWidth();d.outerWidth(Math.max(e,f))
},_renderMenu:function(e,d){var f=this;a.each(d,function(c,b){f._renderItem(e,b)})
},_renderItem:function(d,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(d)
},_move:function(d,c){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);
this.menu.deactivate()}else{this.menu[d](c)}}else{this.search(null,c)}},widget:function(){return this.menu.element
}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")
},filter:function(e,d){var f=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(e,function(b){return f.test(b.label||b.value||b)
})}})})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();
b.select(c)}});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())
}).mouseleave(function(){b.deactivate()})},activate:function(g,e){this.deactivate();
if(this.hasScroll()){var j=e.offset().top-this.element.offset().top,i=this.element.attr("scrollTop"),h=this.element.height();
if(j<0){this.element.attr("scrollTop",i+j)}else{j>h&&this.element.attr("scrollTop",i+j-h+e.height())
}}this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();
this._trigger("focus",g,{item:e})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");
this._trigger("blur");this.active=null}},next:function(b){this.move("next",".ui-menu-item:first",b)
},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length
},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length
},move:function(e,d,f){if(this.active){e=this.active[e+"All"](".ui-menu-item").eq(0);
e.length?this.activate(f,e):this.activate(f,this.element.children(d))}else{this.activate(f,this.element.children(d))
}},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(":first"))
}else{var e=this.active.offset().top,h=this.element.height(),g=this.element.children("li").filter(function(){var b=a(this).offset().top-e-h+a(this).height();
return b<10&&b>-10});g.length||(g=this.element.children(":last"));this.activate(f,g)
}}else{this.activate(f,this.element.children(!this.active||this.last()?":first":":last"))
}},previousPage:function(e){if(this.hasScroll()){if(!this.active||this.first()){this.activate(e,this.element.children(":last"))
}else{var d=this.active.offset().top,f=this.element.height();result=this.element.children("li").filter(function(){var b=a(this).offset().top-d+f-a(this).height();
return b<10&&b>-10});result.length||(result=this.element.children(":first"));this.activate(e,result)
}}else{this.activate(e,this.element.children(!this.active||this.first()?":last":":first"))
}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")
},select:function(b){this._trigger("selected",b,{item:this.active})}})})(jQuery);
(function(b){var e,c=function(a){b(":ui-button",a.target.form).each(function(){var f=b(this).data("button");
setTimeout(function(){f.refresh()},1)})},d=function(a){var h=a.name,g=a.form,f=b([]);
if(h){f=g?b(g).find("[name='"+h+"']"):b("[name='"+h+"']",a.ownerDocument).filter(function(){return !this.form
})}return f};b.widget("ui.button",{options:{text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",c);
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,h=this.options,g=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(!g?" ui-state-active":"");
if(h.label===null){h.label=this.buttonElement.html()}if(this.element.is(":disabled")){h.disabled=true
}this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!h.disabled){b(this).addClass("ui-state-hover");
this===e&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){h.disabled||b(this).removeClass(f)
}).bind("focus.button",function(){b(this).addClass("ui-state-focus")}).bind("blur.button",function(){b(this).removeClass("ui-state-focus")
});g&&this.element.bind("change.button",function(){a.refresh()});if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(h.disabled){return false
}b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)
})}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(h.disabled){return false
}b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed",true);var i=a.element[0];
d(i).not(i).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)
})}else{this.buttonElement.bind("mousedown.button",function(){if(h.disabled){return false
}b(this).addClass("ui-state-active");e=this;b(document).one("mouseup",function(){e=null
})}).bind("mouseup.button",function(){if(h.disabled){return false}b(this).removeClass("ui-state-active")
}).bind("keydown.button",function(i){if(h.disabled){return false}if(i.keyCode==b.ui.keyCode.SPACE||i.keyCode==b.ui.keyCode.ENTER){b(this).addClass("ui-state-active")
}}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(i){i.keyCode===b.ui.keyCode.SPACE&&b(this).click()
})}}this._setOption("disabled",h.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";
if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("label[for="+this.element.attr("id")+"]");
this.element.addClass("ui-helper-hidden-accessible");var a=this.element.is(":checked");
a&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)
}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement
},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title");b.Widget.prototype.destroy.call(this)
},_setOption:function(a,f){b.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled"){f?this.element.attr("disabled",true):this.element.removeAttr("disabled")
}this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);
if(this.type==="radio"){d(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)
})}else{if(this.type==="checkbox"){this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)
}}},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label)
}else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),h=b("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),g=this.options.icons,f=g.primary&&g.secondary;
if(g.primary||g.secondary){a.addClass("ui-button-text-icon"+(f?"s":g.primary?"-primary":"-secondary"));
g.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+g.primary+"'></span>");
g.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+g.secondary+"'></span>");
if(!this.options.text){a.addClass(f?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary");
this.hasTitle||a.attr("title",h)}}else{a.addClass("ui-button-text-only")}}}});b.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset");
this._init()},_init:function(){this.refresh()},_setOption:function(a,f){a==="disabled"&&this.buttons.button("option",a,f);
b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]
}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()
},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]
}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");b.Widget.prototype.destroy.call(this)
}})})(jQuery);(function(b,a){b.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var c=b(this).css(d).offset().top;
c<0&&b(this).css("top",d.top-c)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");
if(typeof this.originalTitle!=="string"){this.originalTitle=""}var i=this,c=i.options,n=c.title||i.originalTitle||"&#160;",l=b.ui.dialog.getTitleId(i.element),k=(i.uiDialog=b("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){if(c.closeOnEscape&&d.keyCode&&d.keyCode===b.ui.keyCode.ESCAPE){i.close(d);
d.preventDefault()}}).attr({role:"dialog","aria-labelledby":l}).mousedown(function(d){i.moveToTop(false,d)
});i.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(k);
var m=(i.uiDialogTitlebar=b("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(k),j=b('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")
},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")
}).blur(function(){j.removeClass("ui-state-focus")}).click(function(d){i.close(d);
return false}).appendTo(m);(i.uiDialogTitlebarCloseText=b("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(j);
b("<span></span>").addClass("ui-dialog-title").attr("id",l).html(n).prependTo(m);
if(b.isFunction(c.beforeclose)&&!b.isFunction(c.beforeClose)){c.beforeClose=c.beforeclose
}m.find("*").add(m).disableSelection();c.draggable&&b.fn.draggable&&i._makeDraggable();
c.resizable&&b.fn.resizable&&i._makeResizable();i._createButtons(c.buttons);i._isOpen=false;
b.fn.bgiframe&&k.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var c=this;
c.overlay&&c.overlay.destroy();c.uiDialog.hide();c.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");
c.uiDialog.remove();c.originalTitle&&c.element.attr("title",c.originalTitle);return c
},widget:function(){return this.uiDialog},close:function(e){var c=this,f;if(false!==c._trigger("beforeClose",e)){c.overlay&&c.overlay.destroy();
c.uiDialog.unbind("keypress.ui-dialog");c._isOpen=false;if(c.options.hide){c.uiDialog.hide(c.options.hide,function(){c._trigger("close",e)
})}else{c.uiDialog.hide();c._trigger("close",e)}b.ui.dialog.overlay.resize();if(c.options.modal){f=0;
b(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){f=Math.max(f,b(this).css("z-index"))
}});b.ui.dialog.maxZ=f}return c}},isOpen:function(){return this._isOpen},moveToTop:function(e,c){var h=this,g=h.options;
if(g.modal&&!e||!g.stack&&!g.modal){return h._trigger("focus",c)}if(g.zIndex>b.ui.dialog.maxZ){b.ui.dialog.maxZ=g.zIndex
}if(h.overlay){b.ui.dialog.maxZ+=1;h.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ)
}e={scrollTop:h.element.attr("scrollTop"),scrollLeft:h.element.attr("scrollLeft")};
b.ui.dialog.maxZ+=1;h.uiDialog.css("z-index",b.ui.dialog.maxZ);h.element.attr(e);
h._trigger("focus",c);return h},open:function(){if(!this._isOpen){var e=this,c=e.options,f=e.uiDialog;
e.overlay=c.modal?new b.ui.dialog.overlay(e):null;f.next().length&&f.appendTo("body");
e._size();e._position(c.position);f.show(c.show);e.moveToTop(true);c.modal&&f.bind("keypress.ui-dialog",function(h){if(h.keyCode===b.ui.keyCode.TAB){var d=b(":tabbable",this),i=d.filter(":first");
d=d.filter(":last");if(h.target===d[0]&&!h.shiftKey){i.focus(1);return false}else{if(h.target===i[0]&&h.shiftKey){d.focus(1);
return false}}}});b(e.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus();
e._trigger("open");e._isOpen=true;return e}},_createButtons:function(e){var c=this,j=false,i=b("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=b("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);
c.uiDialog.find(".ui-dialog-buttonpane").remove();typeof e==="object"&&e!==null&&b.each(e,function(){return !(j=true)
});if(j){b.each(e,function(f,d){f=b('<button type="button"></button>').text(f).click(function(){d.apply(c.element[0],arguments)
}).appendTo(h);b.fn.button&&f.button()});i.appendTo(c.uiDialog)}},_makeDraggable:function(){function e(d){return{position:d.position,offset:d.offset}
}var c=this,j=c.options,i=b(document),h;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,d){h=j.height==="auto"?"auto":b(this).height();
b(this).height(b(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",f,e(d))
},drag:function(f,d){c._trigger("drag",f,e(d))},stop:function(f,d){j.position=[d.position.left-i.scrollLeft(),d.position.top-i.scrollTop()];
b(this).removeClass("ui-dialog-dragging").height(h);c._trigger("dragStop",f,e(d));
b.ui.dialog.overlay.resize()}})},_makeResizable:function(e){function c(d){return{originalPosition:d.originalPosition,originalSize:d.originalSize,position:d.position,size:d.size}
}e=e===a?this.options.resizable:e;var j=this,i=j.options,h=j.uiDialog.css("position");
e=typeof e==="string"?e:"n,e,s,w,se,sw,ne,nw";j.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:j.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:j._minHeight(),handles:e,start:function(f,d){b(this).addClass("ui-dialog-resizing");
j._trigger("resizeStart",f,c(d))},resize:function(f,d){j._trigger("resize",f,c(d))
},stop:function(f,d){b(this).removeClass("ui-dialog-resizing");i.height=b(this).height();
i.width=b(this).width();j._trigger("resizeStop",f,c(d));b.ui.dialog.overlay.resize()
}}).css("position",h).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")
},_minHeight:function(){var c=this.options;return c.height==="auto"?c.minHeight:Math.min(c.minHeight,c.height)
},_position:function(e){var c=[],h=[0,0],g;if(e){if(typeof e==="string"||typeof e==="object"&&"0" in e){c=e.split?e.split(" "):[e[0],e[1]];
if(c.length===1){c[1]=c[0]}b.each(["left","top"],function(d,f){if(+c[d]===c[d]){h[d]=c[d];
c[d]=f}});e={my:c.join(" "),at:c.join(" "),offset:h.join(" ")}}e=b.extend({},b.ui.dialog.prototype.options.position,e)
}else{e=b.ui.dialog.prototype.options.position}(g=this.uiDialog.is(":visible"))||this.uiDialog.show();
this.uiDialog.css({top:0,left:0}).position(e);g||this.uiDialog.hide()},_setOption:function(h,c){var l=this,j=l.uiDialog,i=j.is(":data(resizable)"),k=false;
switch(h){case"beforeclose":h="beforeClose";break;case"buttons":l._createButtons(c);
k=true;break;case"closeText":l.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":j.removeClass(l.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);
break;case"disabled":c?j.addClass("ui-dialog-disabled"):j.removeClass("ui-dialog-disabled");
break;case"draggable":c?l._makeDraggable():j.draggable("destroy");break;case"height":k=true;
break;case"maxHeight":i&&j.resizable("option","maxHeight",c);k=true;break;case"maxWidth":i&&j.resizable("option","maxWidth",c);
k=true;break;case"minHeight":i&&j.resizable("option","minHeight",c);k=true;break;
case"minWidth":i&&j.resizable("option","minWidth",c);k=true;break;case"position":l._position(c);
break;case"resizable":i&&!c&&j.resizable("destroy");i&&typeof c==="string"&&j.resizable("option","handles",c);
!i&&c!==false&&l._makeResizable(c);break;case"title":b(".ui-dialog-title",l.uiDialogTitlebar).html(""+(c||"&#160;"));
break;case"width":k=true;break}b.Widget.prototype._setOption.apply(l,arguments);k&&l._size()
},_size:function(){var d=this.options,c;this.element.css({width:"auto",minHeight:0,height:0});
if(d.minWidth>d.width){d.width=d.minWidth}c=this.uiDialog.css({height:"auto",width:d.width}).height();
this.element.css(d.height==="auto"?{minHeight:Math.max(d.minHeight-c,0),height:"auto"}:{minHeight:0,height:Math.max(d.height-c,0)}).show();
this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())
}});b.extend(b.ui.dialog,{version:"1.8.4",uuid:0,maxZ:0,getTitleId:function(c){c=c.attr("id");
if(!c){this.uuid+=1;c=this.uuid}return"ui-dialog-title-"+c},overlay:function(c){this.$el=b.ui.dialog.overlay.create(c)
}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(c){return c+".dialog-overlay"
}).join(" "),create:function(d){if(this.instances.length===0){setTimeout(function(){b.ui.dialog.overlay.instances.length&&b(document).bind(b.ui.dialog.overlay.events,function(e){return b(e.target).zIndex()>=b.ui.dialog.overlay.maxZ
})},1);b(document).bind("keydown.dialog-overlay",function(e){if(d.options.closeOnEscape&&e.keyCode&&e.keyCode===b.ui.keyCode.ESCAPE){d.close(e);
e.preventDefault()}});b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize)
}var c=(this.oldInstances.pop()||b("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});
b.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(d){this.oldInstances.push(this.instances.splice(b.inArray(d,this.instances),1)[0]);
this.instances.length===0&&b([document,window]).unbind(".dialog-overlay");d.remove();
var c=0;b.each(this.instances,function(){c=Math.max(c,this.css("z-index"))});this.maxZ=c
},height:function(){var d,c;if(b.browser.msie&&b.browser.version<7){d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);
c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return d<c?b(window).height()+"px":d+"px"
}else{return b(document).height()+"px"}},width:function(){var d,c;if(b.browser.msie&&b.browser.version<7){d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);
c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return d<c?b(window).width()+"px":d+"px"
}else{return b(document).width()+"px"}},resize:function(){var c=b([]);b.each(b.ui.dialog.overlay.instances,function(){c=c.add(this)
});c.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})
}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)
}})})(jQuery);(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var d=this,c=this.options;
this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;
this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");
c.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=a([]);
if(c.range){if(c.range===true){this.range=a("<div></div>");if(!c.values){c.values=[this._valueMin(),this._valueMin()]
}if(c.values.length&&c.values.length!==2){c.values=[c.values[0],c.values[0]]}}else{this.range=a("<div></div>")
}this.range.appendTo(this.element).addClass("ui-slider-range");if(c.range==="min"||c.range==="max"){this.range.addClass("ui-slider-range-"+c.range)
}this.range.addClass("ui-widget-header")}a(".ui-slider-handle",this.element).length===0&&a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");
if(c.values&&c.values.length){for(;a(".ui-slider-handle",this.element).length<c.values.length;
){a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle")}}this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");
this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()
}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")
}).focus(function(){if(c.disabled){a(this).blur()}else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");
a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")
});this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)});this.handles.keydown(function(n){var m=true,l=a(this).data("index.ui-slider-handle"),j,k,b;
if(!d.options.disabled){switch(n.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:m=false;
if(!d._keySliding){d._keySliding=true;a(this).addClass("ui-state-active");j=d._start(n,l);
if(j===false){return}}break}b=d.options.step;j=d.options.values&&d.options.values.length?(k=d.values(l)):(k=d.value());
switch(n.keyCode){case a.ui.keyCode.HOME:k=d._valueMin();break;case a.ui.keyCode.END:k=d._valueMax();
break;case a.ui.keyCode.PAGE_UP:k=d._trimAlignValue(j+(d._valueMax()-d._valueMin())/5);
break;case a.ui.keyCode.PAGE_DOWN:k=d._trimAlignValue(j-(d._valueMax()-d._valueMin())/5);
break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(j===d._valueMax()){return}k=d._trimAlignValue(j+b);
break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(j===d._valueMin()){return}k=d._trimAlignValue(j-b);
break}d._slide(n,l,k);return m}}).keyup(function(f){var b=a(this).data("index.ui-slider-handle");
if(d._keySliding){d._keySliding=false;d._stop(f,b);d._change(f,b);a(this).removeClass("ui-state-active")
}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();
this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");
this._mouseDestroy();return this},_mouseCapture:function(i){var d=this.options,n,m,l,j,k;
if(d.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};
this.elementOffset=this.element.offset();n=this._normValueFromMouse({x:i.pageX,y:i.pageY});
m=this._valueMax()-this._valueMin()+1;j=this;this.handles.each(function(c){var b=Math.abs(n-j.values(c));
if(m>b){m=b;l=a(this);k=c}});if(d.range===true&&this.values(1)===d.min){k+=1;l=a(this.handles[k])
}if(this._start(i,k)===false){return false}this._mouseSliding=true;j._handleIndex=k;
l.addClass("ui-state-active").focus();d=l.offset();this._clickOffset=!a(i.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:i.pageX-d.left-l.width()/2,top:i.pageY-d.top-l.height()/2-(parseInt(l.css("borderTopWidth"),10)||0)-(parseInt(l.css("borderBottomWidth"),10)||0)+(parseInt(l.css("marginTop"),10)||0)};
this._slide(i,k,n);return this._animateOff=true},_mouseStart:function(){return true
},_mouseDrag:function(d){var c=this._normValueFromMouse({x:d.pageX,y:d.pageY});this._slide(d,this._handleIndex,c);
return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");
this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);
this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"
},_normValueFromMouse:function(d){var c;if(this.orientation==="horizontal"){c=this.elementSize.width;
d=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;
d=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}c=d/c;if(c>1){c=1
}if(c<0){c=0}if(this.orientation==="vertical"){c=1-c}d=this._valueMax()-this._valueMin();
return this._trimAlignValue(this._valueMin()+c*d)},_start:function(e,d){var f={handle:this.handles[d],value:this.value()};
if(this.options.values&&this.options.values.length){f.value=this.values(d);f.values=this.values()
}return this._trigger("start",e,f)},_slide:function(f,d,h){var g;if(this.options.values&&this.options.values.length){g=this.values(d?0:1);
if(this.options.values.length===2&&this.options.range===true&&(d===0&&h>g||d===1&&h<g)){h=g
}if(h!==this.values(d)){g=this.values();g[d]=h;f=this._trigger("slide",f,{handle:this.handles[d],value:h,values:g});
this.values(d?0:1);f!==false&&this.values(d,h,true)}}else{if(h!==this.value()){f=this._trigger("slide",f,{handle:this.handles[d],value:h});
f!==false&&this.value(h)}}},_stop:function(e,d){var f={handle:this.handles[d],value:this.value()};
if(this.options.values&&this.options.values.length){f.value=this.values(d);f.values=this.values()
}this._trigger("stop",e,f)},_change:function(e,d){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[d],value:this.value()};
if(this.options.values&&this.options.values.length){f.value=this.values(d);f.values=this.values()
}this._trigger("change",e,f)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b);
this._refreshValue();this._change(null,0)}return this._value()},values:function(g,d){var j,i,h;
if(arguments.length>1){this.options.values[g]=this._trimAlignValue(d);this._refreshValue();
this._change(null,g)}if(arguments.length){if(a.isArray(arguments[0])){j=this.options.values;
i=arguments[0];for(h=0;h<j.length;h+=1){j[h]=this._trimAlignValue(i[h]);this._change(null,h)
}this._refreshValue()}else{return this.options.values&&this.options.values.length?this._values(g):this.value()
}}else{return this._values()}},_setOption:function(f,d){var h,g=0;if(a.isArray(this.options.values)){g=this.options.values.length
}a.Widget.prototype._setOption.apply(this,arguments);switch(f){case"disabled":if(d){this.handles.filter(".ui-state-focus").blur();
this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");
this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")
}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);
this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();
this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;
this._refreshValue();for(h=0;h<g;h+=1){this._change(null,h)}this._animateOff=false;
break}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)
},_values:function(e){var d,f;if(arguments.length){d=this.options.values[e];return d=this._trimAlignValue(d)
}else{d=this.options.values.slice();for(f=0;f<d.length;f+=1){d[f]=this._trimAlignValue(d[f])
}return d}},_trimAlignValue:function(e){if(e<this._valueMin()){return this._valueMin()
}if(e>this._valueMax()){return this._valueMax()}var d=this.options.step>0?this.options.step:1,f=e%d;
e=e-f;if(Math.abs(f)*2>=d){e+=f>0?d:-d}return parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min
},_valueMax:function(){return this.options.max},_refreshValue:function(){var u=this.options.range,s=this.options,r=this,q=!this._animateOff?s.animate:false,p,n={},o,m,k,d;
if(this.options.values&&this.options.values.length){this.handles.each(function(b){p=(r.values(b)-r._valueMin())/(r._valueMax()-r._valueMin())*100;
n[r.orientation==="horizontal"?"left":"bottom"]=p+"%";a(this).stop(1,1)[q?"animate":"css"](n,s.animate);
if(r.options.range===true){if(r.orientation==="horizontal"){if(b===0){r.range.stop(1,1)[q?"animate":"css"]({left:p+"%"},s.animate)
}if(b===1){r.range[q?"animate":"css"]({width:p-o+"%"},{queue:false,duration:s.animate})
}}else{if(b===0){r.range.stop(1,1)[q?"animate":"css"]({bottom:p+"%"},s.animate)}if(b===1){r.range[q?"animate":"css"]({height:p-o+"%"},{queue:false,duration:s.animate})
}}}o=p})}else{m=this.value();k=this._valueMin();d=this._valueMax();p=d!==k?(m-k)/(d-k)*100:0;
n[r.orientation==="horizontal"?"left":"bottom"]=p+"%";this.handle.stop(1,1)[q?"animate":"css"](n,s.animate);
if(u==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[q?"animate":"css"]({width:p+"%"},s.animate)
}if(u==="max"&&this.orientation==="horizontal"){this.range[q?"animate":"css"]({width:100-p+"%"},{queue:false,duration:s.animate})
}if(u==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[q?"animate":"css"]({height:p+"%"},s.animate)
}if(u==="max"&&this.orientation==="vertical"){this.range[q?"animate":"css"]({height:100-p+"%"},{queue:false,duration:s.animate})
}}}});a.extend(a.ui.slider,{version:"1.8.4"})})(jQuery);(function(g,f){function e(){return ++c
}function b(){return ++a}var c=0,a=0;g.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)
},_setOption:function(d,h){if(d=="selected"){this.options.collapsible&&h==this.options.selected||this.select(h)
}else{this.options[d]=h;this._tabify()}},_tabId:function(d){return d.title&&d.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+e()
},_sanitizeSelector:function(d){return d.replace(/:/g,"\\:")},_cookie:function(){var d=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+b());
return g.cookie.apply(null,[d].concat(g.makeArray(arguments)))},_ui:function(d,h){return{tab:d,panel:h,index:this.anchors.index(d)}
},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var d=g(this);
d.html(d.data("label.tabs")).removeData("label.tabs")})},_tabify:function(z){function w(h,i){h.css("display","");
!g.support.opacity&&i.opacity&&h[0].style.removeAttribute("filter")}var y=this,x=this.options,v=/^#.+/;
this.list=this.element.find("ol,ul").eq(0);this.lis=g("li:has(a[href])",this.list);
this.anchors=this.lis.map(function(){return g("a",this)[0]});this.panels=g([]);this.anchors.each(function(k,n){var i=g(n).attr("href"),h=i.split("#")[0],m;
if(h&&(h===location.toString().split("#")[0]||(m=g("base")[0])&&h===m.href)){i=n.hash;
n.href=i}if(v.test(i)){y.panels=y.panels.add(y._sanitizeSelector(i))}else{if(i!=="#"){g.data(n,"href.tabs",i);
g.data(n,"load.tabs",i.replace(/#.*$/,""));i=y._tabId(n);n.href="#"+i;n=g("#"+i);
if(!n.length){n=g(x.panelTemplate).attr("id",i).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(y.panels[k-1]||y.list);
n.data("destroy.tabs",true)}y.panels=y.panels.add(n)}else{x.disabled.push(k)}}});
if(z){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");
this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");
if(x.selected===f){location.hash&&this.anchors.each(function(h,i){if(i.hash==location.hash){x.selected=h;
return false}});if(typeof x.selected!=="number"&&x.cookie){x.selected=parseInt(y._cookie(),10)
}if(typeof x.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){x.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))
}x.selected=x.selected||(this.lis.length?0:-1)}else{if(x.selected===null){x.selected=-1
}}x.selected=x.selected>=0&&this.anchors[x.selected]||x.selected<0?x.selected:0;x.disabled=g.unique(x.disabled.concat(g.map(this.lis.filter(".ui-state-disabled"),function(h){return y.lis.index(h)
}))).sort();g.inArray(x.selected,x.disabled)!=-1&&x.disabled.splice(g.inArray(x.selected,x.disabled),1);
this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");
if(x.selected>=0&&this.anchors.length){this.panels.eq(x.selected).removeClass("ui-tabs-hide");
this.lis.eq(x.selected).addClass("ui-tabs-selected ui-state-active");y.element.queue("tabs",function(){y._trigger("show",null,y._ui(y.anchors[x.selected],y.panels[x.selected]))
});this.load(x.selected)}g(window).bind("unload",function(){y.lis.add(y.anchors).unbind(".tabs");
y.lis=y.anchors=y.panels=null})}else{x.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))
}this.element[x.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");x.cookie&&this._cookie(x.selected,x.cookie);
z=0;for(var u;u=this.lis[z];z++){g(u)[g.inArray(z,x.disabled)!=-1&&!g(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")
}x.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");
if(x.event!=="mouseover"){var q=function(h,i){i.is(":not(.ui-state-disabled)")&&i.addClass("ui-state-"+h)
},l=function(h,i){i.removeClass("ui-state-"+h)};this.lis.bind("mouseover.tabs",function(){q("hover",g(this))
});this.lis.bind("mouseout.tabs",function(){l("hover",g(this))});this.anchors.bind("focus.tabs",function(){q("focus",g(this).closest("li"))
});this.anchors.bind("blur.tabs",function(){l("focus",g(this).closest("li"))})}var p,j;
if(x.fx){if(g.isArray(x.fx)){p=x.fx[0];j=x.fx[1]}else{p=j=x.fx}}var d=j?function(h,i){g(h).closest("li").addClass("ui-tabs-selected ui-state-active");
i.hide().removeClass("ui-tabs-hide").animate(j,j.duration||"normal",function(){w(i,j);
y._trigger("show",null,y._ui(h,i[0]))})}:function(h,i){g(h).closest("li").addClass("ui-tabs-selected ui-state-active");
i.removeClass("ui-tabs-hide");y._trigger("show",null,y._ui(h,i[0]))},A=p?function(h,i){i.animate(p,p.duration||"normal",function(){y.lis.removeClass("ui-tabs-selected ui-state-active");
i.addClass("ui-tabs-hide");w(i,p);y.element.dequeue("tabs")})}:function(h,i){y.lis.removeClass("ui-tabs-selected ui-state-active");
i.addClass("ui-tabs-hide");y.element.dequeue("tabs")};this.anchors.bind(x.event+".tabs",function(){var k=this,m=g(k).closest("li"),i=y.panels.filter(":not(.ui-tabs-hide)"),h=g(y._sanitizeSelector(k.hash));
if(m.hasClass("ui-tabs-selected")&&!x.collapsible||m.hasClass("ui-state-disabled")||m.hasClass("ui-state-processing")||y._trigger("select",null,y._ui(this,h[0]))===false){this.blur();
return false}x.selected=y.anchors.index(this);y.abort();if(x.collapsible){if(m.hasClass("ui-tabs-selected")){x.selected=-1;
x.cookie&&y._cookie(x.selected,x.cookie);y.element.queue("tabs",function(){A(k,i)
}).dequeue("tabs");this.blur();return false}else{if(!i.length){x.cookie&&y._cookie(x.selected,x.cookie);
y.element.queue("tabs",function(){d(k,h)});y.load(y.anchors.index(this));this.blur();
return false}}}x.cookie&&y._cookie(x.selected,x.cookie);if(h.length){i.length&&y.element.queue("tabs",function(){A(k,i)
});y.element.queue("tabs",function(){d(k,h)});y.load(y.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."
}g.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false
})},_getIndex:function(d){if(typeof d=="string"){d=this.anchors.index(this.anchors.filter("[href$="+d+"]"))
}return d},destroy:function(){var d=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");
this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");
this.anchors.each(function(){var i=g.data(this,"href.tabs");if(i){this.href=i}var h=g(this).unbind(".tabs");
g.each(["href","load","cache"],function(k,j){h.removeData(j+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){g.data(this,"destroy.tabs")?g(this).remove():g(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")
});d.cookie&&this._cookie(null,d.cookie);return this},add:function(j,m,d){if(d===f){d=this.anchors.length
}var n=this,l=this.options;m=g(l.tabTemplate.replace(/#\{href\}/g,j).replace(/#\{label\}/g,m));
j=!j.indexOf("#")?j.replace("#",""):this._tabId(g("a",m)[0]);m.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);
var k=g("#"+j);k.length||(k=g(l.panelTemplate).attr("id",j).data("destroy.tabs",true));
k.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(d>=this.lis.length){m.appendTo(this.list);
k.appendTo(this.list[0].parentNode)}else{m.insertBefore(this.lis[d]);k.insertBefore(this.panels[d])
}l.disabled=g.map(l.disabled,function(h){return h>=d?++h:h});this._tabify();if(this.anchors.length==1){l.selected=0;
m.addClass("ui-tabs-selected ui-state-active");k.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[0],n.panels[0]))
});this.load(0)}this._trigger("add",null,this._ui(this.anchors[d],this.panels[d]));
return this},remove:function(h){h=this._getIndex(h);var i=this.options,d=this.lis.eq(h).remove(),j=this.panels.eq(h).remove();
if(d.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(h+(h+1<this.anchors.length?1:-1))
}i.disabled=g.map(g.grep(i.disabled,function(k){return k!=h}),function(k){return k>=h?--k:k
});this._tabify();this._trigger("remove",null,this._ui(d.find("a")[0],j[0]));return this
},enable:function(d){d=this._getIndex(d);var h=this.options;if(g.inArray(d,h.disabled)!=-1){this.lis.eq(d).removeClass("ui-state-disabled");
h.disabled=g.grep(h.disabled,function(i){return i!=d});this._trigger("enable",null,this._ui(this.anchors[d],this.panels[d]));
return this}},disable:function(d){d=this._getIndex(d);var h=this.options;if(d!=h.selected){this.lis.eq(d).addClass("ui-state-disabled");
h.disabled.push(d);h.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[d],this.panels[d]))
}return this},select:function(d){d=this._getIndex(d);if(d==-1){if(this.options.collapsible&&this.options.selected!=-1){d=this.options.selected
}else{return this}}this.anchors.eq(d).trigger(this.options.event+".tabs");return this
},load:function(j){j=this._getIndex(j);var m=this,d=this.options,n=this.anchors.eq(j)[0],l=g.data(n,"load.tabs");
this.abort();if(!l||this.element.queue("tabs").length!==0&&g.data(n,"cache.tabs")){this.element.dequeue("tabs")
}else{this.lis.eq(j).addClass("ui-state-processing");if(d.spinner){var k=g("span",n);
k.data("label.tabs",k.html()).html(d.spinner)}this.xhr=g.ajax(g.extend({},d.ajaxOptions,{url:l,success:function(i,o){g(m._sanitizeSelector(n.hash)).html(i);
m._cleanup();d.cache&&g.data(n,"cache.tabs",true);m._trigger("load",null,m._ui(m.anchors[j],m.panels[j]));
try{d.ajaxOptions.success(i,o)}catch(h){}},error:function(i,o){m._cleanup();m._trigger("load",null,m._ui(m.anchors[j],m.panels[j]));
try{d.ajaxOptions.error(i,o,j,n)}catch(h){}}}));m.element.dequeue("tabs");return this
}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));
if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(d,h){this.anchors.eq(d).removeData("cache.tabs").data("load.tabs",h);
return this},length:function(){return this.anchors.length}});g.extend(g.ui.tabs,{version:"1.8.4"});
g.extend(g.ui.tabs.prototype,{rotation:null,rotate:function(i,k){var d=this,l=this.options,j=d._rotate||(d._rotate=function(h){clearTimeout(d.rotation);
d.rotation=setTimeout(function(){var m=l.selected;d.select(++m<d.anchors.length?m:0)
},i);h&&h.stopPropagation()});k=d._unrotate||(d._unrotate=!k?function(h){h.clientX&&d.rotate(null)
}:function(){t=l.selected;j()});if(i){this.element.bind("tabsshow",j);this.anchors.bind(l.event+".tabs",k);
j()}else{clearTimeout(d.rotation);this.element.unbind("tabsshow",j);this.anchors.unbind(l.event+".tabs",k);
delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function(d,G){function L(){this.debug=false;
this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;
this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";
this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";
this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";
this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";
this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};
this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};
d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')
}function E(a,b){d.extend(a,b);for(var c in b){if(b[c]==null||b[c]==G){a[c]=b[c]}}return a
}d.extend(d.ui,{datepicker:{version:"1.8.4"}});var y=(new Date).getTime();d.extend(L.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)
},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});
return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);
if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";
if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});
if(e=="input"){this._connectDatepicker(a,i)}else{f&&this._inlineDatepicker(a,i)}},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}
},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);
c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h
}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);
d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");
b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");
a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();
c=this._get(b,"showOn");if(c=="focus"||c=="both"){a.focus(this._showDatepicker)}if(c=="button"||c=="both"){c=this._get(b,"buttonText");
var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));
a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);
return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");
if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++){if(f[g].length>h){h=f[g].length;
i=g}}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));
b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())
}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);
if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h
}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);
this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b)
}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');
this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);
a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;
this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]
}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");
a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);
return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();
d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();
b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)
}else{if(e=="div"||e=="span"){b.removeClass(this.markerClassName).empty()}}}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");
if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;
c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})
}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().removeClass("ui-state-disabled")
}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})
}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();
if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true
}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().addClass("ui-state-disabled")
}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f});
this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a){return false
}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return true
}}return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"
}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null
}var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();
var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);
this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)
},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);
this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);
return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");
b._keyEvent=true;if(d.datepicker._datepickerShowing){switch(a.keyCode){case 9:d.datepicker._hideDatepicker();
c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass,b.dpDiv).add(d("td."+d.datepicker._currentClass,b.dpDiv));
c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();
return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");
break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");
break;case 35:if(a.ctrlKey||a.metaKey){d.datepicker._clearDate(a.target)}c=a.ctrlKey||a.metaKey;
break;case 36:if(a.ctrlKey||a.metaKey){d.datepicker._gotoToday(a.target)}c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?+1:-1,"D")
}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M")
}break;case 38:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,-7,"D")
}c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?-1:+1,"D")
}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M")
}break;case 40:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,+7,"D")
}c=a.ctrlKey||a.metaKey;break;default:c=false}}else{if(a.keyCode==36&&a.ctrlKey){d.datepicker._showDatepicker(this)
}else{c=false}}if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);
if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));
var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||c<" "||!b||b.indexOf(c)>-1
}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal){try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);
d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)
}}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input"){a=d("input",a.parentNode)[0]
}if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);
d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);
var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;
d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog){a.value=""
}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight
}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return !e
});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;
d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};
d.datepicker._pos=null;b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});
d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});
if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;
var i=d.datepicker._getBorders(b.dpDiv);b.dpDiv.find("iframe.ui-datepicker-cover").css({left:-i[0],top:-i[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})
};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);
if(!c||!f){h()}b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();
d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);
a.dpDiv.empty().append(this._generateHTML(a)).find("iframe.ui-datepicker-cover").css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");
this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");
this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")
}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");
d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");
this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")
}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);
var e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");
a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus()
},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c
};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]
},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),k=document.documentElement.clientHeight+d(document).scrollTop();
b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;
b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);
b.top-=Math.min(b.top,b.top+f>k&&k>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");
a&&(a.type=="hidden"||a.nodeType!=1);){a=a[b?"previousSibling":"nextSibling"]}a=d(a).offset();
return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker"))){if(this._datepickerShowing){a=this._get(b,"showAnim");
var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null
};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);
a||e();if(a=this._get(b,"onClose")){a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])
}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});
if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
},_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()
}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);
this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);
if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;
b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();
b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()
}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);
var e=this._getInst(a[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);
this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);
b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear
},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);
f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;
this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))
}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);
b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);
var c=this._get(a,"onSelect");if(c){c.apply(a.input?a.input[0]:null,[b,a])}else{a.input&&a.input.trigger("change")
}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];
typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");
if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));
d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]
},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));
var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/86400000)/7)+1
},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";
if(b==""){return null}for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,k=c=-1,l=-1,u=-1,j=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;
return p},m=function(p){o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"?4:p=="o"?3:2)+"}");
p=b.substring(s).match(p);if(!p){throw"Missing number at position "+s}s+=p[0].length;
return parseInt(p[0],10)},n=function(p,w,H){p=o(p)?H:w;for(w=0;w<p.length;w++){if(b.substr(s,p[w].length)==p[w]){s+=p[w].length;
return w+1}}throw"Unknown name at position "+s},r=function(){if(b.charAt(s)!=a.charAt(z)){throw"Unexpected literal at position "+s
}s++},s=0,z=0;z<a.length;z++){if(j){if(a.charAt(z)=="'"&&!o("'")){j=false}else{r()
}}else{switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");
break;case"m":k=m("m");break;case"M":k=n("M",i,g);break;case"y":c=m("y");break;case"@":var v=new Date(m("@"));
c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"!":v=new Date((m("!")-this._ticksTo1970)/10000);
c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"'":if(o("'")){r()}else{j=true
}break;default:r()}}}if(c==-1){c=(new Date).getFullYear()}else{if(c<100){c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100)
}}if(u>-1){k=1;l=u;do{e=this._getDaysInMonth(c,k-1);if(l<=e){break}k++;l-=e}while(1)
}v=this._daylightSavingAdjust(new Date(c,k-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=k||v.getDate()!=l){throw"Invalid date"
}return v},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""
}var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;
c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=j+1<a.length&&a.charAt(j+1)==o)&&j++;
return o},g=function(o,m,n){m=""+m;if(i(o)){for(;m.length<n;){m="0"+m}}return m},k=function(o,m,n,r){return i(o)?r[m]:n[m]
},l="",u=false;if(b){for(var j=0;j<a.length;j++){if(u){if(a.charAt(j)=="'"&&!i("'")){u=false
}else{l+=a.charAt(j)}}else{switch(a.charAt(j)){case"d":l+=g("d",b.getDate(),2);break;
case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000,3);
break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),h,c);
break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;
break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*10000+this._ticksTo1970;
break;case"'":if(i("'")){l+="'"}else{u=true}break;default:l+=a.charAt(j)}}}}return l
},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;
return h},f=0;f<a.length;f++){if(c){if(a.charAt(f)=="'"&&!e("'")){c=false}else{b+=a.charAt(f)
}}else{switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;
case"D":case"M":return null;case"'":if(e("'")){b+="'"}else{c=true}break;default:b+=a.charAt(f)
}}}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]
},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;
f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h
}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();
a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;
a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))
},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);
return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))
}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,k=g.getFullYear(),l=g.getMonth();
g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=u.exec(h);j;){switch(j[2]||"d"){case"d":case"D":g+=parseInt(j[1],10);
break;case"w":case"W":g+=parseInt(j[1],10)*7;break;case"m":case"M":l+=parseInt(j[1],10);
g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break;case"y":case"Y":k+=parseInt(j[1],10);
g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break}j=u.exec(h)}return new Date(k,l,g)
};if(b=(b=b==null?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):b)&&b.toString()=="Invalid Date"?c:b){b.setHours(0);
b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)
},_daylightSavingAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);
return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));
a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();
a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c){this._notifyChange(a)
}this._adjustInstDate(a);if(a.input){a.input.val(e?"":this._formatDate(a))}},_getDate:function(a){return !a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))
},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));
var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),k=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),j=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");
g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));
for(n=j&&n<j?j:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;
m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-k,1)),this._getFormatConfig(a));
n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+k+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";
var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+k,1)),this._getFormatConfig(a));
f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+k+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";
k=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;k=!h?k:this.formatDate(k,r,this._getFormatConfig(a));
h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";
e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+k+"</button>":"")+(c?"":h)+"</div>":"";
h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;k=this._get(a,"showWeek");r=this._get(a,"dayNames");
this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),w=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");
this._get(a,"calculateWeek");for(var M=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var N="",D=0;
D<i[1];D++){var J=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";
if(l){x+='<div class="ui-datepicker-group';if(i[1]>1){switch(D){case 0:x+=" ui-datepicker-group-first";
t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:x+=" ui-datepicker-group-last";
t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";
t="";break}}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,j,o,C>0||D>0,z,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>';
var A=k?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";
for(t=0;t<7;t++){var q=(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"
}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth){a.selectedDay=Math.min(a.selectedDay,A)
}t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));
for(var O=0;O<A;O++){x+="<tr>";var P=!k?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";
for(t=0;t<7;t++){var F=p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,K=B&&!H||!F[0]||j&&q<j||o&&q>o;
P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==J.getTime()&&g==a.selectedMonth&&a._keyEvent||M.getTime()==q.getTime()&&M.getTime()==J.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!w?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!B||w)&&F[2]?' title="'+F[2]+'"':"")+(K?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!w?"&#xa0;":K?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==J.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";
q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=P+"</tr>"}g++;if(g>11){g=0;
m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");
N+=x}I+=N}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");
a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var k=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),j='<div class="ui-datepicker-title">',o="";
if(h||!k){o+='<span class="ui-datepicker-month">'+i[b]+"</span>"}else{i=e&&e.getFullYear()==c;
var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";
for(var n=0;n<12;n++){if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth())){o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>"
}}o+="</select>"}u||(j+=o+(h||!(k&&l)?"&#xa0;":""));if(h||!l){j+='<span class="ui-datepicker-year">'+c+"</span>"
}else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);
return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;
g=f?Math.min(g,f.getFullYear()):g;for(j+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";
b<=g;b++){j+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>"
}j+="</select>"}j+=this._get(a,"yearSuffix");if(u){j+=(h||!(k&&l)?"&#xa0;":"")+o}j+="</div>";
return j},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);
b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));
a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();
if(c=="M"||c=="Y"){this._notifyChange(a)}},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");
a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");
if(b){b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])}},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");
return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)
},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()
},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));
b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)
},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");
return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");
b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}
},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;
a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));
return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);
d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget")){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))
}if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))
}return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)
})};d.datepicker=new L;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();
d.datepicker.version="1.8.4";window["DP_jQuery_"+y]=d})(jQuery);(function(a,d){a.widget("ui.progressbar",{options:{value:0},min:0,max:100,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this._value()});
this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);
this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(b){if(b===d){return this._value()
}this._setOption("value",b);return this},_setOption:function(b,c){if(b==="value"){this.options.value=c;
this._refreshValue();this._trigger("change")}a.Widget.prototype._setOption.apply(this,arguments)
},_value:function(){var b=this.options.value;if(typeof b!=="number"){b=0}return Math.min(this.max,Math.max(this.min,b))
},_refreshValue:function(){var b=this.value();this.valueDiv.toggleClass("ui-corner-right",b===this.max).width(b+"%");
this.element.attr("aria-valuenow",b)}});a.extend(a.ui.progressbar,{version:"1.8.4"})
})(jQuery);jQuery.effects||function(q,i){function g(j){var f;if(j&&j.constructor==Array&&j.length==3){return j
}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(j)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]
}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(j)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]
}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(j)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]
}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(j)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]
}if(/rgba\(0, 0, 0, 0\)/.exec(j)){return e.transparent}return e[q.trim(j).toLowerCase()]
}function a(k,j){var f;do{f=q.curCSS(k,j);if(f!=""&&f!="transparent"||q.nodeName(k,"body")){break
}j="backgroundColor"}while(k=k.parentNode);return g(f)}function d(){var m=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,j={},f,l;
if(m&&m.length&&m[0]&&m[m[0]]){for(var k=m.length;k--;){f=m[k];if(typeof m[f]=="string"){l=f.replace(/\-(\w)/g,function(o,n){return n.toUpperCase()
});j[l]=m[f]}}}else{for(f in m){if(typeof m[f]==="string"){j[f]=m[f]}}}return j}function c(k){var j,f;
for(j in k){f=k[j];if(f==null||q.isFunction(f)||j in v||/scrollbar/.test(j)||!/color/i.test(j)&&isNaN(parseFloat(f))){delete k[j]
}}return k}function u(l,j){var f={_:0},k;for(k in j){if(l[k]!=j[k]){f[k]=j[k]}}return f
}function h(l,j,f,k){if(typeof l=="object"){k=j;f=null;j=l;l=j.effect}if(q.isFunction(j)){k=j;
f=null;j={}}if(typeof j=="number"||q.fx.speeds[j]){k=f;f=j;j={}}if(q.isFunction(f)){k=f;
f=null}j=j||{};f=f||j.duration;f=q.fx.off?0:typeof f=="number"?f:q.fx.speeds[f]||q.fx.speeds._default;
k=k||j.complete;return[l,j,f,k]}q.effects={};q.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(j,f){q.fx.step[f]=function(k){if(!k.colorInit){k.start=a(k.elem,f);
k.end=g(k.end);k.colorInit=true}k.elem.style[f]="rgb("+Math.max(Math.min(parseInt(k.pos*(k.end[0]-k.start[0])+k.start[0],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[1]-k.start[1])+k.start[1],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[2]-k.start[2])+k.start[2],10),255),0)+")"
}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},b=["add","remove","toggle"],v={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};
q.effects.animateClass=function(l,j,f,k){if(q.isFunction(f)){k=f;f=null}return this.each(function(){var r=q(this),o=r.attr("style")||" ",n=c(d.call(this)),p,m=r.attr("className");
q.each(b,function(s,w){l[w]&&r[w+"Class"](l[w])});p=c(d.call(this));r.attr("className",m);
r.animate(u(n,p),j,f,function(){q.each(b,function(s,w){l[w]&&r[w+"Class"](l[w])});
if(typeof r.attr("style")=="object"){r.attr("style").cssText="";r.attr("style").cssText=o
}else{r.attr("style",o)}k&&k.apply(this,arguments)})})};q.fn.extend({_addClass:q.fn.addClass,addClass:function(l,j,f,k){return j?q.effects.animateClass.apply(this,[{add:l},j,f,k]):this._addClass(l)
},_removeClass:q.fn.removeClass,removeClass:function(l,j,f,k){return j?q.effects.animateClass.apply(this,[{remove:l},j,f,k]):this._removeClass(l)
},_toggleClass:q.fn.toggleClass,toggleClass:function(m,j,f,l,k){return typeof j=="boolean"||j===i?f?q.effects.animateClass.apply(this,[j?{add:m}:{remove:m},f,l,k]):this._toggleClass(m,j):q.effects.animateClass.apply(this,[{toggle:m},j,f,l])
},switchClass:function(m,j,f,l,k){return q.effects.animateClass.apply(this,[{add:j,remove:m},f,l,k])
}});q.extend(q.effects,{version:"1.8.4",save:function(k,j){for(var f=0;f<j.length;
f++){j[f]!==null&&k.data("ec.storage."+j[f],k[0].style[j[f]])}},restore:function(k,j){for(var f=0;
f<j.length;f++){j[f]!==null&&k.css(j[f],k.data("ec.storage."+j[f]))}},setMode:function(j,f){if(f=="toggle"){f=j.is(":hidden")?"show":"hide"
}return f},getBaseline:function(k,j){var f;switch(k[0]){case"top":f=0;break;case"middle":f=0.5;
break;case"bottom":f=1;break;default:f=k[0]/j.height}switch(k[1]){case"left":k=0;
break;case"center":k=0.5;break;case"right":k=1;break;default:k=k[1]/j.width}return{x:k,y:f}
},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent()
}var j={width:k.outerWidth(true),height:k.outerHeight(true),"float":k.css("float")},f=q("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});
k.wrap(f);f=k.parent();if(k.css("position")=="static"){f.css({position:"relative"});
k.css({position:"relative"})}else{q.extend(j,{position:k.css("position"),zIndex:k.css("z-index")});
q.each(["top","left","bottom","right"],function(m,l){j[l]=k.css(l);if(isNaN(parseInt(j[l],10))){j[l]="auto"
}});k.css({position:"relative",top:0,left:0})}return f.css(j).show()},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)
}return f},setTransition:function(l,j,f,k){k=k||{};q.each(j,function(n,m){unit=l.cssUnit(m);
if(unit[0]>0){k[m]=unit[0]*f+unit[1]}});return k}});q.fn.extend({effect:function(k){var j=h.apply(this,arguments);
j={options:j[1],duration:j[2],callback:j[3]};var f=q.effects[k];return f&&!q.fx.off?f.call(this,j):this
},_show:q.fn.show,show:function(j){if(!j||typeof j=="number"||q.fx.speeds[j]){return this._show.apply(this,arguments)
}else{var f=h.apply(this,arguments);f[1].mode="show";return this.effect.apply(this,f)
}},_hide:q.fn.hide,hide:function(j){if(!j||typeof j=="number"||q.fx.speeds[j]){return this._hide.apply(this,arguments)
}else{var f=h.apply(this,arguments);f[1].mode="hide";return this.effect.apply(this,f)
}},__toggle:q.fn.toggle,toggle:function(j){if(!j||typeof j=="number"||q.fx.speeds[j]||typeof j=="boolean"||q.isFunction(j)){return this.__toggle.apply(this,arguments)
}else{var f=h.apply(this,arguments);f[1].mode="toggle";return this.effect.apply(this,f)
}},cssUnit:function(k){var j=this.css(k),f=[];q.each(["em","px","%","pt"],function(m,l){if(j.indexOf(l)>0){f=[parseFloat(j),l]
}});return f}});q.easing.jswing=q.easing.swing;q.extend(q.easing,{def:"easeOutQuad",swing:function(m,j,f,l,k){return q.easing[q.easing.def](m,j,f,l,k)
},easeInQuad:function(m,j,f,l,k){return l*(j/=k)*j+f},easeOutQuad:function(m,j,f,l,k){return -l*(j/=k)*(j-2)+f
},easeInOutQuad:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j+f}return -l/2*(--j*(j-2)-1)+f
},easeInCubic:function(m,j,f,l,k){return l*(j/=k)*j*j+f},easeOutCubic:function(m,j,f,l,k){return l*((j=j/k-1)*j*j+1)+f
},easeInOutCubic:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j+f}return l/2*((j-=2)*j*j+2)+f
},easeInQuart:function(m,j,f,l,k){return l*(j/=k)*j*j*j+f},easeOutQuart:function(m,j,f,l,k){return -l*((j=j/k-1)*j*j*j-1)+f
},easeInOutQuart:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j*j+f}return -l/2*((j-=2)*j*j*j-2)+f
},easeInQuint:function(m,j,f,l,k){return l*(j/=k)*j*j*j*j+f},easeOutQuint:function(m,j,f,l,k){return l*((j=j/k-1)*j*j*j*j+1)+f
},easeInOutQuint:function(m,j,f,l,k){if((j/=k/2)<1){return l/2*j*j*j*j*j+f}return l/2*((j-=2)*j*j*j*j+2)+f
},easeInSine:function(m,j,f,l,k){return -l*Math.cos(j/k*(Math.PI/2))+l+f},easeOutSine:function(m,j,f,l,k){return l*Math.sin(j/k*(Math.PI/2))+f
},easeInOutSine:function(m,j,f,l,k){return -l/2*(Math.cos(Math.PI*j/k)-1)+f},easeInExpo:function(m,j,f,l,k){return j==0?f:l*Math.pow(2,10*(j/k-1))+f
},easeOutExpo:function(m,j,f,l,k){return j==k?f+l:l*(-Math.pow(2,-10*j/k)+1)+f},easeInOutExpo:function(m,j,f,l,k){if(j==0){return f
}if(j==k){return f+l}if((j/=k/2)<1){return l/2*Math.pow(2,10*(j-1))+f}return l/2*(-Math.pow(2,-10*--j)+2)+f
},easeInCirc:function(m,j,f,l,k){return -l*(Math.sqrt(1-(j/=k)*j)-1)+f},easeOutCirc:function(m,j,f,l,k){return l*Math.sqrt(1-(j=j/k-1)*j)+f
},easeInOutCirc:function(m,j,f,l,k){if((j/=k/2)<1){return -l/2*(Math.sqrt(1-j*j)-1)+f
}return l/2*(Math.sqrt(1-(j-=2)*j)+1)+f},easeInElastic:function(o,j,f,n,m){o=1.70158;
var l=0,k=n;if(j==0){return f}if((j/=m)==1){return f+n}l||(l=m*0.3);if(k<Math.abs(n)){k=n;
o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}return -(k*Math.pow(2,10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l))+f
},easeOutElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m)==1){return f+n
}l||(l=m*0.3);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)}return k*Math.pow(2,-10*j)*Math.sin((j*m-o)*2*Math.PI/l)+n+f
},easeInOutElastic:function(o,j,f,n,m){o=1.70158;var l=0,k=n;if(j==0){return f}if((j/=m/2)==2){return f+n
}l||(l=m*0.3*1.5);if(k<Math.abs(n)){k=n;o=l/4}else{o=l/(2*Math.PI)*Math.asin(n/k)
}if(j<1){return -0.5*k*Math.pow(2,10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l)+f}return k*Math.pow(2,-10*(j-=1))*Math.sin((j*m-o)*2*Math.PI/l)*0.5+n+f
},easeInBack:function(n,j,f,m,l,k){if(k==i){k=1.70158}return m*(j/=l)*j*((k+1)*j-k)+f
},easeOutBack:function(n,j,f,m,l,k){if(k==i){k=1.70158}return m*((j=j/l-1)*j*((k+1)*j+k)+1)+f
},easeInOutBack:function(n,j,f,m,l,k){if(k==i){k=1.70158}if((j/=l/2)<1){return m/2*j*j*(((k*=1.525)+1)*j-k)+f
}return m/2*((j-=2)*j*(((k*=1.525)+1)*j+k)+2)+f},easeInBounce:function(m,j,f,l,k){return l-q.easing.easeOutBounce(m,k-j,0,l,k)+f
},easeOutBounce:function(m,j,f,l,k){return(j/=k)<1/2.75?l*7.5625*j*j+f:j<2/2.75?l*(7.5625*(j-=1.5/2.75)*j+0.75)+f:j<2.5/2.75?l*(7.5625*(j-=2.25/2.75)*j+0.9375)+f:l*(7.5625*(j-=2.625/2.75)*j+0.984375)+f
},easeInOutBounce:function(m,j,f,l,k){if(j<k/2){return q.easing.easeInBounce(m,j*2,0,l,k)*0.5+f
}return q.easing.easeOutBounce(m,j*2-k,0,l,k)*0.5+l*0.5+f}})}(jQuery);(function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),l=["position","top","left"],m=a.effects.setMode(c,b.options.mode||"hide"),o=b.options.direction||"vertical";
a.effects.save(c,l);c.show();var n=a.effects.createWrapper(c).css({overflow:"hidden"}),k=o=="vertical"?"height":"width";
o=o=="vertical"?n.height():n.width();m=="show"&&n.css(k,0);var j={};j[k]=m=="show"?o:0;
n.animate(j,b.duration,b.options.easing,function(){m=="hide"&&c.hide();a.effects.restore(c,l);
a.effects.removeWrapper(c);b.callback&&b.callback.apply(c[0],arguments);c.dequeue()
})})}})(jQuery);(function(a){a.effects.bounce=function(c){return this.queue(function(){var w=a(this),e=["position","top","left"],q=a.effects.setMode(w,c.options.mode||"effect"),u=c.options.direction||"up",v=c.options.distance||20,b=c.options.times||5,p=c.duration||250;
/show|hide/.test(q)&&e.push("opacity");a.effects.save(w,e);w.show();a.effects.createWrapper(w);
var s=u=="up"||u=="down"?"top":"left";u=u=="up"||u=="left"?"pos":"neg";v=c.options.distance||(s=="top"?w.outerHeight({margin:true})/3:w.outerWidth({margin:true})/3);
if(q=="show"){w.css("opacity",0).css(s,u=="pos"?-v:v)}if(q=="hide"){v/=b*2}q!="hide"&&b--;
if(q=="show"){var r={opacity:1};r[s]=(u=="pos"?"+=":"-=")+v;w.animate(r,p/2,c.options.easing);
v/=2;b--}for(r=0;r<b;r++){var o={},n={};o[s]=(u=="pos"?"-=":"+=")+v;n[s]=(u=="pos"?"+=":"-=")+v;
w.animate(o,p/2,c.options.easing).animate(n,p/2,c.options.easing);v=q=="hide"?v*2:v/2
}if(q=="hide"){r={opacity:0};r[s]=(u=="pos"?"-=":"+=")+v;w.animate(r,p/2,c.options.easing,function(){w.hide();
a.effects.restore(w,e);a.effects.removeWrapper(w);c.callback&&c.callback.apply(this,arguments)
})}else{o={};n={};o[s]=(u=="pos"?"-=":"+=")+v;n[s]=(u=="pos"?"+=":"-=")+v;w.animate(o,p/2,c.options.easing).animate(n,p/2,c.options.easing,function(){a.effects.restore(w,e);
a.effects.removeWrapper(w);c.callback&&c.callback.apply(this,arguments)})}w.queue("fx",function(){w.dequeue()
});w.dequeue()})}})(jQuery);(function(a){a.effects.clip=function(b){return this.queue(function(){var e=a(this),j=["position","top","left","height","width"],m=a.effects.setMode(e,b.options.mode||"hide"),o=b.options.direction||"vertical";
a.effects.save(e,j);e.show();var n=a.effects.createWrapper(e).css({overflow:"hidden"});
n=e[0].tagName=="IMG"?n:e;var l={size:o=="vertical"?"height":"width",position:o=="vertical"?"top":"left"};
o=o=="vertical"?n.height():n.width();if(m=="show"){n.css(l.size,0);n.css(l.position,o/2)
}var k={};k[l.size]=m=="show"?o:0;k[l.position]=m=="show"?0:o/2;n.animate(k,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){m=="hide"&&e.hide();
a.effects.restore(e,j);a.effects.removeWrapper(e);b.callback&&b.callback.apply(e[0],arguments);
e.dequeue()}})})}})(jQuery);(function(a){a.effects.drop=function(b){return this.queue(function(){var d=a(this),k=["position","top","left","opacity"],n=a.effects.setMode(d,b.options.mode||"hide"),c=b.options.direction||"left";
a.effects.save(d,k);d.show();a.effects.createWrapper(d);var m=c=="up"||c=="down"?"top":"left";
c=c=="up"||c=="left"?"pos":"neg";var l=b.options.distance||(m=="top"?d.outerHeight({margin:true})/2:d.outerWidth({margin:true})/2);
if(n=="show"){d.css("opacity",0).css(m,c=="pos"?-l:l)}var j={opacity:n=="show"?1:0};
j[m]=(n=="show"?c=="pos"?"+=":"-=":c=="pos"?"-=":"+=")+l;d.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){n=="hide"&&d.hide();
a.effects.restore(d,k);a.effects.removeWrapper(d);b.callback&&b.callback.apply(this,arguments);
d.dequeue()}})})}})(jQuery);(function(a){a.effects.explode=function(b){return this.queue(function(){var q=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,p=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;
b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;
var j=a(this).show().css("visibility","hidden"),m=j.offset();m.top-=parseInt(j.css("marginTop"),10)||0;
m.left-=parseInt(j.css("marginLeft"),10)||0;for(var l=j.outerWidth(true),k=j.outerHeight(true),o=0;
o<q;o++){for(var n=0;n<p;n++){j.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-n*(l/p),top:-o*(k/q)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:l/p,height:k/q,left:m.left+n*(l/p)+(b.options.mode=="show"?(n-Math.floor(p/2))*(l/p):0),top:m.top+o*(k/q)+(b.options.mode=="show"?(o-Math.floor(q/2))*(k/q):0),opacity:b.options.mode=="show"?0:1}).animate({left:m.left+n*(l/p)+(b.options.mode=="show"?0:(n-Math.floor(p/2))*(l/p)),top:m.top+o*(k/q)+(b.options.mode=="show"?0:(o-Math.floor(q/2))*(k/q)),opacity:b.options.mode=="show"?1:0},b.duration||500)
}}setTimeout(function(){b.options.mode=="show"?j.css({visibility:"visible"}):j.css({visibility:"visible"}).hide();
b.callback&&b.callback.apply(j[0]);j.dequeue();a("div.ui-effects-explode").remove()
},b.duration||500)})}})(jQuery);(function(a){a.effects.fold=function(b){return this.queue(function(){var v=a(this),n=["position","top","left"],u=a.effects.setMode(v,b.options.mode||"hide"),q=b.options.size||15,p=!!b.options.horizFirst,m=b.duration?b.duration/2:a.fx.speeds._default/2;
a.effects.save(v,n);v.show();var s=a.effects.createWrapper(v).css({overflow:"hidden"}),r=u=="show"!=p,c=r?["width","height"]:["height","width"];
r=r?[s.width(),s.height()]:[s.height(),s.width()];var o=/([0-9]+)%/.exec(q);if(o){q=parseInt(o[1],10)/100*r[u=="hide"?0:1]
}if(u=="show"){s.css(p?{height:0,width:q}:{height:q,width:0})}p={};o={};p[c[0]]=u=="show"?r[0]:q;
o[c[1]]=u=="show"?r[1]:0;s.animate(p,m,b.options.easing).animate(o,m,b.options.easing,function(){u=="hide"&&v.hide();
a.effects.restore(v,n);a.effects.removeWrapper(v);b.callback&&b.callback.apply(v[0],arguments);
v.dequeue()})})}})(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),h=["backgroundImage","backgroundColor","opacity"],i=a.effects.setMode(c,b.options.mode||"show"),g={backgroundColor:c.css("backgroundColor")};
if(i=="hide"){g.opacity=0}a.effects.save(c,h);c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){i=="hide"&&c.hide();
a.effects.restore(c,h);i=="show"&&!a.support.opacity&&this.style.removeAttribute("filter");
b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a){a.effects.pulsate=function(b){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,b.options.mode||"show");
times=(b.options.times||5)*2-1;duration=b.duration?b.duration/2:a.fx.speeds._default/2;
isVisible=d.is(":visible");animateTo=0;if(!isVisible){d.css("opacity",0).show();animateTo=1
}if(e=="hide"&&isVisible||e=="show"&&!isVisible){times--}for(e=0;e<times;e++){d.animate({opacity:animateTo},duration,b.options.easing);
animateTo=(animateTo+1)%2}d.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&d.hide();
b.callback&&b.callback.apply(this,arguments)});d.queue("fx",function(){d.dequeue()
}).dequeue()})}})(jQuery);(function(a){a.effects.puff=function(c){return this.queue(function(){var b=a(this),k=a.effects.setMode(b,c.options.mode||"hide"),j=parseInt(c.options.percent,10)||150,f=j/100,d={height:b.height(),width:b.width()};
a.extend(c.options,{fade:true,mode:k,percent:k=="hide"?j:100,from:k=="hide"?d:{height:d.height*f,width:d.width*f}});
b.effect("scale",c.options,c.duration,c.callback);b.dequeue()})};a.effects.scale=function(c){return this.queue(function(){var b=a(this),m=a.extend(true,{},c.options),k=a.effects.setMode(b,c.options.mode||"effect"),j=parseInt(c.options.percent,10)||(parseInt(c.options.percent,10)==0?0:k=="hide"?0:100),d=c.options.direction||"both",l=c.options.origin;
if(k!="effect"){m.origin=l||["middle","center"];m.restore=true}l={height:b.height(),width:b.width()};
b.from=c.options.from||(k=="show"?{height:0,width:0}:l);j={y:d!="horizontal"?j/100:1,x:d!="vertical"?j/100:1};
b.to={height:l.height*j.y,width:l.width*j.x};if(c.options.fade){if(k=="show"){b.from.opacity=0;
b.to.opacity=1}if(k=="hide"){b.from.opacity=1;b.to.opacity=0}}m.from=b.from;m.to=b.to;
m.mode=k;b.effect("size",m,c.duration,c.callback);b.dequeue()})};a.effects.size=function(c){return this.queue(function(){var B=a(this),z=["position","top","left","width","height","overflow","opacity"],x=["position","top","left","overflow","opacity"],w=["width","height","overflow"],v=["fontSize"],y=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],s=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],b=a.effects.setMode(B,c.options.mode||"effect"),o=c.options.restore||false,q=c.options.scale||"both",r=c.options.origin,u={height:B.height(),width:B.width()};
B.from=c.options.from||u;B.to=c.options.to||u;if(r){r=a.effects.getBaseline(r,u);
B.from.top=(u.height-B.from.height)*r.y;B.from.left=(u.width-B.from.width)*r.x;B.to.top=(u.height-B.to.height)*r.y;
B.to.left=(u.width-B.to.width)*r.x}var A={from:{y:B.from.height/u.height,x:B.from.width/u.width},to:{y:B.to.height/u.height,x:B.to.width/u.width}};
if(q=="box"||q=="both"){if(A.from.y!=A.to.y){z=z.concat(y);B.from=a.effects.setTransition(B,y,A.from.y,B.from);
B.to=a.effects.setTransition(B,y,A.to.y,B.to)}if(A.from.x!=A.to.x){z=z.concat(s);
B.from=a.effects.setTransition(B,s,A.from.x,B.from);B.to=a.effects.setTransition(B,s,A.to.x,B.to)
}}if(q=="content"||q=="both"){if(A.from.y!=A.to.y){z=z.concat(v);B.from=a.effects.setTransition(B,v,A.from.y,B.from);
B.to=a.effects.setTransition(B,v,A.to.y,B.to)}}a.effects.save(B,o?z:x);B.show();a.effects.createWrapper(B);
B.css("overflow","hidden").css(B.from);if(q=="content"||q=="both"){y=y.concat(["marginTop","marginBottom"]).concat(v);
s=s.concat(["marginLeft","marginRight"]);w=z.concat(y).concat(s);B.find("*[width]").each(function(){child=a(this);
o&&a.effects.save(child,w);var d={height:child.height(),width:child.width()};child.from={height:d.height*A.from.y,width:d.width*A.from.x};
child.to={height:d.height*A.to.y,width:d.width*A.to.x};if(A.from.y!=A.to.y){child.from=a.effects.setTransition(child,y,A.from.y,child.from);
child.to=a.effects.setTransition(child,y,A.to.y,child.to)}if(A.from.x!=A.to.x){child.from=a.effects.setTransition(child,s,A.from.x,child.from);
child.to=a.effects.setTransition(child,s,A.to.x,child.to)}child.css(child.from);child.animate(child.to,c.duration,c.options.easing,function(){o&&a.effects.restore(child,w)
})})}B.animate(B.to,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){B.to.opacity===0&&B.css("opacity",B.from.opacity);
b=="hide"&&B.hide();a.effects.restore(B,o?z:x);a.effects.removeWrapper(B);c.callback&&c.callback.apply(this,arguments);
B.dequeue()}})})}})(jQuery);(function(a){a.effects.shake=function(b){return this.queue(function(){var v=a(this),n=["position","top","left"];
a.effects.setMode(v,b.options.mode||"effect");var u=b.options.direction||"left",s=b.options.distance||20,d=b.options.times||3,r=b.duration||b.options.duration||140;
a.effects.save(v,n);v.show();a.effects.createWrapper(v);var q=u=="up"||u=="down"?"top":"left",p=u=="up"||u=="left"?"pos":"neg";
u={};var o={},m={};u[q]=(p=="pos"?"-=":"+=")+s;o[q]=(p=="pos"?"+=":"-=")+s*2;m[q]=(p=="pos"?"-=":"+=")+s*2;
v.animate(u,r,b.options.easing);for(s=1;s<d;s++){v.animate(o,r,b.options.easing).animate(m,r,b.options.easing)
}v.animate(o,r,b.options.easing).animate(u,r/2,b.options.easing,function(){a.effects.restore(v,n);
a.effects.removeWrapper(v);b.callback&&b.callback.apply(this,arguments)});v.queue("fx",function(){v.dequeue()
});v.dequeue()})}})(jQuery);(function(a){a.effects.slide=function(b){return this.queue(function(){var d=a(this),k=["position","top","left"],n=a.effects.setMode(d,b.options.mode||"show"),c=b.options.direction||"left";
a.effects.save(d,k);d.show();a.effects.createWrapper(d).css({overflow:"hidden"});
var m=c=="up"||c=="down"?"top":"left";c=c=="up"||c=="left"?"pos":"neg";var l=b.options.distance||(m=="top"?d.outerHeight({margin:true}):d.outerWidth({margin:true}));
if(n=="show"){d.css(m,c=="pos"?-l:l)}var j={};j[m]=(n=="show"?c=="pos"?"+=":"-=":c=="pos"?"-=":"+=")+l;
d.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){n=="hide"&&d.hide();
a.effects.restore(d,k);a.effects.removeWrapper(d);b.callback&&b.callback.apply(this,arguments);
d.dequeue()}})})}})(jQuery);(function(a){a.effects.transfer=function(b){return this.queue(function(){var e=a(this),i=a(b.options.to),h=i.offset();
i={top:h.top,left:h.left,height:i.innerHeight(),width:i.innerWidth()};h=e.offset();
var g=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:h.top,left:h.left,height:e.innerHeight(),width:e.innerWidth(),position:"absolute"}).animate(i,b.duration,b.options.easing,function(){g.remove();
b.callback&&b.callback.apply(e[0],arguments);e.dequeue()})})}})(jQuery);
/*
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
(function(){function aJ(){if(aJ.is(arguments[0],a8)){var b=arguments[0],d=G[bC](aJ,b.splice(0,3+aJ.is(b[0],aG))),R=d.set();
for(var E=0,S=b[s];E<S;E++){var e=b[E]||{};bq[ah](e.type)&&R[k](d[e.type]().attr(e))
}return R}return G[bC](aJ,arguments)}aJ.version="1.5.2";var a=/[, ]+/,bq={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bo=/\{(\d+)\}/g,bF="prototype",ah="hasOwnProperty",ab=document,aR=window,r={was:Object[bF][ah].call(aR,"Raphael"),is:aR.Raphael},bA=function(){this.customAttributes={}
},a0,bl="appendChild",bC="apply",bx="concat",X="createTouch" in ab,aQ="",aI=" ",bD=String,J="split",T="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[J](aI),br={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},aX="join",s="length",bH=bD[bF].toLowerCase,ap=Math,m=ap.max,bj=ap.min,ar=ap.abs,bm=ap.pow,aN=ap.PI,aG="number",ag="string",a8="array",a1="toString",a5="fill",aU=Object[bF][a1],bu={},k="push",h=/^url\(['"]?([^\)]+?)['"]?\)$/i,H=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,aq={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ae=ap.round,F="setAttribute",ak=parseFloat,U=parseInt,a6=" progid:DXImageTransform.Microsoft",bp=bD[bF].toUpperCase,q={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},an={along:"along",blur:aG,"clip-rect":"csv",cx:aG,cy:aG,fill:"colour","fill-opacity":aG,"font-size":aG,height:aG,opacity:aG,path:"path",r:aG,rotation:"csv",rx:aG,ry:aG,scale:"csv",stroke:"colour","stroke-opacity":aG,"stroke-width":aG,translation:"csv",width:aG,x:aG,y:aG},bt="replace",bg=/^(from|to|\d+%?)$/,be=/\s*,\s*/,n={hs:1,rg:1},bb=/,?([achlmqrstvxz]),?/gi,aS=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,aH=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,aP=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bn=function(e,d){return e.key-d.key
};aJ.type=(aR.SVGAngle||ab.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");
if(aJ.type=="VML"){var ay=ab.createElement("div"),aC;ay.innerHTML='<v:shape adj="1"/>';
aC=ay.firstChild;aC.style.behavior="url(#default#VML)";if(!(aC&&typeof aC.adj=="object")){return aJ.type=null
}ay=null}aJ.svg=!(aJ.vml=aJ.type=="VML");bA[bF]=aJ[bF];a0=bA[bF];aJ._id=0;aJ._oid=0;
aJ.fn={};aJ.is=function(d,b){b=bH.call(b);if(b=="finite"){return !aq[ah](+d)}return(b=="null"&&d===null)||(b==typeof d)||(b=="object"&&d===Object(d))||(b=="array"&&Array.isArray&&Array.isArray(d))||aU.call(d).slice(8,-1).toLowerCase()==b
};aJ.angle=function(E,S,e,R,d,i){if(d==null){var b=E-e,bI=S-R;if(!b&&!bI){return 0
}return((b<0)*180+ap.atan(-bI/-b)*180/aN+360)%360}else{return aJ.angle(E,S,d,i)-aJ.angle(e,R,d,i)
}};aJ.rad=function(b){return b%360*aN/180};aJ.deg=function(b){return b*180/aN%360
};aJ.snapTo=function(d,E,b){b=aJ.is(b,"finite")?b:10;if(aJ.is(d,a8)){var e=d.length;
while(e--){if(ar(d[e]-E)<=b){return d[e]}}}else{d=+d;var R=E%d;if(R<b){return E-R
}if(R>d-b){return E-R+d}}return E};function j(){var d=[],b=0;for(;b<32;b++){d[b]=(~~(ap.random()*16))[a1](16)
}d[12]=4;d[16]=((d[16]&3)|8)[a1](16);return"r-"+d[aX]("")}aJ.setWindow=function(b){aR=b;
ab=aR.document};var ba=function(E){if(aJ.vml){var b=/^\s+|\s+$/g;var S;try{var bI=new ActiveXObject("htmlfile");
bI.write("<body>");bI.close();S=bI.body}catch(bJ){S=createPopup().document.body}var d=S.createTextRange();
ba=aB(function(i){try{S.style.color=bD(i)[bt](b,aQ);var bK=d.queryCommandValue("ForeColor");
bK=((bK&255)<<16)|(bK&65280)|((bK&16711680)>>>16);return"#"+("000000"+bK[a1](16)).slice(-6)
}catch(bL){return"none"}})}else{var R=ab.createElement("i");R.title="Rapha\xebl Colour Picker";
R.style.display="none";ab.body[bl](R);ba=aB(function(e){R.style.color=e;return ab.defaultView.getComputedStyle(R,aQ).getPropertyValue("color")
})}return ba(E)},aD=function(){return"hsb("+[this.h,this.s,this.b]+")"},N=function(){return"hsl("+[this.h,this.s,this.l]+")"
},C=function(){return this.hex};aJ.hsb2rgb=function(i,e,d,E){if(aJ.is(i,"object")&&"h" in i&&"s" in i&&"b" in i){d=i.b;
e=i.s;i=i.h;E=i.o}return aJ.hsl2rgb(i,e,d/2,E)};aJ.hsl2rgb=function(bI,bP,E,e){if(aJ.is(bI,"object")&&"h" in bI&&"s" in bI&&"l" in bI){E=bI.l;
bP=bI.s;bI=bI.h}if(bI>1||bP>1||E>1){bI/=360;bP/=100;E/=100}var bN={},bK=["r","g","b"],bJ,bM,S,d,bL,bO;
if(!bP){bN={r:E,g:E,b:E}}else{if(E<0.5){bJ=E*(1+bP)}else{bJ=E+bP-E*bP}bM=2*E-bJ;for(var R=0;
R<3;R++){S=bI+1/3*-(R-1);S<0&&S++;S>1&&S--;if(S*6<1){bN[bK[R]]=bM+(bJ-bM)*6*S}else{if(S*2<1){bN[bK[R]]=bJ
}else{if(S*3<2){bN[bK[R]]=bM+(bJ-bM)*(2/3-S)*6}else{bN[bK[R]]=bM}}}}}bN.r*=255;bN.g*=255;
bN.b*=255;bN.hex="#"+(16777216|bN.b|(bN.g<<8)|(bN.r<<16)).toString(16).slice(1);aJ.is(e,"finite")&&(bN.opacity=e);
bN.toString=C;return bN};aJ.rgb2hsb=function(b,d,bI){if(d==null&&aJ.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){bI=b.b;
d=b.g;b=b.r}if(d==null&&aJ.is(b,ag)){var bK=aJ.getRGB(b);b=bK.r;d=bK.g;bI=bK.b}if(b>1||d>1||bI>1){b/=255;
d/=255;bI/=255}var S=m(b,d,bI),e=bj(b,d,bI),E,i,R=S;if(e==S){return{h:0,s:0,b:S,toString:aD}
}else{var bJ=(S-e);i=bJ/S;if(b==S){E=(d-bI)/bJ}else{if(d==S){E=2+((bI-b)/bJ)}else{E=4+((b-d)/bJ)
}}E/=6;E<0&&E++;E>1&&E--}return{h:E,s:i,b:R,toString:aD}};aJ.rgb2hsl=function(d,e,S){if(e==null&&aJ.is(d,"object")&&"r" in d&&"g" in d&&"b" in d){S=d.b;
e=d.g;d=d.r}if(e==null&&aJ.is(d,ag)){var bL=aJ.getRGB(d);d=bL.r;e=bL.g;S=bL.b}if(d>1||e>1||S>1){d/=255;
e/=255;S/=255}var R=m(d,e,S),i=bj(d,e,S),E,bK,b=(R+i)/2,bJ;if(i==R){bJ={h:0,s:0,l:b}
}else{var bI=R-i;bK=b<0.5?bI/(R+i):bI/(2-R-i);if(d==R){E=(e-S)/bI}else{if(e==R){E=2+(S-d)/bI
}else{E=4+(d-e)/bI}}E/=6;E<0&&E++;E>1&&E--;bJ={h:E,s:bK,l:b}}bJ.toString=N;return bJ
};aJ._path2string=function(){return this.join(",")[bt](bb,"$1")};function aB(i,d,b){function e(){var E=Array[bF].slice.call(arguments,0),S=E[aX]("\u25ba"),R=e.cache=e.cache||{},bI=e.count=e.count||[];
if(R[ah](S)){return b?b(R[S]):R[S]}bI[s]>=1000&&delete R[bI.shift()];bI[k](S);R[S]=i[bC](d,E);
return b?b(R[S]):R[S]}return e}aJ.getRGB=aB(function(b){if(!b||!!((b=bD(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1}
}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none"}}!(n[ah](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ba(b));
var E,d,e,S,i,bJ,bI,R=b.match(H);if(R){if(R[2]){S=U(R[2].substring(5),16);e=U(R[2].substring(3,5),16);
d=U(R[2].substring(1,3),16)}if(R[3]){S=U((bJ=R[3].charAt(3))+bJ,16);e=U((bJ=R[3].charAt(2))+bJ,16);
d=U((bJ=R[3].charAt(1))+bJ,16)}if(R[4]){bI=R[4][J](be);d=ak(bI[0]);bI[0].slice(-1)=="%"&&(d*=2.55);
e=ak(bI[1]);bI[1].slice(-1)=="%"&&(e*=2.55);S=ak(bI[2]);bI[2].slice(-1)=="%"&&(S*=2.55);
R[1].toLowerCase().slice(0,4)=="rgba"&&(i=ak(bI[3]));bI[3]&&bI[3].slice(-1)=="%"&&(i/=100)
}if(R[5]){bI=R[5][J](be);d=ak(bI[0]);bI[0].slice(-1)=="%"&&(d*=2.55);e=ak(bI[1]);
bI[1].slice(-1)=="%"&&(e*=2.55);S=ak(bI[2]);bI[2].slice(-1)=="%"&&(S*=2.55);(bI[0].slice(-3)=="deg"||bI[0].slice(-1)=="\xb0")&&(d/=360);
R[1].toLowerCase().slice(0,4)=="hsba"&&(i=ak(bI[3]));bI[3]&&bI[3].slice(-1)=="%"&&(i/=100);
return aJ.hsb2rgb(d,e,S,i)}if(R[6]){bI=R[6][J](be);d=ak(bI[0]);bI[0].slice(-1)=="%"&&(d*=2.55);
e=ak(bI[1]);bI[1].slice(-1)=="%"&&(e*=2.55);S=ak(bI[2]);bI[2].slice(-1)=="%"&&(S*=2.55);
(bI[0].slice(-3)=="deg"||bI[0].slice(-1)=="\xb0")&&(d/=360);R[1].toLowerCase().slice(0,4)=="hsla"&&(i=ak(bI[3]));
bI[3]&&bI[3].slice(-1)=="%"&&(i/=100);return aJ.hsl2rgb(d,e,S,i)}R={r:d,g:e,b:S};
R.hex="#"+(16777216|S|(e<<8)|(d<<16)).toString(16).slice(1);aJ.is(i,"finite")&&(R.opacity=i);
return R}return{r:-1,g:-1,b:-1,hex:"none",error:1}},aJ);aJ.getColor=function(d){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:d||0.75},b=this.hsb2rgb(e.h,e.s,e.b);
e.h+=0.075;if(e.h>1){e.h=0;e.s-=0.2;e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})
}return b.hex};aJ.getColor.reset=function(){delete this.start};aJ.parsePathString=aB(function(b){if(!b){return null
}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];if(aJ.is(b,a8)&&aJ.is(b[0],a8)){d=aT(b)
}if(!d[s]){bD(b)[bt](aS,function(E,i,bI){var S=[],R=bH.call(i);bI[bt](aH,function(bK,bJ){bJ&&S[k](+bJ)
});if(R=="m"&&S[s]>2){d[k]([i][bx](S.splice(0,2)));R="l";i=i=="m"?"l":"L"}while(S[s]>=e[R]){d[k]([i][bx](S.splice(0,e[R])));
if(!e[R]){break}}})}d[a1]=aJ._path2string;return d});aJ.findDotsAtSegment=function(d,b,bV,bT,S,E,bJ,bI,bP){var bN=1-bP,bM=bm(bN,3)*d+bm(bN,2)*3*bP*bV+bN*3*bP*bP*S+bm(bP,3)*bJ,bK=bm(bN,3)*b+bm(bN,2)*3*bP*bT+bN*3*bP*bP*E+bm(bP,3)*bI,bR=d+2*bP*(bV-d)+bP*bP*(S-2*bV+d),bQ=b+2*bP*(bT-b)+bP*bP*(E-2*bT+b),bU=bV+2*bP*(S-bV)+bP*bP*(bJ-2*S+bV),bS=bT+2*bP*(E-bT)+bP*bP*(bI-2*E+bT),bO=(1-bP)*d+bP*bV,bL=(1-bP)*b+bP*bT,i=(1-bP)*S+bP*bJ,e=(1-bP)*E+bP*bI,R=(90-ap.atan((bR-bU)/(bQ-bS))*180/aN);
(bR>bU||bQ<bS)&&(R+=180);return{x:bM,y:bK,m:{x:bR,y:bQ},n:{x:bU,y:bS},start:{x:bO,y:bL},end:{x:i,y:e},alpha:R}
};var aj=aB(function(bM){if(!bM){return{x:0,y:0,width:0,height:0}}bM=W(bM);var bJ=0,bI=0,E=[],d=[],e;
for(var R=0,bL=bM[s];R<bL;R++){e=bM[R];if(e[0]=="M"){bJ=e[1];bI=e[2];E[k](bJ);d[k](bI)
}else{var S=a7(bJ,bI,e[1],e[2],e[3],e[4],e[5],e[6]);E=E[bx](S.min.x,S.max.x);d=d[bx](S.min.y,S.max.y);
bJ=e[5];bI=e[6]}}var b=bj[bC](0,E),bK=bj[bC](0,d);return{x:b,y:bK,width:m[bC](0,E)-b,height:m[bC](0,d)-bK}
}),aT=function(S){var e=[];if(!aJ.is(S,a8)||!aJ.is(S&&S[0],a8)){S=aJ.parsePathString(S)
}for(var d=0,E=S[s];d<E;d++){e[d]=[];for(var b=0,R=S[d][s];b<R;b++){e[d][b]=S[d][b]
}}e[a1]=aJ._path2string;return e},av=aB(function(E){if(!aJ.is(E,a8)||!aJ.is(E&&E[0],a8)){E=aJ.parsePathString(E)
}var bL=[],bN=0,bM=0,bQ=0,bP=0,e=0;if(E[0][0]=="M"){bN=E[0][1];bM=E[0][2];bQ=bN;bP=bM;
e++;bL[k](["M",bN,bM])}for(var bI=e,bR=E[s];bI<bR;bI++){var b=bL[bI]=[],bO=E[bI];
if(bO[0]!=bH.call(bO[0])){b[0]=bH.call(bO[0]);switch(b[0]){case"a":b[1]=bO[1];b[2]=bO[2];
b[3]=bO[3];b[4]=bO[4];b[5]=bO[5];b[6]=+(bO[6]-bN).toFixed(3);b[7]=+(bO[7]-bM).toFixed(3);
break;case"v":b[1]=+(bO[1]-bM).toFixed(3);break;case"m":bQ=bO[1];bP=bO[2];default:for(var S=1,bJ=bO[s];
S<bJ;S++){b[S]=+(bO[S]-((S%2)?bN:bM)).toFixed(3)}}}else{b=bL[bI]=[];if(bO[0]=="m"){bQ=bO[1]+bN;
bP=bO[2]+bM}for(var R=0,d=bO[s];R<d;R++){bL[bI][R]=bO[R]}}var bK=bL[bI][s];switch(bL[bI][0]){case"z":bN=bQ;
bM=bP;break;case"h":bN+=+bL[bI][bK-1];break;case"v":bM+=+bL[bI][bK-1];break;default:bN+=+bL[bI][bK-2];
bM+=+bL[bI][bK-1]}}bL[a1]=aJ._path2string;return bL},0,aT),z=aB(function(E){if(!aJ.is(E,a8)||!aJ.is(E&&E[0],a8)){E=aJ.parsePathString(E)
}var bK=[],bM=0,bL=0,bP=0,bO=0,e=0;if(E[0][0]=="M"){bM=+E[0][1];bL=+E[0][2];bP=bM;
bO=bL;e++;bK[0]=["M",bM,bL]}for(var bI=e,bQ=E[s];bI<bQ;bI++){var b=bK[bI]=[],bN=E[bI];
if(bN[0]!=bp.call(bN[0])){b[0]=bp.call(bN[0]);switch(b[0]){case"A":b[1]=bN[1];b[2]=bN[2];
b[3]=bN[3];b[4]=bN[4];b[5]=bN[5];b[6]=+(bN[6]+bM);b[7]=+(bN[7]+bL);break;case"V":b[1]=+bN[1]+bL;
break;case"H":b[1]=+bN[1]+bM;break;case"M":bP=+bN[1]+bM;bO=+bN[2]+bL;default:for(var S=1,bJ=bN[s];
S<bJ;S++){b[S]=+bN[S]+((S%2)?bM:bL)}}}else{for(var R=0,d=bN[s];R<d;R++){bK[bI][R]=bN[R]
}}switch(b[0]){case"Z":bM=bP;bL=bO;break;case"H":bM=b[1];break;case"V":bL=b[1];break;
case"M":bP=bK[bI][bK[bI][s]-2];bO=bK[bI][bK[bI][s]-1];default:bM=bK[bI][bK[bI][s]-2];
bL=bK[bI][bK[bI][s]-1]}}bK[a1]=aJ._path2string;return bK},null,aT),bE=function(d,i,b,e){return[d,i,b,e,b,e]
},bk=function(d,i,S,E,b,e){var R=1/3,bI=2/3;return[R*d+bI*S,R*i+bI*E,R*b+bI*S,R*e+bI*E,b,e]
},aa=function(bP,ck,bY,bW,bQ,bK,E,bO,cj,bR){var bV=aN*120/180,b=aN/180*(+bQ||0),b2=[],bZ,cg=aB(function(cl,co,i){var cn=cl*ap.cos(i)-co*ap.sin(i),cm=cl*ap.sin(i)+co*ap.cos(i);
return{x:cn,y:cm}});if(!bR){bZ=cg(bP,ck,-b);bP=bZ.x;ck=bZ.y;bZ=cg(bO,cj,-b);bO=bZ.x;
cj=bZ.y;var d=ap.cos(aN/180*bQ),bM=ap.sin(aN/180*bQ),b4=(bP-bO)/2,b3=(ck-cj)/2;var ce=(b4*b4)/(bY*bY)+(b3*b3)/(bW*bW);
if(ce>1){ce=ap.sqrt(ce);bY=ce*bY;bW=ce*bW}var e=bY*bY,b7=bW*bW,b9=(bK==E?-1:1)*ap.sqrt(ar((e*b7-e*b3*b3-b7*b4*b4)/(e*b3*b3+b7*b4*b4))),bT=b9*bY*b3/bW+(bP+bO)/2,bS=b9*-bW*b4/bY+(ck+cj)/2,bJ=ap.asin(((ck-bS)/bW).toFixed(9)),bI=ap.asin(((cj-bS)/bW).toFixed(9));
bJ=bP<bT?aN-bJ:bJ;bI=bO<bT?aN-bI:bI;bJ<0&&(bJ=aN*2+bJ);bI<0&&(bI=aN*2+bI);if(E&&bJ>bI){bJ=bJ-aN*2
}if(!E&&bI>bJ){bI=bI-aN*2}}else{bJ=bR[0];bI=bR[1];bT=bR[2];bS=bR[3]}var bN=bI-bJ;
if(ar(bN)>bV){var bU=bI,bX=bO,bL=cj;bI=bJ+bV*(E&&bI>bJ?1:-1);bO=bT+bY*ap.cos(bI);
cj=bS+bW*ap.sin(bI);b2=aa(bO,cj,bY,bW,bQ,0,E,bX,bL,[bI,bU,bT,bS])}bN=bI-bJ;var S=ap.cos(bJ),ci=ap.sin(bJ),R=ap.cos(bI),ch=ap.sin(bI),b5=ap.tan(bN/4),b8=4/3*bY*b5,b6=4/3*bW*b5,cf=[bP,ck],cd=[bP+b8*ci,ck-b6*S],cc=[bO+b8*ch,cj-b6*R],ca=[bO,cj];
cd[0]=2*cf[0]-cd[0];cd[1]=2*cf[1]-cd[1];if(bR){return[cd,cc,ca][bx](b2)}else{b2=[cd,cc,ca][bx](b2)[aX]()[J](",");
var b0=[];for(var cb=0,b1=b2[s];cb<b1;cb++){b0[cb]=cb%2?cg(b2[cb-1],b2[cb],b).y:cg(b2[cb],b2[cb+1],b).x
}return b0}},ad=function(d,b,i,e,bJ,bI,S,R,bK){var E=1-bK;return{x:bm(E,3)*d+bm(E,2)*3*bK*i+E*3*bK*bK*bJ+bm(bK,3)*S,y:bm(E,3)*b+bm(E,2)*3*bK*e+E*3*bK*bK*bI+bm(bK,3)*R}
},a7=aB(function(i,d,R,E,bR,bQ,bN,bK){var bP=(bR-2*R+i)-(bN-2*bR+R),bM=2*(R-i)-2*(bR-R),bJ=i-R,bI=(-bM+ap.sqrt(bM*bM-4*bP*bJ))/2/bP,S=(-bM-ap.sqrt(bM*bM-4*bP*bJ))/2/bP,bL=[d,bK],bO=[i,bN],e;
ar(bI)>"1e12"&&(bI=0.5);ar(S)>"1e12"&&(S=0.5);if(bI>0&&bI<1){e=ad(i,d,R,E,bR,bQ,bN,bK,bI);
bO[k](e.x);bL[k](e.y)}if(S>0&&S<1){e=ad(i,d,R,E,bR,bQ,bN,bK,S);bO[k](e.x);bL[k](e.y)
}bP=(bQ-2*E+d)-(bK-2*bQ+E);bM=2*(E-d)-2*(bQ-E);bJ=d-E;bI=(-bM+ap.sqrt(bM*bM-4*bP*bJ))/2/bP;
S=(-bM-ap.sqrt(bM*bM-4*bP*bJ))/2/bP;ar(bI)>"1e12"&&(bI=0.5);ar(S)>"1e12"&&(S=0.5);
if(bI>0&&bI<1){e=ad(i,d,R,E,bR,bQ,bN,bK,bI);bO[k](e.x);bL[k](e.y)}if(S>0&&S<1){e=ad(i,d,R,E,bR,bQ,bN,bK,S);
bO[k](e.x);bL[k](e.y)}return{min:{x:bj[bC](0,bO),y:bj[bC](0,bL)},max:{x:m[bC](0,bO),y:m[bC](0,bL)}}
}),W=aB(function(bQ,bL){var E=z(bQ),bM=bL&&z(bL),bN={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(bR,bS){var i,bT;
if(!bR){return["C",bS.x,bS.y,bS.x,bS.y,bS.x,bS.y]}!(bR[0] in {T:1,Q:1})&&(bS.qx=bS.qy=null);
switch(bR[0]){case"M":bS.X=bR[1];bS.Y=bR[2];break;case"A":bR=["C"][bx](aa[bC](0,[bS.x,bS.y][bx](bR.slice(1))));
break;case"S":i=bS.x+(bS.x-(bS.bx||bS.x));bT=bS.y+(bS.y-(bS.by||bS.y));bR=["C",i,bT][bx](bR.slice(1));
break;case"T":bS.qx=bS.x+(bS.x-(bS.qx||bS.x));bS.qy=bS.y+(bS.y-(bS.qy||bS.y));bR=["C"][bx](bk(bS.x,bS.y,bS.qx,bS.qy,bR[1],bR[2]));
break;case"Q":bS.qx=bR[1];bS.qy=bR[2];bR=["C"][bx](bk(bS.x,bS.y,bR[1],bR[2],bR[3],bR[4]));
break;case"L":bR=["C"][bx](bE(bS.x,bS.y,bR[1],bR[2]));break;case"H":bR=["C"][bx](bE(bS.x,bS.y,bR[1],bS.y));
break;case"V":bR=["C"][bx](bE(bS.x,bS.y,bS.x,bR[1]));break;case"Z":bR=["C"][bx](bE(bS.x,bS.y,bS.X,bS.Y));
break}return bR},d=function(bR,bS){if(bR[bS][s]>7){bR[bS].shift();var bT=bR[bS];while(bT[s]){bR.splice(bS++,0,["C"][bx](bT.splice(0,6)))
}bR.splice(bS,1);bO=m(E[s],bM&&bM[s]||0)}},e=function(bV,bU,bS,bR,bT){if(bV&&bU&&bV[bT][0]=="M"&&bU[bT][0]!="M"){bU.splice(bT,0,["M",bR.x,bR.y]);
bS.bx=0;bS.by=0;bS.x=bV[bT][1];bS.y=bV[bT][2];bO=m(E[s],bM&&bM[s]||0)}};for(var bJ=0,bO=m(E[s],bM&&bM[s]||0);
bJ<bO;bJ++){E[bJ]=S(E[bJ],bN);d(E,bJ);bM&&(bM[bJ]=S(bM[bJ],b));bM&&d(bM,bJ);e(E,bM,bN,b,bJ);
e(bM,E,b,bN,bJ);var bI=E[bJ],bP=bM&&bM[bJ],R=bI[s],bK=bM&&bP[s];bN.x=bI[R-2];bN.y=bI[R-1];
bN.bx=ak(bI[R-4])||bN.x;bN.by=ak(bI[R-3])||bN.y;b.bx=bM&&(ak(bP[bK-4])||b.x);b.by=bM&&(ak(bP[bK-3])||b.y);
b.x=bM&&bP[bK-2];b.y=bM&&bP[bK-1]}return bM?[E,bM]:E},null,aT),x=aB(function(bL){var bK=[];
for(var S=0,bM=bL[s];S<bM;S++){var b={},bJ=bL[S].match(/^([^:]*):?([\d\.]*)/);b.color=aJ.getRGB(bJ[1]);
if(b.color.error){return null}b.color=b.color.hex;bJ[2]&&(b.offset=bJ[2]+"%");bK[k](b)
}for(S=1,bM=bK[s]-1;S<bM;S++){if(!bK[S].offset){var e=ak(bK[S-1].offset||0),E=0;for(var R=S+1;
R<bM;R++){if(bK[R].offset){E=bK[R].offset;break}}if(!E){E=100;R=bM}E=ak(E);var bI=(E-e)/(R-S+1);
for(;S<R;S++){e+=bI;bK[S].offset=e+"%"}}}return bK}),aK=function(b,E,e,i){var d;if(aJ.is(b,ag)||aJ.is(b,"object")){d=aJ.is(b,ag)?ab.getElementById(b):b;
if(d.tagName){if(E==null){return{container:d,width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight}
}else{return{container:d,width:E,height:e}}}}else{return{container:1,x:b,y:E,width:e,height:i}
}},bf=function(b,e){var d=this;for(var i in e){if(e[ah](i)&&!(i in b)){switch(typeof e[i]){case"function":(function(E){b[i]=b===d?E:function(){return E[bC](d,arguments)
}})(e[i]);break;case"object":b[i]=b[i]||{};bf.call(this,b[i],e[i]);break;default:b[i]=e[i];
break}}}},aF=function(b,d){b==d.top&&(d.top=b.prev);b==d.bottom&&(d.bottom=b.next);
b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},am=function(b,d){if(d.top===b){return
}aF(b,d);b.next=null;b.prev=d.top;d.top.next=b;d.top=b},p=function(b,d){if(d.bottom===b){return
}aF(b,d);b.next=d.bottom;b.prev=null;d.bottom.prev=b;d.bottom=b},K=function(d,b,e){aF(d,e);
b==e.top&&(e.top=d);b.next&&(b.next.prev=d);d.next=b.next;d.prev=b;b.next=d},aM=function(d,b,e){aF(d,e);
b==e.bottom&&(e.bottom=d);b.prev&&(b.prev.next=d);d.prev=b.prev;b.prev=d;d.next=b
},A=function(b){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object")
}};aJ.pathToRelative=av;if(aJ.svg){a0.svgns="http://www.w3.org/2000/svg";a0.xlink="http://www.w3.org/1999/xlink";
ae=function(b){return +b+(~~b===b)*0.5};var bi=function(e,b){if(b){for(var d in b){if(b[ah](d)){e[F](d,bD(b[d]))
}}}else{e=ab.createElementNS(a0.svgns,e);e.style.webkitTapHighlightColor="rgba(0,0,0,0)";
return e}};aJ[a1]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version
};var y=function(b,i){var d=bi("path");i.canvas&&i.canvas[bl](d);var e=new aV(d,i);
e.type="path";ao(e,{fill:"none",stroke:"#000",path:b});return e};var g=function(E,bP,b){var bM="linear",bJ=0.5,S=0.5,bR=E.style;
bP=bD(bP)[bt](aP,function(bT,i,bU){bM="radial";if(i&&bU){bJ=ak(i);S=ak(bU);var bS=((S>0.5)*2-1);
bm(bJ-0.5,2)+bm(S-0.5,2)>0.25&&(S=ap.sqrt(0.25-bm(bJ-0.5,2))*bS+0.5)&&S!=0.5&&(S=S.toFixed(5)-0.00001*bS)
}return aQ});bP=bP[J](/\s*\-\s*/);if(bM=="linear"){var bI=bP.shift();bI=-ak(bI);if(isNaN(bI)){return null
}var R=[0,0,ap.cos(bI*aN/180),ap.sin(bI*aN/180)],bO=1/(m(ar(R[2]),ar(R[3]))||1);R[2]*=bO;
R[3]*=bO;if(R[2]<0){R[0]=-R[2];R[2]=0}if(R[3]<0){R[1]=-R[3];R[3]=0}}var bL=x(bP);
if(!bL){return null}var d=E.getAttribute(a5);d=d.match(/^url\(#(.*)\)$/);d&&b.defs.removeChild(ab.getElementById(d[1]));
var e=bi(bM+"Gradient");e.id=j();bi(e,bM=="radial"?{fx:bJ,fy:S}:{x1:R[0],y1:R[1],x2:R[2],y2:R[3]});
b.defs[bl](e);for(var bK=0,bQ=bL[s];bK<bQ;bK++){var bN=bi("stop");bi(bN,{offset:bL[bK].offset?bL[bK].offset:!bK?"0%":"100%","stop-color":bL[bK].color||"#fff"});
e[bl](bN)}bi(E,{fill:"url(#"+e.id+")",opacity:1,"fill-opacity":1});bR.fill=aQ;bR.opacity=1;
bR.fillOpacity=1;return 1};var ac=function(d){var b=d.getBBox();bi(d.pattern,{patternTransform:aJ.format("translate({0},{1})",b.x,b.y)})
};var ao=function(bO,bX){var bR={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},bT=bO.node,bP=bO.attrs,bL=bO.rotate(),S=function(b4,b3){b3=bR[bH.call(b3)];
if(b3){var b1=b4.attrs["stroke-width"]||"1",bZ={round:b1,square:b1,butt:0}[b4.attrs["stroke-linecap"]||bX["stroke-linecap"]]||0,b2=[];
var b0=b3[s];while(b0--){b2[b0]=b3[b0]*b1+((b0%2)?1:-1)*bZ}bi(bT,{"stroke-dasharray":b2[aX](",")})
}};bX[ah]("rotation")&&(bL=bX.rotation);var bK=bD(bL)[J](a);if(!(bK.length-1)){bK=null
}else{bK[1]=+bK[1];bK[2]=+bK[2]}ak(bL)&&bO.rotate(0,true);for(var bS in bX){if(bX[ah](bS)){if(!q[ah](bS)){continue
}var bQ=bX[bS];bP[bS]=bQ;switch(bS){case"blur":bO.blur(bQ);break;case"rotation":bO.rotate(bQ,true);
break;case"href":case"title":case"target":var bV=bT.parentNode;if(bH.call(bV.tagName)!="a"){var E=bi("a");
bV.insertBefore(E,bT);E[bl](bT);bV=E}if(bS=="target"&&bQ=="blank"){bV.setAttributeNS(bO.paper.xlink,"show","new")
}else{bV.setAttributeNS(bO.paper.xlink,bS,bQ)}break;case"cursor":bT.style.cursor=bQ;
break;case"clip-rect":var d=bD(bQ)[J](a);if(d[s]==4){bO.clip&&bO.clip.parentNode.parentNode.removeChild(bO.clip.parentNode);
var e=bi("clipPath"),bU=bi("rect");e.id=j();bi(bU,{x:d[0],y:d[1],width:d[2],height:d[3]});
e[bl](bU);bO.paper.defs[bl](e);bi(bT,{"clip-path":"url(#"+e.id+")"});bO.clip=bU}if(!bQ){var bW=ab.getElementById(bT.getAttribute("clip-path")[bt](/(^url\(#|\)$)/g,aQ));
bW&&bW.parentNode.removeChild(bW);bi(bT,{"clip-path":aQ});delete bO.clip}break;case"path":if(bO.type=="path"){bi(bT,{d:bQ?bP.path=z(bQ):"M0,0"})
}break;case"width":bT[F](bS,bQ);if(bP.fx){bS="x";bQ=bP.x}else{break}case"x":if(bP.fx){bQ=-bP.x-(bP.width||0)
}case"rx":if(bS=="rx"&&bO.type=="rect"){break}case"cx":bK&&(bS=="x"||bS=="cx")&&(bK[1]+=bQ-bP[bS]);
bT[F](bS,bQ);bO.pattern&&ac(bO);break;case"height":bT[F](bS,bQ);if(bP.fy){bS="y";
bQ=bP.y}else{break}case"y":if(bP.fy){bQ=-bP.y-(bP.height||0)}case"ry":if(bS=="ry"&&bO.type=="rect"){break
}case"cy":bK&&(bS=="y"||bS=="cy")&&(bK[2]+=bQ-bP[bS]);bT[F](bS,bQ);bO.pattern&&ac(bO);
break;case"r":if(bO.type=="rect"){bi(bT,{rx:bQ,ry:bQ})}else{bT[F](bS,bQ)}break;case"src":if(bO.type=="image"){bT.setAttributeNS(bO.paper.xlink,"href",bQ)
}break;case"stroke-width":bT.style.strokeWidth=bQ;bT[F](bS,bQ);if(bP["stroke-dasharray"]){S(bO,bP["stroke-dasharray"])
}break;case"stroke-dasharray":S(bO,bQ);break;case"translation":var bI=bD(bQ)[J](a);
bI[0]=+bI[0]||0;bI[1]=+bI[1]||0;if(bK){bK[1]+=bI[0];bK[2]+=bI[1]}B.call(bO,bI[0],bI[1]);
break;case"scale":bI=bD(bQ)[J](a);bO.scale(+bI[0]||1,+bI[1]||+bI[0]||1,isNaN(ak(bI[2]))?null:+bI[2],isNaN(ak(bI[3]))?null:+bI[3]);
break;case a5:var R=bD(bQ).match(h);if(R){e=bi("pattern");var bN=bi("image");e.id=j();
bi(e,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});bi(bN,{x:0,y:0});bN.setAttributeNS(bO.paper.xlink,"href",R[1]);
e[bl](bN);var bY=ab.createElement("img");bY.style.cssText="position:absolute;left:-9999em;top-9999em";
bY.onload=function(){bi(e,{width:this.offsetWidth,height:this.offsetHeight});bi(bN,{width:this.offsetWidth,height:this.offsetHeight});
ab.body.removeChild(this);bO.paper.safari()};ab.body[bl](bY);bY.src=R[1];bO.paper.defs[bl](e);
bT.style.fill="url(#"+e.id+")";bi(bT,{fill:"url(#"+e.id+")"});bO.pattern=e;bO.pattern&&ac(bO);
break}var i=aJ.getRGB(bQ);if(!i.error){delete bX.gradient;delete bP.gradient;!aJ.is(bP.opacity,"undefined")&&aJ.is(bX.opacity,"undefined")&&bi(bT,{opacity:bP.opacity});
!aJ.is(bP["fill-opacity"],"undefined")&&aJ.is(bX["fill-opacity"],"undefined")&&bi(bT,{"fill-opacity":bP["fill-opacity"]})
}else{if((({circle:1,ellipse:1})[ah](bO.type)||bD(bQ).charAt()!="r")&&g(bT,bQ,bO.paper)){bP.gradient=bQ;
bP.fill="none";break}}i[ah]("opacity")&&bi(bT,{"fill-opacity":i.opacity>1?i.opacity/100:i.opacity});
case"stroke":i=aJ.getRGB(bQ);bT[F](bS,i.hex);bS=="stroke"&&i[ah]("opacity")&&bi(bT,{"stroke-opacity":i.opacity>1?i.opacity/100:i.opacity});
break;case"gradient":(({circle:1,ellipse:1})[ah](bO.type)||bD(bQ).charAt()!="r")&&g(bT,bQ,bO.paper);
break;case"opacity":if(bP.gradient&&!bP[ah]("stroke-opacity")){bi(bT,{"stroke-opacity":bQ>1?bQ/100:bQ})
}case"fill-opacity":if(bP.gradient){var b=ab.getElementById(bT.getAttribute(a5)[bt](/^url\(#|\)$/g,aQ));
if(b){var bJ=b.getElementsByTagName("stop");bJ[bJ[s]-1][F]("stop-opacity",bQ)}break
}default:bS=="font-size"&&(bQ=U(bQ,10)+"px");var bM=bS[bt](/(\-.)/g,function(bZ){return bp.call(bZ.substring(1))
});bT.style[bM]=bQ;bT[F](bS,bQ);break}}}Q(bO,bX);if(bK){bO.rotate(bK.join(aI))}else{ak(bL)&&bO.rotate(bL,true)
}};var o=1.2,Q=function(b,E){if(b.type!="text"||!(E[ah]("text")||E[ah]("font")||E[ah]("font-size")||E[ah]("x")||E[ah]("y"))){return
}var bK=b.attrs,d=b.node,bM=d.firstChild?U(ab.defaultView.getComputedStyle(d.firstChild,aQ).getPropertyValue("font-size"),10):10;
if(E[ah]("text")){bK.text=E.text;while(d.firstChild){d.removeChild(d.firstChild)}var e=bD(E.text)[J]("\n");
for(var R=0,bL=e[s];R<bL;R++){if(e[R]){var bI=bi("tspan");R&&bi(bI,{dy:bM*o,x:bK.x});
bI[bl](ab.createTextNode(e[R]));d[bl](bI)}}}else{e=d.getElementsByTagName("tspan");
for(R=0,bL=e[s];R<bL;R++){R&&bi(e[R],{dy:bM*o,x:bK.x})}}bi(d,{y:bK.y});var S=b.getBBox(),bJ=bK.y-(S.y+S.height/2);
bJ&&aJ.is(bJ,"finite")&&bi(d,{y:bK.y+bJ})},aV=function(d,b){var i=0,e=0;this[0]=d;
this.id=aJ._oid++;this.node=d;d.raphael=this;this.paper=b;this.attrs=this.attrs||{};
this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);
this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};var bd=aV[bF];
aV[bF].rotate=function(d,b,i){if(this.removed){return this}if(d==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)
}return this._.rt.deg}var e=this.getBBox();d=bD(d)[J](a);if(d[s]-1){b=ak(d[1]);i=ak(d[2])
}d=ak(d[0]);if(b!=null&&b!==false){this._.rt.deg=d}else{this._.rt.deg+=d}(i==null)&&(b=null);
this._.rt.cx=b;this._.rt.cy=i;b=b==null?e.x+e.width/2:b;i=i==null?e.y+e.height/2:i;
if(this._.rt.deg){this.transformations[0]=aJ.format("rotate({0} {1} {2})",this._.rt.deg,b,i);
this.clip&&bi(this.clip,{transform:aJ.format("rotate({0} {1} {2})",-this._.rt.deg,b,i)})
}else{this.transformations[0]=aQ;this.clip&&bi(this.clip,{transform:aQ})}bi(this.node,{transform:this.transformations[aX](aI)});
return this};aV[bF].hide=function(){!this.removed&&(this.node.style.display="none");
return this};aV[bF].show=function(){!this.removed&&(this.node.style.display="");return this
};aV[bF].remove=function(){if(this.removed){return}aF(this,this.paper);this.node.parentNode.removeChild(this.node);
for(var b in this){delete this[b]}this.removed=true};aV[bF].getBBox=function(){if(this.removed){return this
}if(this.type=="path"){return aj(this.attrs.path)}if(this.node.style.display=="none"){this.show();
var d=true}var bI={};try{bI=this.node.getBBox()}catch(R){}finally{bI=bI||{}}if(this.type=="text"){bI={x:bI.x,y:Infinity,width:0,height:0};
for(var b=0,E=this.node.getNumberOfChars();b<E;b++){var S=this.node.getExtentOfChar(b);
(S.y<bI.y)&&(bI.y=S.y);(S.y+S.height-bI.y>bI.height)&&(bI.height=S.y+S.height-bI.y);
(S.x+S.width-bI.x>bI.width)&&(bI.width=S.x+S.width-bI.x)}}d&&this.hide();return bI
};aV[bF].attr=function(b,bK){if(this.removed){return this}if(b==null){var bJ={};for(var R in this.attrs){if(this.attrs[ah](R)){bJ[R]=this.attrs[R]
}}this._.rt.deg&&(bJ.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bJ.scale=this.scale());
bJ.gradient&&bJ.fill=="none"&&(bJ.fill=bJ.gradient)&&delete bJ.gradient;return bJ
}if(bK==null&&aJ.is(b,ag)){if(b=="translation"){return B.call(this)}if(b=="rotation"){return this.rotate()
}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient
}return this.attrs[b]}if(bK==null&&aJ.is(b,a8)){var bM={};for(var E=0,S=b.length;
E<S;E++){bM[b[E]]=this.attr(b[E])}return bM}if(bK!=null){var d={};d[b]=bK}else{if(b!=null&&aJ.is(b,"object")){d=b
}}for(var bL in this.paper.customAttributes){if(this.paper.customAttributes[ah](bL)&&d[ah](bL)&&aJ.is(this.paper.customAttributes[bL],"function")){var bI=this.paper.customAttributes[bL].apply(this,[][bx](d[bL]));
this.attrs[bL]=d[bL];for(var e in bI){if(bI[ah](e)){d[e]=bI[e]}}}}ao(this,d);return this
};aV[bF].toFront=function(){if(this.removed){return this}this.node.parentNode[bl](this.node);
var b=this.paper;b.top!=this&&am(this,b);return this};aV[bF].toBack=function(){if(this.removed){return this
}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);
p(this,this.paper);var b=this.paper}return this};aV[bF].insertAfter=function(b){if(this.removed){return this
}var d=b.node||b[b.length-1].node;if(d.nextSibling){d.parentNode.insertBefore(this.node,d.nextSibling)
}else{d.parentNode[bl](this.node)}K(this,b,this.paper);return this};aV[bF].insertBefore=function(b){if(this.removed){return this
}var d=b.node||b[0].node;d.parentNode.insertBefore(this.node,d);aM(this,b,this.paper);
return this};aV[bF].blur=function(d){var b=this;if(+d!==0){var e=bi("filter"),i=bi("feGaussianBlur");
b.attrs.blur=d;e.id=j();bi(i,{stdDeviation:+d||1.5});e.appendChild(i);b.paper.defs.appendChild(e);
b._blur=e;bi(b.node,{filter:"url(#"+e.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);
delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var af=function(d,b,R,E){var i=bi("circle");
d.canvas&&d.canvas[bl](i);var e=new aV(i,d);e.attrs={cx:b,cy:R,r:E,fill:"none",stroke:"#000"};
e.type="circle";bi(i,e.attrs);return e},bc=function(e,b,bI,d,R,S){var E=bi("rect");
e.canvas&&e.canvas[bl](E);var i=new aV(E,e);i.attrs={x:b,y:bI,width:d,height:R,r:S||0,rx:S||0,ry:S||0,fill:"none",stroke:"#000"};
i.type="rect";bi(E,i.attrs);return i},aA=function(d,b,S,R,E){var i=bi("ellipse");
d.canvas&&d.canvas[bl](i);var e=new aV(i,d);e.attrs={cx:b,cy:S,rx:R,ry:E,fill:"none",stroke:"#000"};
e.type="ellipse";bi(i,e.attrs);return e},w=function(e,S,b,bI,d,R){var E=bi("image");
bi(E,{x:b,y:bI,width:d,height:R,preserveAspectRatio:"none"});E.setAttributeNS(e.xlink,"href",S);
e.canvas&&e.canvas[bl](E);var i=new aV(E,e);i.attrs={x:b,y:bI,width:d,height:R,src:S};
i.type="image";return i},al=function(d,b,R,E){var i=bi("text");bi(i,{x:b,y:R,"text-anchor":"middle"});
d.canvas&&d.canvas[bl](i);var e=new aV(i,d);e.attrs={x:b,y:R,"text-anchor":"middle",text:E,font:q.font,stroke:"none",fill:"#000"};
e.type="text";ao(e,e.attrs);return e},bB=function(d,b){this.width=d||this.width;this.height=b||this.height;
this.canvas[F]("width",this.width);this.canvas[F]("height",this.height);return this
},G=function(){var i=aK[bC](0,arguments),e=i&&i.container,d=i.x,S=i.y,E=i.width,b=i.height;
if(!e){throw new Error("SVG container not found.")}var R=bi("svg");d=d||0;S=S||0;
E=E||512;b=b||342;bi(R,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:E,height:b});
if(e==1){R.style.cssText="position:absolute;left:"+d+"px;top:"+S+"px";ab.body[bl](R)
}else{if(e.firstChild){e.insertBefore(R,e.firstChild)}else{e[bl](R)}}e=new bA;e.width=E;
e.height=b;e.canvas=R;bf.call(e,e,aJ.fn);e.clear();return e};a0.clear=function(){var b=this.canvas;
while(b.firstChild){b.removeChild(b.firstChild)}this.bottom=this.top=null;(this.desc=bi("desc"))[bl](ab.createTextNode("Created with Rapha\xebl"));
b[bl](this.desc);b[bl](this.defs=bi("defs"))};a0.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);
for(var b in this){this[b]=A(b)}}}if(aJ.vml){var O={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},aO=/([clmz]),?([^clmz]*)/gi,by=/ progid:\S+Blur\([^\)]+\)/g,bG=/-?[^,\s-]+/g,aY=1000+aI+1000,v=10,u={path:1,rect:1},bh=function(bM){var bJ=/[ahqstv]/ig,e=z;
bD(bM).match(bJ)&&(e=W);bJ=/[clmz]/g;if(e==z&&!bD(bM).match(bJ)){var bI=bD(bM)[bt](aO,function(bP,bR,bN){var bQ=[],i=bH.call(bR)=="m",bO=O[bR];
bN[bt](bG,function(bS){if(i&&bQ[s]==2){bO+=bQ+O[bR=="m"?"l":"L"];bQ=[]}bQ[k](ae(bS*v))
});return bO+bQ});return bI}var bK=e(bM),d,b;bI=[];for(var R=0,bL=bK[s];R<bL;R++){d=bK[R];
b=bH.call(bK[R][0]);b=="z"&&(b="x");for(var E=1,S=d[s];E<S;E++){b+=ae(d[E]*v)+(E!=S-1?",":aQ)
}bI[k](b)}return bI[aX](aI)};aJ[a1]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version
};y=function(e,d){var R=az("group");R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";
R.coordsize=d.coordsize;R.coordorigin=d.coordorigin;var E=az("shape"),i=E.style;i.width=d.width+"px";
i.height=d.height+"px";E.coordsize=aY;E.coordorigin=d.coordorigin;R[bl](E);var S=new aV(E,R,d),b={fill:"none",stroke:"#000"};
e&&(b.path=e);S.type="path";S.path=[];S.Path=aQ;ao(S,b);d.canvas[bl](R);return S};
ao=function(bK,bR){bK.attrs=bK.attrs||{};var bO=bK.node,bS=bK.attrs,S=bO.style,i,bQ=(bR.x!=bS.x||bR.y!=bS.y||bR.width!=bS.width||bR.height!=bS.height||bR.r!=bS.r)&&bK.type=="rect",bW=bK;
for(var bI in bR){if(bR[ah](bI)){bS[bI]=bR[bI]}}if(bQ){bS.path=au(bS.x,bS.y,bS.width,bS.height,bS.r);
bK.X=bS.x;bK.Y=bS.y;bK.W=bS.width;bK.H=bS.height}bR.href&&(bO.href=bR.href);bR.title&&(bO.title=bR.title);
bR.target&&(bO.target=bR.target);bR.cursor&&(S.cursor=bR.cursor);"blur" in bR&&bK.blur(bR.blur);
if(bR.path&&bK.type=="path"||bQ){bO.path=bh(bS.path)}if(bR.rotation!=null){bK.rotate(bR.rotation,true)
}if(bR.translation){i=bD(bR.translation)[J](a);B.call(bK,i[0],i[1]);if(bK._.rt.cx!=null){bK._.rt.cx+=+i[0];
bK._.rt.cy+=+i[1];bK.setBox(bK.attrs,i[0],i[1])}}if(bR.scale){i=bD(bR.scale)[J](a);
bK.scale(+i[0]||1,+i[1]||+i[0]||1,+i[2]||null,+i[3]||null)}if("clip-rect" in bR){var b=bD(bR["clip-rect"])[J](a);
if(b[s]==4){b[2]=+b[2]+(+b[0]);b[3]=+b[3]+(+b[1]);var bJ=bO.clipRect||ab.createElement("div"),bV=bJ.style,R=bO.parentNode;
bV.clip=aJ.format("rect({1}px {2}px {3}px {0}px)",b);if(!bO.clipRect){bV.position="absolute";
bV.top=0;bV.left=0;bV.width=bK.paper.width+"px";bV.height=bK.paper.height+"px";R.parentNode.insertBefore(bJ,R);
bJ[bl](R);bO.clipRect=bJ}}if(!bR["clip-rect"]){bO.clipRect&&(bO.clipRect.style.clip=aQ)
}}if(bK.type=="image"&&bR.src){bO.src=bR.src}if(bK.type=="image"&&bR.opacity){bO.filterOpacity=a6+".Alpha(opacity="+(bR.opacity*100)+")";
S.filter=(bO.filterMatrix||aQ)+(bO.filterOpacity||aQ)}bR.font&&(S.font=bR.font);bR["font-family"]&&(S.fontFamily='"'+bR["font-family"][J](",")[0][bt](/^['"]+|['"]+$/g,aQ)+'"');
bR["font-size"]&&(S.fontSize=bR["font-size"]);bR["font-weight"]&&(S.fontWeight=bR["font-weight"]);
bR["font-style"]&&(S.fontStyle=bR["font-style"]);if(bR.opacity!=null||bR["stroke-width"]!=null||bR.fill!=null||bR.stroke!=null||bR["stroke-width"]!=null||bR["stroke-opacity"]!=null||bR["fill-opacity"]!=null||bR["stroke-dasharray"]!=null||bR["stroke-miterlimit"]!=null||bR["stroke-linejoin"]!=null||bR["stroke-linecap"]!=null){bO=bK.shape||bO;
var bP=(bO.getElementsByTagName(a5)&&bO.getElementsByTagName(a5)[0]),bT=false;!bP&&(bT=bP=az(a5));
if("fill-opacity" in bR||"opacity" in bR){var d=((+bS["fill-opacity"]+1||2)-1)*((+bS.opacity+1||2)-1)*((+aJ.getRGB(bR.fill).o+1||2)-1);
d=bj(m(d,0),1);bP.opacity=d}bR.fill&&(bP.on=true);if(bP.on==null||bR.fill=="none"){bP.on=false
}if(bP.on&&bR.fill){var e=bR.fill.match(h);if(e){bP.src=e[1];bP.type="tile"}else{bP.color=aJ.getRGB(bR.fill).hex;
bP.src=aQ;bP.type="solid";if(aJ.getRGB(bR.fill).error&&(bW.type in {circle:1,ellipse:1}||bD(bR.fill).charAt()!="r")&&g(bW,bR.fill)){bS.fill="none";
bS.gradient=bR.fill}}}bT&&bO[bl](bP);var E=(bO.getElementsByTagName("stroke")&&bO.getElementsByTagName("stroke")[0]),bU=false;
!E&&(bU=E=az("stroke"));if((bR.stroke&&bR.stroke!="none")||bR["stroke-width"]||bR["stroke-opacity"]!=null||bR["stroke-dasharray"]||bR["stroke-miterlimit"]||bR["stroke-linejoin"]||bR["stroke-linecap"]){E.on=true
}(bR.stroke=="none"||E.on==null||bR.stroke==0||bR["stroke-width"]==0)&&(E.on=false);
var bN=aJ.getRGB(bR.stroke);E.on&&bR.stroke&&(E.color=bN.hex);d=((+bS["stroke-opacity"]+1||2)-1)*((+bS.opacity+1||2)-1)*((+bN.o+1||2)-1);
var bL=(ak(bR["stroke-width"])||1)*0.75;d=bj(m(d,0),1);bR["stroke-width"]==null&&(bL=bS["stroke-width"]);
bR["stroke-width"]&&(E.weight=bL);bL&&bL<1&&(d*=bL)&&(E.weight=1);E.opacity=d;bR["stroke-linejoin"]&&(E.joinstyle=bR["stroke-linejoin"]||"miter");
E.miterlimit=bR["stroke-miterlimit"]||8;bR["stroke-linecap"]&&(E.endcap=bR["stroke-linecap"]=="butt"?"flat":bR["stroke-linecap"]=="square"?"square":"round");
if(bR["stroke-dasharray"]){var bM={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};
E.dashstyle=bM[ah](bR["stroke-dasharray"])?bM[bR["stroke-dasharray"]]:aQ}bU&&bO[bl](E)
}if(bW.type=="text"){S=bW.paper.span.style;bS.font&&(S.font=bS.font);bS["font-family"]&&(S.fontFamily=bS["font-family"]);
bS["font-size"]&&(S.fontSize=bS["font-size"]);bS["font-weight"]&&(S.fontWeight=bS["font-weight"]);
bS["font-style"]&&(S.fontStyle=bS["font-style"]);bW.node.string&&(bW.paper.span.innerHTML=bD(bW.node.string)[bt](/</g,"&#60;")[bt](/&/g,"&#38;")[bt](/\n/g,"<br>"));
bW.W=bS.w=bW.paper.span.offsetWidth;bW.H=bS.h=bW.paper.span.offsetHeight;bW.X=bS.x;
bW.Y=bS.y+ae(bW.H/2);switch(bS["text-anchor"]){case"start":bW.node.style["v-text-align"]="left";
bW.bbx=ae(bW.W/2);break;case"end":bW.node.style["v-text-align"]="right";bW.bbx=-ae(bW.W/2);
break;default:bW.node.style["v-text-align"]="center";break}}};g=function(b,bI){b.attrs=b.attrs||{};
var bJ=b.attrs,bL,R="linear",S=".5 .5";b.attrs.gradient=bI;bI=bD(bI)[bt](aP,function(bN,bO,i){R="radial";
if(bO&&i){bO=ak(bO);i=ak(i);bm(bO-0.5,2)+bm(i-0.5,2)>0.25&&(i=ap.sqrt(0.25-bm(bO-0.5,2))*((i>0.5)*2-1)+0.5);
S=bO+aI+i}return aQ});bI=bI[J](/\s*\-\s*/);if(R=="linear"){var d=bI.shift();d=-ak(d);
if(isNaN(d)){return null}}var E=x(bI);if(!E){return null}b=b.shape||b.node;bL=b.getElementsByTagName(a5)[0]||az(a5);
!bL.parentNode&&b.appendChild(bL);if(E[s]){bL.on=true;bL.method="none";bL.color=E[0].color;
bL.color2=E[E[s]-1].color;var bM=[];for(var e=0,bK=E[s];e<bK;e++){E[e].offset&&bM[k](E[e].offset+aI+E[e].color)
}bL.colors&&(bL.colors.value=bM[s]?bM[aX]():"0% "+bL.color);if(R=="radial"){bL.type="gradientradial";
bL.focus="100%";bL.focussize=S;bL.focusposition=S}else{bL.type="gradient";bL.angle=(270-d)%360
}}return 1};aV=function(E,S,b){var R=0,e=0,d=0,i=1;this[0]=E;this.id=aJ._oid++;this.node=E;
E.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=S;this.paper=b;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};
!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null
};bd=aV[bF];bd.rotate=function(d,b,e){if(this.removed){return this}if(d==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)
}return this._.rt.deg}d=bD(d)[J](a);if(d[s]-1){b=ak(d[1]);e=ak(d[2])}d=ak(d[0]);if(b!=null){this._.rt.deg=d
}else{this._.rt.deg+=d}e==null&&(b=null);this._.rt.cx=b;this._.rt.cy=e;this.setBox(this.attrs,b,e);
this.Group.style.rotation=this._.rt.deg;return this};bd.setBox=function(E,R,e){if(this.removed){return this
}var b=this.Group.style,S=(this.shape&&this.shape.style)||this.node.style;E=E||{};
for(var bI in E){if(E[ah](bI)){this.attrs[bI]=E[bI]}}R=R||this._.rt.cx;e=e||this._.rt.cy;
var bL=this.attrs,bO,bN,bP,bK;switch(this.type){case"circle":bO=bL.cx-bL.r;bN=bL.cy-bL.r;
bP=bK=bL.r*2;break;case"ellipse":bO=bL.cx-bL.rx;bN=bL.cy-bL.ry;bP=bL.rx*2;bK=bL.ry*2;
break;case"image":bO=+bL.x;bN=+bL.y;bP=bL.width||0;bK=bL.height||0;break;case"text":this.textpath.v=["m",ae(bL.x),", ",ae(bL.y-2),"l",ae(bL.x)+1,", ",ae(bL.y-2)][aX](aQ);
bO=bL.x-ae(this.W/2);bN=bL.y-this.H/2;bP=this.W;bK=this.H;break;case"rect":case"path":if(!this.attrs.path){bO=0;
bN=0;bP=this.paper.width;bK=this.paper.height}else{var bJ=aj(this.attrs.path);bO=bJ.x;
bN=bJ.y;bP=bJ.width;bK=bJ.height}break;default:bO=0;bN=0;bP=this.paper.width;bK=this.paper.height;
break}R=(R==null)?bO+bP/2:R;e=(e==null)?bN+bK/2:e;var d=R-this.paper.width/2,bM=e-this.paper.height/2,bQ;
b.left!=(bQ=d+"px")&&(b.left=bQ);b.top!=(bQ=bM+"px")&&(b.top=bQ);this.X=u[ah](this.type)?-d:bO;
this.Y=u[ah](this.type)?-bM:bN;this.W=bP;this.H=bK;if(u[ah](this.type)){S.left!=(bQ=-d*v+"px")&&(S.left=bQ);
S.top!=(bQ=-bM*v+"px")&&(S.top=bQ)}else{if(this.type=="text"){S.left!=(bQ=-d+"px")&&(S.left=bQ);
S.top!=(bQ=-bM+"px")&&(S.top=bQ)}else{b.width!=(bQ=this.paper.width+"px")&&(b.width=bQ);
b.height!=(bQ=this.paper.height+"px")&&(b.height=bQ);S.left!=(bQ=bO-d+"px")&&(S.left=bQ);
S.top!=(bQ=bN-bM+"px")&&(S.top=bQ);S.width!=(bQ=bP+"px")&&(S.width=bQ);S.height!=(bQ=bK+"px")&&(S.height=bQ)
}}};bd.hide=function(){!this.removed&&(this.Group.style.display="none");return this
};bd.show=function(){!this.removed&&(this.Group.style.display="block");return this
};bd.getBBox=function(){if(this.removed){return this}if(u[ah](this.type)){return aj(this.attrs.path)
}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};bd.remove=function(){if(this.removed){return
}aF(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);
this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){delete this[b]
}this.removed=true};bd.attr=function(b,bI){if(this.removed){return this}if(b==null){var S={};
for(var E in this.attrs){if(this.attrs[ah](E)){S[E]=this.attrs[E]}}this._.rt.deg&&(S.rotation=this.rotate());
(this._.sx!=1||this._.sy!=1)&&(S.scale=this.scale());S.gradient&&S.fill=="none"&&(S.fill=S.gradient)&&delete S.gradient;
return S}if(bI==null&&aJ.is(b,"string")){if(b=="translation"){return B.call(this)
}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient
}return this.attrs[b]}if(this.attrs&&bI==null&&aJ.is(b,a8)){var bL,bK={};for(E=0,bL=b[s];
E<bL;E++){bK[b[E]]=this.attr(b[E])}return bK}var d;if(bI!=null){d={};d[b]=bI}bI==null&&aJ.is(b,"object")&&(d=b);
if(d){for(var bJ in this.paper.customAttributes){if(this.paper.customAttributes[ah](bJ)&&d[ah](bJ)&&aJ.is(this.paper.customAttributes[bJ],"function")){var R=this.paper.customAttributes[bJ].apply(this,[][bx](d[bJ]));
this.attrs[bJ]=d[bJ];for(var e in R){if(R[ah](e)){d[e]=R[e]}}}}if(d.text&&this.type=="text"){this.node.string=d.text
}ao(this,d);if(d.gradient&&(({circle:1,ellipse:1})[ah](this.type)||bD(d.gradient).charAt()!="r")){g(this,d.gradient)
}(!u[ah](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};bd.toFront=function(){!this.removed&&this.Group.parentNode[bl](this.Group);
this.paper.top!=this&&am(this,this.paper);return this};bd.toBack=function(){if(this.removed){return this
}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);
p(this,this.paper)}return this};bd.insertAfter=function(b){if(this.removed){return this
}if(b.constructor==ai){b=b[b.length-1]}if(b.Group.nextSibling){b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling)
}else{b.Group.parentNode[bl](this.Group)}K(this,b,this.paper);return this};bd.insertBefore=function(b){if(this.removed){return this
}if(b.constructor==ai){b=b[0]}b.Group.parentNode.insertBefore(this.Group,b.Group);
aM(this,b,this.paper);return this};bd.blur=function(b){var d=this.node.runtimeStyle,e=d.filter;
e=e.replace(by,aQ);if(+b!==0){this.attrs.blur=b;d.filter=e+aI+a6+".Blur(pixelradius="+(+b||1.5)+")";
d.margin=aJ.format("-{0}px 0 0 -{0}px",ae(+b||1.5))}else{d.filter=e;d.margin=0;delete this.attrs.blur
}};af=function(d,b,bI,R){var E=az("group"),S=az("oval"),e=S.style;E.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";
E.coordsize=aY;E.coordorigin=d.coordorigin;E[bl](S);var i=new aV(S,E,d);i.type="circle";
ao(i,{stroke:"#000",fill:"none"});i.attrs.cx=b;i.attrs.cy=bI;i.attrs.r=R;i.setBox({x:b-R,y:bI-R,width:R*2,height:R*2});
d.canvas[bl](E);return i};function au(b,E,d,e,i){if(i){return aJ.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+i,E,d-i*2,i,-i,e-i*2,i*2-d,i*2-e)
}else{return aJ.format("M{0},{1}l{2},0,0,{3},{4},0z",b,E,d,e,-d)}}bc=function(d,S,E,bI,e,b){var bJ=au(S,E,bI,e,b),i=d.path(bJ),R=i.attrs;
i.X=R.x=S;i.Y=R.y=E;i.W=R.width=bI;i.H=R.height=e;R.r=b;R.path=bJ;i.type="rect";return i
};aA=function(b,bJ,bI,e,d){var E=az("group"),i=az("oval"),S=i.style;E.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";
E.coordsize=aY;E.coordorigin=b.coordorigin;E[bl](i);var R=new aV(i,E,b);R.type="ellipse";
ao(R,{stroke:"#000"});R.attrs.cx=bJ;R.attrs.cy=bI;R.attrs.rx=e;R.attrs.ry=d;R.setBox({x:bJ-e,y:bI-d,width:e*2,height:d*2});
b.canvas[bl](E);return R};w=function(d,b,bI,S,bJ,i){var E=az("group"),e=az("image");
E.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";
E.coordsize=aY;E.coordorigin=d.coordorigin;e.src=b;E[bl](e);var R=new aV(e,E,d);R.type="image";
R.attrs.src=b;R.attrs.x=bI;R.attrs.y=S;R.attrs.w=bJ;R.attrs.h=i;R.setBox({x:bI,y:S,width:bJ,height:i});
d.canvas[bl](E);return R};al=function(d,bJ,bI,bK){var E=az("group"),i=az("shape"),S=i.style,bL=az("path"),b=bL.style,e=az("textpath");
E.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";
E.coordsize=aY;E.coordorigin=d.coordorigin;bL.v=aJ.format("m{0},{1}l{2},{1}",ae(bJ*10),ae(bI*10),ae(bJ*10)+1);
bL.textpathok=true;S.width=d.width;S.height=d.height;e.string=bD(bK);e.on=true;i[bl](e);
i[bl](bL);E[bl](i);var R=new aV(e,E,d);R.shape=i;R.textpath=bL;R.type="text";R.attrs.text=bK;
R.attrs.x=bJ;R.attrs.y=bI;R.attrs.w=1;R.attrs.h=1;ao(R,{font:q.font,stroke:"none",fill:"#000"});
R.setBox();d.canvas[bl](E);return R};bB=function(e,b){var d=this.canvas.style;e==+e&&(e+="px");
b==+b&&(b+="px");d.width=e;d.height=b;d.clip="rect(0 "+e+" "+b+" 0)";return this};
var az;ab.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!ab.namespaces.rvml&&ab.namespaces.add("rvml","urn:schemas-microsoft-com:vml");
az=function(b){return ab.createElement("<rvml:"+b+' class="rvml">')}}catch(ax){az=function(b){return ab.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')
}}G=function(){var e=aK[bC](0,arguments),b=e.container,bJ=e.height,bK,d=e.width,bI=e.x,S=e.y;
if(!b){throw new Error("VML container not found.")}var E=new bA,R=E.canvas=ab.createElement("div"),i=R.style;
bI=bI||0;S=S||0;d=d||512;bJ=bJ||342;d==+d&&(d+="px");bJ==+bJ&&(bJ+="px");E.width=1000;
E.height=1000;E.coordsize=v*1000+aI+v*1000;E.coordorigin="0 0";E.span=ab.createElement("span");
E.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
R[bl](E.span);i.cssText=aJ.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",d,bJ);
if(b==1){ab.body[bl](R);i.left=bI+"px";i.top=S+"px";i.position="absolute"}else{if(b.firstChild){b.insertBefore(R,b.firstChild)
}else{b[bl](R)}}bf.call(E,E,aJ.fn);return E};a0.clear=function(){this.canvas.innerHTML=aQ;
this.span=ab.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
this.canvas[bl](this.span);this.bottom=this.top=null};a0.remove=function(){this.canvas.parentNode.removeChild(this.canvas);
for(var b in this){this[b]=A(b)}return true}}var V=navigator.userAgent.match(/Version\/(.*?)\s/);
if((navigator.vendor=="Apple Computer, Inc.")&&(V&&V[1]<4||navigator.platform.slice(0,2)=="iP")){a0.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});
aR.setTimeout(function(){b.remove()})}}else{a0.safari=function(){}}var P=function(){this.returnValue=false
},bw=function(){return this.originalEvent.preventDefault()},a4=function(){this.cancelBubble=true
},aE=function(){return this.originalEvent.stopPropagation()},aw=(function(){if(ab.addEventListener){return function(R,i,e,d){var b=X&&br[i]?br[i]:i;
var E=function(bK){if(X&&br[ah](i)){for(var bI=0,bJ=bK.targetTouches&&bK.targetTouches.length;
bI<bJ;bI++){if(bK.targetTouches[bI].target==R){var S=bK;bK=bK.targetTouches[bI];bK.originalEvent=S;
bK.preventDefault=bw;bK.stopPropagation=aE;break}}}return e.call(d,bK)};R.addEventListener(b,E,false);
return function(){R.removeEventListener(b,E,false);return true}}}else{if(ab.attachEvent){return function(R,i,e,d){var E=function(S){S=S||aR.event;
S.preventDefault=S.preventDefault||P;S.stopPropagation=S.stopPropagation||a4;return e.call(d,S)
};R.attachEvent("on"+i,E);var b=function(){R.detachEvent("on"+i,E);return true};return b
}}}})(),a9=[],bs=function(S){var bJ=S.clientX,bI=S.clientY,bK=ab.documentElement.scrollTop||ab.body.scrollTop,bL=ab.documentElement.scrollLeft||ab.body.scrollLeft,b,d=a9.length;
while(d--){b=a9[d];if(X){var R=S.touches.length,E;while(R--){E=S.touches[R];if(E.identifier==b.el._drag.id){bJ=E.clientX;
bI=E.clientY;(S.originalEvent?S.originalEvent:S).preventDefault();break}}}else{S.preventDefault()
}bJ+=bL;bI+=bK;b.move&&b.move.call(b.move_scope||b.el,bJ-b.el._drag.x,bI-b.el._drag.y,bJ,bI,S)
}},f=function(E){aJ.unmousemove(bs).unmouseup(f);var d=a9.length,b;while(d--){b=a9[d];
b.el._drag={};b.end&&b.end.call(b.end_scope||b.start_scope||b.move_scope||b.el,E)
}a9=[]};for(var at=T[s];at--;){(function(b){aJ[b]=aV[bF][b]=function(e,d){if(aJ.is(e,"function")){this.events=this.events||[];
this.events.push({name:b,f:e,unbind:aw(this.shape||this.node||ab,b,e,d||this)})}return this
};aJ["un"+b]=aV[bF]["un"+b]=function(i){var e=this.events,d=e[s];while(d--){if(e[d].name==b&&e[d].f==i){e[d].unbind();
e.splice(d,1);!e.length&&delete this.events;return this}}return this}})(T[at])}bd.hover=function(i,b,e,d){return this.mouseover(i,e).mouseout(b,d||e)
};bd.unhover=function(d,b){return this.unmouseover(d).unmouseout(b)};bd.drag=function(d,R,E,b,e,i){this._drag={};
this.mousedown(function(bI){(bI.originalEvent||bI).preventDefault();var S=ab.documentElement.scrollTop||ab.body.scrollTop,bJ=ab.documentElement.scrollLeft||ab.body.scrollLeft;
this._drag.x=bI.clientX+bJ;this._drag.y=bI.clientY+S;this._drag.id=bI.identifier;
R&&R.call(e||b||this,bI.clientX+bJ,bI.clientY+S,bI);!a9.length&&aJ.mousemove(bs).mouseup(f);
a9.push({el:this,move:d,end:E,move_scope:b,start_scope:e,end_scope:i})});return this
};bd.undrag=function(b,E,e){var d=a9.length;while(d--){a9[d].el==this&&(a9[d].move==b&&a9[d].end==e)&&a9.splice(d++,1)
}!a9.length&&aJ.unmousemove(bs).unmouseup(f)};a0.circle=function(b,e,d){return af(this,b||0,e||0,d||0)
};a0.rect=function(b,E,d,e,i){return bc(this,b||0,E||0,d||0,e||0,i||0)};a0.ellipse=function(b,i,e,d){return aA(this,b||0,i||0,e||0,d||0)
};a0.path=function(b){b&&!aJ.is(b,ag)&&!aJ.is(b[0],a8)&&(b+=aQ);return y(aJ.format[bC](aJ,arguments),this)
};a0.image=function(i,b,E,d,e){return w(this,i||"about:blank",b||0,E||0,d||0,e||0)
};a0.text=function(b,e,d){return al(this,b||0,e||0,bD(d))};a0.set=function(b){arguments[s]>1&&(b=Array[bF].splice.call(arguments,0,arguments[s]));
return new ai(b)};a0.setSize=bB;a0.top=a0.bottom=null;a0.raphael=aJ;function D(){return this.x+aI+this.y
}bd.resetScale=function(){if(this.removed){return this}this._.sx=1;this._.sy=1;this.attrs.scale="1 1"
};bd.scale=function(b0,bZ,bR,bP){if(this.removed){return this}if(b0==null&&bZ==null){return{x:this._.sx,y:this._.sy,toString:D}
}bZ=bZ||b0;!+bZ&&(bZ=b0);var d,b,b8,b7,cb=this.attrs;if(b0!=0){var cc=this.getBBox(),E=cc.x+cc.width/2,e=cc.y+cc.height/2,b5=ar(b0/this._.sx),b4=ar(bZ/this._.sy);
bR=(+bR||bR==0)?bR:E;bP=(+bP||bP==0)?bP:e;var bK=this._.sx>0,bJ=this._.sy>0,bQ=~~(b0/ar(b0)),bO=~~(bZ/ar(bZ)),S=b5*bQ,R=b4*bO,b1=this.node.style,bY=bR+ar(E-bR)*S*(E>bR==bK?1:-1),bX=bP+ar(e-bP)*R*(e>bP==bJ?1:-1),bU=(b0*bQ>bZ*bO?b4:b5);
switch(this.type){case"rect":case"image":var bM=cb.width*b5,bV=cb.height*b4;this.attr({height:bV,r:cb.r*bU,width:bM,x:bY-bM/2,y:bX-bV/2});
break;case"circle":case"ellipse":this.attr({rx:cb.rx*b5,ry:cb.ry*b4,r:cb.r*bU,cx:bY,cy:bX});
break;case"text":this.attr({x:bY,y:bX});break;case"path":var b3=av(cb.path),bL=true,bT=bK?S:b5,bS=bJ?R:b4;
for(var ca=0,bW=b3[s];ca<bW;ca++){var b6=b3[ca],bN=bp.call(b6[0]);if(bN=="M"&&bL){continue
}else{bL=false}if(bN=="A"){b6[b3[ca][s]-2]*=bT;b6[b3[ca][s]-1]*=bS;b6[1]*=b5;b6[2]*=b4;
b6[5]=+(bQ+bO?!!+b6[5]:!+b6[5])}else{if(bN=="H"){for(var b9=1,bI=b6[s];b9<bI;b9++){b6[b9]*=bT
}}else{if(bN=="V"){for(b9=1,bI=b6[s];b9<bI;b9++){b6[b9]*=bS}}else{for(b9=1,bI=b6[s];
b9<bI;b9++){b6[b9]*=(b9%2)?bT:bS}}}}}var b2=aj(b3);d=bY-b2.x-b2.width/2;b=bX-b2.y-b2.height/2;
b3[0][1]+=d;b3[0][2]+=b;this.attr({path:b3});break}if(this.type in {text:1,image:1}&&(bQ!=1||bO!=1)){if(this.transformations){this.transformations[2]="scale("[bx](bQ,",",bO,")");
this.node[F]("transform",this.transformations[aX](aI));d=(bQ==-1)?-cb.x-(bM||0):cb.x;
b=(bO==-1)?-cb.y-(bV||0):cb.y;this.attr({x:d,y:b});cb.fx=bQ-1;cb.fy=bO-1}else{this.node.filterMatrix=a6+".Matrix(M11="[bx](bQ,", M12=0, M21=0, M22=",bO,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");
b1.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}else{if(this.transformations){this.transformations[2]=aQ;
this.node[F]("transform",this.transformations[aX](aI));cb.fx=0;cb.fy=0}else{this.node.filterMatrix=aQ;
b1.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}cb.scale=[b0,bZ,bR,bP][aX](aI);
this._.sx=b0;this._.sy=bZ}return this};bd.clone=function(){if(this.removed){return null
}var b=this.attr();delete b.scale;delete b.translation;return this.paper[this.type]().attr(b)
};var a3={},l=function(R,d,bK,bJ,bS,bR,bQ,bO,S){var bN=0,bM=100,E=[R,d,bK,bJ,bS,bR,bQ,bO].join(),b=a3[E],bI,e;
!b&&(a3[E]=b={data:[]});b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){delete a3[E]
},2000);if(S!=null){var bP=l(R,d,bK,bJ,bS,bR,bQ,bO);bM=~~bP*10}for(var bL=0;bL<bM+1;
bL++){if(b.data[S]>bL){e=b.data[bL*bM]}else{e=aJ.findDotsAtSegment(R,d,bK,bJ,bS,bR,bQ,bO,bL/bM);
b.data[bL]=e}bL&&(bN+=bm(bm(bI.x-e.x,2)+bm(bI.y-e.y,2),0.5));if(S!=null&&bN>=S){return e
}bI=e}if(S==null){return bN}},a2=function(b,d){return function(bQ,R,S){bQ=W(bQ);var bM,bL,e,bI,E="",bP={},bN,bK=0;
for(var bJ=0,bO=bQ.length;bJ<bO;bJ++){e=bQ[bJ];if(e[0]=="M"){bM=+e[1];bL=+e[2]}else{bI=l(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6]);
if(bK+bI>R){if(d&&!bP.start){bN=l(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6],R-bK);E+=["C",bN.start.x,bN.start.y,bN.m.x,bN.m.y,bN.x,bN.y];
if(S){return E}bP.start=E;E=["M",bN.x,bN.y+"C",bN.n.x,bN.n.y,bN.end.x,bN.end.y,e[5],e[6]][aX]();
bK+=bI;bM=+e[5];bL=+e[6];continue}if(!b&&!d){bN=l(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6],R-bK);
return{x:bN.x,y:bN.y,alpha:bN.alpha}}}bK+=bI;bM=+e[5];bL=+e[6]}E+=e}bP.end=E;bN=b?bK:d?bP:aJ.findDotsAtSegment(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6],1);
bN.alpha&&(bN={x:bN.x,y:bN.y,alpha:bN.alpha});return bN}};var aL=a2(1),M=a2(),Z=a2(0,1);
bd.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()
}return aL(this.attrs.path)};bd.getPointAtLength=function(b){if(this.type!="path"){return
}return M(this.attrs.path,b)};bd.getSubpath=function(e,d){if(this.type!="path"){return
}if(ar(this.getTotalLength()-d)<"1e-6"){return Z(this.attrs.path,e).end}var b=Z(this.attrs.path,d,1);
return e?Z(b,e).end:b};aJ.easing_formulas={linear:function(b){return b},"<":function(b){return bm(b,3)
},">":function(b){return bm(b-1,3)+1},"<>":function(b){b=b*2;if(b<1){return bm(b,3)/2
}b-=2;return(bm(b,3)+2)/2},backIn:function(d){var b=1.70158;return d*d*((b+1)*d-b)
},backOut:function(d){d=d-1;var b=1.70158;return d*d*((b+1)*d+b)+1},elastic:function(e){if(e==0||e==1){return e
}var d=0.3,b=d/4;return bm(2,-10*e)*ap.sin((e-b)*(2*aN)/d)+1},bounce:function(i){var d=7.5625,e=2.75,b;
if(i<(1/e)){b=d*i*i}else{if(i<(2/e)){i-=(1.5/e);b=d*i*i+0.75}else{if(i<(2.5/e)){i-=(2.25/e);
b=d*i*i+0.9375}else{i-=(2.625/e);b=d*i*i+0.984375}}}return b}};var Y=[],bv=function(){var bJ=+new Date;
for(var bU=0;bU<Y[s];bU++){var bZ=Y[bU];if(bZ.stop||bZ.el.removed){continue}var R=bJ-bZ.start,bR=bZ.ms,bQ=bZ.easing,bV=bZ.from,bO=bZ.diff,d=bZ.to,bN=bZ.t,bI=bZ.el,bP={},b;
if(R<bR){var E=bQ(R/bR);for(var bS in bV){if(bV[ah](bS)){switch(an[bS]){case"along":b=E*bR*bO[bS];
d.back&&(b=d.len-b);var bT=M(d[bS],b);bI.translate(bO.sx-bO.x||0,bO.sy-bO.y||0);bO.x=bT.x;
bO.y=bT.y;bI.translate(bT.x-bO.sx,bT.y-bO.sy);d.rot&&bI.rotate(bO.r+bT.alpha,bT.x,bT.y);
break;case aG:b=+bV[bS]+E*bR*bO[bS];break;case"colour":b="rgb("+[L(ae(bV[bS].r+E*bR*bO[bS].r)),L(ae(bV[bS].g+E*bR*bO[bS].g)),L(ae(bV[bS].b+E*bR*bO[bS].b))][aX](",")+")";
break;case"path":b=[];for(var bX=0,bM=bV[bS][s];bX<bM;bX++){b[bX]=[bV[bS][bX][0]];
for(var bW=1,bY=bV[bS][bX][s];bW<bY;bW++){b[bX][bW]=+bV[bS][bX][bW]+E*bR*bO[bS][bX][bW]
}b[bX]=b[bX][aX](aI)}b=b[aX](aI);break;case"csv":switch(bS){case"translation":var bL=E*bR*bO[bS][0]-bN.x,bK=E*bR*bO[bS][1]-bN.y;
bN.x+=bL;bN.y+=bK;b=bL+aI+bK;break;case"rotation":b=+bV[bS][0]+E*bR*bO[bS][0];bV[bS][1]&&(b+=","+bV[bS][1]+","+bV[bS][2]);
break;case"scale":b=[+bV[bS][0]+E*bR*bO[bS][0],+bV[bS][1]+E*bR*bO[bS][1],(2 in d[bS]?d[bS][2]:aQ),(3 in d[bS]?d[bS][3]:aQ)][aX](aI);
break;case"clip-rect":b=[];bX=4;while(bX--){b[bX]=+bV[bS][bX]+E*bR*bO[bS][bX]}break
}break;default:var S=[].concat(bV[bS]);b=[];bX=bI.paper.customAttributes[bS].length;
while(bX--){b[bX]=+S[bX]+E*bR*bO[bS][bX]}break}bP[bS]=b}}bI.attr(bP);bI._run&&bI._run.call(bI)
}else{if(d.along){bT=M(d.along,d.len*!d.back);bI.translate(bO.sx-(bO.x||0)+bT.x-bO.sx,bO.sy-(bO.y||0)+bT.y-bO.sy);
d.rot&&bI.rotate(bO.r+bT.alpha,bT.x,bT.y)}(bN.x||bN.y)&&bI.translate(-bN.x,-bN.y);
d.scale&&(d.scale+=aQ);bI.attr(d);Y.splice(bU--,1)}}aJ.svg&&bI&&bI.paper&&bI.paper.safari();
Y[s]&&setTimeout(bv)},bz=function(b,e,R,E,i){var d=R-E;e.timeouts.push(setTimeout(function(){aJ.is(i,"function")&&i.call(e);
e.animate(b,d,b.easing)},E))},L=function(b){return m(bj(b,255),0)},B=function(b,e){if(b==null){return{x:this._.tx,y:this._.ty,toString:D}
}this._.tx+=+b;this._.ty+=+e;switch(this.type){case"circle":case"ellipse":this.attr({cx:+b+this.attrs.cx,cy:+e+this.attrs.cy});
break;case"rect":case"image":case"text":this.attr({x:+b+this.attrs.x,y:+e+this.attrs.y});
break;case"path":var d=av(this.attrs.path);d[0][1]+=+b;d[0][2]+=+e;this.attr({path:d});
break}return this};bd.animateWith=function(e,R,b,bI,S){for(var d=0,E=Y.length;d<E;
d++){if(Y[d].el.id==e.id){R.start=Y[d].start}}return this.animate(R,b,bI,S)};bd.animateAlong=aW();
bd.animateAlongBack=aW(1);function aW(b){return function(i,e,d,R){var E={back:b};
aJ.is(d,"function")?(R=d):(E.rot=d);i&&i.constructor==aV&&(i=i.attrs.path);i&&(E.along=i);
return this.animate(E,e,R)}}function aZ(bO,i,d,bN,bM,bI){var bJ=3*i,bL=3*(bN-i)-bJ,b=1-bJ-bL,S=3*d,bK=3*(bM-d)-S,bP=1-S-bK;
function R(bQ){return((b*bQ+bL)*bQ+bJ)*bQ}function e(bQ,bS){var bR=E(bQ,bS);return((bP*bR+bK)*bR+S)*bR
}function E(bQ,bX){var bW,bV,bT,bR,bU,bS;for(bT=bQ,bS=0;bS<8;bS++){bR=R(bT)-bQ;if(ar(bR)<bX){return bT
}bU=(3*b*bT+2*bL)*bT+bJ;if(ar(bU)<0.000001){break}bT=bT-bR/bU}bW=0;bV=1;bT=bQ;if(bT<bW){return bW
}if(bT>bV){return bV}while(bW<bV){bR=R(bT);if(ar(bR-bQ)<bX){return bT}if(bQ>bR){bW=bT
}else{bV=bT}bT=(bV-bW)/2+bW}return bT}return e(bO,1/(200*bI))}bd.onAnimation=function(b){this._run=b||0;
return this};bd.animate=function(b1,bR,bQ,R){var d=this;d.timeouts=d.timeouts||[];
if(aJ.is(bQ,"function")||!bQ){R=bQ||null}if(d.removed){R&&R.call(d);return d}var bV={},e={},S=false,bM={};
for(var bS in b1){if(b1[ah](bS)){if(an[ah](bS)||d.paper.customAttributes[ah](bS)){S=true;
bV[bS]=d.attr(bS);(bV[bS]==null)&&(bV[bS]=q[bS]);e[bS]=b1[bS];switch(an[bS]){case"along":var bZ=aL(b1[bS]);
var bT=M(b1[bS],bZ*!!b1.back);var bI=d.getBBox();bM[bS]=bZ/bR;bM.tx=bI.x;bM.ty=bI.y;
bM.sx=bT.x;bM.sy=bT.y;e.rot=b1.rot;e.back=b1.back;e.len=bZ;b1.rot&&(bM.r=ak(d.rotate())||0);
break;case aG:bM[bS]=(e[bS]-bV[bS])/bR;break;case"colour":bV[bS]=aJ.getRGB(bV[bS]);
var bU=aJ.getRGB(e[bS]);bM[bS]={r:(bU.r-bV[bS].r)/bR,g:(bU.g-bV[bS].g)/bR,b:(bU.b-bV[bS].b)/bR};
break;case"path":var bJ=W(bV[bS],e[bS]);bV[bS]=bJ[0];var bO=bJ[1];bM[bS]=[];for(var bY=0,bL=bV[bS][s];
bY<bL;bY++){bM[bS][bY]=[0];for(var bX=1,b0=bV[bS][bY][s];bX<b0;bX++){bM[bS][bY][bX]=(bO[bY][bX]-bV[bS][bY][bX])/bR
}}break;case"csv":var b=bD(b1[bS])[J](a),bK=bD(bV[bS])[J](a);switch(bS){case"translation":bV[bS]=[0,0];
bM[bS]=[b[0]/bR,b[1]/bR];break;case"rotation":bV[bS]=(bK[1]==b[1]&&bK[2]==b[2])?bK:[0,b[1],b[2]];
bM[bS]=[(b[0]-bV[bS][0])/bR,0,0];break;case"scale":b1[bS]=b;bV[bS]=bD(bV[bS])[J](a);
bM[bS]=[(b[0]-bV[bS][0])/bR,(b[1]-bV[bS][1])/bR,0,0];break;case"clip-rect":bV[bS]=bD(bV[bS])[J](a);
bM[bS]=[];bY=4;while(bY--){bM[bS][bY]=(b[bY]-bV[bS][bY])/bR}break}e[bS]=b;break;default:b=[].concat(b1[bS]);
bK=[].concat(bV[bS]);bM[bS]=[];bY=d.paper.customAttributes[bS][s];while(bY--){bM[bS][bY]=((b[bY]||0)-(bK[bY]||0))/bR
}break}}}}if(!S){var bP=[],E;for(var b2 in b1){if(b1[ah](b2)&&bg.test(b2)){bS={value:b1[b2]};
b2=="from"&&(b2=0);b2=="to"&&(b2=100);bS.key=U(b2,10);bP.push(bS)}}bP.sort(bn);if(bP[0].key){bP.unshift({key:0,value:d.attrs})
}for(bY=0,bL=bP[s];bY<bL;bY++){bz(bP[bY].value,d,bR/100*bP[bY].key,bR/100*(bP[bY-1]&&bP[bY-1].key||0),bP[bY-1]&&bP[bY-1].value.callback)
}E=bP[bP[s]-1].value.callback;if(E){d.timeouts.push(setTimeout(function(){E.call(d)
},bR))}}else{var bW=aJ.easing_formulas[bQ];if(!bW){bW=bD(bQ).match(c);if(bW&&bW[s]==5){var bN=bW;
bW=function(i){return aZ(i,+bN[1],+bN[2],+bN[3],+bN[4],bR)}}else{bW=function(i){return i
}}}Y.push({start:b1.start||+new Date,ms:bR,easing:bW,from:bV,diff:bM,to:e,el:d,t:{x:0,y:0}});
aJ.is(R,"function")&&(d._ac=setTimeout(function(){R.call(d)},bR));Y[s]==1&&setTimeout(bv)
}return this};bd.stop=function(){for(var b=0;b<Y.length;b++){Y[b].el.id==this.id&&Y.splice(b--,1)
}for(b=0,ii=this.timeouts&&this.timeouts.length;b<ii;b++){clearTimeout(this.timeouts[b])
}this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};bd.translate=function(b,d){return this.attr({translation:b+" "+d})
};bd[a1]=function(){return"Rapha\xebl\u2019s object"};aJ.ae=Y;var ai=function(b){this.items=[];
this[s]=0;this.type="set";if(b){for(var d=0,e=b[s];d<e;d++){if(b[d]&&(b[d].constructor==aV||b[d].constructor==ai)){this[this.items[s]]=this.items[this.items[s]]=b[d];
this[s]++}}}};ai[bF][k]=function(){var E,b;for(var d=0,e=arguments[s];d<e;d++){E=arguments[d];
if(E&&(E.constructor==aV||E.constructor==ai)){b=this.items[s];this[b]=this.items[b]=E;
this[s]++}}return this};ai[bF].pop=function(){delete this[this[s]--];return this.items.pop()
};for(var I in bd){if(bd[ah](I)){ai[bF][I]=(function(b){return function(){for(var d=0,e=this.items[s];
d<e;d++){this.items[d][b][bC](this.items[d],arguments)}return this}})(I)}}ai[bF].attr=function(d,S){if(d&&aJ.is(d,a8)&&aJ.is(d[0],"object")){for(var b=0,R=d[s];
b<R;b++){this.items[b].attr(d[b])}}else{for(var e=0,E=this.items[s];e<E;e++){this.items[e].attr(d,S)
}}return this};ai[bF].animate=function(d,b,S,bJ){(aJ.is(S,"function")||!S)&&(bJ=S||null);
var R=this.items[s],e=R,bK,bI=this,E;bJ&&(E=function(){!--R&&bJ.call(bI)});S=aJ.is(S,ag)?S:E;
bK=this.items[--e].animate(d,b,S,E);while(e--){this.items[e]&&!this.items[e].removed&&this.items[e].animateWith(bK,d,b,S,E)
}return this};ai[bF].insertAfter=function(d){var b=this.items[s];while(b--){this.items[b].insertAfter(d)
}return this};ai[bF].getBBox=function(){var b=[],S=[],d=[],E=[];for(var e=this.items[s];
e--;){var R=this.items[e].getBBox();b[k](R.x);S[k](R.y);d[k](R.x+R.width);E[k](R.y+R.height)
}b=bj[bC](0,b);S=bj[bC](0,S);return{x:b,y:S,width:m[bC](0,d)-b,height:m[bC](0,E)-S}
};ai[bF].clone=function(e){e=new ai;for(var b=0,d=this.items[s];b<d;b++){e[k](this.items[b].clone())
}return e};aJ.registerFont=function(d){if(!d.face){return d}this.fonts=this.fonts||{};
var i={w:d.w,face:{},glyphs:{}},e=d.face["font-family"];for(var S in d.face){if(d.face[ah](S)){i.face[S]=d.face[S]
}}if(this.fonts[e]){this.fonts[e][k](i)}else{this.fonts[e]=[i]}if(!d.svg){i.face["units-per-em"]=U(d.face["units-per-em"],10);
for(var E in d.glyphs){if(d.glyphs[ah](E)){var R=d.glyphs[E];i.glyphs[E]={w:R.w,k:{},d:R.d&&"M"+R.d[bt](/[mlcxtrv]/g,function(bI){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bI]||"M"
})+"z"};if(R.k){for(var b in R.k){if(R[ah](b)){i.glyphs[E].k[b]=R.k[b]}}}}}}return d
};a0.getFont=function(bJ,bK,d,E){E=E||"normal";d=d||"normal";bK=+bK||{normal:400,bold:700,lighter:300,bolder:800}[bK]||400;
if(!aJ.fonts){return}var R=aJ.fonts[bJ];if(!R){var e=new RegExp("(^|\\s)"+bJ[bt](/[^\w\d\s+!~.:_-]/g,aQ)+"(\\s|$)","i");
for(var b in aJ.fonts){if(aJ.fonts[ah](b)){if(e.test(b)){R=aJ.fonts[b];break}}}}var S;
if(R){for(var bI=0,bL=R[s];bI<bL;bI++){S=R[bI];if(S.face["font-weight"]==bK&&(S.face["font-style"]==d||!S.face["font-style"])&&S.face["font-stretch"]==E){break
}}}return S};a0.print=function(R,E,b,bJ,bK,bT,d){bT=bT||"middle";d=m(bj(d||0,1),-1);
var bP=this.set(),bS=bD(b)[J](aQ),bQ=0,bN=aQ,bU;aJ.is(bJ,b)&&(bJ=this.getFont(bJ));
if(bJ){bU=(bK||16)/bJ.face["units-per-em"];var e=bJ.face.bbox.split(a),bI=+e[0],bL=+e[1]+(bT=="baseline"?e[3]-e[1]+(+bJ.face.descent):(e[3]-e[1])/2);
for(var bO=0,S=bS[s];bO<S;bO++){var bM=bO&&bJ.glyphs[bS[bO-1]]||{},bR=bJ.glyphs[bS[bO]];
bQ+=bO?(bM.w||bJ.w)+(bM.k&&bM.k[bS[bO]]||0)+(bJ.w*d):0;bR&&bR.d&&bP[k](this.path(bR.d).attr({fill:"#000",stroke:"none",translation:[bQ,0]}))
}bP.scale(bU,bU,bI,bL).translate(R-bI,E-bL)}return bP};aJ.format=function(d,e){var b=aJ.is(e,a8)?[0][bx](e):arguments;
d&&aJ.is(d,ag)&&b[s]-1&&(d=d[bt](bo,function(R,E){return b[++E]==null?aQ:b[E]}));
return d||aQ};aJ.ninja=function(){r.was?(aR.Raphael=r.is):delete Raphael;return aJ
};aJ.el=bd;aJ.st=ai[bF];r.was?(aR.Raphael=aJ):(Raphael=aJ)})();Geniverse.ChangeSexButton=(function(){var h=164,d=32,e=60,g=42,a=174,b=32,f=a*3/4,c=b*3/4;
return{WIDTH:h,HEIGHT:d,WIDTH_INSTR:f,HEIGHT_INSTR:c,isEnabled:YES,hasHover:YES,classNames:"switchsex switch-female".w(),alt:"Switch Sex",title:"Switch Sex",toolTip:"Click to switch the sex of the drake",sexBinding:"*parentView.genomeView.sex",mouseUp:function(j){var i=this.getPath("parentView.genomeView.sex"),l=this.get("parentView"),k=this.get("frame"),m=l?l.convertFrameToView(k,null):k;
clickOffset=j.pageX-m.x,femaleLimit=e,maleLimit=h-g;if((clickOffset>=maleLimit)&&(i===0)){return
}if((clickOffset<=femaleLimit)&&(i!==0)){return}arguments.callee.base.apply(this,arguments)
},target:"parentView.genomeView",action:"switchSex",_setClassNames:function(){classNames=this.get("classNames");
classNames.removeObject("switch-female");classNames.removeObject("switch-male");classNames.push(this.getPath("parentView.genomeView.sex")===0?"switch-male":"switch-female");
this.set("classNames",classNames);this.displayDidChange()}.observes("sex")}}());Geniverse.Case=SC.Record.extend({name:SC.Record.attr(String),order:SC.Record.attr(Number,{defaultValue:1}),introImageUrl:SC.Record.attr(String),activities:SC.Record.toMany("Geniverse.Activity",{inverse:"myCase"})});
Geniverse.Case.modelName="case";Geniverse.Case.modelsName="cases";Geniverse.Case.readOnly=YES;
Geniverse.railsBackedTypes.push(Geniverse.Case.modelName);Geniverse.Unlockable=SC.Record.extend({title:SC.Record.attr(String,{defaultValue:"No title"}),content:SC.Record.attr(String),trigger:SC.Record.attr(String),openAutomatically:SC.Record.attr(Boolean,{defaultValue:NO}),unlocked:SC.Record.attr(Boolean,{defaultValue:NO}),viewed:SC.Record.attr(Boolean,{defaultValue:NO}),icon:function(){if(this.get("viewed")){return""
}return"icon-unviewed-16"}.property("viewed")});Geniverse.Unlockable.modelName="unlockable";
Geniverse.Unlockable.modelsName="unlockables";Geniverse.Unlockable.readOnly=YES;Geniverse.railsBackedTypes.push(Geniverse.Unlockable.modelName);
sc_require("lib/burst-core");(function(c,a,d,b,e){d.fn.geniverse=function(n,V){var al=new e();
var s=d.extend(true,{mode:"parent",mother:null,father:null,context:null,loaded:d.noop,animationComplete:d.noop,gameteSelected:d.noop,playButtonPressed:d.noop,endButtonPressed:d.noop,reachedRecombination:d.noop,allelesSelected:d.noop,swapCompleted:d.noop,ySwapAttempted:d.noop,zoom:2,width:310,height:320,swap:"none",alleleCount:12,segLength:10,segCount:3,segMoveSpeed:5,innerThickness:6,outerThickness:14,dragTimeout:2000,grabAllele:1,maxDragSpeed:12,unfoldedAngle:Math.PI/6,foldedAngle:Math.PI/6,foldDamp:Math.PI/4,alleleAngleChangeProbability:0.09889,color:{hover:"#00FF00",male_inner:"rgba(128,60,223,1)",male_outer:"rgba(128,60,223,.1)",female_inner:"rgba(53,150,181,1)",female_outer:"rgba(53,150,181,.1)",male_outer_hover:"rgba(0,0,255,.1)",female_outer_hover:"rgba(255,0,255,.1)",recomb_inner_hover:"rgba(0,128,0,0.85)",recomb_outer_hover:"rgba(236,20,20,0.333)",swapUI_fill:"#EEEEEE",swapUI_stroke:"#BBBBBB",cell_fill:"#EFEFFF",cell_stroke:"#DEDEFF",cell_fill_hover:"#CCFFCC",cell_stroke_hover:"#AAFFAA",cell_selected:"#f8fe0e"}},V);
var ap=this,az,ag=[],aA=[],Z=s.mode,am=s.owner,at=s.mother,I=s.father,ai=0,P=null,aj=false,l=false,T=null,N,aE,R=0,L=0.9,ac=Math.PI,H=ac*2,Q=ac/2,an=ac/4,ao=Math.sin,x=Math.cos,X=Math.atan2,ad=function(aF){return Math.random()*aF
},S=function(aF,aG){return aF+ad(aG)-aG/2},v=s.width/2,u=s.height/2,ah=0,af=0,E=0,D=0,w=0.1,ak=0,q=+new Date(),aB=1,o=0.5,m=0.2,y=0,C=0,B=0;
var J=ap.find(".cell")[0],aw=b(J,s.width,s.height);function K(aF){if(!aF){return false
}aF=d.isPlainObject(aF)?JSON.stringify(aF):aF;return(new RegExp('^("(\\\\.|[^"\\\\\\n\\r])*?"|[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t])+?$')).test(aF)
}function aD(aG,aH,aF){return Math.min(Math.max(aG,aH),aF)}var i=function i(aG,aI,aF,aH){return Math.sqrt(Math.pow(aF-aG,2)+Math.pow(aH-aI,2))
};function k(aH){var aI;switch(Z){case"parent":ag[0]=new f({paper:aw,x:v,y:u,radius:u-10,opacity:L,hidden:false});
ag[1]=new f({paper:aw,x:v,y:u,radius:u-10,opacity:L,hidden:true});ag[2]=new f({paper:aw,x:v,y:u,radius:u-10,opacity:L,hidden:true});
ag[3]=new f({paper:aw,x:v,y:u,radius:u-10,opacity:L,hidden:true});break;case"offspring":ag[0]=new f({paper:aw,x:v-v/2,y:u,radius:u/2,opacity:L,hidden:false});
ag[1]=new f({paper:aw,x:v+v/3,y:u,radius:u/2,opacity:L,hidden:false,isSperm:true});
break}function aF(aO){var aK,aQ,aM=0,aJ=s.segLength*s.segCount*s.alleleCount;for(var aN in aO){if(aO.hasOwnProperty(aN)){for(var aL=0;
aL<(s.alleleCount/2);aL++){if(aO[aN].hasOwnProperty(aL)){var aP=((aO[aN][aL].alleles.length)*s.segLength*s.segCount)/4;
if(Z==="parent"){aK=S(v,s.width/4);aQ=S(u-aP,s.height/4);aA[aM]=new ax({paper:aw,x:aK,y:aQ,yLenOffset:aP,data:aO[aN][aL],index:aM,startHidden:true});
aA[aM+1]=new ax({paper:aw,x:aK,y:aQ,yLenOffset:aP,data:aO[aN][aL],index:aM+1,startHidden:false});
aM+=2}else{if((aM<3)&&(at)){aK=S(v-v/2,30);aQ=S(s.height/2-aP,20)}else{aK=S(v+v/3,30);
aQ=S(s.height/2-aP,20)}aA[aM]=new ax({paper:aw,x:aK,y:aQ,yLenOffset:aP,data:aO[aN][aL],index:aM,startHidden:false});
aM+=1}}}}if(Z==="parent"){aA[0].swapList=[aA[2],aA[3]];aA[1].swapList=[aA[2],aA[3]];
aA[2].swapList=[aA[0],aA[1]];aA[3].swapList=[aA[0],aA[1]];aA[4].swapList=[aA[6],aA[7]];
aA[5].swapList=[aA[6],aA[7]];aA[6].swapList=[aA[4],aA[5]];aA[7].swapList=[aA[4],aA[5]];
aA[8].swapList=[aA[10],aA[11]];aA[9].swapList=[aA[10],aA[11]];aA[10].swapList=[aA[8],aA[9]];
aA[11].swapList=[aA[8],aA[9]];aA[0].copy=aA[1];aA[1].copy=aA[0];aA[2].copy=aA[3];
aA[3].copy=aA[2];aA[4].copy=aA[5];aA[5].copy=aA[4];aA[6].copy=aA[7];aA[7].copy=aA[6];
aA[8].copy=aA[9];aA[9].copy=aA[8];aA[10].copy=aA[11];aA[11].copy=aA[10]}s.loaded.call(s.context)
}}var aG;if(K(aH)){aG=d.isPlainObject(aH)?aH:JSON.parse(aH)}else{d.ajax({url:aH,data:{},cache:false,async:false,dataType:"json",success:function(aJ){aG=aJ
}})}aF(aG)}function ay(aJ,aI){var aK=aI.gene,aF=aI.labelWidth,aH=aI.leftLabelOffsetX,aG=aI.sex;
aI.gene=aJ.gene;aJ.gene=aK;aI.sex=aJ.sex;aJ.sex=aG;aJ.style.call(aJ,aJ.SVG_outer,"outer");
aJ.style.call(aJ,aJ.SVG_inner,"inner");aI.style.call(aI,aI.SVG_outer,"outer");aI.style.call(aI,aI.SVG_inner,"inner");
aI.geneText.attr({text:Geniverse.chromosomeController.alleleLabelMap[aI.gene]});aJ.geneText.attr({text:Geniverse.chromosomeController.alleleLabelMap[aJ.gene]});
aI.labelWidth=aJ.labelWidth;aJ.labelWidth=aF;aI.leftLabelOffsetX=aJ.leftLabelOffsetX;
aJ.leftLabelOffsetX=aH;aI.geneFrame.attr({width:aI.labelWidth});aJ.geneFrame.attr({width:aJ.labelWidth})
}var r=function W(){this.hovering=true;for(var aG=this.index,aF=this.parent.alleles.length;
aG<aF;aG++){var aH=this.parent.alleles[aG];if((!aH.recombOption&&!ai)&&(aG!==0)){aH.SVG_inner.attr({stroke:s.color.hover});
aH.SVG_outer.attr({stroke:s.color.hover})}}};var h=function U(){for(var aG=0,aF=this.parent.alleles.length;
aG<aF;aG++){var aH=this.parent.alleles[aG];if(aH.recombSelected===true){}else{if(!aH.recombOption){aH.SVG_inner.attr({stroke:s.color[aH.sex+"_inner"]});
aH.SVG_outer.attr({stroke:s.color[aH.sex+"_outer"]})}}}this.hovering=false};function z(){for(var aI=0,aG=aA.length;
aI<aG;aI++){for(var aH=0,aF=aA[aI].alleles.length;aH<aF;aH++){var aJ=aA[aI].alleles[aH];
for(var aM=0,aL=aJ.SVG_outer.events.length;aM<aL;aM++){var aK=aJ.SVG_outer.events[aM];
if(aK&&aK.f&&aK.f.name){if(aK.f===r||aK.f===h||aK.name==="click"){aK.unbind()}}}}}}function j(){for(var aH=0,aI=aA.length;
aH<aI;aH++){for(var aG=0,aF=aA[aH].alleles.length;aG<aF;aG++){allele=aA[aH].alleles[aG];
allele.SVG_inner.attr({stroke:s.color[allele.sex+"_inner"],opacity:1});allele.SVG_outer.attr({stroke:s.color[allele.sex+"_outer"],opacity:1});
allele.recombOption=false;allele.recombSelected=false}P=null}ai=0}function F(aF,aH){for(var aG=0;
aG<aF.length;aG++){ay(aF[aG],aH[aG])}s.swapCompleted.call(s.context)}function A(){function aM(aN){if(aN<4){return 1
}else{if(aN>3&&aN<8){return 2}else{if(aN>7){return 3}else{return 0}}}}var aL=function aK(){var aP,aT,aR,aS,aQ=false;
for(aT=0,aR=this.parent.alleles.length;aT<aR;aT++){if(this.parent.alleles[aT].gene=="Y"){aQ=true
}}aS=this.parent.swapList[0].alleles;for(aT=0,aR=aS.length;aT<aR;aT++){if(aS[aT].gene=="Y"){aQ=true
}}if(!aQ){if(!ai){s.allelesSelected.call(s.context);for(aT=this.index,aR=this.parent.alleles.length;
aT<aR;aT++){if(aT===0){aT++}aP=this.parent.alleles[aT];aP.SVG_inner.attr({stroke:s.color.hover});
aP.SVG_outer.attr({stroke:s.color.hover});var aV=aP.parent.swapList[0],aU=aP.parent.swapList[1];
aV.alleles[aT].SVG_outer.attr({stroke:s.color.recomb_outer_hover});aU.alleles[aT].SVG_outer.attr({stroke:s.color.recomb_outer_hover});
aV.alleles[aT].recombOption=true;aU.alleles[aT].recombOption=true;aP.recombSelected=true;
ai=aM(this.parent.index);P=this.parent.index}}else{if(this.recombOption){var aO=[],aN=[];
for(aT=0,aR=this.parent.alleles.length;aT<aR;aT++){if(this.parent.alleles[aT].recombOption){aO.push(this.parent.alleles[aT])
}}aS=aA[P].alleles;for(aT=0,aR=aS.length;aT<aR;aT++){if(this.parent.alleles[aT].recombOption){aN.push(aS[aT])
}}F(aO,aN)}j()}}else{s.ySwapAttempted.call(s.context)}};for(var aI=0,aF=aA.length;
aI<aF;aI++){for(var aH=0,aG=aA[aI].alleles.length;aH<aG;aH++){var aJ=aA[aI].alleles[aH];
aJ.SVG_outer.hover(r,h,aJ,aJ);(function(aO){aJ.SVG_outer.click(function aN(){aL.call(aO)
})})(aJ)}}}function g(aH,aJ){var aF=aH.index+aJ,aI=null,aG=false;if(aF==-1){if(aH.parent.index>0){aG=true;
aI=aH.parent.parent.alleles[aH.parent.index-1].segs[s.segCount-1]}}else{if(aF>s.segCount-1){if(aH.parent.index<aH.parent.parent.alleleCount-1){aG=true;
aI=aH.parent.parent.alleles[aH.parent.index+1].segs[0]}}else{aI=aH.parent.segs[aF]
}}if(aI){Y(aI,aH,aJ);ab(aI,aH,aG?0:s.segLength,aG?1:s.segMoveSpeed,aG);g(aI,aJ)}}function Y(aI,aH,aM,aK,aJ){var aN=aI.parent.parent,aF=i(aI.x,aI.y,aH.x,aH.y),aG=aI.angle*aN.foldFactor+aH.angle*aN.foldFactor/2+aN.rotation;
aK=aI.x+ao(aG)*s.segLength;aJ=aI.y+x(aG)*s.segLength;scaleFactor=1;if(!l){var aL=Math.atan2(aH.x-aI.x,aH.y-aI.y);
if((Math.abs(aL)>s.foldedAngle)&&(Math.abs(Math.abs(aL)-Math.PI)>s.foldedAngle)){scaleFactor=5
}}aI.x+=((aK-aI.x)/(s.segMoveSpeed*aI.parent.parent.overDragMultiplier)/2*aM)*scaleFactor;
aI.y+=((aJ-aI.y)/(s.segMoveSpeed*aI.parent.parent.overDragMultiplier)/2*aM)*scaleFactor;
aI.x=aD(aI.x,0,s.width);aI.y=aD(aI.y,0,s.height)}function ab(aL,aK,aO,aI,aF,aN,aM){if(aF){aL.x=aK.x;
aL.y=aK.y}else{var aG=i(aL.x,aL.y,aK.x,aK.y),aJ,aH;if(aG>aO*2){aJ=Math.atan2(aK.x-aL.x,aK.y-aL.y);
aH=ad(s.foldDamp)-(s.foldDamp/2);aN=aL.x+ao(aJ+aH)*(aG/2);aM=aL.y+x(aJ+aH)*(aG/2);
aL.x+=(aN-aL.x)/1;aL.y+=(aM-aL.y)/1}else{if(aG>aO){aJ=Math.atan2(aK.x-aL.x,aK.y-aL.y);
aH=ad(s.foldDamp)-(s.foldDamp/2);aN=aL.x+ao(aJ+aH)*(s.segLength*m);aM=aL.y+x(aJ+aH)*(s.segLength*m);
aL.x+=(aN-aL.x)/1;aL.y+=(aM-aL.y)/1}}}aL.x=aD(aL.x,0,s.width);aL.y=aD(aL.y,0,s.height)
}function G(){for(var aF in aA){if(aA.hasOwnProperty(aF)){var aG=aA[aF];aG.offsetX=0;
aG.offsetY=0;aG.offsetOriginX=0;aG.offsetOriginY=0}}}var p=0;function ae(){p++;for(var aI in aA){if(aA.hasOwnProperty(aI)){var aL=aA[aI];
aL.physics();for(var aH in aL.alleles){if(aL.alleles.hasOwnProperty(aH)){var aG=aL.alleles[aH];
aG.updatePath();aG.swapPathAttrs();if(aG.recombOption===true){aG.SVG_outer.attr({opacity:0.75+ao(p/4)*0.5})
}}}}}if(aj){if(!aE){var aJ=s.width,aF=s.height,aK=s.width/2-50;aE=aw.rect(aK,5,100,105,6).insertBefore(aA[0].alleles[0].SVG_inner);
aE.attr({fill:s.color.swapUI_fill,stroke:s.color.swapUI_stroke})}}}function f(aF){this.type="Membrane";
d.extend(this,aF);this.SVG=this.genSVG();this.SVG.hover(function(){if((R===80&&Z==="parent")&&(this.attr("fill")===s.color.cell_fill)){this.attr({fill:s.color.cell_fill_hover,stroke:s.color.cell_stroke_hover});
a.body.style.cursor="pointer"}},function(){if((R===80&&Z==="parent")&&(this.attr("fill")===s.color.cell_fill_hover)){this.attr({fill:s.color.cell_fill,stroke:s.color.cell_stroke});
a.body.style.cursor="auto"}});this.SVG.click(function(aH,aN){if(Z==="parent"){G();
var aM={chromosomes:[]};if(R===80){for(var aK=0,aI=aA.length;aK<aI;aK++){if(i(aA[aK].alleles[0].segs[s.segCount-1].x,aA[aK].alleles[0].segs[s.segCount-1].y,this.attrs.cx,this.attrs.cy)<this.attrs.r){aM.chromosomes[aM.chromosomes.length]={alleles:[]};
for(var aJ=0,aG=aA[aK].alleles.length;aJ<aG;aJ++){aM.chromosomes[aM.chromosomes.length-1].alleles[aJ]={sex:aA[aK].alleles[aJ].sex,gene:aA[aK].alleles[aJ].gene}
}}}s.gameteSelected.call(s.context,aM);for(var aL=0;aL<4;aL++){ag[aL].SVG.attr({fill:s.color.cell_fill,stroke:s.color.cell_stroke})
}this.attr({fill:s.color.cell_selected,stroke:s.color.cell_stroke})}}});return this
}f.prototype.genSVG=function(){if(this.hidden){this.opacity=0}var aF;if(this.isSperm){this.stretch=1;
var aG=this.radius*1.125;aF=aw.ellipse(this.x,this.y,aG,this.radius*0.75);this.tail=aw.path(" M"+(this.x+aG)+","+this.y+" L"+(this.x+aG+15)+","+(this.y+10)+" L"+(this.x+aG+30)+","+(this.y-10)+" L"+(this.x+aG+45)+","+(this.y+10)+" L"+(this.x+aG+60)+","+(this.y-10)).attr({"stroke-width":4,stroke:s.color.cell_stroke,opacity:this.opacity})
}else{aF=aw.circle(this.x,this.y,this.radius)}aF.attr({"stroke-width":4,fill:s.color.cell_fill,stroke:s.color.cell_stroke,opacity:this.opacity});
return aF};f.prototype.updateSVG=function(aG,aI,aF){if(this.isSperm){var aH=this.radius*1.125;
this.tail.attr({path:" M"+(this.x+aH*this.stretch)+","+this.y+" L"+(this.x+aH+15*this.stretch)+","+(this.y+10)+" L"+(this.x+aH+30*this.stretch)+","+(this.y-10)+" L"+(this.x+aH+45*this.stretch)+","+(this.y+10)+" L"+(this.x+aH+60*this.stretch)+","+(this.y-10),opacity:this.opacity});
this.SVG.attr({cx:this.x,cy:this.y,rx:aH*this.stretch,ry:this.radius*0.75,opacity:this.opacity})
}else{this.SVG.attr({cx:this.x,cy:this.y,r:this.radius,opacity:this.opacity})}};function aq(aF){this.type="Segment";
d.extend(this,aF);return this}aq.prototype.next=function(){this.index=this.parent.segs.indexOf(this);
this.nextSeg=typeof(this.parent.segs[this.index+1])!=="undefined"?this.parent.segs[this.index+1]:false;
if(!this.nextSeg&&this.parent.next()){this.nextSeg=this.parent.nextAllele.segs.length>0?this.parent.nextAllele.segs[0]:false
}return this.nextSeg};aq.prototype.prev=function(){this.index=this.parent.segs.indexOf(this);
this.prevSeg=typeof(this.parent.segs[this.index-1])!=="undefined"?this.parent.segs[this.index-1]:false;
if(!this.prevSeg&&this.parent.prev()){this.prevSeg=this.parent.prevAllele.segs.length>0?this.parent.prevAllele.segs[this.parent.prevAllele.segs.length-1]:false
}return this.prevSeg};function M(aG){this.type="Allele";d.extend(this,aG);this.paper=this.parent.paper;
this.segs=[];this.x=this.x||this.parent.x;this.y=this.y||this.parent.y;this.hiddenGenes=Geniverse.activityController.get("hiddenGenes");
this.segCount=s.segCount;this.segLength=s.segLength;this.rightLabelOffsetX=17;this.labelOffsetY=-4.5;
this.labelWidth=Geniverse.chromosomeController.alleleLabelMap[this.gene].length*9;
this.leftLabelOffsetX=-1*(this.labelWidth+this.rightLabelOffsetX);this.genPath();
this.SVG_inner=this.build();this.style(this.SVG_inner,"inner");this.SVG_outer=this.build();
this.style(this.SVG_outer,"outer");this.labelLink=this.paper.path("M"+(this.x)+","+(this.y)+" L"+(this.x+this.labelOffsetX)+","+(this.y+this.labelOfsetY)).attr({stroke:"#000","stroke-width":"0.5px"});
this.geneFrame=this.paper.rect(this.x-6,this.y-7,this.labelWidth,14,1).attr({fill:"#FFF",stroke:s.color[this.sex+"_outer"],"stroke-width":"2px"});
this.geneText=this.paper.text(this.x,this.y,Geniverse.chromosomeController.alleleLabelMap[this.gene]).attr({font:"14px monospace",stroke:"none",fill:"#000","text-anchor":"start"}).toFront();
if(this.parent.hidden){this.hide()}if(this.gene=="Y"&&!this.parent.hidden){this.labelLink.show();
this.geneText.show();this.geneFrame.show()}else{this.labelLink.hide();this.geneText.hide();
this.geneFrame.hide()}this.SVG_outer.drag(this.dragmove_mouse,this.dragstart_mouse,this.dragstop_mouse);
var aF=this.SVG_inner;this.SVG_outer.hover(function(){if(!this.parent.parent.hidden){for(var aH=0;
aH<this.parent.parent.alleleCount;aH++){if(this.parent.hiddenGenes.indexOf(this.parent.parent.alleles[aH].gene.toLowerCase())==-1){if(this.parent.parent.alleles[aH].gene!==""){this.parent.parent.alleles[aH].labelLink.show()
}this.parent.parent.alleles[aH].geneText.show();this.parent.parent.alleles[aH].geneFrame.show()
}}a.body.style.cursor="pointer"}},function(){if(!this.parent.parent.hidden){for(var aH=0;
aH<this.parent.parent.alleleCount;aH++){if((this.parent.hiddenGenes.indexOf(this.parent.parent.alleles[aH].gene.toLowerCase())==-1)&&this.parent.parent.alleles[aH].gene!="Y"){this.parent.parent.alleles[aH].labelLink.hide();
this.parent.parent.alleles[aH].geneText.hide();this.parent.parent.alleles[aH].geneFrame.hide()
}}a.body.style.cursor="auto"}});return this}M.prototype.hide=function(){this.SVG_inner.attr({stroke:"rgba(0,0,0,0)"});
this.SVG_outer.attr({stroke:"rgba(0,0,0,0)"});this.geneFrame.attr({opacity:0});this.geneText.attr({opacity:0});
this.labelLink.attr({opacity:0})};M.prototype.show=function(){this.style(this.SVG_inner,"inner");
this.style(this.SVG_outer,"outer");this.geneFrame.attr({opacity:1});this.geneText.attr({opacity:1});
this.labelLink.attr({opacity:1})};M.prototype.next=function(){this.index=this.parent.alleles.indexOf(this);
this.nextAllele=typeof(this.parent.alleles[this.index+1])!=="undefined"?this.parent.alleles[this.index+1]:false;
return this.nextAllele};M.prototype.prev=function(){this.index=this.parent.alleles.indexOf(this);
this.prevAllele=typeof(this.parent.alleles[this.index-1])!=="undefined"?this.parent.alleles[this.index-1]:false;
return this.prevAllele};M.prototype.genPath=function(){var aF=this.x,aK=this.y,aH,aG,aJ;
this.segs[0]=new aq({x:aF,y:aK,index:0,angle:0,parent:this});this.path="M"+aF+","+aK+" ";
for(var aI=1;aI<this.segCount;aI++){aH=ad(s.foldedAngle)-(s.foldedAngle/2);aF+=parseFloat((ao(aH+this.parent.rotation)*this.segLength));
aK+=parseFloat((x(aH+this.parent.rotation)*this.segLength));this.path+="L"+aF+","+aK+" ";
this.segs[aI]=new aq({x:aF,y:aK,foldedAngle:aH,angle:aH,index:aI,parent:this})}};
M.prototype.updatePath=function(){var aH=this.parent.offsetX,aG=this.parent.offsetY,aM=this.segs[0].x+aH,aL=this.segs[0].y+aG,aK=this.segs[1].x+aH,aJ=this.segs[1].y+aG,aN,aI;
if(aK>this.paper.width/2){if(aj){aN=aK+this.rightLabelOffsetX;aI=aK+this.rightLabelOffsetX
}else{aN=aK+this.leftLabelOffsetX;aI=aK+this.leftLabelOffsetX+this.labelWidth}}else{if(aj){aN=aK+this.leftLabelOffsetX;
aI=aK+this.leftLabelOffsetX+this.labelWidth}else{aN=aK+this.rightLabelOffsetX;aI=aK+this.rightLabelOffsetX
}}this.labelLink.attr({path:"M"+aK+","+aJ+this.labelOffsetY+" L"+aI+","+(aJ+this.labelOffsetY)}).toFront();
this.geneFrame.attr({x:aN,y:(aJ+(this.labelOffsetY)*2)}).toFront();this.geneText.attr({x:aN+2,y:(aJ+this.labelOffsetY)}).toFront();
if(!this.jqObj){this.jqObj=d(this.genekey)}this.path="M"+aM+","+aL+" ";for(var aF=1;
aF<this.segCount;aF++){this.path+="L"+(aH+this.segs[aF].x)+","+(aG+this.segs[aF].y)+" "
}};M.prototype.swapPathAttrs=function(){this.SVG_inner.attr("path",this.path);this.SVG_outer.attr("path",this.path)
};M.prototype.build=function(){var aF=this.paper.path(this.path);aF.parent=this;return aF
};M.prototype.style=function(aG,aF){aG.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:s.color[this.sex+"_"+aF],"stroke-width":s[aF+"Thickness"]+"px"});
return this};M.prototype.dragstart_mouse=function(aF,aJ){q=+new Date();var aG=999;
C=this.parent.segs[0].x;B=this.parent.segs[0].y;for(var aI=0;aI<ag.length;aI++){var aH=i(C,B,ag[aI].x,ag[aI].y);
if(aH<aG){aG=aH;y=aI}}};M.prototype.dragmove_mouse=function(aF,aG){if(!l){this.parent.parent.offsetX=(this.parent.parent.offsetOriginX||0)+aF;
this.parent.parent.offsetY=(this.parent.parent.offsetOriginY||0)+aG}};M.prototype.dragstop_mouse=function(aF){if(!l){this.parent.parent.offsetOriginX=this.parent.parent.offsetX||0;
this.parent.parent.offsetOriginY=this.parent.parent.offsetY||0;if(i((this.parent.segs[0].x+this.parent.parent.offsetX),(this.parent.segs[0].y+this.parent.parent.offsetY),ag[y].x,ag[y].y)>ag[y].radius){this.parent.parent.offsetX=0;
this.parent.parent.offsetY=0;this.parent.parent.offsetOriginX=0;this.parent.parent.offsetOriginY=0
}}};M.prototype.dragstart=function(aI){var aJ,aK,aG=400,aF=this.parent.segs;this.parent.parent.inDrag=true;
this.parent.selected=null;if(aI){this.parent.selected=aF[0]}else{for(var aH in this.parent.segs){if(this.parent.segs.hasOwnProperty(aH)){aK=i(aF[aH].x,aF[aH].y,ah,af);
if(aK<aG){aG=aK;this.parent.selected=aF[aH]}}}}this.parent.selectedJoin=null;if(this.parent.selected.index===0){if(this.parent.index>0){this.parent.selectedJoin=this.parent.parent.alleles[this.parent.index-1].segs[s.segCount-1]
}}};M.prototype.dragmove=function(aF,aI){function aH(){this.parent.selected.x=ah;
this.parent.selected.y=af;var aJ=0;var aK=this.parent.selected;while(aK.next()){aJ++;
aK=aK.nextSeg;aK.x+=(ah-aK.x)*(o/aJ);aK.y+=(af-aK.y)*(o/aJ)}aJ=0;aK=this.parent.selected;
while(aK.prev()){aJ++;aK=aK.prevSeg;aK.x+=(ah-aK.x)*(o/aJ);aK.y+=(af-aK.y)*(o/aJ)
}this.parent.updatePath();this.parent.swapPathAttrs();if(this.parent.selectedJoin){this.parent.selectedJoin.x=ah;
this.parent.selectedJoin.y=af;this.parent.selectedJoin.parent.updatePath();this.parent.selectedJoin.parent.swapPathAttrs()
}}if(arguments[5]){ah=arguments[6],af=arguments[7];aH.apply(this,arguments)}else{if(!aj){aH.apply(this,arguments)
}}var aG=this;clearTimeout(aG.parent.parent.lastDragTimeout);aG.parent.parent.lastDragTimeout=setTimeout(function(){aG.parent.dragstop.call(aG)
},500)};M.prototype.dragstop=function(){this.parent.selected=null;this.parent.selectedJoin=null;
this.parent.parent.overDragMultiplier=1;var aF=this.parent.parent,aG=c.setTimeout(function(){aF.inDrag=false
},s.dragTimeout)};function ax(aH){this.type="Chromosome";d.extend(this,aH);this.rotation=0;
this.offsetX=0;this.offsetY=0;this.dragX=this.x;this.dragY=this.y;this.originX=this.x;
this.originY=this.y;this.hidden=this.startHidden;this.foldFactor=1;this.inDrag=false;
this.overDragMultiplier=1;this.alleleCount=this.data.alleles.length;this.alleles=[];
var aF=this.x,aK=this.y;for(var aG=0;aG<this.alleleCount;aG++){var aI=((aG===0&&this.data.alleles[aG].gene==="")?"Y":this.data.alleles[aG].gene);
this.alleles[aG]=new M({paper:this.paper,x:aF,y:aK,sex:this.data.alleles[aG].sex,gene:aI,parent:this,index:aG});
var aJ=this.alleles[aG].segs[this.alleles[aG].segCount-1];aF=aJ.x;aK=aJ.y}this.lastSelected=this.alleles[c.parseInt(ad(this.alleles.length),10)].segs[c.parseInt(ad(this.alleles[0].segs.length),10)]
}ax.prototype.hide=function(){for(var aF=0;aF<this.alleleCount;aF++){if(this.alleles[aF].gene!="Y"){this.alleles[aF].hide()
}}this.hidden=true};ax.prototype.show=function(){for(var aF=0;aF<this.alleleCount;
aF++){this.alleles[aF].show();if(this.alleles[aF].gene=="Y"){this.alleles[aF].labelLink.show();
this.alleles[aF].geneText.show();this.alleles[aF].geneFrame.show()}}this.hidden=false
};ax.prototype.physics=function(){var aG,aL,aO,aF,aM=0,aI;for(aM=0,aI=this.alleleCount;
aM<aI;aM++){aG=this.alleles[aM];for(var aK=0,aH=s.segCount;aK<aH;aK++){aL=aG.segs[aK];
if(aL.angle){if(ad(1)>s.alleleAngleChangeProbability){aL.foldedAngle=ad(s.foldedAngle)-(s.foldedAngle/2);
aL.angle=aL.foldedAngle*this.foldFactor}}}}var aJ=null,aN=null;for(aM=0,aI=this.alleles.length;
aM<aI;aM++){aG=this.alleles[aM];if(aG.selected){aJ=aG.selected;this.lastSelected=aJ
}if(aG.selectedJoin){aN=aG.selectedJoin}}g(this.lastSelected,1);g(this.lastSelected,-1)
};J.addEventListener("mousemove",function(aG){E=ah;D=af;var aH=(c.scrollX!==null&&typeof c.scrollX!=="undefined")?c.scrollX:c.pageXOffset;
var aF=(c.scrollY!==null&&typeof c.scrollY!=="undefined")?c.scrollY:c.pageYOffset;
ah=aG.clientX-J.offsetParent.offsetLeft-J.offsetParent.offsetParent.offsetLeft-J.offsetParent.offsetParent.offsetParent.offsetLeft+aH;
af=aG.clientY-J.offsetParent.offsetTop-J.offsetParent.offsetParent.offsetTop-J.offsetParent.offsetParent.offsetParent.offsetTop+aF;
if(aj){if(af<110){swapPair="a"}else{if(af>110&&af<215){swapPair="b"}else{if(af>215){swapPair="c"
}}}O(swapPair)}},false);function O(aH){var aG=s.width,aF=s.height,aI=s.width/2-50;
switch(aH){case"a":aE.attr({x:aI,y:5,width:100,height:105});break;case"b":aE.attr({x:aI,y:110,width:100,height:105});
break;case"c":aE.attr({x:aI,y:215,width:100,height:105});break}}k(n);ap.data("get-json",function(){var aF={chromosomes:[]};
d.each(aA,function(){var aG=aF.chromosomes[aF.chromosomes.push({alleles:[]})-1];d.each(this.alleles,function(){var aH=aG.alleles[aG.alleles.push({})-1];
aH.sex=this.sex;aH.gene=this.gene})});return aF});function aa(aO){var aT=40;var aS=10;
var aV=function(aZ){if(this.startHidden){if(aZ.frame>11){this.show()}else{this.hide()
}}};switch(aO){case"offspring":var aL=function(a0){var aZ=this.alleles[s.grabAllele];
aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
};if(at&&I){N=al.timeline("geniverseTimeline_"+am,1,23,0.25,false).obj("memb1_"+am,ag[0]).track("radius").key(0,ag[0].radius,"inOutQuad").key(23,v/1.5).track("x").key(0,ag[0].x,"inOutQuad").key(23,v).always(function(aZ){R=~~aZ.frame;
ar.slider("value",aZ.frame*100);aC.val(~~aZ.frame);this.updateSVG();if(R>=23&&aO==="offspring"){al.stop();
l=false;s.animationComplete.call(s.context)}}).obj("memb2_"+am,ag[1]).track("radius").key(0,ag[1].radius,"inOutQuad").key(23,ag[1].radius*1.5).track("opacity").key(0,ag[1].opacity,"inOutQuad").key(23,0).track("x").key(0,ag[1].x,"inOutQuad").key(23,v-v/6).always(function(aZ){this.updateSVG()
}).obj("m1_"+am,aA[0]).track("dragX").key(0,aA[0].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[0].originY).key(23,S(u-aA[0].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("m2_"+am,aA[1]).track("dragX").key(0,aA[1].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[1].originY).key(23,S(u-aA[1].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("m3_"+am,aA[2]).track("dragX").key(0,aA[2].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[2].originY).key(23,S(u-aA[2].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("f1_"+am,aA[3]).track("dragX").key(0,aA[3].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[3].originY).key(23,S(u-aA[3].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("f2_"+am,aA[4]).track("dragX").key(0,aA[4].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[4].originY).key(23,S(u-aA[4].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("f3_"+am,aA[5]).track("dragX").key(0,aA[5].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[5].originY).key(23,S(u-aA[5].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
})}else{N=al.timeline("geniverseTimeline_"+am,1,23,0.25,false).obj("memb1_"+am,ag[0]).track("radius").key(0,ag[0].radius,"inOutQuad").key(23,v/1.5).track("x").key(0,ag[0].x,"inOutQuad").key(23,v).always(function(aZ){R=~~aZ.frame;
ar.slider("value",aZ.frame*100);aC.val(~~aZ.frame);this.updateSVG();if(R>=23&&aO==="offspring"){al.stop();
l=false;s.animationComplete.call(s.context)}}).obj("memb2_"+am,ag[1]).track("radius").key(0,ag[1].radius,"inOutQuad").key(23,ag[1].radius*1.5).track("opacity").key(0,ag[1].opacity,"inOutQuad").key(23,0).track("x").key(0,ag[1].x,"inOutQuad").key(23,v-v/6).always(function(aZ){this.updateSVG()
}).obj("m1_"+am,aA[0]).track("dragX").key(0,aA[0].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[0].originY).key(23,S(u-aA[0].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("m2_"+am,aA[1]).track("dragX").key(0,aA[1].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[1].originY).key(23,S(u-aA[1].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
}).obj("m3_"+am,aA[2]).track("dragX").key(0,aA[2].originX,"inOutQuad").key(23,S(v,aT)).track("dragY").key(0,aA[2].originY).key(23,S(u-aA[2].yLenOffset,aS)).always(function(aZ){aL.call(this,aZ)
})}break;case"parent":var aU=10;var aG=function(){return 0.5-Math.random()};var aQ=[[[0,1].sort(aG),[2,3].sort(aG)].sort(aG),[[4,5].sort(aG),[6,7].sort(aG)].sort(aG),[[8,9].sort(aG),[10,11].sort(aG)].sort(aG)].sort(aG);
var aF=aQ[0][0][0];var aY=aQ[0][0][1];var aK=aQ[0][1][0];var aJ=aQ[0][1][1];var aR=aQ[1][0][0];
var aP=aQ[1][0][1];var aX=aQ[1][1][0];var aW=aQ[1][1][1];var aI=aQ[2][0][0];var aH=aQ[2][0][1];
var aN=aQ[2][1][0];var aM=aQ[2][1][1];N=al.timeline("geniverseTimeline_"+am,1,80,0.5,false).obj("memb1_"+am,ag[0]).track("x").key(0,v).key(30,v).key(35,v).key(50,v/2).track("y").key(0,u).key(60,u).key(80,u-u/2).track("radius").key(0,u-10).key(30,u-10).key(35,u-10).key(50,u/1.5).key(60,u/1.5).key(80,u/2.5).always(function(aZ){this.updateSVG.call(this)
}).obj("memb2_"+am,ag[1]).track("x").key(0,v).key(30,v).key(35,v).key(50,v+v/2).track("y").key(0,u).key(60,u).key(80,u-u/2).track("opacity").key(0,0).key(21,0).key(35,L*0.66).key(50,L).track("radius").key(0,u-10).key(30,u-10).key(35,u-10).key(50,u/1.5).key(60,u/1.5).key(80,u/2.5).always(function(aZ){this.updateSVG.call(this)
}).obj("memb3_"+am,ag[2]).track("x").key(0,v+v/2).track("y").key(0,u).key(60,u).key(80,u+u/2).track("opacity").key(0,0).key(50,0).key(80,L).track("radius").key(0,u/1.5).key(60,u/1.5).key(80,u/2.5).always(function(aZ){this.updateSVG.call(this)
}).obj("memb4_"+am,ag[3]).track("x").key(0,v-v/2).track("y").key(0,u).key(60,u).key(80,u+u/2).track("opacity").key(0,0).key(50,0).key(80,L).track("radius").key(0,u/1.5).key(60,u/1.5).key(80,u/2.5).always(function(aZ){this.updateSVG.call(this)
}).obj("ca1a_"+am,aA[aF]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aF].originX).key(30,v-s.outerThickness).key(35,v-s.outerThickness).key(50,v-v/2-30).key(70,v-v/2-30).key(80,v-v/2-aT/2).track("dragY").key(0,aA[aF].originY).key(30,u-130).key(35,u-130).key(50,u).key(60,u).key(80,S(u+u/2-aA[aF].yLenOffset,aS/2)).always(function(a4){aV.call(this,a4);
R=~~a4.frame;if(a4.frame>80){al.stop();l=false}if(a4.frame==30&&s.swap=="user"){if(aE){aE.attr({opacity:1})
}al.stop();if(aj!==true){s.reachedRecombination.call(s.context);A()}aj=true;ae();
al.stop();l=false}else{if(a4.frame==30&&s.swap=="auto"){for(var a2=0,aZ=aA.length;
a2<aZ;a2++){for(var a1=0,a0=aA[a2].alleles.length;a1<a0;a1++){if(Math.random()>0.654321){ay(aA[a2].alleles[a1],aA[a2].swapList[~~Math.random()].alleles[a1])
}}}}else{if(aj===true){aj=false;if(aE){aE.attr({opacity:0})}z();j()}}}if(R>=80&&aO==="parent"){al.stop();
l=false;s.animationComplete.call(s.context)}ar.slider("value",a4.frame*100);aC.val(~~a4.frame);
var a3=this.alleles[s.grabAllele];a3.dragstart.call(a3.SVG_outer,true);a3.dragmove.call(a3.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("ca1b_"+am,aA[aY]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aY].originX+aU).key(30,v-s.outerThickness+aU).key(35,v-s.outerThickness+aU).key(50,v-v/2-30+aU).key(70,v-v/2-30+aU).key(80,v-v/2-aT/2).track("dragY").key(0,aA[aY].originY).key(30,u-130).key(35,u-130).key(50,u).key(60,u).key(80,S(u-u/2-aA[aY].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("ca2a_"+am,aA[aK]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aK].x).key(30,v+s.outerThickness).key(35,v+s.outerThickness).key(50,v+v/2+30).key(70,v+v/2+30).key(80,v+v/2-aT/2).track("dragY").key(0,aA[aK].y).key(30,u-130).key(35,u-130).key(50,u).key(60,u).key(80,S(u-u/2-aA[aK].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("ca2b_"+am,aA[aJ]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aJ].originX+aU).key(30,v+s.outerThickness+aU).key(35,v+s.outerThickness+aU).key(50,v+v/2+30+aU).key(70,v+v/2+30+aU).key(80,v+v/2-aT/2).track("dragY").key(0,aA[aJ].originY).key(30,u-130).key(35,u-130).key(50,u).key(60,u).key(80,S(u+u/2-aA[aJ].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cb1a_"+am,aA[aR]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aR].originX).key(30,v-s.outerThickness).key(35,v-s.outerThickness).key(50,v-v/2-30).key(70,v-v/2-30).key(80,v-v/2).track("dragY").key(0,aA[aR].originY).key(30,u-25).key(35,u-25).key(50,u).key(60,u).key(80,S(u-u/2-aA[aR].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cb1b_"+am,aA[aP]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aP].originX+aU).key(30,v-s.outerThickness+aU).key(35,v-s.outerThickness+aU).key(50,v-v/2-30+aU).key(70,v-v/2-30+aU).key(80,v-v/2).track("dragY").key(0,aA[aP].originY).key(30,u-25).key(35,u-25).key(50,u).key(60,u).key(80,S(u+u/2-aA[aP].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cb2a_"+am,aA[aX]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aX].originX).key(30,v+s.outerThickness).key(35,v+s.outerThickness).key(50,v+v/2+30).key(70,v+v/2+30).key(80,v+v/2).track("dragY").key(0,aA[aX].originY).key(30,u-25).key(35,u-25).key(50,u).key(60,u).key(80,S(u-u/2-aA[aX].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cb2b_"+am,aA[aW]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aW].originX+aU).key(30,v+s.outerThickness+aU).key(35,v+s.outerThickness+aU).key(50,v+v/2+30+aU).key(70,v+v/2+30+aU).key(80,v+v/2).track("dragY").key(0,aA[aW].originY).key(30,u-25).key(35,u-25).key(50,u).key(60,u).key(80,S(u+u/2-aA[aW].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cc1a_"+am,aA[aI]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aI].originX).key(30,v-s.outerThickness).key(35,v-s.outerThickness).key(50,v-v/2-30).key(70,v-v/2-30).key(80,v-v/2+aT/2).track("dragY").key(0,aA[aI].originY).key(30,u+80).key(35,u+80).key(50,u).key(60,u).key(80,S(u-u/2-aA[aI].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cc1b_"+am,aA[aH]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aH].originX+aU).key(30,v-s.outerThickness+aU).key(35,v-s.outerThickness+aU).key(50,v-v/2-30+aU).key(70,v-v/2-30+aU).key(80,v-v/2+aT/2).track("dragY").key(0,aA[aH].originY).key(30,u+80).key(35,u+80).key(50,u).key(60,u).key(80,S(u+u/2-aA[aH].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cc2a_"+am,aA[aN]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aN].originX).key(30,v+s.outerThickness).key(35,v+s.outerThickness).key(50,v+v/2+30).key(70,v+v/2+30).key(80,v+v/2+aT/2).track("dragY").key(0,aA[aN].originY).key(30,u+80).key(35,u+80).key(50,u).key(60,u).key(80,S(u+u/2-aA[aN].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
}).obj("cc2b_"+am,aA[aM]).track("foldFactor").key(0,ac).key(30,s.unfoldedAngle).key(80,s.unfoldedAngle).track("rotation").key(0,0).key(40,0).key(70,Q).key(80,0).track("dragX").key(0,aA[aM].originX+aU).key(30,v+s.outerThickness+aU).key(35,v+s.outerThickness+aU).key(50,v+v/2+30+aU).key(70,v+v/2+30+aU).key(80,v+v/2+aT/2).track("dragY").key(0,aA[aM].originY).key(30,u+80).key(35,u+80).key(50,u).key(60,u).key(80,S(u-u/2-aA[aM].yLenOffset,aS/2)).always(function(a0){aV.call(this,a0);
var aZ=this.alleles[s.grabAllele];aZ.dragstart.call(aZ.SVG_outer,true);aZ.dragmove.call(aZ.SVG_outer,null,null,null,null,null,true,this.dragX,this.dragY)
});break}}aa(Z);ap.find(".play").click(function(){if((Z==="parent")||((Z==="offspring")&&(at&&I))){G();
al.loaded={};al.load("geniverseTimeline_"+am);al.play();l=true;s.playButtonPressed.call(s.context)
}});ap.find(".stop").click(function(){al.stop();l=false});ap.find(".retry").click(function(){if(am==="mother"){Geniverse.meiosisAnimationController.set("retryMother",true)
}else{Geniverse.meiosisAnimationController.set("retryFather",true)}});var aC=ap.find(".frame input").change(function(aF){R=parseInt(this.value,10);
al.frame(R);ar.slider("value",R*100);if(R===30){al.timelines["geniverseTimeline_"+am].play(29);
al.timelines["geniverseTimeline_"+am].play(30)}if(R>=80&&Z==="parent"){s.animationComplete.call(s.context)
}if(R>=35&&Z==="offspring"){s.animationComplete.call(s.context)}l=false;return this
});if(Z==="parent"){var av=ap.find(".swap").click(function(){al.timelines["geniverseTimeline_"+am].play(29);
al.timelines["geniverseTimeline_"+am].play(30);R=30;ar.slider("value",3000);aC.val(30);
G();al.stop();l=false;return this})}var au=ap.find(".end").click(function(){if((Z==="parent")||((Z==="offspring")&&(at&&I))){s.endButtonPressed.call(s.context,l);
al.timelines["geniverseTimeline_"+am].play(79);al.timelines["geniverseTimeline_"+am].play(80);
R=80;ar.slider("value",8000);aC.val(80);G();al.stop();l=false;return this}});var ar=ap.find(".scrub");
if((Z==="parent")||((Z==="offspring")&&(at&&I))){ar.slider({min:1,max:al.timelines["geniverseTimeline_"+am].end*100,value:0,slide:function(aF,aG){al.loaded={};
al.load("geniverseTimeline_"+am);R=~~(aG.value/100);al.timelines["geniverseTimeline_"+am].play(R);
aC.val(R);if(R==al.timelines["geniverseTimeline_"+am].end){s.animationComplete.call(s.context)
}l=false;G();al.stop()},stop:function(aF,aG){l=false;al.stop();R=parseInt(aG.value/100,10);
if(R>80){R=80}G();al.frame(R)}})}az=c.setInterval(function(){ae()},100)}})(this,this.document,this.jQuery,this.Raphael,Burst);
Geniverse.DragonBinView=SC.View.extend(SC.Border,{dragonViews:[],dragonBinIsEmptyBinding:"Geniverse.dragonBinController.isEmpty",isDropTarget:YES,borderStyle:function(){return this.get("isDropTarget")?SC.BORDER_BLACK:null
}.property("isDropTarget").cacheable(),showAddDragonsLabel:function(){return(this.get("isDropTarget")&&this.get("dragonBinIsEmpty"))
}.property("dragonBinIsEmpty"),addDragonsLabel:SC.LabelView.design({layout:{left:5,top:0,right:5,bottom:0},value:"Drag  drakes here to attach them as evidence",isVisibleBinding:"*parentView.showAddDragonsLabel"}),childViews:"addDragonsLabel".w(),updateDragonViews:function(){var d=this.get("dragonViews");
for(var b=0,c=d.get("length");b<c;b++){this.removeChild(d[b])}this.set("dragonViews",[]);
var a=this.get("dragons");for(b=0,c=a.get("length");b<c;b++){this.addDragonView(a.objectAt(b),b)
}}.observes("*dragons.[]"),addDragonView:function(d,c){var a=this.get("layout").height;
var b=Geniverse.OrganismView.create({layout:{top:0,bottom:0,left:(c*a),width:a},content:d,backgroundColor:"white"});
this.appendChild(b);this.get("dragonViews").insertAt(c,b)},acceptDragOperation:function(b,c){var a=this._getSourceDragon(b);
Geniverse.dragonBinController.pushObject(a);return c},computeDragOperations:function(b,a){return SC.DRAG_ANY
},dragEntered:function(b,a){this.$().addClass("drop-target")},dragExited:function(b,a){this.$().removeClass("drop-target")
},_getSourceDragon:function(a){var b;if((""+a.get("source").constructor==="Geniverse.OrganismView")){b=a.get("source").get("content")
}else{b=a.get("source").get("selection").get("firstObject")}return b}});sc_require("views/dragon_bin");
Geniverse.ArticleView=SC.View.extend(SC.StaticLayout,{childViews:"staticView editingView".w(),staticView:SC.View.extend(SC.StaticLayout,{childViews:"textView newButtonView editButtonView sendDraftButtonView".w(),textView:SC.ScrollView.design({hasHorizontalScroller:NO,classNames:["article_text"],layout:{left:0,top:0,right:0,height:170},contentView:SC.LabelView.design({layout:{left:0,top:0,right:0,bottom:0},isEditable:NO,isTextSelectable:YES,escapeHTML:NO,valueBinding:"Geniverse.articleController.combinedArticle",checkIfHeightChanged:function(){if(Geniverse.articleController.get("isStaticVisible")){var a=SC.Timer.schedule({target:this,action:"changeHeight",interval:200,repeats:NO})
}}.observes("Geniverse.articleController.isStaticVisible"),destroy:function(){Geniverse.articleController.removeObserver("isStaticVisible",this,this.checkIfHeightChanged);
arguments.callee.base.apply(this,arguments)},changeHeight:function(){var b=document.getElementById("article");
if(b){var a=b.offsetHeight;if((a)&&(a>0)){this.adjust("height",a)}}}})}),newButtonView:SC.ButtonView.design({layout:{bottom:15,height:24,left:0,width:95},title:"New paper",target:"Geniverse.articleController",action:"newPaperAction",isEnabledBinding:SC.Binding.not("Geniverse.articleController.isDraftChanged")}),editButtonView:SC.ButtonView.design({layout:{bottom:15,height:24,left:100,width:80},title:"Edit",target:"Geniverse.articleController",action:"editAction",isEnabledBinding:"Geniverse.articleController.isDraftChanged"}),sendDraftButtonView:SC.ButtonView.design({layout:{bottom:15,height:24,left:190,width:150},title:"Send draft to group",target:"Geniverse.articleController",action:"sendDraftAction",isEnabledBinding:"Geniverse.articleController.isDraftDirty"}),isVisibleBinding:"Geniverse.articleController.isStaticVisible"}),editingView:SC.View.extend(SC.StaticLayout,{childViews:"entryView previewButtonView".w(),entryView:SC.View.design({childViews:"claimLabel inputClaimView evidenceLabel inputEvidenceView reasoningLabel inputReasoningView".w(),layout:{left:0,top:0,right:0,height:170},classNames:["article_text"],claimLabel:SC.LabelView.design({layout:{left:0,top:0,right:0,height:16},value:"Claim:"}),inputClaimView:SC.TextFieldView.design({layout:{left:0,top:17,right:0,height:20},isTextArea:YES,valueBinding:"Geniverse.articleController.claimValue"}),evidenceLabel:SC.LabelView.design({layout:{left:0,top:40,right:0,height:18},value:"Evidence:"}),inputEvidenceView:SC.TextFieldView.design({layout:{left:0,top:59,right:0,height:37},isTextArea:YES,valueBinding:"Geniverse.articleController.evidenceValue"}),reasoningLabel:SC.LabelView.design({layout:{left:0,top:97,right:0,height:18},value:"Reasoning:"}),inputReasoningView:SC.TextFieldView.design({layout:{left:0,top:115,right:0,height:50},isTextArea:YES,valueBinding:"Geniverse.articleController.reasoningValue"})}),previewButtonView:SC.ButtonView.design({layout:{bottom:15,height:24,right:15,width:80},title:"Preview",target:"Geniverse.articleController",action:"previewDraftAction"}),isVisibleBinding:"Geniverse.articleController.isEditingVisible"})});
Geniverse.PublishedArticlesView=SC.View.extend({childViews:"list textView dragonBinView".w(),list:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:0,height:180,width:100},backgroundColor:"white",contentView:SC.ListView.design({contentBinding:"Geniverse.publishedArticlesController.arrangedObjects",selectionBinding:"Geniverse.publishedArticlesController.selection",rowHeight:30,canEditContent:NO,hasContentIcon:NO,contentValueKey:"group",isSelectable:YES,showAlternatingRows:YES}),autoScrollTriggerBinding:"Geniverse.publishedArticlesController.length"}),textView:SC.ScrollView.design({hasHorizontalScroller:NO,layout:{left:110,top:0,height:150,width:320},contentView:SC.LabelView.design(SC.StaticLayout,{isEditable:NO,escapeHTML:NO,valueBinding:"Geniverse.publishedArticlesController.articleText",checkIfHeightChanged:function(){if(Geniverse.articleController.get("isStaticVisible")){var a=SC.Timer.schedule({target:this,action:"changeHeight",interval:200,repeats:NO})
}}.observes("value"),changeHeight:function(){var a=document.getElementById("article").offsetHeight;
if(a>0){this.adjust("height",a)}}})}),dragonBinView:Geniverse.DragonBinView.design({layout:{top:160,height:40,left:110,width:240},isDropTarget:NO,dragonsBinding:"Geniverse.publishedArticlesController.dragons"})});
Geniverse.marginSize=15;sc_require("views/article");sc_require("views/published_articles");
Geniverse.yourArticleView=Geniverse.ArticleView.design({layout:{left:5,top:10,height:220}});
Geniverse.publishedArticlesView=Geniverse.PublishedArticlesView.design({layout:{left:5,top:10,height:220}});
sc_require("resources/lib/biologica.js");var drake=BioLogica.Species.Drake;GenGWT={generateDragon:function(a){org=BioLogica.Organism.createOrganism(drake);
a(org)},generateDragonWithSex:function(a,b){org=BioLogica.Organism.createOrganism(drake,"",a);
b(org)},generateDragonWithAlleleString:function(a,b){if(!a){if(!!console){console.error("Need to define alleles!")
}}else{org=BioLogica.Organism.createOrganism(drake,a);b(org)}},generateDragonWithAlleleStringAndSex:function(a,b,c){if(!a){if(!!console){console.error("Need to define alleles!")
}}else{org=BioLogica.Organism.createOrganism(drake,a,b);c(org)}},breedDragon:function(b,a,c){org=BioLogica.breed(b,a,true);
c(org)},breedDragons:function(c,b,a,d,f){var e={array:[]};while(c--){e.array.push(BioLogica.breed(b,a,d))
}f(e)},isAlive:function(a){return this.hasCharacteristic(a,"Alive")},setAlleles:function(b){var a=b.split("|");
if(a.length==1){this.currentAlleleStringF=a[0];this.currentAlleleStringM=a[0]}else{if(a.length==2){this.currentAlleleStringF=a[0];
this.currentAlleleStringM=a[1]}}},currentAlleleStringM:"",currentAlleleStringF:"",hasCharacteristic:function(b,c){function a(d,f){var g=d.array;
var e=g.length;while(e--){if(g[e]==f){return true}}return false}return a(b.characteristics,c)
},createDragon:function(a){return createGOrganismFromJSONString(JSON.stringify(a))
},getCharacteristics:function(a,b){getDragonCharacteristics(a,b,this.failure)},wrapCallback:function(b){function a(c){if(GenGWT.orgIsValid(c)){b(c)
}else{console.log("WARN: Organism generated was not valid");console.log(c);SC.AlertPane.error("","The application created an invalid Drake. Please reload the page and try again.")
}}return a},orgIsValid:function(b){if(!!b.size){var c=true;for(var a=0;a<b.size;a++){if(!GenGWT.orgIsValid(b.array[a])){c=false
}}return c}return(!!b.alleles&&(!!b.sex||b.sex==0)&&!!b.imageURL)},failure:function(a){SC.Logger.error("failure on GWT callback");
SC.Logger.error(a);SC.Logger.trace()}};
/*  SWFObject v2.0 <http://code.google.com/p/swfobject/>
  Copyright (c) 2007 Geoff Stearns, Michael Williams, and Bobby van der Sluis
  This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;
var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF&&typeof doc.appendChild!=UNDEF&&typeof doc.replaceChild!=UNDEF&&typeof doc.removeChild!=UNDEF&&typeof doc.cloneNode!=UNDEF,playerVersion=[0,0,0],d=null;
if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;
if(d){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);
playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0
}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")
}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];
a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)
}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");
playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
      ie = true;
      @if (@_win32)
        windows = true;
      @elif (@_mac)
        mac = true;
      @end
    @*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}
}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");
var s=getElementById("__ie_ondomload");if(s){s.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);
callDomLoadFunctions()}}}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()
}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)
}addLoadEvent(callDomLoadFunctions)}();function callDomLoadFunctions(){if(isDomLoaded){return
}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);
t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);
timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()
}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)
}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)
}else{if(typeof win.attachEvent!=UNDEF){win.attachEvent("onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;
win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;
for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);
if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";
regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)
}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])
}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];
if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;
for(var i=0;i<al;i++){if(a[i].nodeName.toLowerCase()=="data"){e.setAttribute("src",a[i].nodeValue)
}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;
for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName.toLowerCase()=="param"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))
}}}obj.parentNode.replaceChild(e,obj)}}function fixObjectLeaks(id){if(ua.ie&&ua.win&&hasPlayerVersion("8.0.0")){win.attachEvent("onunload",function(){var obj=getElementById(id);
if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=function(){}}}obj.parentNode.removeChild(obj)
}})}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);
if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;
storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)
}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"
}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"
}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;
if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";
newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";
win.attachEvent("onload",function(){obj.parentNode.removeChild(obj)})}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)
}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");
obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);
obj.style.display="none";win.attachEvent("onload",function(){obj.parentNode.removeChild(obj)
})}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");
if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];
if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="param")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))
}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(typeof attObj.id==UNDEF){attObj.id=id
}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i=="data"){parObj.movie=attObj[i]
}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i!="classid"){att+=" "+i+'="'+attObj[i]+'"'
}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'
}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";
fixObjectLeaks(attObj.id);r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");
e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k=="data"){e.setAttribute("src",attObj[k])
}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k!="classid"){e.setAttribute(k,attObj[k])
}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l!="movie"){e.setAttribute(l,parObj[l])
}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);
for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])
}else{if(m!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n!="movie"){createObjParam(o,n,parObj[n])
}}el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");
p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function getElementById(id){return doc.getElementById(id)
}function createElement(el){return doc.createElement(el)}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");
v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10);v[2]=parseInt(v[2],10);return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false
}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");
s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))
}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];
if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"inherit":"hidden";
if(isDomLoaded){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)
}}function getTargetVersion(obj){if(!obj){return 0}var c=obj.childNodes;var cl=c.length;
for(var i=0;i<cl;i++){if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="object"){c=c[i].childNodes;
cl=c.length;i=0}if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="param"&&c[i].getAttribute("name")=="swfversion"){return c[i].getAttribute("value")
}}return 0}function getExpressInstall(obj){if(!obj){return""}var c=obj.childNodes;
var cl=c.length;for(var i=0;i<cl;i++){if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="object"){c=c[i].childNodes;
cl=c.length;i=0}if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="param"&&c[i].getAttribute("name")=="expressinstall"){return c[i].getAttribute("value")
}}return""}return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr){return
}var obj=document.getElementById(objectIdStr);var xi=getExpressInstall(obj);var regObj={};
regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr?swfVersionStr:getTargetVersion(obj);
regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:((xi!="")?xi:false);regObjArr[regObjArr.length]=regObj;
setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;
if(ua.w3cdom&&isDomLoaded){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];
if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n
}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return
}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);
var att=(typeof attObj==OBJECT)?attObj:{};att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;
var par=(typeof parObj==OBJECT)?parObj:{};if(typeof flashvarsObj==OBJECT){for(var i in flashvarsObj){if(flashvarsObj[i]!=Object.prototype[i]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+i+"="+flashvarsObj[i]
}else{par.flashvars=i+"="+flashvarsObj[i]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);
if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){setVisibility(replaceElemIdStr,false);
addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;
regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)
})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}
},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom&&isDomLoaded){return createSWF(attObj,parObj,replaceElemIdStr)
}else{return undefined}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)
}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;
if(param==null){return q}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;
i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return pairs[i].substring((pairs[i].indexOf("=")+1))
}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);
if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);
if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;
isExpressInstallActive=false}}}}}();
/*  SWFObject v2.0 <http://code.google.com/p/swfobject/>
  Copyright (c) 2007 Geoff Stearns, Michael Williams, and Bobby van der Sluis
  This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;
var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF&&typeof doc.appendChild!=UNDEF&&typeof doc.replaceChild!=UNDEF&&typeof doc.removeChild!=UNDEF&&typeof doc.cloneNode!=UNDEF,playerVersion=[0,0,0],d=null;
if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;
if(d){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);
playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0
}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")
}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];
a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)
}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");
playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
/*@cc_on
      ie = true;
      @if (@_win32)
        windows = true;
      @elif (@_mac)
        mac = true;
      @end
    @*/
return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}
}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");
var s=getElementById("__ie_ondomload");if(s){s.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);
callDomLoadFunctions()}}}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()
}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)
}addLoadEvent(callDomLoadFunctions)}();function callDomLoadFunctions(){if(isDomLoaded){return
}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);
t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);
timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()
}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)
}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)
}else{if(typeof win.attachEvent!=UNDEF){win.attachEvent("onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;
win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;
for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);
if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";
regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)
}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])
}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];
if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;
for(var i=0;i<al;i++){if(a[i].nodeName.toLowerCase()=="data"){e.setAttribute("src",a[i].nodeValue)
}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;
for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName.toLowerCase()=="param"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))
}}}obj.parentNode.replaceChild(e,obj)}}function fixObjectLeaks(id){if(ua.ie&&ua.win&&hasPlayerVersion("8.0.0")){win.attachEvent("onunload",function(){var obj=getElementById(id);
if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=function(){}}}obj.parentNode.removeChild(obj)
}})}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);
if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;
storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)
}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"
}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"
}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;
if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";
newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";
win.attachEvent("onload",function(){obj.parentNode.removeChild(obj)})}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)
}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");
obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);
obj.style.display="none";win.attachEvent("onload",function(){obj.parentNode.removeChild(obj)
})}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");
if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];
if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="param")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))
}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(typeof attObj.id==UNDEF){attObj.id=id
}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i=="data"){parObj.movie=attObj[i]
}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i!="classid"){att+=" "+i+'="'+attObj[i]+'"'
}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'
}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";
fixObjectLeaks(attObj.id);r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");
e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k=="data"){e.setAttribute("src",attObj[k])
}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k!="classid"){e.setAttribute(k,attObj[k])
}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l!="movie"){e.setAttribute(l,parObj[l])
}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);
for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])
}else{if(m!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n!="movie"){createObjParam(o,n,parObj[n])
}}el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");
p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function getElementById(id){return doc.getElementById(id)
}function createElement(el){return doc.createElement(el)}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");
v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10);v[2]=parseInt(v[2],10);return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false
}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");
s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))
}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];
if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"inherit":"hidden";
if(isDomLoaded){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)
}}function getTargetVersion(obj){if(!obj){return 0}var c=obj.childNodes;var cl=c.length;
for(var i=0;i<cl;i++){if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="object"){c=c[i].childNodes;
cl=c.length;i=0}if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="param"&&c[i].getAttribute("name")=="swfversion"){return c[i].getAttribute("value")
}}return 0}function getExpressInstall(obj){if(!obj){return""}var c=obj.childNodes;
var cl=c.length;for(var i=0;i<cl;i++){if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="object"){c=c[i].childNodes;
cl=c.length;i=0}if(c[i].nodeType==1&&c[i].nodeName.toLowerCase()=="param"&&c[i].getAttribute("name")=="expressinstall"){return c[i].getAttribute("value")
}}return""}return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr){return
}var obj=document.getElementById(objectIdStr);var xi=getExpressInstall(obj);var regObj={};
regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr?swfVersionStr:getTargetVersion(obj);
regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:((xi!="")?xi:false);regObjArr[regObjArr.length]=regObj;
setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;
if(ua.w3cdom&&isDomLoaded){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];
if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n
}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return
}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);
var att=(typeof attObj==OBJECT)?attObj:{};att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;
var par=(typeof parObj==OBJECT)?parObj:{};if(typeof flashvarsObj==OBJECT){for(var i in flashvarsObj){if(flashvarsObj[i]!=Object.prototype[i]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+i+"="+flashvarsObj[i]
}else{par.flashvars=i+"="+flashvarsObj[i]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);
if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){setVisibility(replaceElemIdStr,false);
addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;
regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)
})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}
},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom&&isDomLoaded){return createSWF(attObj,parObj,replaceElemIdStr)
}else{return undefined}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)
}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;
if(param==null){return q}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;
i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return pairs[i].substring((pairs[i].indexOf("=")+1))
}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);
if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);
if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;
isExpressInstallActive=false}}}}}();sc_require("views/organism");Geniverse.BreedDragonView=SC.View.extend({classNames:["breed-organism-view"],motherBinding:"Geniverse.breedDragonController.mother",fatherBinding:"Geniverse.breedDragonController.father",childBinding:"Geniverse.breedDragonController.child",childViews:"fatherView motherView childView childLabel breedButtonView".w(),hasParentsBinding:"Geniverse.breedDragonController.hasParents",showChildView:YES,trackScore:NO,breedButtonView:SC.ButtonView.design({layout:{top:0,left:10,width:100,height:24},target:"Geniverse.breedDragonController",trackScoreBinding:"*parentView.trackScore",action:function(){return this.get("trackScore")?"breedAndIncrementScore":"breed"
}.property("trackScore"),isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()}),motherView:Geniverse.OrganismView.design({layout:{top:30,right:0,width:150,height:150},classNames:"sc-theme motherView opaque".w(),contentBinding:"*parentView.mother",parent:"mother",label:"mother",showLabel:true,sex:1,isDropTarget:YES,trackScoreBinding:"*parentView.trackScore"}),fatherView:Geniverse.OrganismView.design({layout:{bottom:0,right:0,width:150,height:150},classNames:"fatherView opaque".w(),contentBinding:"*parentView.father",parent:"father",label:"father",showLabel:true,sex:0,isDropTarget:YES,trackScoreBinding:"*parentView.trackScore"}),childView:Geniverse.OrganismView.design({layout:{bottom:20,centerX:0,width:180,height:150},classNames:"childView",contentBinding:"*parentView.child",isVisibleBinding:"*parentView.showChildView"}),childLabel:SC.LabelView.design({layout:{centerX:0,bottom:170,width:40,height:18},classNames:"childLabel",value:"Child",woo:function(){this.propertyDidChange("isVisible")
}.observes("*parentView.child"),isVisible:function(){if(!!this.get("parentView")){return !!this.get("parentView").get("child")&&this.get("parentView").get("showChildView")
}return NO}.property("*parentView.child")}),viewDidResize:function(){this._resize_children()
},_resize_children:function(){var i=188/144;var g=144/188;var b=this.get("layer").offsetWidth;
var j=this.get("layer").offsetHeight;var c=b/2;var a=(j-(24+18+18))/2;var d=a*i;var e=c*g;
var h=c;var f=e;if(e>a){f=a;h=d}this._adjust_size(this.get("fatherView"),h,f);this._adjust_size(this.get("motherView"),h,f);
this._adjust_size(this.get("childView"),h,f)},_adjust_size:function(b,c,a){b.adjust("width",c);
b.adjust("height",a)}});Geniverse.DragonChatComposeView=SC.View.extend({isDropTarget:YES,childViews:"chatComposeView".w(),chatComposeView:CcChat.ChatComposeView.design({layout:{top:0,left:0,bottom:0,right:0}}),acceptDragOperation:function(b,c){var a=this._getSourceDragon(b);
Geniverse.dragonChattingController.chatDragon(a);return c},computeDragOperations:function(b,a){return SC.DRAG_ANY
},dragEntered:function(b,a){this.$().addClass("drop-target")},dragExited:function(b,a){this.$().removeClass("drop-target")
},_getSourceDragon:function(a){var b;if((""+a.get("source").constructor==="Geniverse.OrganismView")){b=a.get("source").get("content")
}else{b=a.get("source").get("selection").get("firstObject")}return b}});Geniverse.marginSize=15;
sc_require("views/article");sc_require("views/breed_dragon");sc_require("views/dragon_bin");
sc_require("views/dragon_chat_compose");sc_require("views/organism");sc_require("views/published_articles");
Geniverse.appletDemoMainPage=SC.Page.design({mainPane:SC.MainPane.design({childViews:"breedView appletView transcriptionApplet listScrollView tabQuestionsView".w(),breedView:Geniverse.BreedDragonView.design({layout:{top:Geniverse.marginSize,left:Geniverse.marginSize,height:200,width:300}}),transcriptionApplet:CC.MwAppletView.design({layout:{right:Geniverse.marginSize,top:Geniverse.marginSize,height:200,width:300},cmlUrl:"http://mw2.concord.org/public/test/transcribe.cml",alleleDnaBinding:"Geniverse.mainPage.mainPane.appletView*alleleDna",alleleDnaDidChange:function(){var a=this;
this.run(function(b){var c=a._pad_dna(a.get("alleleDna"));b.runMwScript("mw2d:1:set DNA "+c)
})}.observes("alleleDna"),_pad_dna:function(a){while(a.length%3!==0){a+="a"}return a
}}),listScrollView:SC.ScrollView.design({hasHorizontalScroller:NO,layout:{left:Geniverse.marginSize,top:200,height:200,width:300},backgroundColor:"white",contentView:SC.ListView.design({contentBinding:"Geniverse.stableOrganismsController.arrangedObjects",selectionBinding:"Geniverse.stableOrganismsController.selection",rowHeight:30,canEditContent:NO,contentIconKey:"imageURL",hasContentIcon:YES,contentValueKey:"info",isSelectable:YES})}),appletView:CC.AppletView.design({layout:{left:Geniverse.marginSize,bottom:Geniverse.marginSize,height:300,width:600},jarBase:"http://jnlp.concord.org/dev/org/concord/",jars:"biologica/biologica-0.1.0-SNAPSHOT.jar biologica-applets/biologica-applets-0.1.0-SNAPSHOT.jar framework/framework-0.1.0-SNAPSHOT.jar frameworkview/frameworkview-0.1.0-SNAPSHOT.jar".w(),jarUrls:function(){var d=this.get("jarBase");
var a=this.get("jars");var b="";for(var c=0;c<a.length;c++){b+=d+a[c]+", "}return b
}.property("jarBase","jars").cacheable(),code:"org/concord/biologica/applet/ChromosomeApplet.class",selectionBinding:SC.Binding.from("Geniverse.stableOrganismsController.selection").oneWay().single(),selectionDidChange:function(){var a=this.get("selection");
if(a!==null){this.run(function(b){var c=b.getOrganism();c.getWorld().deleteAllOrganisms(true);
c=b.createOrganismWithAlleleStringAndSex(a.get("alleles"),a.get("sex"));b.setOrganism(c)
})}}.observes("selection"),init:function(){this.set("selectionPoller",SC.Timer.schedule({target:this,action:"pollForAlleleSelection",interval:500,repeats:YES}));
arguments.callee.base.apply(this,arguments)},pollForAlleleSelection:function(){var d=this.appletInstance();
if(d!==null&&typeof(d.getView)!="undefined"){var b=d.getView();if(b===null){return
}var c=b.getSelectedVariant();var a=this._get_variant_str(c);if(a!==this.get("alleleDna")){this.set("alleleDna",a)
}}},_get_variant_str:function(b){if(b===null){return""}var d=b.getLengthInBases();
var c="";for(var a=0;a<d;a++){c+=this._get_base_str(b.getBase(a))}return c},_get_base_str:function(a){if(a===1){return"c"
}else{if(a===2){return"a"}else{if(a===3){return"g"}else{if(a===4){return"t"}else{return""
}}}}}}),tabQuestionsView:SC.TabView.design({layout:{right:Geniverse.marginSize,bottom:Geniverse.marginSize,height:200,width:600},items:[{title:"Questions",value:"questionsView"},{title:"Rich Text",value:"richTextView"}],itemTitleKey:"title",itemValueKey:"value",nowShowing:"questionsView"}),viewDidResize:function(){var a=this.get("layer").offsetWidth;
var g=this.get("layer").offsetHeight;var h=2*Geniverse.marginSize;var e=3*Geniverse.marginSize;
var i=4*Geniverse.marginSize;var d=(a-e)/2;var b=(g-i)/4;var f=(g-i)/2;this._adjust_size(this.get("breedView"),{width:d,height:b});
this._adjust_size(this.get("listScrollView"),{width:d,height:b,top:b+Geniverse.marginSize});
this._adjust_size(this.get("appletView"),{width:d,height:f});var c=this._adjust_size(this.get("transcriptionApplet"),{width:d,height:(g-e)/2});
this._adjust_size(this.get("tabQuestionsView"),{width:d,height:(g-e)/2})},_adjust_size:function(a,c){for(var b in c){a.adjust(b,c[b])
}}}),richTextView:SC.LabelView.design({layout:{left:Geniverse.marginSize,top:Geniverse.marginSize},escapeHTML:NO,value:"This <em>could</em> be rich text maybe....<br><br> I think its centered as well..."}),questionsView:SC.ScrollView.design({layout:{left:Geniverse.marginSize,top:Geniverse.marginSize,right:Geniverse.marginSize,bottom:Geniverse.marginSize},contentView:SC.StackedView.design({childViews:"question1 text1 question2 text2 question3 text3".w(),question1:CC.QuestionView.design({useStaticLayout:YES,classNames:"question1",prompt:"First Question: What is your name?"}),text1:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,escapeHTML:NO,value:"Text: Now that you've thought about your name, let's think about something a little more deep.<br/>&nbsp;"}),question2:CC.MultipleChoiceQuestionView.design({useStaticLayout:YES,classNames:"question2",prompt:"Second Question: What is your quest?",choices:["To seek the Holy Grail","To find peace in my life","To count all the stars in the sky"]}),text2:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,escapeHTML:NO,value:"Text: You've chosen to undertake quite a quest! One last question for you.<br/>&nbsp;"}),question3:CC.QuestionView.design({useStaticLayout:YES,classNames:"question3",prompt:"Third Question: What is your favorite color?"}),text3:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,escapeHTML:NO,value:"That wasn't too hard, was it?<br/>&nbsp;"})})})});
Geniverse.ChromosomeView=SC.View.extend({dragonBinding:"Geniverse.chromosomeController.content",initRandomDragon:NO,showDragon:YES,showGenerateNewDragon:NO,init:function(){if(this.get("initRandomDragon")){Geniverse.chromosomeController.initRandomDragon()
}arguments.callee.base.apply(this,arguments)},childViews:"dragonView motherLabel fatherLabel chromsomeAView chromsomeBView generateNewDragonButton".w(),dragonView:Geniverse.OrganismView.design({layout:{top:18,right:0,width:180,height:150},contentBinding:"*parentView.dragon",allowDrop:YES,isVisibleBinding:"*parentView.showDragon"}),motherLabel:SC.LabelView.design({layout:{top:0,left:0,width:100,height:25},value:"From mother"}),fatherLabel:SC.LabelView.design({layout:{top:0,left:120,width:100,height:25},value:"From father"}),chromsomeAView:SC.View.extend({layout:{top:35,left:0,width:80,height:500},createPullDowns:function(){if(!!this.get("parentView")){this.removeAllChildren();
var a=Geniverse.chromosomeController.get("chromosomeAlleles")["a"];for(var b=0;b<a.length;
b++){this.get("parentView").addPullDown(this,a[b],b)}}}.observes("Geniverse.chromosomeController.alleles"),destroy:function(){Geniverse.chromosomeController.removeObserver("alleles",this,this.createPullDowns);
arguments.callee.base.apply(this,arguments)}}),chromsomeBView:SC.View.extend({layout:{top:35,left:120,width:80,height:500},createPullDowns:function(){if(!!this.get("parentView")){this.removeAllChildren();
var a=Geniverse.chromosomeController.get("chromosomeAlleles")["b"];for(var b=0;b<a.length;
b++){this.get("parentView").addPullDown(this,a[b],b)}}}.observes("Geniverse.chromosomeController.alleles"),destroy:function(){Geniverse.chromosomeController.removeObserver("alleles",this,this.createPullDowns);
arguments.callee.base.apply(this,arguments)}}),generateNewDragonButton:SC.ButtonView.extend({layout:{top:180,right:0,width:200,height:25},title:"Create a new dragon",action:"Geniverse.chromosomeController.initRandomDragon",isVisibleBinding:"*parentView.showGenerateNewDragon"}),addPullDown:function(a,e,c){var g=e[0];
var f=e[1];var d=a.get("layout").width;var b=SC.SelectView.create({layout:{top:(25*c),left:0,height:25,width:50},items:[SC.Object.create({title:g,isEnabled:YES,checkbox:NO}),SC.Object.create({title:f,isEnabled:YES,checkbox:NO})],itemTitleKey:"title",theme:"square",showCheckbox:NO});
b.addObserver("value",this.updateDragon);a.appendChild(b)},updateDragon:function(){if(!!this.get("parentView")&&!!this.get("parentView").get("parentView")){var b=this.get("parentView").get("parentView");
var c=b.getAllelesFromViews(b.get("chromsomeAView"));var a=b.getAllelesFromViews(b.get("chromsomeBView"));
Geniverse.chromosomeController.updateDragon(c,a)}},getAllelesFromViews:function(b){var c=[];
var a=b.get("childViews");for(var d=0;d<a.length;d++){var f=a[d].get("value");if(!!f){var e=f.get("title");
if(SC.$.inArray(e,c)<0){c.push(e)}}}return c}});Geniverse.marginSize=15;sc_require("views/breed_dragon");
sc_require("views/chromosome");sc_require("views/dragon_genome");Geniverse.biologicaViewsMainPage=SC.Page.design({mainPane:SC.MainPane.design({childViews:"tabView".w(),tabView:SC.TabView.design({layout:{top:30,bottom:5,left:5,right:5},items:[{title:"Breeding view",value:"breedPanel"},{title:"Chromosome view",value:"chromosomePanel"}],itemTitleKey:"title",itemValueKey:"value",nowShowing:"breedPanel"})}),breedPanel:SC.View.design({layout:{top:5,bottom:5,left:5,right:5},childViews:"title breedView".w(),title:SC.LabelView.design({layout:{top:20,height:25,left:20,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Breeding"}),breedView:Geniverse.BreedDragonView.design({layout:{top:80,left:20,height:230,width:450}})}),chromosomePanel:SC.View.design({layout:{top:5,bottom:5,left:5,right:5},childViews:"title chromosomeView".w(),title:SC.LabelView.design({layout:{top:20,height:25,left:20,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Chromosome view"}),chromosomeView:Geniverse.DragonGenomeView.design({layout:{top:80,left:40,height:600,width:500},showFromLabels:NO,showIsEditableCheck:YES})})});
function SHA_1_sha1Hash(h){var n=[1518500249,1859775393,2400959708,3395469782];h+=String.fromCharCode(128);
var x=h.length/4+2;var k=Math.ceil(x/16);var m=new Array(k);for(var z=0;z<k;z++){m[z]=new Array(16);
for(var y=0;y<16;y++){m[z][y]=(h.charCodeAt(z*64+y*4)<<24)|(h.charCodeAt(z*64+y*4+1)<<16)|(h.charCodeAt(z*64+y*4+2)<<8)|(h.charCodeAt(z*64+y*4+3))
}}m[k-1][14]=((h.length-1)*8)/Math.pow(2,32);m[k-1][14]=Math.floor(m[k-1][14]);m[k-1][15]=((h.length-1)*8)&4294967295;
var u=1732584193;var r=4023233417;var q=2562383102;var p=271733878;var o=3285377520;
var f=new Array(80);var E,D,C,B,A;for(var z=0;z<k;z++){for(var v=0;v<16;v++){f[v]=m[z][v]
}for(var v=16;v<80;v++){f[v]=SHA_1_ROTL(f[v-3]^f[v-8]^f[v-14]^f[v-16],1)}E=u;D=r;
C=q;B=p;A=o;for(var v=0;v<80;v++){var w=Math.floor(v/20);var g=(SHA_1_ROTL(E,5)+SHA_1_f(w,D,C,B)+A+n[w]+f[v])&4294967295;
A=B;B=C;C=SHA_1_ROTL(D,30);D=E;E=g}u=(u+E)&4294967295;r=(r+D)&4294967295;q=(q+C)&4294967295;
p=(p+B)&4294967295;o=(o+A)&4294967295}return u.toHexStr()+r.toHexStr()+q.toHexStr()+p.toHexStr()+o.toHexStr()
}function SHA_1_f(b,a,d,c){switch(b){case 0:return(a&d)^(~a&c);case 1:return a^d^c;
case 2:return(a&d)^(a&c)^(d&c);case 3:return a^d^c}}function SHA_1_ROTL(a,b){return(a<<b)|(a>>>(32-b))
}Number.prototype.toHexStr=function(){var c="",a;for(var b=7;b>=0;b--){a=(this>>>(b*4))&15;
c+=a.toString(16)}return c};Geniverse.INIT_ACTIVITY=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){SC.Logger.log("INIT_ACTIVITY");
var a=Geniverse.ACTIVITIES_QUERY;var b=Geniverse.store.find(a);function c(){if(b.get("status")===SC.Record.READY_CLEAN){var d=b.lastObject();
var e=b.find(function(f){var g=f.get("title");if(g==Geniverse.activityController.get("activityTitle")){SC.Logger.info("Using activity named: %s",g);
return YES}else{SC.Logger.info("found non-matching activitiy named:_%s_",g)}});if(e===null||e===undefined){SC.Logger.info("Could not find activity matching: %s",Geniverse.activityController.get("activityTitle"));
e=d}Geniverse.activityController.set("content",e);b.removeObserver("status",c);Geniverse.makeFirstResponder(Geniverse.LOGIN)
}}if(b.get("status")===SC.Record.READY_CLEAN){c()}else{b.addObserver("status",c)}},willLoseFirstResponder:function(){}});
Geniverse.makeRestParams=function(a){var b="";var c=[];var h;for(h in a){if(typeof h==="string"){var i=a[h];
var e=h;if(typeof i==="object"){try{i=i.get("id");var d=i.split("/");var g=d[d.length-1];
i=g;e="%@_id".fmt(h)}catch(f){SC.Logger.error("Error: %s",f);SC.Logger.error("Oops, %s didn't have an detectable id",i);
continue}}c.push("%@=%@".fmt(e,i))}}b="?%@".fmt(c.join("&"));return b};Geniverse.LOAD_DATA=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){SC.Logger.log("LOAD");
var e=Geniverse.userController.get("content");var d=Geniverse.activityController.get("content");
SC.Logger.log("LOAD: stable");var a=SC.Query.local(Geniverse.Dragon,{conditions:"bred = true AND isEgg = false AND user = {user} AND isInMarketplace = false AND activity = {activity}",user:e,activity:d,orderBy:"stableOrder",restParams:Geniverse.makeRestParams({bred:"true",isEgg:"false",isInMarketplace:"false",user:e,activity:d})});
var b=Geniverse.store.find(a);Geniverse.stableOrganismsController.set("content",b);
SC.Logger.log("LOAD: eggs");Geniverse.EGGS_QUERY=SC.Query.local("Geniverse.Dragon",{conditions:"bred = true AND isEgg = true AND user = {user} AND isInMarketplace = false AND activity = {activity}",user:e,activity:d,orderBy:"storeKey",restParams:Geniverse.makeRestParams({bred:"true",isEgg:"true",isInMarketplace:"false",user:e,activity:d})});
Geniverse.eggsController.set("content",[]);SC.Logger.log("LOAD: chats");var h=SC.Query.local(CcChat.ChatMessage,{orderBy:"time"});
var l=CcChat.store.find(h);Geniverse.chatListController.set("content",l);SC.Logger.log("LOAD: articles");
var g=SC.Query.local(Geniverse.Article,{orderBy:"time"});var f=Geniverse.store.find(g);
Geniverse.publishedArticlesController.set("content",f);SC.Logger.log("LOAD: challenge dragons");
var j=SC.Query.local("Geniverse.Dragon",{conditions:"bred = false AND user = {user} AND activity = {activity} AND mother = {mother} AND father = {father}",user:e,activity:d,mother:null,father:null,orderBy:"storeKey",restParams:Geniverse.makeRestParams({mother_id:"null",father_id:"null",bred:"false",user:e,activity:d})});
var i=Geniverse.store.find(j);var k=this;function c(){SC.Logger.info("challenge dragons observer called");
if(i.get("status")&SC.Record.READY===SC.Record.READY){SC.Logger.info("Results ready.");
i.removeObserver("status",c);Geniverse.challengePoolController.set("content",i);if(Geniverse.challengePoolController.get("content").length()<1){SC.Logger.info("No challenge dragons");
k.initChallengeDragons()}else{SC.Logger.info("Found challenge dragons")}}else{SC.Logger.info("Results not ready.")
}}if(i.get("status")&SC.Record.READY===SC.Record.READY){SC.Logger.log("already ready to go!");
c()}else{SC.Logger.log("adding challenge dragons observer");i.addObserver("status",c)
}},initChallengeDragons:function(){function f(h){SC.RunLoop.begin();SC.Logger.info("created dragon");
SC.Logger.dir(h.attributes());SC.RunLoop.end()}SC.Logger.info("Creating defaults");
var e=Geniverse.loginController.get("groupNumber")-1;var g=Geniverse.loginController.get("memberNumber")-1;
var d=Geniverse.activityController.getConfigurationForRoomMember(e,g,false);SC.Logger.info("Found "+d.length+" defaults");
for(var c=0;c<d.length;c++){var b=d[c];var a=(typeof b.name!="undefined")?b.name:("Starter"+c);
SC.Logger.info("Creating "+b.sex+": "+a+" ( "+b.alleles+") defaults");Geniverse.gwtController.generateDragonWithAlleles(b.alleles,b.sex,a,f)
}if(d.length===0){SC.Logger.info("No configurations. Creating defaults.");Geniverse.gwtController.generateDragon(1,"Mother",f);
Geniverse.gwtController.generateDragon(0,"Father",f)}}});Geniverse.EGGS_QUERY=null;
Geniverse.LOGIN=SC.Responder.create({nextResponder:null,didBecomeFirstResponder:function(){SC.Logger.log("LOGIN");
function a(){if(Geniverse.appController.get("userLoggedIn")){Geniverse.appController.removeObserver("loggedIn",a);
Geniverse.makeFirstResponder(Geniverse.LOAD_DATA)}}Geniverse.appController.addObserver("userLoggedIn",a);
Geniverse.appController.checkLoginState()}});Geniverse.START=SC.Responder.create({nextResponder:null,gwtReady:function(){Geniverse.gwtController.removeObserver("isReady",this,"gwtReady");
Geniverse.set("isLoaded",YES);Geniverse.makeFirstResponder(Geniverse.INIT_ACTIVITY)
},didBecomeFirstResponder:function(){Geniverse.gwtController.addObserver("isReady",this,"gwtReady")
}});Geniverse.AnimationButtonView=SC.ButtonView.extend({titleMinWidth:0,title:"",icon:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/magnifying-glass.png",classNames:"animation-button",action:function(){var a=this.get("selection");
if(a.get("length")<1){SC.AlertPane.info("","You must select a dragon first!")}else{if(a.get("length")>1){SC.AlertPane.info("","You can only view the chromosomes of one dragon at a time!")
}else{Geniverse.meiosisAnimationController.showPane()}}},selectionDidChange:function(){var b=this.get("selection");
if(b.get("length")<1||b.get("length")>1){Geniverse.meiosisAnimationController.set("dragon",null)
}else{var a=b.firstObject();Geniverse.meiosisAnimationController.set("dragon",a)}}.observes("selection"),selection1DidChange:function(){var b=this.get("selection1");
if(b.get("length")<1||b.get("length")>1){Geniverse.meiosisAnimationController.set("dragon",null)
}else{var a=b.firstObject();Geniverse.meiosisAnimationController.set("dragon",a)}}.observes("selection1"),selection2DidChange:function(){var b=this.get("selection2");
if(b.get("length")<1||b.get("length")>1){Geniverse.meiosisAnimationController.set("dragon",null)
}else{var a=b.firstObject();Geniverse.meiosisAnimationController.set("dragon",a)}}.observes("selection1")});
sc_require("core");Geniverse.ChatMessageView=CcChat.ChatMessageView.extend({mouseDown:function(b){var a=this;
var f=this.get("content").get("message");var e=this.get("content").get("item");SC.Logger.dir(f);
SC.Logger.dir(e);var c=["dragonChat"];var d=function(h){return(c.indexOf(h)>-1)};
var g={event:b,source:a.get("parentView"),dragView:a,ghost:NO,slideBack:NO,data:e,dataTypes:c,hasDataType:function(h){SC.Logger.warn("Type asked for: %s",h);
return d(h)},dataForType:function(h){SC.Logger.warn("Type asked for: %s",h);if(d(h)){return dragon
}return null}};SC.Drag.start(g);SC.Logger.warn("started drag")}});Geniverse.ChromosomeToolView=SC.ButtonView.extend({titleMinWidth:0,title:"",icon:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/magnifying-glass.png",classNames:"chromosome-tool",toolTip:"Use this to view parent, offspring, and stabled drake chromosomes.",selectionBinding:"Geniverse.allSelectedDragonsController.selection",action:function(){var a=this.get("selection");
if(a.get("length")>1){SC.AlertPane.info("","You can only view the chromosomes of one dragon at a time!")
}else{Geniverse.chromosomeToolController.showPane()}},selectionDidChange:function(){var b=this.get("selection");
if(b.get("length")<1||b.get("length")>1){Geniverse.chromosomeToolController.set("dragon",null)
}else{var a=b.firstObject();Geniverse.chromosomeToolController.set("dragon",a)}}.observes("selection")});
sc_require("mixins/simple_button");Geniverse.GenomeSolutionView=SC.PanelPane.design({layout:{width:360,height:490,centerX:310,centerY:50},isModal:YES,defaultResponder:"Lab.statechart",contentView:SC.View.extend({childViews:"title chromosomeA1View chromosomeA2View chromosomeAXView chromosomeB1View chromosomeB2View chromosomeBXView submitButton returnButton".w(),init:function(){arguments.callee.base.apply(this,arguments);
this.invokeLast(function(){this._setupPulldowns()})},title:SC.LabelView.design({layout:{centerY:-90,height:24,left:0,top:15,width:260},value:"I think the alleles are",controlSize:"info-title",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER}),chromosomeA1View:SC.ImageView.design({layout:{top:50,left:35,width:22},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/A1-chromosome.png",classNames:["opaque"]}),chromosomeB1View:SC.ImageView.design({layout:{top:50,left:75,width:22},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/B1-chromosome.png",classNames:["opaque"]}),chromosomeA2View:SC.ImageView.design({layout:{top:190,left:35,width:22},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/A2-chromosome.png",classNames:["opaque"]}),chromosomeB2View:SC.ImageView.design({layout:{top:190,left:75,width:22},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/B2-chromosome.png",classNames:["opaque"]}),chromosomeAXView:SC.ImageView.design({layout:{top:330,left:35,width:22},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/AX-chromosome.png",classNames:["opaque"]}),chromosomeBXView:SC.ImageView.design({layout:{top:330,left:75,width:22},value:function(){if(Geniverse.invisibleGenomeController.getPath("content.sex")===0){return"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/BY-chromosome.png"
}else{return"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/BX-chromosome.png"
}}.property("Geniverse.invisibleGenomeController.content"),classNames:["opaque"]}),submitButton:SC.ButtonView.design({layout:{centerX:80,bottom:20,height:24,width:130},title:"Submit",target:"Lab.statechart",action:"submitInvisibleGenotype"}),returnButton:SC.ButtonView.design({layout:{centerX:-80,bottom:20,height:24,width:130},title:"Return to the Lab",target:"Geniverse.invisibleGenomeController",action:"hideGenomePane"}),_setupPulldowns:function(){var a=Geniverse.invisibleGenomeController.get("allAlleles");
var c=60;for(var b=1;b<4;b++){if(b===3){b="X"}if(!!a[b]&&!!a[b].A){this._setupPulldownsForChromosome(a[b].A,a[b].B,c);
c+=140}}},_setupPulldownsForChromosome:function(a,c,f){if(c==null){c=[]}var e=Geniverse.invisibleGenomeController.get("hiddenGenes");
var d=Geniverse.invisibleGenomeController.get("staticGenes");for(var b=0;b<a.length;
b++){if(!~e.indexOf(a[b].toLowerCase())&&!~d.indexOf(a[b].toLowerCase())){this._createPulldown(a[b],c[b],f+b*30,b)
}}},_createPulldown:function(y,p,n,c){var x=this.get("alleleToPulldown");var d;var g=Geniverse.chromosomeController.get("allAlleles");
for(var u in g){for(var s in g[u]){if(g[u][s]===y){d=g[u]}}}var o=[];var v=[];for(var u in d){if(SC.typeOf(d[u])===SC.T_STRING){var a=d[u];
v.push(a)}}var e=v.slice(0);var q=null;for(var u=0,k=v.length;u<k;u++){for(var s=u;
s<k;s++){var r=Geniverse.chromosomeController.titleForAllele(v[u]);var b=p?Geniverse.chromosomeController.titleForAllele(e[s]):"";
var m=r+" / "+b;if((v[u]==y&&(!p||e[s]==p))||(e[s]==y&&(!p||v[u]==p))){q=m}var l=SC.Object.create({value:m,title:m,index:c});
o.push(l);if(!p){break}}}var w=y;var h=SC.Object.create({value:" ",title:" Select a Genotype",index:c});
o.unshift(h);w=" ";var f=SC.SelectFieldView.create({layout:{top:n,left:105,height:25,width:170},objects:o,value:w,nameKey:"title",valueKey:"value",correctOption:q,updater:function(){var i=this.get("value")===this.get("correctOption");
Geniverse.invisibleGenomeController.setFieldCorrect(y,i)}.observes("value")});this.appendChild(f);
Geniverse.invisibleGenomeController.addField(y)}})});Geniverse.IntroScreenView=SC.PanelPane.design({layout:{top:5,left:5,bottom:5,right:5},isModal:YES,defaultResponder:"Lab.statechart",contentView:SC.View.extend({childViews:"background imageView hideButton".w(),background:SC.View.design({layout:{top:0,left:0,right:0,bottom:0},classNames:["genome-view-intro"]}),hideButton:SC.ButtonView.extend({layout:{bottom:5,right:5,width:200,height:24},title:"Continue",action:"closePanel"}),imageView:SC.View.design({layout:{left:5,top:5,right:5,bottom:34},classNames:["intro-image-wrapper"],displayProperties:["value"],valueBinding:"Geniverse.introScreenController.imageUrl",render:function(a,b){if(this.get("value")){a.push('<image src="'+this.get("value")+'" />')
}}})})});Geniverse.LoginView=SC.View.extend({showPasswordField:YES,childViews:"nameLabel nameField passwordLabel passwordField retypePasswordLabel retypePasswordField loginButtonView registerButtonView welcomeView memberSelectView groupSelectView".w(),nameLabel:SC.LabelView.design({layout:{left:40,top:5,width:80,height:24},value:"Username",fontWeight:SC.BOLD_WEIGHT}),nameField:SC.TextFieldView.design({layout:{left:130,top:5,width:200,height:24},isTextArea:NO,valueBinding:"Geniverse.loginController.username",keyUp:function(a){if(a.keyCode===13){Geniverse.loginController.login()
}this.fieldValueDidChange();a.allowDefault();return YES}}),passwordLabel:SC.LabelView.design({layout:{left:40,top:35,width:80,height:24},value:"Password",fontWeight:SC.BOLD_WEIGHT,isVisibleBinding:"*parentView.showPasswordField"}),passwordField:SC.TextFieldView.design({layout:{left:130,top:35,width:200,height:24},isPassword:YES,isTextArea:NO,valueBinding:"Geniverse.loginController.passwordValue",keyUp:function(a){if(a.keyCode===13){Geniverse.loginController.login()
}this.fieldValueDidChange();a.allowDefault();return YES},isVisibleBinding:"*parentView.showPasswordField"}),retypePasswordLabel:SC.LabelView.design({layout:{left:0,top:65,width:120,height:24},value:"Retype Password",fontWeight:SC.BOLD_WEIGHT,isVisibleBinding:"Geniverse.loginController.showRetypeField"}),retypePasswordField:SC.TextFieldView.design({layout:{left:130,top:65,width:200,height:24},isPassword:YES,isTextArea:NO,valueBinding:"Geniverse.loginController.retypePasswordValue",keyUp:function(a){if(a.keyCode===13){Geniverse.loginController.register()
}this.fieldValueDidChange();a.allowDefault();return YES},isVisibleBinding:"Geniverse.loginController.showRetypeField"}),loginButtonView:SC.ButtonView.design({layout:{top:35,height:24,left:350,width:100},title:"Log in",target:"Geniverse.loginController",action:"login",isVisibleBinding:SC.Binding.not("Geniverse.loginController.showRetypeField"),init:function(){if(!this.get("parentView").get("showPasswordField")){this.adjust({top:5})
}arguments.callee.base.apply(this,arguments)}}),registerButtonView:SC.ButtonView.design({layout:{top:65,height:24,left:350,width:140},title:"Register new user",target:"Geniverse.loginController",action:"register",isVisible:NO}),welcomeView:SC.LabelView.design({layout:{top:5,height:24,left:370,width:200},value:"",valueBinding:SC.Binding.from("Geniverse.loginController.welcomeMessage").oneWay()}),groupSelectView:SC.SelectFieldView.design({layout:{top:65,left:130,height:25,width:90},objects:[SC.Object.create({value:1,title:"group 1"}),SC.Object.create({value:2,title:"group 2"}),SC.Object.create({value:3,title:"group 3"})],valueBinding:"Geniverse.loginController.groupNumber",nameKey:"title",valueKey:"value"}),memberSelectView:SC.SelectFieldView.design({layout:{top:65,left:230,height:25,width:90},objects:[SC.Object.create({value:1,title:"member 1"}),SC.Object.create({value:2,title:"member 2"}),SC.Object.create({value:3,title:"member 3"})],valueBinding:"Geniverse.loginController.memberNumber",nameKey:"title",valueKey:"value"})});
Geniverse.RecordLinkView=SC.LabelView.extend({contentBinding:"Geniverse.eggsController.arrangedObjects",tabView:null,dragonsObserver:function(){var a=this.get("content");
if(!a||a.get("length")<1){this.set("isVisible",NO)}else{var b=a.firstObject();if(b.get("status")&SC.Record.READY===SC.Record.READY){this.updateLink(b)
}else{b.addObserver("status",this,this.updateLink)}}}.observes("*content.[]","*tabView.nowShowing","*tabView.nowShowing.traitPulldown.value"),superObserver:function(){var a=this;
window.triggerRecordLinkUpdate=function(){a.dragonsObserver()}}.observes("*content.[]","*tabView.nowShowing","*tabView.nowShowing.traitPulldown.value"),updateLink:function(b){if(b.get("status")&SC.Record.READY===SC.Record.READY){b.removeObserver("status",this.updateLink);
var c=b.get("id");if(!!c){var a=Geniverse.railsBackendHostOnly+c.replace("dragons","breedingRecordsShow");
a+=this.getStatisticsPart();this.set("value","Record created! &nbsp;&nbsp; <a href='"+a+"' target='_blank'>View breeding record</a>");
this.set("isVisible",YES)}}},getStatisticsPart:function(){var d="";if(!!this.get("tabView")&&this.getPath("tabView.nowShowing") instanceof Geniverse.StatsView){trait=this.getPath("tabView.nowShowing.traitPulldown.value");
d+="?stats[trait]="+encodeURIComponent(trait);var a=Geniverse.statisticsController.get("dragonGroups");
var b=Geniverse.statisticsController.get("cumulativeCounts");var f=[];var e;for(e in b[trait]){f.push(e)
}f.sort();for(var c=0;c<f.length;c++){e=f[c];if(!a[trait][e]){a[trait][e]={};a[trait][e].Male=0;
a[trait][e].Female=0}d+="&stats[all]["+encodeURIComponent(e)+"][male]="+b[trait][e].Male;
d+="&stats[all]["+encodeURIComponent(e)+"][female]="+b[trait][e].Female;d+="&stats[current]["+encodeURIComponent(e)+"][male]="+a[trait][e].Male;
d+="&stats[current]["+encodeURIComponent(e)+"][female]="+a[trait][e].Female}}return d
},isVisible:NO,value:"",escapeHTML:NO});Geniverse.ScoreView=SC.View.extend({classNames:"scoreLabel",showScore:YES,showTargetScore:NO,childViews:"background targetScoreView scoreView ".w(),background:SC.View.design({layout:{top:0,left:0,right:0,bottom:0},classNames:["genome-view-intro"]}),targetScoreView:SC.LabelView.design({layout:{left:0,right:0,top:5,height:14},isVisibleBinding:"*parentView.showTargetScore",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,targetScoreBinding:"Geniverse.scoringController.targetScore",value:function(){return"GOAL is "+this.get("targetScore")+" MOVE"+(this.get("targetScore")==1?"":"S")
}.property("isVisible","targetScore").cacheable()}),scoreView:SC.LabelView.design({layout:{left:5,right:0,top:22,height:14},isVisibleBinding:"*parentView.showScore",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,scoreBinding:"Geniverse.scoringController.currentScore",value:function(){return"Your moves: "+this.get("score")
}.property("isVisible","score").cacheable()})});Geniverse.StatsView=SC.View.extend({childViews:"traitLabel traitPulldown statsView".w(),classNames:["black-text "],backgroundColor:"white",traitLabel:SC.LabelView.design({layout:{top:20,left:20,height:25,width:40},value:"Trait"}),traitPulldown:SC.SelectFieldView.design({layout:{top:20,left:60,height:25,width:80},objectsBinding:"Geniverse.statisticsController.traitList",nameKey:"title",valueKey:"title"}),statsView:SC.View.design({layout:{top:60,left:10,right:0,bottom:0},dragonsBinding:"*parentView.content",breedingCompleteBinding:"Geniverse.statisticsController.breedingComplete",dragonGroupsBinding:"Geniverse.statisticsController.dragonGroups",cumulativeCountsBinding:"Geniverse.statisticsController.cumulativeCounts",cumulativeSizeBinding:"Geniverse.statisticsController.cumulativeSize",motherBinding:"Geniverse.breedDragonController.mother",fatherBinding:"Geniverse.breedDragonController.father",menuBinding:"*parentView.traitPulldown.value",refresh:NO,resetCumulativeStats:function(){Geniverse.statisticsController.reset()
}.observes("mother","father"),displayProperties:["breedingComplete","menu","mother","father","refresh"],previousTraitOption:null,render:function(c,b){var m=this.getPath("parentView.traitPulldown.value");
if(m!==this.get("previousTraitOption")){if(this.get("previousTraitOption")){Lab.logController.logEvent(Lab.EVENT.CHANGED_STATS,{trait:m})
}else{Lab.logController.logEvent(Lab.EVENT.INITIAL_STATS,{trait:m})}this.set("previousTraitOption",m)
}if(!this.get("dragons")||this.get("dragons").get("length")<1){c=c.begin("div").end();
return}if(!m){return}var e=this.get("dragonGroups");var k=this.get("dragons").get("length");
var n=this.get("cumulativeCounts");var d=this.get("cumulativeSize");var f="3px";c=c.begin("table").attr("class","statsPadding");
c=c.begin("tr");c=c.begin("th").push("").attr("style","border: 0").end();c=c.begin("th").push("current clutch").attr("colspan","3").attr("style","border: 0; color:purple").end();
c=c.begin("th").push("").attr("style","border: 0").end();c=c.begin("th").push("all clutches").attr("colspan","3").attr("style","border: 0; color:purple").end();
c=c.end();c=c.begin("tr");c=c.begin("th").push("").attr("style","border: 0").end();
c=c.begin("th").push("Total").end();c=c.begin("th").push("F").end();c=c.begin("th").push("M").end();
c=c.begin("th").push("").attr("style","border: 0").end();c=c.begin("th").push("Total").end();
c=c.begin("th").push("F").end();c=c.begin("th").push("M").end();c=c.end();var j=[];
for(var h in n[m]){j.push(h)}j.sort();for(var g=0;g<j.length;g++){var h=j[g];c=c.begin("tr");
c=c.begin("th").push(h).end();if(!e[m][h]){e[m][h]={};e[m][h].Male=0;e[m][h].Female=0
}var o=e[m][h].Male+e[m][h].Female;var l=Math.floor((o/k)*100).toFixed();var p=n[m][h].Male+n[m][h].Female;
var a=Math.floor((p/d)*100).toFixed();c=c.begin("td").push(o+" ("+l+"%)").attr("style","text-align: left").end();
c=c.begin("td").push(e[m][h].Female).end();c=c.begin("td").push(e[m][h].Male).end();
c=c.begin("td").push("").attr("style","border: 0; padding: "+f).end();c=c.begin("td").push(p+" ("+a+"%)").attr("style","text-align: left").end();
c=c.begin("td").push(n[m][h].Female).end();c=c.begin("td").push(n[m][h].Male).end();
c=c.end()}c=c.end();arguments.callee.base.apply(this,arguments)}})});Geniverse.UnlockableView=SC.PanelPane.create({layout:{centerX:0,top:15,width:1040,height:811},isModal:YES,contentView:SC.View.extend({childViews:"unlockableView hideButton".w(),classNames:"parchment".w(),hideButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{bottom:8,right:8,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"closeButton".w(),alt:"Close",title:"Close",action:"removePane",target:"Geniverse.unlockablesController"}),unlockableView:SC.LabelView.design({layout:{left:5,right:5,top:5,bottom:40},valueBinding:SC.Binding.transform(function(b){var c=(b||"").replace(/\{\{avatar\}\}/gm,Geniverse.userController.get("avatar"));
c=c.replace(/<script[\s\S]*?<\/script>/m,"");var a=RegExp.lastMatch;if(a&&a!="{{avatar}}"){setTimeout(function(){$("body").append($(a))
},500)}return"<div class='centered-content'>"+c+"</div>"}).from("Geniverse.unlockablesController.*selectedUnlockable.content"),escapeHTML:NO})})});
Geniverse.UnlockableNotificationView=SC.PanelPane.extend({layout:{right:30,top:50,width:200,height:68},isModal:NO,message:"",contentView:SC.View.design({classNames:"notification".w(),childViews:"title message closeButton".w(),messageBinding:"*parentView.message",title:SC.LabelView.design({layout:{top:5,left:5,width:190,height:20},classNames:["notification-title"],fontWeight:SC.BOLD_WEIGHT,value:"You've unlocked:"}),closeButton:SC.ImageView.design({layout:{right:-8,top:-8,width:24,height:24},value:"sc-icon-cancel-24",click:function(){Geniverse.unlockablesController.removeCurrentNotification()
}}),message:SC.LabelView.design({layout:{top:25,left:5,width:190,height:36},classNames:["notification-message"],valueBinding:"*parentView.message"})})});
Geniverse.marginSize=15;sc_require("views/article");sc_require("views/breed_dragon");
sc_require("views/dragon_bin");sc_require("views/dragon_chat_compose");sc_require("views/organism");
sc_require("views/published_articles");sc_require("views/login");sc_require("views/chromosome_tool");
sc_require("views/stats");sc_require("views/animation");Geniverse.animationPage=SC.Page.design({mainPane:SC.MainPane.design({classNames:["brown"],childViews:"topBar meiosisView".w(),topBar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:36},classNames:["brown"],childViews:"geniverseLabelView welcomeLabelView logoutButton".w(),anchorLocation:SC.ANCHOR_TOP,geniverseLabelView:SC.LabelView.design({layout:{centerY:0,height:24,left:8,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Geniverse Animation"}),welcomeLabelView:SC.LabelView.design({layout:{centerY:0,height:24,right:130,width:500},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_RIGHT,valueBinding:"Geniverse.loginController.welcomeMessage",isVisibleBinding:"Geniverse.appController.userLoggedIn"}),logoutButton:SC.ButtonView.design({layout:{centerY:0,height:24,right:12,width:100},layerId:"logOutButton",title:"Log out",target:"Geniverse.appController",action:"logout",isVisibleBinding:"Geniverse.appController.userLoggedIn"})}),meiosisView:Geniverse.AnimationView.design({layout:{centerY:0,height:400,width:400},layerId:"father",mode:"parent",swapping:true,meiosisOwner:"father",jsondataurl:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/chromosomes.json"})})});
Geniverse.marginSize=15;sc_require("views/article");sc_require("views/breed_dragon");
sc_require("views/dragon_bin");sc_require("views/dragon_chat_compose");sc_require("views/organism");
sc_require("views/published_articles");sc_require("views/login");sc_require("views/chromosome_tool");
sc_require("views/stats");Geniverse.experimentPage=SC.Page.design({mainPane:SC.MainPane.design({classNames:["brown"],childViews:"topBar appContainer".w(),topBar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:36},classNames:["brown"],childViews:"geniverseLabelView welcomeLabelView logoutButton".w(),anchorLocation:SC.ANCHOR_TOP,geniverseLabelView:SC.LabelView.design({layout:{centerY:0,height:24,left:8,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Experiment"}),welcomeLabelView:SC.LabelView.design({layout:{centerY:0,height:24,right:130,width:500},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_RIGHT,valueBinding:"Geniverse.loginController.welcomeMessage",isVisibleBinding:"Geniverse.appController.userLoggedIn"}),logoutButton:SC.ButtonView.design({layout:{centerY:0,height:24,right:12,width:100},layerId:"logOutButton",title:"Log out",target:"Geniverse.appController",action:"logout",isVisibleBinding:"Geniverse.appController.userLoggedIn"})}),appContainer:SC.ContainerView.design({isContainerView:YES,layout:{top:45,bottom:0,left:10,right:0},contentView:null,loginView:Geniverse.LoginView.create({layout:{centerX:0,top:Geniverse.marginSize,width:500,height:100},layerId:"chatLogin",classNames:"brown".w()}),mainAppView:SC.View.create({childViews:"breedView statsView challengePoolView challengeChromosomeToolView breedingPenView breedingChromosomeToolView stableView stableChromosomeToolView marketplaceView ".w(),challengePoolView:SC.View.design({className:"transparent".w(),childViews:"titleView dragonsView".w(),layout:{left:20,top:150,width:70,height:300},titleView:SC.LabelView.design({layout:{centerY:0,height:20,left:0,top:0,width:70},value:"Parent Pool",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"container_label".w()}),dragonsView:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,width:70,height:280},backgroundColor:"white",contentView:SC.GridView.design({contentBinding:"Geniverse.challengePoolController.arrangedObjects",selectionBinding:"Geniverse.challengePoolController.selection",rowHeight:70,columnWidth:70,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.challengePoolController.length"})}),challengeChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:55,top:120,width:35,height:30},selectionBinding:"Geniverse.challengePoolController.selection"}),breedView:Geniverse.BreedDragonView.design({layout:{top:150,left:100,height:300,width:150},showChildView:NO}),breedingPenView:SC.View.design({childViews:"titleView penView".w(),layout:{left:265,top:150,width:300,height:300},classNames:("transparent").w(),titleView:SC.LabelView.design({layout:{centerY:0,height:20,left:0,top:0,width:300},value:"Breeding Pen",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,classNames:"container_label".w()}),penView:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,width:300,height:280},backgroundColor:"white",contentView:SC.GridView.design({contentBinding:"Geniverse.eggsController.arrangedObjects",selectionBinding:"Geniverse.eggsController.selection",rowHeight:60,columnWidth:60,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.eggsController.length"})}),breedingChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:265+300-35,top:120,width:35,height:40},selectionBinding:"Geniverse.eggsController.selection"}),marketplaceView:SC.ImageView.design({layout:{left:570,top:200,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(!!g){g.set("isInMarketplace",YES)}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),statsView:Geniverse.StatsView.design({layout:{left:565,top:150+(300-80),width:60,height:80}}),stableChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:680+240-35,top:120,width:35,height:30},selectionBinding:"Geniverse.stableOrganismsController.selection"}),stableView:SC.View.design({layout:{left:680,top:150,height:300,width:240},childViews:"title stable".w(),title:SC.LabelView.design({classNames:"container_label".w(),layout:{centerX:0,top:0,height:20,width:240},controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,woo:function(){this.propertyDidChange("value")
}.observes("Geniverse.stableOrganismsController.arrangedObjects.[]"),value:function(){var b=Geniverse.stableOrganismsController.get("length");
var a=50-b;return"Your Stable      -   "+a+" spaces remaining"}.property("Geniverse.stableOrganismsController.arrangedObjects.[]"),destroy:function(){Geniverse.stableOrganismsController.removeObserver("arrangedObjects",this,this.woo);
Geniverse.stableOrganismsController.removeObserver("[]",this,this.woo);arguments.callee.base.apply(this,arguments)
}}),stable:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,bottom:0,height:280,width:240},backgroundColor:"white",classNames:"transparent".w(),contentView:SC.GridView.design({contentBinding:"Geniverse.stableOrganismsController.arrangedObjects",selectionBinding:"Geniverse.stableOrganismsController.selection",rowHeight:60,columnWidth:60,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.stableOrganismsController.length",isDropTarget:YES,dragonNum:0,acceptDragOperation:function(e,g){var a=this;
function f(k){if(!k){return}var i=a.get("dragonNum");var m=Geniverse.stableOrganismsController.get("arrangedObjects");
var l=Geniverse.stableOrganismsController.get("length");if(l>=50){alert("Your stable is full");
return}if(l>0){var j=m.objectAt(length-1);var h=j.get("stableOrder");if(!!h&&h>l){i=h+1
}else{i=l+1}a.set("dragonNum",i)}SC.RunLoop.begin();k.set("isEgg",false);k.set("stableOrder",i);
SC.RunLoop.end();++a.dragonNum}if((""+e.get("source").constructor==="Geniverse.OrganismView")){var d=e.get("source").get("content");
f(d)}else{var c=e.get("source").get("selection").clone();for(var b=0;b<c.get("length");
b++){f(c.firstObject())}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
SC.RunLoop.end()});return g},computeDragOperations:function(b,a){return SC.DRAG_ANY
},dragEntered:function(b,a){this.$().addClass("drop-target")},dragExited:function(b,a){this.$().removeClass("drop-target")
}}),}),})})}),});Geniverse.marginSize=15;sc_require("views/article");sc_require("views/breed_dragon");
sc_require("views/dragon_bin");sc_require("views/dragon_chat_compose");sc_require("views/organism");
sc_require("views/published_articles");sc_require("views/login");sc_require("views/chromosome_tool");
sc_require("views/stats");sc_require("views/chat_message");Geniverse.groupChallengePage=SC.Page.design({mainPane:SC.MainPane.design({classNames:["brown"],childViews:"topBar appContainer".w(),topBar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:36},classNames:["brown"],childViews:"geniverseLabelView welcomeLabelView logoutButton".w(),anchorLocation:SC.ANCHOR_TOP,geniverseLabelView:SC.LabelView.design({layout:{centerY:0,height:24,left:8,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Group Challenge"}),welcomeLabelView:SC.LabelView.design({layout:{centerY:0,height:24,right:130,width:500},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_RIGHT,valueBinding:"Geniverse.loginController.welcomeMessage",isVisibleBinding:"Geniverse.appController.userLoggedIn"}),logoutButton:SC.ButtonView.design({layout:{centerY:0,height:24,right:12,width:100},layerId:"logOutButton",title:"Log out",target:"Geniverse.appController",action:"logout",isVisibleBinding:"Geniverse.appController.userLoggedIn"})}),appContainer:SC.ContainerView.design({isContainerView:YES,layout:{top:45,bottom:0,left:10,right:0},contentView:null,loginView:Geniverse.LoginView.create({layout:{centerX:0,top:Geniverse.marginSize,width:500,height:100},layerId:"chatLogin",classNames:"brown".w()}),mainAppView:SC.View.create({childViews:"breedView statsView challengePoolView breedingPenView challengeChromosomeToolView breedingChromosomeToolView  stableView stableChromosomeToolView marketplaceView chatView allArticlesView".w(),challengePoolView:SC.View.design({className:"transparent".w(),childViews:"titleView dragonsView".w(),layout:{left:20,top:70,width:70,height:300},titleView:SC.LabelView.design({layout:{centerY:0,height:20,left:0,top:0,width:70},value:"Parent Pool",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"container_label".w()}),dragonsView:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,width:70,height:280},backgroundColor:"white",contentView:SC.GridView.design({contentBinding:"Geniverse.challengePoolController.arrangedObjects",selectionBinding:"Geniverse.challengePoolController.selection",rowHeight:70,columnWidth:70,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.challengePoolController.length"})}),challengeChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:20+70-35,top:40,width:35,height:30},selectionBinding:"Geniverse.challengePoolController.selection"}),breedView:Geniverse.BreedDragonView.design({layout:{top:70,left:100,height:300,width:150},showChildView:NO}),breedingPenView:SC.View.design({childViews:"titleView penView".w(),layout:{left:265,top:70,width:300,height:300},classNames:("transparent").w(),titleView:SC.LabelView.design({layout:{centerY:0,height:20,left:0,top:0,width:300},value:"Breeding Pen",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,classNames:"container_label".w()}),penView:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,width:300,height:280},backgroundColor:"white",contentView:SC.GridView.design({contentBinding:"Geniverse.eggsController.arrangedObjects",selectionBinding:"Geniverse.eggsController.selection",rowHeight:60,columnWidth:60,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.eggsController.length"})}),breedingChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:265+300-35,top:40,width:35,height:40},selectionBinding:"Geniverse.eggsController.selection"}),marketplaceView:SC.ImageView.design({layout:{left:570,top:150,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(!!g){g.set("isInMarketplace",YES)}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),statsView:Geniverse.StatsView.design({layout:{left:565,top:70+(300-80),width:60,height:80}}),stableChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:680+240-35,top:40,width:35,height:40},selectionBinding:"Geniverse.stableOrganismsController.selection"}),stableView:SC.View.design({layout:{left:680,top:70,height:300,width:240},childViews:"title stable".w(),title:SC.LabelView.design({classNames:"container_label".w(),layout:{centerX:0,top:0,height:20,width:240},controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,woo:function(){this.propertyDidChange("value")
}.observes("Geniverse.stableOrganismsController.arrangedObjects.[]"),value:function(){var b=Geniverse.stableOrganismsController.get("length");
var a=50-b;return"Your Stable      -   "+a+" spaces remaining"}.property("Geniverse.stableOrganismsController.arrangedObjects.[]"),destroy:function(){Geniverse.stableOrganismsController.removeObserver("arrangedObjects",this,this.woo);
Geniverse.stableOrganismsController.removeObserver("[]",this,this.woo);arguments.callee.base.apply(this,arguments)
}}),stable:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,bottom:0,height:280,width:240},backgroundColor:"white",classNames:"transparent".w(),contentView:SC.GridView.design({contentBinding:"Geniverse.stableOrganismsController.arrangedObjects",selectionBinding:"Geniverse.stableOrganismsController.selection",rowHeight:60,columnWidth:60,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.stableOrganismsController.length",isDropTarget:YES,dragonNum:0,acceptDragOperation:function(f,h){var a=this;
function g(l){if(!l){return}var j=a.get("dragonNum");var n=Geniverse.stableOrganismsController.get("arrangedObjects");
var m=Geniverse.stableOrganismsController.get("length");if(m>=50){alert("Your stable is full");
return}if(m>0){var k=n.objectAt(length-1);var i=k.get("stableOrder");if(!!i&&i>m){j=i+1
}else{j=m+1}a.set("dragonNum",j)}SC.RunLoop.begin();l.set("isEgg",false);l.set("stableOrder",j);
SC.RunLoop.end();Geniverse.store.commitRecords();a.dragonNum=a.dragonNum+1;SC.Logger.info("Stable has %d dragons",a.dragonNum)
}if(f.hasDataType("dragonChat")){SC.Logger.info("we found a dragon from chat");var e=f.get("data");
Geniverse.dragonChattingController.createNewDragonFromChat(e,function(i){g(i)})}else{if((""+f.get("source").constructor==="Geniverse.OrganismView")){var d=f.get("source").get("content");
g(d)}else{var c=f.get("source").get("selection").clone();for(var b=0;b<c.get("length");
b++){g(c.firstObject())}}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
SC.RunLoop.end()});return h},computeDragOperations:function(b,a){return SC.DRAG_ANY
},dragEntered:function(b,a){this.$().addClass("drop-target")},dragExited:function(b,a){this.$().removeClass("drop-target")
}})}),allArticlesView:SC.TabView.design({layout:{bottom:10,right:30,width:450,height:235},items:[{title:"Your paper",value:"Geniverse.yourArticleView"},{title:"Published papers",value:"Geniverse.publishedArticlesView"}],itemTitleKey:"title",itemValueKey:"value",nowShowingBinding:"Geniverse.articleController.nowShowing"}),chatView:SC.View.design({layout:{bottom:10,left:20,width:385,height:215},classNames:"transparent".w(),childViews:"userListLabel userListView chatListView chatComposeView ".w(),userListLabel:SC.LabelView.design({layout:{top:0,left:0,width:125,height:20},value:"Users in room",classNames:"container_label",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT}),userListView:CcChat.UserListView.design({layout:{top:20,left:0,width:125,height:210}}),chatListView:CC.AutoScrollView.design({layerId:"chatList",hasHorizontalScroller:NO,layout:{left:135,top:20,height:150,width:250},backgroundColor:"white",contentView:SC.StackedView.design({layerId:"chatListContent",contentBinding:"Geniverse.chatListController.arrangedObjects",selectionBinding:"Geniverse.chatListController.selection",rowHeight:30,canEditContent:NO,hasContentIcon:YES,contentValueKey:"message",isSelectable:YES,showAlternatingRows:YES,exampleView:Geniverse.ChatMessageView}),autoScrollTriggerBinding:"Geniverse.chatListController.length"}),chatComposeView:Geniverse.DragonChatComposeView.design({layout:{left:135,top:180,height:100,width:250},layerId:"chatCompose"})})})})})});
Geniverse.marginSize=15;sc_require("views/article");sc_require("views/breed_dragon");
sc_require("views/dragon_bin");sc_require("views/dragon_chat_compose");sc_require("views/organism");
sc_require("views/published_articles");sc_require("views/login");sc_require("views/chromosome_tool");
sc_require("views/stats");Geniverse.individualPage=SC.Page.design({mainPane:SC.MainPane.design({classNames:["brown"],childViews:"topBar appContainer".w(),topBar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:36},classNames:["brown"],childViews:"geniverseLabelView welcomeLabelView logoutButton".w(),anchorLocation:SC.ANCHOR_TOP,geniverseLabelView:SC.LabelView.design({layout:{centerY:0,height:24,left:8,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Individual Challenge"}),welcomeLabelView:SC.LabelView.design({layout:{centerY:0,height:24,right:130,width:500},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_RIGHT,valueBinding:"Geniverse.loginController.welcomeMessage",isVisibleBinding:"Geniverse.appController.userLoggedIn"}),logoutButton:SC.ButtonView.design({layout:{centerY:0,height:24,right:12,width:100},layerId:"logOutButton",title:"Log out",target:"Geniverse.appController",action:"logout",isVisibleBinding:"Geniverse.appController.userLoggedIn"})}),appContainer:SC.ContainerView.design({isContainerView:YES,layout:{top:45,bottom:0,left:10,right:0},contentView:null,loginView:Geniverse.LoginView.create({layout:{centerX:0,top:Geniverse.marginSize,width:500,height:100},classNames:"brown".w()}),mainAppView:SC.View.create({childViews:"breedView statsView challengePoolView breedingPenView stableView marketplaceView chatView allArticlesView".w(),challengePoolView:SC.View.design({className:"transparent".w(),childViews:"titleView dragonsView".w(),layout:{left:20,top:70,width:70,height:300},titleView:SC.LabelView.design({layout:{centerY:0,height:20,left:0,top:0,width:70},value:"Parent Pool",controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"container_label".w()}),dragonsView:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,width:70,height:280},backgroundColor:"white",contentView:SC.GridView.design({contentBinding:"Geniverse.challengePoolController.arrangedObjects",selectionBinding:"Geniverse.challengePoolController.selection",rowHeight:70,columnWidth:70,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.challengePoolController.length"})}),breedView:Geniverse.BreedDragonView.design({layout:{top:70,left:100,height:300,width:150},showChildView:NO}),breedingPenView:SC.View.design({childViews:"titleView penView".w(),layout:{left:265,top:70,width:300,height:300},classNames:("transparent").w(),titleView:SC.LabelView.design({layout:{centerY:0,height:20,left:0,top:0,width:300},value:"Breeding Pen",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,classNames:"container_label".w()}),penView:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,width:300,height:280},backgroundColor:"white",contentView:SC.GridView.design({contentBinding:"Geniverse.eggsController.arrangedObjects",selectionBinding:"Geniverse.eggsController.selection",rowHeight:60,columnWidth:60,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.eggsController.length"})}),breedingChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:570,top:70,width:35,height:40},selectionBinding:"Geniverse.eggsController.selection"}),marketplaceView:SC.ImageView.design({layout:{left:570,top:150,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(!!g){g.set("isInMarketplace",YES)}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),statsView:Geniverse.StatsView.design({layout:{left:565,top:70+(300-80),width:60,height:80}}),stableView:SC.View.design({layout:{left:680,top:70,height:300,width:240},childViews:"title stable".w(),title:SC.LabelView.design({classNames:"container_label".w(),layout:{centerX:0,top:0,height:20,width:240},controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,woo:function(){this.propertyDidChange("value")
}.observes("Geniverse.stableOrganismsController.arrangedObjects.[]"),value:function(){var b=Geniverse.stableOrganismsController.get("length");
var a=50-b;return"Your Stable      -   "+a+" spaces remaining"}.property("Geniverse.stableOrganismsController.arrangedObjects.[]"),destroy:function(){Geniverse.stableOrganismsController.removeObserver("arrangedObjects",this,this.woo);
Geniverse.stableOrganismsController.removeObserver("[]",this,this.woo);arguments.callee.base.apply(this,arguments)
}}),stable:CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,bottom:0,height:280,width:240},backgroundColor:"white",classNames:"transparent".w(),contentView:SC.GridView.design({contentBinding:"Geniverse.stableOrganismsController.arrangedObjects",selectionBinding:"Geniverse.stableOrganismsController.selection",rowHeight:60,columnWidth:60,canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:"Geniverse.stableOrganismsController.length",isDropTarget:YES,dragonNum:0,acceptDragOperation:function(e,g){var a=this;
function f(k){if(!k){return}var i=a.get("dragonNum");var m=Geniverse.stableOrganismsController.get("arrangedObjects");
var l=Geniverse.stableOrganismsController.get("length");if(l>=50){alert("Your stable is full");
return}if(l>0){var j=m.objectAt(length-1);var h=j.get("stableOrder");if(!!h&&h>l){i=h+1
}else{i=l+1}a.set("dragonNum",i)}SC.RunLoop.begin();k.set("isEgg",false);k.set("stableOrder",i);
SC.RunLoop.end();++a.dragonNum}if((""+e.get("source").constructor==="Geniverse.OrganismView")){var d=e.get("source").get("content");
f(d)}else{var c=e.get("source").get("selection").clone();for(var b=0;b<c.get("length");
b++){f(c.firstObject())}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
SC.RunLoop.end()});return g},computeDragOperations:function(b,a){return SC.DRAG_ANY
},dragEntered:function(b,a){this.$().addClass("drop-target")},dragExited:function(b,a){this.$().removeClass("drop-target")
}})}),allArticlesView:SC.TabView.design({layout:{bottom:10,right:30,width:450,height:235},items:[{title:"Your paper",value:"Geniverse.yourArticleView"},{title:"Published papers",value:"Geniverse.publishedArticlesView"}],itemTitleKey:"title",itemValueKey:"value",nowShowingBinding:"Geniverse.articleController.nowShowing"}),chatView:SC.StackedView.design({layout:{bottom:10,left:20,width:385,height:215},classNames:"transparent".w(),isVisible:false,childViews:"userListLabel userListView chatListView chatComposeView ".w(),userListLabel:SC.LabelView.design({layout:{top:0,left:0,width:125,height:20},value:"Users in room",classNames:"container_label",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT}),userListView:CcChat.UserListView.design({layout:{top:20,left:0,width:125,height:210}}),chatListView:CC.AutoScrollView.design({layerId:"chatList",hasHorizontalScroller:NO,layout:{left:135,top:20,height:150,width:250},backgroundColor:"white",contentView:SC.StackedView.design({layerId:"chatListContent",contentBinding:"Geniverse.chatListController.arrangedObjects",selectionBinding:"Geniverse.chatListController.selection",rowHeight:30,canEditContent:NO,hasContentIcon:YES,contentValueKey:"message",isSelectable:YES,showAlternatingRows:YES,exampleView:CcChat.ChatMessageView}),autoScrollTriggerBinding:"Geniverse.chatListController.length"}),chatComposeView:Geniverse.DragonChatComposeView.design({layout:{left:135,top:180,height:100,width:250},layerId:"chatCompose"})})})})})});
Geniverse.marginSize=15;sc_require("views/article");sc_require("views/breed_dragon");
sc_require("views/dragon_genome");sc_require("views/dragon_bin");sc_require("views/dragon_chat_compose");
sc_require("views/organism");sc_require("views/published_articles");sc_require("views/login");
Geniverse.trainingPage=SC.Page.design({mainPane:SC.MainPane.design({classNames:["brown"],childViews:"topBar mainAppView".w(),topBar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:36},childViews:"geniverseLabelView welcomeLabelView logoutButton".w(),anchorLocation:SC.ANCHOR_TOP,geniverseLabelView:SC.LabelView.design({layout:{centerY:0,height:24,left:8,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Drake Chromosomes"}),welcomeLabelView:SC.LabelView.design({layout:{centerY:0,height:24,right:130,width:500},fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_RIGHT,valueBinding:"Geniverse.loginController.welcomeMessage",isVisibleBinding:"Geniverse.appController.userLoggedIn"}),logoutButton:SC.ButtonView.design({layout:{centerY:0,height:24,right:12,width:100},layerId:"logOutButton",title:"Log out",target:"Geniverse.appController",action:"logout",isVisibleBinding:"Geniverse.appController.userLoggedIn"})}),mainAppView:SC.View.design({childViews:"femaleGenomePanel maleGenomePanel".w(),femaleGenomePanel:SC.View.design({layout:{top:50,height:550,left:15,width:500},childViews:"background title genomeView".w(),background:SC.View.design({layout:{top:0,left:0,right:0,bottom:0},classNames:["genome-view-intro"]}),title:SC.LabelView.design({layout:{top:20,height:25,left:20,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Female Drake"}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:80,left:40,height:500,width:500},index:1,generateDragonAtStart:YES,sex:1,hiddenGenes:["s","p","b"],showGenerateNewDragon:NO,showIsEditableCheck:YES,showFromLabels:NO,showAllelesOutput:YES})}),maleGenomePanel:SC.View.design({layout:{top:50,height:550,left:600,width:500},childViews:"background maleTitle maleGenomeView".w(),background:SC.View.design({layout:{top:0,left:0,right:0,bottom:0},classNames:["genome-view-intro"]}),maleTitle:SC.LabelView.design({layout:{top:20,height:25,left:20,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Male Drake"}),maleGenomeView:Geniverse.DragonGenomeView.design({layout:{top:80,left:40,height:500,width:500},index:2,generateDragonAtStart:YES,sex:0,hiddenGenes:["s","p","b"],showGenerateNewDragon:NO,showIsEditableCheck:YES,showFromLabels:NO,showAllelesOutput:YES})})})})});
sc_require("models/dragon");Geniverse.main=function main(){var a=[{title:"Training",page:"trainingPage.mainPane"},{title:"Experiment",page:"experimentPage.mainPane"},{title:"Individual Challenge",page:"individualPage.mainPane"},{title:"Group Challenge",page:"groupChallengePage.mainPane"},{title:"Activity Tester",page:"groupChallengePage.mainPane"}];
SC.ExceptionHandler.handleException=function(c){};Geniverse.ENABLE_CHAT=NO;var b=function(e){var c=a[e];
var d=Geniverse.getPath(c.page);d.append();Geniverse.appController.set("mainPane",d);
Geniverse.activityController.set("activityTitle",c.title)};Geniverse.store.commitRecordsAutomatically=NO;
b(2);Geniverse.makeFirstResponder(Geniverse.START)};function main(){Geniverse.main()
}if(typeof Object.assign!="function"){Object.assign=function(d){if(d==null){throw new TypeError("Cannot convert undefined or null to object")
}d=Object(d);for(var a=1;a<arguments.length;a++){var c=arguments[a];if(c!=null){for(var b in c){if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]
}}}}return d}}window.createSavableDragon=function(e,d,c){var a=Object.assign({},e.attributes());
a.saveToBackend=true;if(d&&c){a.mother=d.get("id");a.father=c.get("id")}var g=Geniverse.store.createRecord(Geniverse.Dragon,a);
var b=e.get("alleles"),f=e.get("sex");GenGWT.generateDragonWithAlleleStringAndSex(b,f,function(h){g.set("gOrganism",h)
});return g};window.saveBreedingDragonsToBackend=function(){var b=Geniverse.eggsController.get("content"),a=[];
SC.RunLoop.begin();var d=Geniverse.breedDragonController.get("mother");newMother=createSavableDragon(d);
var c=Geniverse.breedDragonController.get("father");newFather=createSavableDragon(c);
Geniverse.store.commitRecords();SC.RunLoop.end();setTimeout(function(){SC.RunLoop.begin();
for(var e=0,f=b.length;e<f;e++){a.push(createSavableDragon(b[e],newMother,newFather))
}Geniverse.eggsController.set("content",a);Geniverse.store.commitRecords();SC.RunLoop.end();
if(window.triggerRecordLinkUpdate){window.triggerRecordLinkUpdate()}},1000)};if((typeof SC!=="undefined")&&SC&&SC.bundleDidLoad){SC.bundleDidLoad("geniverse")
};