(function(){var a="sproutcore/standard_theme";if(!SC.BUNDLE_INFO){throw"SC.BUNDLE_INFO is not defined!"
}if(SC.BUNDLE_INFO[a]){return}SC.BUNDLE_INFO[a]={requires:["sproutcore/empty_theme"],styles:["/static/sproutcore/standard_theme/en/8b65428a7dcfa2226586b487bde1bf11560de2aa/stylesheet-packed.css","/static/sproutcore/standard_theme/en/8b65428a7dcfa2226586b487bde1bf11560de2aa/stylesheet.css"],scripts:["/static/sproutcore/standard_theme/en/8b65428a7dcfa2226586b487bde1bf11560de2aa/javascript-packed.js"]}
})();if(SC.browser&&SC.browser.isWindows){SC.platform.touch=NO}SC.Page=SC.Page.extend({init:function(){arguments.callee.base.apply(this,arguments);
var a=SC.Page.instances;if(!a){a=SC.Page.instances=[]}a.push(this)}});Lab=SC.Application.create({NAMESPACE:"Lab",VERSION:"0.1.0",store:SC.Store.create().from(SC.Record.fixtures),userDefaults:SC.UserDefaults.create({appDomain:"Lab"})});
(function(){Lab.caselogData=[{level:"training",cases:[{title:"Case 1: Enter the Drake",challenges:[{title:"Playground",href:"#case1/playground"},{title:"Challenge 1: Make a Drake",href:"#case1/challenge1"},{title:"Challenge 2: Good Things Come in Threes",href:"#case1/challenge2"}]},{title:"Case 2: My, Oh Sis!",challenges:[{title:"Playground",href:"#case2/playground"},{title:"Challenge 1: Making Babies",href:"#case2/challenge1"},{title:"Challenge 2: Pick the Mommy",href:"#case2/challenge2"}]},{title:"Case 3: In the Clutches of Drakes",challenges:[{title:"Challenge 1: In the Clutches of Drakes",href:"#case3/challenge1"},{title:"Challenge 2: Still in the Clutches",href:"#case3/challenge2"}]},{title:"Case 4: Traits and Mates",challenges:[{title:"Challenge 1: Settle the Argument",href:"#case4/argumentation",useQuill:true}]},{title:"Case 5: Certification",challenges:[{title:"Training Level Certification Exam",href:"#case5/certification1"}]}]},{level:"apprentice",cases:[{title:"Case 6: The Horns Dilemma",challenges:[{title:"Challenge 1: How About Those Horns?",href:"#case6/argumentation",useQuill:true}]},{title:"Case 7: What Are the Odds",challenges:[{title:"Challenge 1: The Duchess Wants Drakes",href:"#case7/challenge1"},{title:"Challenge 2: The Archduke's Bragging Rights",href:"#case7/challenge2"},{title:"Challenge 3: Something Fishy",href:"#case7/challenge3",useQuill:true},{title:"Challenge 4: Mix 'n' Match",href:"#case7/challenge4"}]},{title:"Case 8: A Tale of Three Tails",challenges:[{title:"Playground",href:"#case8/playground"},{title:"Challenge 1: Once, Twice, Three Times a Tail",href:"#case8/challenge1"},{title:"Challenge 2: High Tail it...",href:"#case8/challenge2",useQuill:true}]},{title:"Case 9: Like Father, Like...",challenges:[{title:"Challenge 1: Like Father, Like Son?",href:"#case9/challenge1",useQuill:true},{title:"Challenge 2: No Business Like Nose Business",href:"#case9/challenge2"},{title:"Challenge 3: Nosy Argument",href:"#case9/challenge3",useQuill:true}]},{title:"Case 10: Certification",challenges:[{title:"Apprentice Level Certification Exam I",href:"#case10/certification2-1"},{title:"Apprentice Level Certification Exam II",href:"#case10/certification2-2"}]}]},{level:"journeyman",cases:[{title:"Case 11: Feelin' Hot, Hot, Hot",challenges:[{title:"Challenge 1: Lava Mama",href:"#case11/challenge1",useQuill:true},{title:"Challenge 2: Shine On, Copper Drake!",href:"#case11/challenge2",useQuill:true}]},{title:"Case 12: The Right to Bear Armor",challenges:[{title:"Challenge 1: More than Skin Deep",href:"#case12/challenge1",useQuill:true}]},{title:"Case 13: Time for Recess(ive)",challenges:[{title:"Challenge 1: Armor All",href:"#case13/challenge1"},{title:"Challenge 2: Receeding Armor",href:"#case13/challenge2"},{title:"Challenge 3: Disarming... and Dislegging",href:"#case13/challenge3"},{title:"Challenge 4: Going, Going...",href:"#case13/challenge4"}]},{title:"Case 14: Color My Drake",challenges:[{title:"Challenge 1: Color Comparison",href:"#case14/challenge1",useQuill:true},{title:"Challenge 2: A Drake in Shining Colors",href:"#case14/challenge2",useQuill:true},{title:"Challenge 3: Color Masterpiece",href:"#case14/challenge3",useQuill:true}]},{title:"Case 15: Certification",challenges:[{title:"Journeyman Level Certification Exam",href:"#case15/certification3"}]}]},{level:"master",cases:[{title:"Case 16: Full Armor Jacket",challenges:[{title:"Challenge 1: Protect and Serve",href:"#case16/challenge1",useQuill:true}]},{title:"Case 17: Frosty's Fate",challenges:[{title:"Challenge 1: Finding a New Frosty",href:"#case17/challenge1",useQuill:true}]},{title:"Case 18: Bog Breath",hidden:true,challenges:[{title:"Challenge 1: Bog Breath",href:"#bgbrth/challenge1",useQuill:true}]}]},{level:"meiosis",cases:[]},{level:"dna",cases:[]}]
}).call(this);Lab.avatarController=SC.Object.create({waiting:NO,avatarBinding:"Geniverse.userController.avatar"});
Lab.backdoorController=SC.Object.create({pane:SC.PanelPane.create({layout:{width:200,height:100,centerX:0,centerY:0},isModal:YES,contentView:SC.View.design({classNames:"overflowVis",childViews:"prompt code submit close".w(),prompt:SC.LabelView.design({layout:{top:5,left:5,width:190,height:24},value:"Enter code:"}),code:SC.TextFieldView.design({layout:{top:29,left:5,width:190,height:24},valueBinding:"Lab.backdoorController.code"}),submit:SC.ButtonView.design({layout:{top:63,right:5,width:95,height:24},title:"process &raquo;",target:"Lab.backdoorController",action:"executeBackdoor"}),close:SC.ImageView.design({layout:{right:-8,top:-8,width:24,height:24},value:"sc-icon-cancel-24",click:function(){Lab.backdoorController.removePane()
}})})}),code:"",executeBackdoor:function(){switch(this.get("code")){case"vroom":Geniverse.userController.setAccelerated(true);
Geniverse.unlockablesController.unlockAllLocked();break;case"starz":if(Geniverse.userController.get("isTeacher")){var b=this._encodeClasses();
try{window.open(Geniverse.railsBackendBase+"/starsReport/"+b,"_blank")}catch(a){}}break;
case"":break;default:console.log("unrecognized backdoor code: "+this.get("code"))
}this.removePane()},_encodeClasses:function(d){var c;if(typeof(d)==="undefined"||d===null){var b=Geniverse.userController.get("allClassNames");
d=b[0];for(var a=1;a<b.length;a++){d+=","+b[a]}}c=window.btoa(d);c=c.replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"%3D");
return c},showPane:function(){var a=this.get("pane");if(a&&!a.get("isVisibleInWindow")){a.append()
}},removePane:function(){this.set("code","");var a=this.get("pane");if(a&&a.get("isVisibleInWindow")){this.get("pane").remove()
}}});sc_require("cases");Lab.LEVEL_TRAINING=0;Lab.LEVEL_APPRENTICE=1;Lab.LEVEL_JOURNEYMAN=2;
Lab.LEVEL_MASTER=3;Lab.LEVEL_MEIOSIS=4;Lab.LEVEL_DNA=5;Lab.caselogController=SC.Object.create({levelNames:["training","apprentice","journeyman","master"],currentLevel:Lab.LEVEL_TRAINING,currentLevelName:function(a,b){if(typeof b==="undefined"){return this.get("levelNames")[this.get("currentLevel")]
}else{this.set("currentLevel",this.levelNames.lastIndexOf(b))}}.property("currentLevel"),userMetadataBinding:"Geniverse.userController.metadata",levels:function(){var h=Lab.caselogData.copy(),c,f,l,b,e,g,a,d;
for(c=0,f=h.length;c<f;c++){l=h[c].cases;for(b=0,e=l.length;b<e;b++){g=l[b].challenges;
for(a=0,d=g.length;a<d;a++){g[a].starInfo=this._getStarInfoForRoute(g[a])}}}return h
}.property("userMetadata").cacheable(),_getStarInfoForRoute:function(c){var b=!!c.useQuill,a=c.href.slice(c.href.lastIndexOf("#")+1);
return{stars:Geniverse.userController.getPageStars(a),useQuill:b}}});Lab.CongratulationsView=SC.PalettePane.create({layout:{width:440,height:430,centerX:0,centerY:0},isModal:NO,contentView:SC.View.extend({childViews:"titleView congratulationsView hideButton instIcon".w(),classNames:"parchment".w(),instIcon:SC.ImageView.design({layout:{top:0,left:4,width:25,height:25},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/stampedInstructions.png"}),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,width:440},value:"Congratulations",controlSize:"info-title",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER}),hideButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:8,right:8,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"closeButton".w(),alt:"Close",title:"Close",action:"removeView",target:"Lab.congratulationsController"}),congratulationsView:SC.LabelView.design({layout:{left:10,top:24,width:420,height:375},value:"please wait...",escapeHTML:NO})})});
sc_require("views/congratulations");Lab.congratulationsController=SC.ObjectController.create({pane:null,content:"",isVisible:NO,hideCallback:null,iframe:SC.WebView.create({layoutBinding:"Lab.CongratulationsView.layout",value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/empty.html"}),displayButtonOnly:function(a){this.set("isVisible",YES);
if(a){this.set("content",a)}},display:function(a,b){this.set("hideCallback",b);this.displayButtonOnly(a);
this.showPane(this.congratulationsButton)},showPane:function(c){var a=Lab.CongratulationsView;
this.set("pane",a);var b=this.get("pane");if(!b.get("isVisibleInWindow")){b.append();
if(b.get("isVisibleInWindow")&&Geniverse.activityController.get("pageContainsApplet")){Geniverse.activityController.get("iframeLayerToAppend").appendChild(this.get("iframe"))
}this.updateView(this.get("content"))}},contentDidChange:function(){var a=this.get("content");
this.updateView(a)}.observes("content"),removeView:function(b){var a=this.get("pane");
if(this.get("pane")){if(a.get("isVisibleInWindow")&&Geniverse.activityController.get("pageContainsApplet")){this.get("iframe").parentView.removeChild(this.get("iframe"))
}this.get("pane").remove();var c=this.get("hideCallback");if(typeof(c)=="function"){c()
}}},updateView:function(a){if(this.get("pane")){this.get("pane").contentView.congratulationsView.set("value",a)
}}});Lab.feedbackController=SC.Object.create({didSendBlogPost:function(){var d=Lab.statechart.getState("argumentationChallenge"),e=d.get("isCurrentState"),a=d.get("challengeComplete"),c=d.get("challengeWasAlreadyComplete"),b=!Geniverse.activityController.getNextActivity();
if(e&&a&&!c){this._notifyPostedToBlogAndCompletedChallenge(b)}else{this._notifyPostedToBlog()
}},_notifyPostedToBlogAndCompletedChallenge:function(a){this._notify("Good work!",'<img src="/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/quill-on-45x45.png" style="float: left; margin: 0.4em 1.0em;"/>\nYou earned a quill! You completed the challenge by posting to the journal.\nYou can continue to work on this challenge if you like, or you can '+(a?'go back to the <a href="#caselog">Case Log</a> to go to a new case.':"move on to the next challenge using the green arrow below."))
},_notifyPostedToBlog:function(){this._notify("Journal post successfully created!","When you are ready, move onto the next challenge.")
},_notify:function(c,b,a){this.HTMLEnabledAlertPane.plain(c,b,a,"OK")},HTMLEnabledAlertPane:SC.AlertPane.extend({layout:{top:0,centerX:0,width:360,height:100},displayDescription:function(){var a=this.get("description");
if(!a||a.length===0){return a}return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"
}.property("description").cacheable()})});Lab.HelpView=SC.PalettePane.create({layout:{width:600,height:600,centerX:0,centerY:0},isModal:NO,contentView:SC.View.extend({childViews:"titleView helpView hideButton helpIcon".w(),classNames:"parchment".w(),helpIcon:SC.ImageView.design({layout:{top:0,left:4,width:25,height:25},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/stampedHelp.png"}),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,width:600},value:"Help",controlSize:"info-title",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER}),hideButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:5,right:5,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"closeButton".w(),alt:"Close",title:"Close",action:"removeView",target:"Lab.helpController"}),helpView:SC.LabelView.design({layout:{left:10,top:30,width:580,height:539},value:"please wait...",escapeHTML:NO,helpViewValueDidChange:function(){var a=this.get("value")
}.observes("value")})})});sc_require("views/help");Lab.helpController=SC.ObjectController.create({pane:null,content:"Help message loading...",isVisible:YES,helpButton:null,iframe:SC.WebView.create({layoutBinding:"Lab.HelpView.layout",value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/empty.html"}),showPane:function(d){var b=Lab.HelpView;
this.set("pane",b);var c=this.get("pane");if(!c.get("isVisibleInWindow")){if(Geniverse.activityController.get("pageContainsApplet")){Geniverse.activityController.get("iframeLayerToAppend").appendChild(this.get("iframe"))
}c.append();this.set("content","Help message loading...");this.updateView(this.get("content"));
var a=Lab.routes._currentPagePane.get("pageName");if(a){var e=function(g){var f=null;
if(typeof g=="undefined"){SC.Logger.info("No helpMessage exists with that pageName.");
f="Sorry, a help message for this page was not found.<br/>pageName:"+a}else{f=g.get("message")
}if(!f){SC.Logger.warn("Failed to get message property of helpMessage:",g);f="Sorry, a proper help message for this page was not found.<br/>pageName:"+a
}Lab.helpController.set("content",f)};this.findHelpMessage(a,e);Lab.logController.logEvent(Lab.EVENT.OPENED_HELP)
}else{this.set("content","Sorry, a help message could not be loaded because the name of your page was not available.")
}}},contentDidChange:function(){var a=this.get("content");this.updateView(a)}.observes("content"),removeView:function(a){if(this.get("pane")){if(this.get("pane").get("isVisibleInWindow")&&Geniverse.activityController.get("pageContainsApplet")){this.get("iframe").parentView.removeChild(this.get("iframe"));
Lab.logController.logEvent(Lab.EVENT.CLOSED_HELP)}this.get("pane").remove()}},updateView:function(a){if(this.pane){this.pane.contentView.helpView.set("value",a)
}},findHelpMessage:function(a,f){var c=this;var e=SC.Query.local(Lab.HelpMessage,{conditions:'pageName = "'+a+'"'});
var d=Geniverse.store.find(e);var b=function(){var g=d.get("status");var h=d.firstObject();
f(h)};Geniverse.doWhenReady(c,d,b)}});Lab.InfoView=SC.PalettePane.create({layout:{width:440,height:430,centerX:0,centerY:0},isModal:NO,contentView:SC.View.extend({childViews:"titleView infoView hideButton instIcon".w(),classNames:"parchment".w(),instIcon:SC.ImageView.design({layout:{top:0,left:4,width:25,height:25},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/stampedInstructions.png"}),titleView:SC.LabelView.design({layout:{centerY:0,height:24,left:0,top:0,width:440},value:"Instructions",controlSize:"info-title",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER}),hideButton:SC.ImageView.extend(Geniverse.SimpleButton,{layout:{bottom:8,right:8,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"closeButton".w(),alt:"Close",title:"Close",action:"removeView",target:"Lab.infoController"}),infoView:SC.LabelView.design({layout:{left:10,top:24,width:420,height:375},value:"please wait...",escapeHTML:NO,infoViewValueDidChange:function(){var a=this.get("value")
}.observes("value")})})});Lab.InfoButtonView=SC.ButtonView.design({layout:{centerX:0,centerY:0,height:24,left:408,width:44},icon:"sc-icon-info-16",titleMinWidth:44,layerId:"infoButton",toolTip:"Information Button",target:"Lab.infoController",action:"showPane",isVisibleBinding:"Lab.infoController.isVisible",didTriggerAction:function(){console.log("infoButton.didTriggerAction() called");
console.log("infoButton.isActive:",this.get("isActive"));console.log("infoButton.isSelected:",this.get("isSelected"))
}});sc_require("views/info");sc_require("views/info_button");Lab.infoController=SC.ObjectController.create({pane:null,content:"",isVisible:NO,infoButton:null,onClose:null,iframe:SC.WebView.create({layoutBinding:"Lab.InfoView.layout",value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/empty.html"}),displayButtonOnly:function(c){var d='"https://geniverse-resources.concord.org/resources/icons/change-sex-buttons.png"',a=' width="'+Geniverse.ChangeSexButton.WIDTH_INSTR+'" height="'+Geniverse.ChangeSexButton.HEIGHT_INSTR+'"',b='"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/change-sex-button-female.png"'+a;
this.set("isVisible",YES);if(c){c=c.replace(d,b);this.set("content",c)}},display:function(b,a){this.displayButtonOnly(b);
this.showPane(this.infoButton,true);this.set("onClose",a)},showPane:function(d,b){var a=Lab.InfoView;
this.set("pane",a);var c=this.get("pane");if(!c.get("isVisibleInWindow")){c.append();
if(c.get("isVisibleInWindow")&&Geniverse.activityController.get("pageContainsApplet")){Geniverse.activityController.get("iframeLayerToAppend").appendChild(this.get("iframe"))
}this.updateView(this.get("content"));if(!b){Lab.logController.logEvent(Lab.EVENT.OPENED_INFO)
}}},contentDidChange:function(){var a=this.get("content");this.updateView(a)}.observes("content"),removeView:function(b){var a=this.get("pane");
if(this.get("pane")){if(a.get("isVisibleInWindow")&&Geniverse.activityController.get("pageContainsApplet")){this.get("iframe").parentView.removeChild(this.get("iframe"))
}this.get("pane").remove();if(b){Lab.logController.logEvent(Lab.EVENT.CLOSED_INFO)
}}if(onClose=this.get("onClose")){onClose()}},updateView:function(a){if(this.get("pane")){this.pane.contentView.infoView.set("value",a)
}}});window.SyncTime=(function(){a.prototype.drift=0;a.prototype.ready=false;function a(e){var c,d,b;
if(e==null){e="/time"}c=function(){var g,f;g=new Date();f=new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds());
return f.getTime()};b=c();d=new XMLHttpRequest();d.onreadystatechange=(function(f){return function(g){var j,k,h;
if(d.readyState===4&&d.status===200){k=c();j=(k-b)/2;h=d.responseText;f.drift=h-k+j;
return f.ready=true}}})(this);d.open("GET",e,true);d.send(null)}a.prototype.now=function(){return new Date((new Date()).getTime()+this.drift)
};return a})();sc_require("lib/sync_time");Lab.logController=SC.Object.create({init:function(){this._attachDefaultListeners()
},_session:null,learnerDataUrl:null,syncTime:new SyncTime(Geniverse.portalBase+"/time"),eventQueue:[],eventQueueInProgress:[],startNewSession:function(){var a=this._generateGUID();
this.set("_session",a);this.logEvent(Lab.EVENT.STARTED_SESSION);this._startEventQueuePolling();
return a},endSession:function(){this.logEvent(Lab.EVENT.ENDED_SESSION);this.set("_session",null)
},logEvent:function(m,d,a){var f,c,l,b,g,h,e,n;this._alsoSendToGoogleAnalytics(m);
if(a){f=d;d={};for(e=0,n=a.length;e<n;e++){b=a[e];g=b.split(":");if(g.length>1){b=g[1];
g=g[0]}else{g=b}d[g]=f.getPath(b)}}h=this.get("_session");if(!h){h=this.startNewSession()
}var j=this.get("syncTime");c=j?j.now():new Date();var k=j?j.drift:null;l={session:h,time:c.getTime(),prettyTime:c.toString(),timeDrift:k,event:m,parameters:d};
this._persistEvent(l)},_persistEvent:function(a){var b=this,c=this.get("learnerDataUrl");
if(c){$.ajax({type:"POST",url:c,data:JSON.stringify(a),dataType:"text",success:function(){console.log("log event saved");
if(a.event==Lab.EVENT.ENDED_SESSION){b.set("learnerDataUrl",null)}},error:function(){console.log("log event save failed!");
b.eventQueue.push(a)}})}else{console.log("log event generated (no saving)",a);return this.eventQueue.push(a)
}},_learnerDataUrlChanged:function(){this._processEventQueue()}.observes("learnerDataUrl"),_usernameChanged:function(){var a=Geniverse.userController.get("username");
if(a){this.set("learnerDataUrl",Geniverse.portalBase+"/dataservice/bucket_loggers/name/"+a+"/bucket_log_items.bundle")
}}.observes("Geniverse.userController.username"),_startEventQueuePolling:function(){var a=this;
setInterval(function(){if(a.eventQueueInProgress.length===0){a._processEventQueue()
}},10000)},_processEventQueue:function(){var a;if(this.get("learnerDataUrl")&&this.eventQueue.length>0){this.eventQueueInProgress=this.eventQueue.slice(0);
this.eventQueue=[];while(this.eventQueueInProgress.length>0){a=this.eventQueueInProgress.shift();
this._persistEvent(a)}}},_generateGUID:function(){function a(){return(((1+Math.random())*65536)|0).toString(16).substring(1)
}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},_alsoSendToGoogleAnalytics:function(a){switch(a){case Lab.EVENT.MOVED_TO:case Lab.EVENT.GO_TO_JOURNAL:case Lab.EVENT.GO_TO_JOURNAL_POST:Lab.GAHelper.trackEvent(Lab.GAHelper.Category.NAVIGATION,a,Geniverse.activityController.get("title"));
break;case Lab.EVENT.STARTED_CHALLENGE:case Lab.EVENT.REPEAT_CHALLENGE:Lab.GAHelper.trackEvent(Lab.GAHelper.Category.CHALLENGE,a,Geniverse.activityController.get("title"));
Lab.GAHelper.trackTimingStart(Lab.GAHelper.Category.CHALLENGE);break;case Lab.EVENT.COMPLETED_CHALLENGE:Lab.GAHelper.trackEvent(Lab.GAHelper.Category.CHALLENGE,a,Geniverse.activityController.get("title"),Geniverse.scoringController.get("achievedChallengeStars"));
Lab.GAHelper.trackTimingEnd(Lab.GAHelper.Category.CHALLENGE);break;case Lab.EVENT.OPENED_INFO:case Lab.EVENT.OPENED_HELP:Lab.GAHelper.trackEvent(Lab.GAHelper.Category.HELP,a,Geniverse.activityController.get("title"));
break;case Lab.EVENT.OPENED_JOURNAL_POST:case Lab.EVENT.JOURNAL_POST:Lab.GAHelper.trackEvent(Lab.GAHelper.Category.JOURNAL,a,Geniverse.activityController.get("title"));
Lab.GAHelper.trackTimingStart(Lab.GAHelper.Category.JOURNAL);break;case Lab.EVENT.CLOSED_JOURNAL_POST:Lab.GAHelper.trackEvent(Lab.GAHelper.Category.JOURNAL,a,Geniverse.activityController.get("title"));
Lab.GAHelper.trackTimingEnd(Lab.GAHelper.Category.JOURNAL);break}},_attachDefaultListeners:function(){Geniverse.activityController.addObserver("title",function(){if(Geniverse.activityController.get("title")){Lab.logController.logEvent(Lab.EVENT.MOVED_TO,Geniverse.activityController,"title".w())
}if(Geniverse.activityController.get("myCase")){var a=/[^\/]*$/.exec(Geniverse.activityController.getPath("myCase.id")),b=a.length?parseInt(a[0]):null;
Lab.logController.logEvent(Lab.EVENT.STARTED_CHALLENGE,{title:Geniverse.activityController.get("title"),route:Geniverse.activityController.get("route"),"case":b,challenge:Geniverse.activityController.get("myCaseOrder")})
}});Geniverse.breedDragonController.addObserver("isBreeding",function(){if(Geniverse.breedDragonController.get("isBreeding")){Lab.logController.logEvent(Lab.EVENT.BRED_DRAGONS,Geniverse.breedDragonController,"mother:mother.alleles father:father.alleles".w())
}});Geniverse.chromosomeToolController.addObserver("dragon",function(){if(Geniverse.chromosomeToolController.get("dragon")&&Geniverse.chromosomeToolController.getPath("paneInstance")&&!Geniverse.chromosomeToolController.getPath("paneInstance.isDestroyed")){Lab.logController.logEvent(Lab.EVENT.EXAMINED_GENOTYPE,Geniverse.chromosomeToolController,"alleles:dragon.alleles sex:dragon.sex".w())
}});Geniverse.meiosisAnimationController.addObserver("mother",function(){if(Geniverse.meiosisAnimationController.get("mother")){Lab.logController.logEvent(Lab.EVENT.SELECTED_PARENT,Geniverse.meiosisAnimationController,"alleles:mother.alleles sex:mother.sex".w())
}});Geniverse.meiosisAnimationController.addObserver("father",function(){if(Geniverse.meiosisAnimationController.get("father")){Lab.logController.logEvent(Lab.EVENT.SELECTED_PARENT,Geniverse.meiosisAnimationController,"alleles:father.alleles sex:father.sex".w())
}});Geniverse.meiosisAnimationController.addObserver("offspring",function(){if(Geniverse.meiosisAnimationController.get("offspring")){Lab.logController.logEvent(Lab.EVENT.PRODUCED_OFFSPRING_BY_MEIOSIS,Geniverse.meiosisAnimationController,"alleles:offspring.alleles sex:offspring.sex".w())
}})}});Lab.loginController=SC.ObjectController.create({defaultResponder:"Lab.statechart",checkTokenUrl:Geniverse.portalBase+"/verify_cc_token",loginUrl:Geniverse.portalBase+"/remote_login",logoutUrl:Geniverse.portalBase+"/remote_logout",username:"",password:"",loggedIn:NO,triedPortal:NO,panel:null,welcomeMessage:"please wait ...",memberGroupMessage:"",checkShowing:YES,loginShowing:NO,showGroupPanel:function(){this.hidePanel();
this.panel=Lab.LoginGroupView.create({layout:{top:10,width:400,height:100,centerX:0}});
this.panel.append()},showLoginPanel:function(){this.set("welcomeMessage","please log in");
if(this.triedPortal){this.set("welcomeMessage","invalid login. try again.")}this.set("loginShowing",YES);
this.set("checkShowing",NO)},hidePanel:function(){if(this.panel){this.panel.remove();
this.panel=null}},checkCCAuthToken:function(){var a=this.checkTokenUrl;SC.Request.getUrl(a).header({Accept:"application/json"}).json().notify(this,"didCCAuth").send();
return YES},loginPortal:function(){var c=this;var e=this.loginUrl;var b=this.get("username");
var d=this.get("password");var a={login:b,password:d};this.set("welcomeMessage","please wait ...");
this.set("loginShowing",NO);SC.Request.postUrl(e,a).header({Accept:"application/json"}).json().notify(c,"checkCCAuthToken").send();
this.triedPortal=YES;return YES},autoLogin:function(c,b,d){var a=SC.Object.create({body:{login:d,first:c,last:b,avatar:$.cookie("avatar"),class_words:[]}});
this.triedPortal=YES;this.didCCAuth(a)},didCCAuth:function(d){SC.Logger.log(d);if(SC.ok(d)){SC.Logger.log(d.get("body"));
var c=d.get("body").login;var h=d.get("body").first;var f=d.get("body").last;var b=d.get("body").teacher;
var e=d.get("body").avatar;var a=this;var g=function(j){j.set("firstName",h);j.set("lastName",f);
j.set("isTeacher",b);var m=d.get("body").class_words;if(m&&m.length>0){for(var k=0;
k<m.length;k++){m[k]=m[k].replace(/[^a-zA-Z0-9_\-]+/g,"")}var l=m[m.length-1];j.set("className",l);
j.set("allClassNames",m)}else{j.set("className","no_class")}j.set("avatar",e);Geniverse.store.commitRecords();
Geniverse.userController.set("content",j);Geniverse.doWhenReadyClean(a,j,a.didAuthenticate)
};Geniverse.userController.findOrCreateUser(c,g)}else{SC.Logger.log("Login failure.");
this.showLoginPanel()}},didAuthenticate:function(){SC.Logger.log("LOGIN: Authenticated.");
this.set("loggedIn",YES);var a=Geniverse.userController.get("content");if(a){this.finish()
}else{this.showGroupPanel()}},logout:function(){this.set("triedPortal",false);var a=SC.Cookie.find("cc_auth_token");
if(a){a.destroy()}var b=this;SC.Logger.info("logging out %s",this.get("username"));
this.set("username","");this.set("lastName","");this.set("firstName","");this.set("password","");
this.set("loggedIn",NO);Lab.userDefaults.writeDefault("username","");Lab.userDefaults.writeDefault("password","");
Lab.userDefaults.writeDefault("chatroom","")},updateGroupInfo:function(){var a=Geniverse.userController.get("content");
if(a){Geniverse.store.commitRecords()}else{SC.Logger.log("probably an error condition -- no user when updateing groups")
}},finish:function(){var a=Geniverse.userController.get("content");var d=a.get("memberId");
var c=a.get("groupId");var b=a.get("firstName");this.hidePanel();this.set("welcomeMessage","Welcome to Geniverse, %@".fmt(b));
this.set("memberGroupMessage","Member #%@, Group #%@".fmt(d,c));this.set("lastGroupId",c);
this.set("lastMemberId",d);Lab.ACTIVITY.initChatChannels();Lab.userDefaults.writeDefault("username",a.get("username"));
this.updateGroupInfo();this.set("loggedIn",YES);Lab.statechart.sendAction("logIn")
},lastGroupId:-1,lastMemberId:-1,loadTimer:null,setupTimer:function(b,a){if(this.get("loadTimer")!==null){this.get("loadTimer").invalidate()
}this.set("loadTimer",SC.Timer.schedule({target:this,action:function(){function c(e,d){return((e.get("status")&SC.Record.READY)===SC.Record.READY)
}if(b.every(c)){this.get("loadTimer").invalidate();a()}},interval:500,repeats:YES}))
},groupInfoDidUpdate:function(){var e=this;if((Geniverse.userController.get("groupId")!=this.get("lastGroupId")||Geniverse.userController.get("memberId")!=this.get("lastMemberId"))&&Lab.ACTIVITY.get("hasLoadedActivityData")){SC.Logger.log("reloading data after group change");
Lab.ACTIVITY.set("hasLoadedActivityData",NO);var d=Geniverse.userController.get("content");
var b=Geniverse.challengePoolController.get("arrangedObjects");var a=[];b.forEach(function(f){a.push(f)
});var c=function(){if((d.get("status")&SC.Record.READY)===SC.Record.READY){d.removeObserver("status",c);
Lab.ACTIVITY.sellAllUsersDrakes();Geniverse.store.commitRecords();var f=function(){if((b.get("status")&SC.Record.READY)===SC.Record.READY){b.removeObserver("status",f);
Lab.ACTIVITY.reloadData()}};e.setupTimer(a,f)}};if((d.get("status")&SC.Record.READY)===SC.Record.READY){c()
}else{d.addObserver("status",c)}this.set("lastGroupId",Geniverse.userController.get("groupId"));
this.set("lastMemberId",Geniverse.userController.get("memberId"))}}.observes("Geniverse.userController.memberId","Geniverse.userController.groupId")});
sc_require("views/help");Lab.navigationController=SC.ObjectController.create({showPreviousButton:NO,showNextButton:NO,blockNextButton:NO,});
function SHA256(q){var l=8;var o=0;function j(r,u){var t=(r&65535)+(u&65535);var s=(r>>16)+(u>>16)+(t>>16);
return(s<<16)|(t&65535)}function e(s,r){return(s>>>r)|(s<<(32-r))}function f(s,r){return(s>>>r)
}function a(r,t,s){return((r&t)^((~r)&s))}function d(r,t,s){return((r&t)^(r&s)^(t&s))
}function g(r){return(e(r,2)^e(r,13)^e(r,22))}function b(r){return(e(r,6)^e(r,11)^e(r,25))
}function p(r){return(e(r,7)^e(r,18)^f(r,3))}function k(r){return(e(r,17)^e(r,19)^f(r,10))
}function c(s,t){var F=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);
var u=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225);
var r=new Array(64);var H,G,E,D,B,z,y,x,w,v;var C,A;s[t>>5]|=128<<(24-t%32);s[((t+64>>9)<<4)+15]=t;
for(var w=0;w<s.length;w+=16){H=u[0];G=u[1];E=u[2];D=u[3];B=u[4];z=u[5];y=u[6];x=u[7];
for(var v=0;v<64;v++){if(v<16){r[v]=s[v+w]}else{r[v]=j(j(j(k(r[v-2]),r[v-7]),p(r[v-15])),r[v-16])
}C=j(j(j(j(x,b(B)),a(B,z,y)),F[v]),r[v]);A=j(g(H),d(H,G,E));x=y;y=z;z=B;B=j(D,C);
D=E;E=G;G=H;H=j(C,A)}u[0]=j(H,u[0]);u[1]=j(G,u[1]);u[2]=j(E,u[2]);u[3]=j(D,u[3]);
u[4]=j(B,u[4]);u[5]=j(z,u[5]);u[6]=j(y,u[6]);u[7]=j(x,u[7])}return u}function h(u){var t=Array();
var r=(1<<l)-1;for(var s=0;s<u.length*l;s+=l){t[s>>5]|=(u.charCodeAt(s/l)&r)<<(24-s%32)
}return t}function n(s){s=s.replace(/\r\n/g,"\n");var r="";for(var u=0;u<s.length;
u++){var t=s.charCodeAt(u);if(t<128){r+=String.fromCharCode(t)}else{if((t>127)&&(t<2048)){r+=String.fromCharCode((t>>6)|192);
r+=String.fromCharCode((t&63)|128)}else{r+=String.fromCharCode((t>>12)|224);r+=String.fromCharCode(((t>>6)&63)|128);
r+=String.fromCharCode((t&63)|128)}}}return r}function m(t){var s=o?"0123456789ABCDEF":"0123456789abcdef";
var u="";for(var r=0;r<t.length*4;r++){u+=s.charAt((t[r>>2]>>((3-r%4)*8+4))&15)+s.charAt((t[r>>2]>>((3-r%4)*8))&15)
}return u}q=n(q);return m(c(h(q),q.length*l))}(function(){Lab.GAHelper={};_gaq=window._gaq;
_timeStart={};Lab.GAHelper.Category={NAVIGATION:"Navigation",CHALLENGE:"Challenge",JOURNAL:"Journal",HELP:"Help or Instructions"};
Lab.GAHelper.trackEvent=function(c,e,b,d){if(!_gaq){return}var a=["_trackEvent",c,e];
if(b){a.push(b);if(d){a.push(d)}}_gaq.push(a)};Lab.GAHelper.trackTimingStart=function(a){if(!_gaq){return
}_timeStart[a]=new Date().getTime()};Lab.GAHelper.trackTimingEnd=function(b){if(!_gaq||!_timeStart[b]){return
}var c=new Date().getTime()-_timeStart[b];_timeStart[b]=null;if(c>0&&c<(1000*60*120)){var a=["_trackTiming",b,"Time spent",c];
_gaq.push(a)}}})();Lab.EVENT={STARTED_SESSION:"Started session",USER_LOGGED_IN:"User logged in",USER_LOGGED_OUT:"User logged out",ENDED_SESSION:"Ended session",MOVED_TO:"Moved to",STARTED_CHALLENGE:"Started challenge",COMPLETED_CHALLENGE:"Completed challenge",REPEAT_CHALLENGE:"Repeat challenge",STARS_EARNED:"Stars earned",DRAKE_SUBMITTED:"Drake submitted",DRAKES_REVEALED:"Drakes revealed",SELECTED_PARENT:"Selected parent",REMOVED_PARENT:"Removed parent",BRED_DRAGONS:"Bred dragons",KEPT_OFFSPRING:"Kept offspring",KEPT_OFFSPRING_FAILED:"Failed to keep offspring",OPENED_STATS:"Opened stats tab",CLOSED_STATS:"Closed stats tab",CHANGED_STATS:"Changed stats trait",INITIAL_STATS:"Initial stats trait",COMPLETED_MEIOSIS:"Completed meiosis",SELECTED_GAMETE:"Selected gamete",RESTARTED_MEIOSIS:"Restarted meiosis",PRODUCED_OFFSPRING_BY_MEIOSIS:"Produced offspring by meiosis",CHANGED_ALLELE:"Changed allele",CHOSE_CHROMOSOME:"Chromosome selected",DESELECTED_CHROMOSOME:"Chromosome deselected",MADE_CROSSOVER:"Crossover selected",EXAMINED_GENOTYPE:"Examined genotype",OPENED_INFO:"Opened info",CLOSED_INFO:"Closed info",OPENED_NOTEPAD:"Opened notepad",CLOSED_NOTEPAD:"Closed notepad",SAVED_NOTEPAD:"Saved and closed notepad",OPENED_HELP:"Opened help",CLOSED_HELP:"Closed help",OPENED_JOURNAL_POST:"Opened journal post window",CLOSED_JOURNAL_POST:"Closed journal post window",SAVED_JOURNAL_POST:"Saved journal draft",JOURNAL_POST:"Submitted journal entry",JOURNAL_POST_FAILED:"Failed to submit journal entry",GO_TO_JOURNAL_POST:"Navigated to journal post",GO_TO_JOURNAL:"Navigated to journal"};
Lab.HelpMessage=SC.Record.extend({pageName:SC.Record.attr(String),message:SC.Record.attr(String)});
Lab.HelpMessage.modelName="help_message";Lab.HelpMessage.modelsName="help_messages";
Geniverse.railsBackedTypes.push(Lab.HelpMessage.modelName);Lab.TopBarView=SC.ToolbarView.extend({layout:{top:0,left:0,right:0,height:57},layerId:"topBar",classNames:["brown-toolbar-view"],anchorLocation:SC.ANCHOR_TOP,childViews:"homeButton caselogButton introButton geniverseLabelView welcomeLabelView groupLabelView changeGroupButton infoButton notepadButton blogButton helpButton unlockablesButton logoutButton".w(),homeButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:66,height:57},useStaticLayout:YES,layerId:"homeButton",hasHover:YES,toolTip:"Home",target:"Lab.routes",action:"openHomePageRoute",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-75".w()}),caselogButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:64,height:57},useStaticLayout:YES,layerId:"caselogButton",hasHover:YES,toolTip:"Case Log",target:"Lab.routes",action:"openCaselogRoute",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-90".w()}),introButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:57,height:57},useStaticLayout:YES,layerId:"introButton",hasHover:YES,toolTip:"Narrative introduction",target:"Lab.routes",action:"openAvatarPageRoute",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-175".w()}),geniverseLabelView:SC.View.design({layout:{top:0,height:57,width:220},useStaticLayout:YES,classNames:["pageTitle"],childViews:"caseTitle activityTitle".w(),caseTitle:SC.LabelView.design({layout:{top:0},layerId:"caseLabel",valueBinding:"Geniverse.activityController.caseTitle"}),activityTitle:SC.LabelView.design({layout:{top:30},layerId:"activityLabel",valueBinding:"Geniverse.activityController.actTitle"})}),welcomeLabelView:SC.LabelView.design({layout:{top:-12,height:24},classNames:["welcomeLabel"],useStaticLayout:YES,valueBinding:"Lab.loginController.welcomeMessage",isVisibleBinding:"Lab.loginController.loggedIn"}),groupLabelView:SC.LabelView.design({layout:{top:-15,height:24},classNames:["groupLabel"],useStaticLayout:YES,valueBinding:"Lab.loginController.memberGroupMessage",isVisibleBinding:"Lab.loginController.loggedIn"}),changeGroupButton:SC.LabelView.design({layout:{top:-15,height:24},useStaticLayout:YES,layerId:"changeGroupLabel",value:"edit",click:function(){Lab.loginController.showGroupPanel()
},isVisibleBinding:"Lab.loginController.loggedIn",toolTip:"Change your Member number or Group number.",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle".w()}),unlockablesButton:SC.PopupButtonView.design({layout:{top:0,left:0,width:45,height:57},useStaticLayout:YES,menu:SC.MenuPane.design({layout:{width:350},preferType:SC.PICKER_POINTER,rawItemsBinding:"Geniverse.unlockablesController.*unlocked.length",rawItemsChanged:function(){var a=Geniverse.unlockablesController.get("unlocked");
if(a.get("length")===0){a=[{title:"Nothing unlocked yet",isEnabled:NO}]}this.set("items",a);
this.propertyDidChange("items")}.observes("rawItems"),itemTitleKey:"title",itemValueKey:"guid",itemIconKey:"icon",itemHeight:20,selectedItemBinding:"Geniverse.unlockablesController.selectedUnlockable"}),layerId:"unlockablesButton",alt:"Unlockables",toolTip:"Access your unlocked items",notViewedUnlockablesBinding:"Geniverse.unlockablesController.*notViewed.length",notViewed:function(){var a="none";
if((this.get("notViewedUnlockables")||0)>0){a="some"}this.set("classNames",["sc-view","sc-image-view","sc-regular-size",a]);
this.set("layerNeedsUpdate",YES)}.observes("notViewedUnlockables"),classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-200".w()}),infoButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:56,height:57},useStaticLayout:YES,layerId:"infoButton",hasHover:YES,toolTip:"Instructions",target:"Lab.infoController",action:"showPane",render:function(){arguments.callee.base.apply(this,arguments);
classes="topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle".w();
if(Geniverse.activityController.get("pageType")==="chromosomeBreedingPage"){this.set("toolTip","When in doubt, read the Instructions.");
classes.push("hint-available");classes.push("hint-max-width-300")}else{if(Geniverse.activityController.get("pageType")===null){classes.push("disabled");
classes.push("hint-max-width-110");this.set("action",null)}else{classes.push("hint-max-width-110")
}}this.set("classNames",classes);Lab.infoController.set("infoButton",this)},classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-110".w()}),blogButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:55,height:57},useStaticLayout:YES,layerId:"blogButton",hasHover:YES,title:"Post claim to the Journal",toolTip:"Post your claim to the class journal",target:"Lab.statechart",action:"showBlogPostPanel",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-240".w()}),notepadButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:50,height:57},useStaticLayout:YES,hasHover:YES,alt:"Your notebook",layerId:"notepadButton",toolTip:"Your notepad",target:"Geniverse.notepadController",isEnabledBinding:"Geniverse.notepadController.isEnabledButton",action:"showPane",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-120".w()}),helpButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:56,height:57},useStaticLayout:YES,layerId:"helpButton",hasHover:YES,alt:"Help",target:"Lab.helpController",action:"showPane",isVisibleBinding:"Lab.helpController.isVisible",init:function(){arguments.callee.base.apply(this,arguments);
Lab.helpController.set("helpButton",this)},toolTip:"Click here for help on any page.",classNames:"topbar-hint-available topbar-hint-available-show hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-220".w()}),logoutButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:0,left:0,width:67,height:57},useStaticLayout:YES,layerId:"logOutButton",hasHover:YES,title:"Log out",toolTip:"Log out",target:"Lab.statechart",action:"logOut",classNames:"topbar-hint-available hint-target-bottomMiddle hint-tooltip-topMiddle hint-max-width-85".w()})});
Lab.BottomBarView=SC.ToolbarView.extend({layout:{bottom:0,left:0,right:0,height:36},layerId:"bottomBar",classNames:["brown-toolbar-view"],anchorLocation:SC.ANCHOR_BOTTOM,navBarLeftArrowBW:null,navBarRightArrowBW:null,navBarLeftArrow:null,navBarRightArrow:null,navBarRightArrowRed:null,createChildViews:function(){var a=[];
this.navBarLeftArrowBW=this.createChildView(SC.ImageView.design({layout:{centerY:0,centerX:-40,width:38,height:38},value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/arrow_left_bw.png",canLoadInBackground:YES,useImageCache:YES}));
a.push(this.navBarLeftArrowBW);this.navBarRightArrowBW=this.createChildView(SC.ImageView.design({layout:{centerY:0,centerX:40,width:38,height:38},value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/arrow_right_bw.png",canLoadInBackground:YES,useImageCache:YES}));
a.push(this.navBarRightArrowBW);this.navBarLeftArrow=this.createChildView(SC.ImageView.design(Geniverse.SimpleButton,{layout:{centerY:0,centerX:-40,width:38,height:38},layerId:"navBarLeftArrow",value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/arrow_left_green.png",alt:"Back",toolTip:"Click to go to back to the previous activity",target:"Lab.statechart",action:"gotoPreviousActivity",canLoadInBackground:NO,useImageCache:NO,isVisibleBinding:"Lab.navigationController.showPreviousButton"}));
a.push(this.navBarLeftArrow);this.navBarRightArrow=this.createChildView(SC.ImageView.design(Geniverse.SimpleButton,{layout:{centerY:0,centerX:40,width:38,height:38},layerId:"navBarRightArrow",value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/arrow_right_green.png",alt:"Forward",toolTip:"Click to go to forward to the next activity",target:"Lab.statechart",action:"gotoNextActivity",canLoadInBackground:NO,useImageCache:NO,isVisibleBinding:"Lab.navigationController.showNextButton"}));
a.push(this.navBarRightArrow);this.navBarRightArrowRed=this.createChildView(SC.ImageView.design({layout:{centerY:0,centerX:40,width:38,height:38},value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/arrow_right_red.png",canLoadInBackground:YES,useImageCache:YES,toolTip:"You can't move forward until you complete the challenge",isVisibleBinding:"Lab.navigationController.blockNextButton"}));
a.push(this.navBarRightArrowRed);this.set("childViews",a)}});sc_require("views/top_bar_view");
sc_require("views/bottom_bar_view");Lab.LabPane=SC.MainPane.extend({classNames:["brown","lab"],layout:{minHeight:780,minWidth:1200},childViews:"mainAppView topBar bottomBar".w(),topBar:Lab.TopBarView.design({classNames:["brown"]}),bottomBar:Lab.BottomBarView.design({classNames:["brown"]}),mainAppView:SC.View.design()});
Lab.ChallengePoolView=SC.View.extend({classNames:"transparent".w(),titleView:null,dragonsView:null,dragonSize:75,dragonExampleView:Geniverse.OrganismView.extend(Geniverse.ShiftedOrganism),sex:null,challengePoolControllerPath:"Geniverse.challengePoolController",createChildViews:function(){var b=[],a="Geniverse.challengePoolController",c="Parent Pool";
if(this.get("sex")==="female"){a="Geniverse.challengePoolFemalesController";c="Mothers Pool"
}else{if(this.get("sex")==="male"){a="Geniverse.challengePoolMalesController";c="Fathers Pool"
}}this.set("challengePoolControllerPath",a);this.dragonsView=this.createChildView(CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,right:0,bottom:0},contentView:SC.GridView.design({classNames:["dragon-grid"],contentBinding:this.get("challengePoolControllerPath")+".arrangedObjects",selectionBinding:this.get("challengePoolControllerPath")+".selection",rowHeight:this.get("dragonSize"),columnWidth:this.get("dragonSize"),canEditContent:NO,exampleView:this.get("dragonExampleView"),isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:this.get("challengePoolControllerPath")+".length"}));
b.push(this.dragonsView);this.titleView=this.createChildView(SC.LabelView.design({layout:{height:20,left:0,top:0,right:0},value:c,controlSize:"bity",fontWeight:SC.BOLD_WEIGHT,textAlign:SC.ALIGN_CENTER,classNames:"container_label".w()}));
b.push(this.titleView);this.set("childViews",b)}});Lab.BreedingPenView=SC.View.extend({classNames:("transparent overflowVis").w(),titleView:null,penView:null,breedingRecordRight:-20,eggsControllerPath:"Geniverse.eggsController",dragonSize:75,shownAgain:function(){if(this.tabView&&this.penView&&this.get("isVisibleInWindow")){this.tabView.set("nowShowing",this.penView)
}}.observes("isVisibleInWindow"),createChildViews:function(){var a=[];this.penView=this.createChildView(CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:0,bottom:0,right:0},contentView:SC.GridView.design({classNames:["dragon-grid"],contentBinding:this.get("eggsControllerPath")+".arrangedObjects",selectionBinding:this.get("eggsControllerPath")+".selection",rowHeight:this.get("dragonSize"),columnWidth:this.get("dragonSize"),canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:this.get("eggsControllerPath")+".length"}));
this.statsView=this.createChildView(Geniverse.StatsView.design({layout:{left:0,top:0,bottom:0,right:0},contentBinding:"Geniverse.eggsController.arrangedObjects"}));
this.tabView=this.createChildView(SC.TabView.design({layout:{left:0,top:0,bottom:30,right:0},items:[{title:"Breeding pen",value:this.penView},{title:"Stats",value:this.statsView}],itemTitleKey:"title",itemValueKey:"value",nowShowing:this.penView}));
a.push(this.tabView);this.recordLink=this.createChildView(Geniverse.RecordLinkView.design({layout:{right:this.get("breedingRecordRight"),bottom:0,height:25,width:253},tabView:this.tabView}));
this.tabView.addObserver("nowShowing",function(){if(this.getPath("nowShowing.statsView")){Lab.logController.logEvent(Lab.EVENT.OPENED_STATS)
}else{Lab.logController.logEvent(Lab.EVENT.CLOSED_STATS)}});a.push(this.recordLink);
__this=this;this.recordButton=this.createChildView(SC.ButtonView.design({layout:{bottom:5,right:10,width:150,height:24},action:function(){window.saveBreedingDragonsToBackend();
__this.recordButton.set("isEnabled",false);setTimeout(function(){__this.recordButton.set("isEnabled",true)
},1200)},isVisibleObserver:function(){this.set("isVisible",Geniverse.eggsController.get("length")>0&&!this.getPath("parentView.recordLink.isVisible"))
}.observes("Geniverse.eggsController.length","*parentView.recordLink.isVisible"),title:"Save breeding record"}));
a.push(this.recordButton);this.set("childViews",a)}});Lab.StableView=SC.View.extend({layout:{left:680,top:70,height:90,width:240},title:null,stable:null,stableOrganismsControllerPath:"Geniverse.stableOrganismsController",dragonSize:75,stableSizeBinding:"Geniverse.stableOrganismsController.maxSize",createChildViews:function(){var a=[];
this.title=this.createChildView(SC.LabelView.design({classNames:"container_label".w(),layout:{centerX:0,top:0,height:20,right:0},controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,woo:function(){this.propertyDidChange("value")
}.observes("Geniverse.stableOrganismsController.arrangedObjects.[]"),value:function(){var d=Geniverse.stableOrganismsController.get("length");
var b=this.getPath("parentView.stableSize")-d;var c="";if(!isNaN(b)){c="      -   "+b+" spaces remaining"
}return"Your Stable"+c}.property("Geniverse.stableOrganismsController.arrangedObjects.[]"),destroy:function(){Geniverse.stableOrganismsController.removeObserver("arrangedObjects",this,this.woo);
Geniverse.stableOrganismsController.removeObserver("[]",this,this.woo);arguments.callee.base.apply(this,arguments)
}}));a.push(this.title);this.stable=this.createChildView(CC.AutoScrollView.design({hasHorizontalScroller:NO,layout:{left:0,top:20,bottom:0,right:0},classNames:"transparent".w(),contentView:SC.GridView.design({classNames:["dragon-grid"],contentBinding:this.get("stableOrganismsControllerPath")+".arrangedObjects",selectionBinding:this.get("stableOrganismsControllerPath")+".selection",rowHeight:this.get("dragonSize"),columnWidth:this.get("dragonSize"),canEditContent:NO,exampleView:Geniverse.OrganismView,isSelectable:YES,dragDataTypes:["dragon"]}),autoScrollTriggerBinding:this.get("stableOrganismsControllerPath")+".length",isDropTarget:YES,dragonNum:0,acceptDragOperation:function(d,f){var m=this,l=this.getPath("parentView.stableSize");
function g(r){if(!r){return}if(!r.get("bred")){return}var o=m.get("dragonNum");var t=Geniverse.stableOrganismsController.get("arrangedObjects");
var s=Geniverse.stableOrganismsController.get("length");if(s>=l){SC.AlertPane.error("Can't move dragon","Your stable is full. If you want to save more dragons, sell some to the marketplace");
Lab.logController.logEvent(Lab.EVENT.KEPT_OFFSPRING_FAILED,{alleles:r.get("alleles"),draggedToParentSlot:false});
return}if(s===0){Lab.statechart.sendAction("stabledFirstDrake")}if(s>0){var p=t.objectAt(s-1);
var n=p.get("stableOrder");if(n&&n>s){o=n+1}else{o=s+1}m.set("dragonNum",o)}Lab.logController.logEvent(Lab.EVENT.KEPT_OFFSPRING,{alleles:r.get("alleles"),draggedToParentSlot:false});
r.set("isEgg",false);r.set("stableOrder",o);var q=Geniverse.eggsController.get("content");
Geniverse.eggsController.set("content",q.without(r));if(!r.get("saveToBackend")){window.createSavableDragon(r);
r.set("isInMarketplace",YES)}m.dragonNum=m.dragonNum+1;SC.Logger.info("Stable has %d dragons",m.dragonNum)
}if(d.hasDataType("dragonChat")){SC.Logger.info("we found a dragon from chat");var j=d.get("data");
Geniverse.dragonChattingController.createNewDragonFromChat(j,function(n){g(n)})}else{if((""+d.get("source").constructor==="Geniverse.OrganismView")){var e=d.get("source").get("content");
g(e)}else{var k=d.get("source").get("selection").clone();SC.RunLoop.begin();var h=l-Geniverse.stableOrganismsController.get("length");
var b=Math.min(h,k.get("length"));for(var c=0;c<b;c++){g(k.firstObject())}SC.RunLoop.end();
if(b<k.get("length")){SC.AlertPane.error("Can't move dragon","Your stable is full. If you want to save more dragons, sell some to the marketplace")
}}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
SC.RunLoop.end()});return f},computeDragOperations:function(c,b){return SC.DRAG_ANY
},dragEntered:function(c,b){this.$().addClass("drop-target")},dragExited:function(c,b){this.$().removeClass("drop-target")
}}));a.push(this.stable);this.set("childViews",a)}});Lab.marginSize=15;sc_require("views/lab_pane");
sc_require("views/challenge_pool_view");sc_require("views/breeding_pen_view");sc_require("views/stable_view");
Lab.breedingPageGroup=SC.Page.design({pagePath:"Lab.breedingPageGroup",title:"Breeding Page Group",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:100,width:840,height:600},childViews:"breedView challengePoolView breedingPenView challengeChromosomeToolView stableView matchView marketplaceView chatView allArticlesView".w(),challengePoolView:Lab.ChallengePoolView.design({layout:{left:0,top:50,width:80,height:320}}),challengeChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:45,top:20,width:35,height:30}}),breedView:Geniverse.BreedDragonView.design({layout:{top:20,left:90,height:330,width:150},showChildView:NO}),breedingPenView:Lab.BreedingPenView.design({layout:{left:250,top:28,width:325,height:426}}),stableView:Lab.StableView.design({layout:{left:585,top:28,width:380,height:395}}),matchView:Geniverse.MatchView.design({layout:{left:895,top:28,height:340,width:82},dragonSize:80}),marketplaceView:SC.ImageView.design({layout:{left:975,top:435,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(g&&g.get("bred")){g.set("isInMarketplace",YES)}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),allArticlesView:SC.View.design({childViews:"articleLabel article".w(),layout:{top:435,left:430,width:450,height:235},articleLabel:SC.LabelView.design({layout:{top:0,left:0,right:0,height:20},value:"Article draft",classNames:"container_label",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT}),article:Geniverse.ArticleView.design({layout:{top:20,left:0,right:0,bottom:0}})}),chatView:SC.View.design({layout:{top:435,left:20,width:385,height:215},classNames:"transparent".w(),childViews:"userListLabel userListView chatListView chatComposeView ".w(),userListLabel:SC.LabelView.design({layout:{top:0,left:0,width:125,height:20},value:"Users in room",classNames:"container_label",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT}),userListView:CcChat.UserListView.design({layout:{top:20,left:0,width:125,height:210}}),chatListView:CC.AutoScrollView.design({layerId:"chatList",hasHorizontalScroller:NO,layout:{left:135,top:20,height:150,width:250},backgroundColor:"white",contentView:SC.StackedView.design({layerId:"chatListContent",contentBinding:"Geniverse.chatListController.arrangedObjects",selectionBinding:"Geniverse.chatListController.selection",rowHeight:30,canEditContent:NO,hasContentIcon:YES,contentValueKey:"message",isSelectable:YES,showAlternatingRows:YES,exampleView:Geniverse.ChatMessageView}),autoScrollTriggerBinding:"Geniverse.chatListController.length"}),chatComposeView:Geniverse.DragonChatComposeView.design({layout:{left:135,top:180,height:100,width:250},layerId:"chatCompose"})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.breedingPageMatch=SC.Page.design({pagePath:"Lab.breedingPageMatch",title:"Breeding Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:100,width:840,height:600},childViews:"breedView mothersPoolView fathersPoolView challengeChromosomeToolView breedingPenView stableView marketplaceView matchView scoreView glowHintView stableHintView".w(),mothersPoolView:Lab.ChallengePoolView.design({layout:{left:20,top:40,width:165,height:173},sex:"female"}),fathersPoolView:Lab.ChallengePoolView.design({layout:{right:20,top:40,width:165,height:173},sex:"male"}),challengeChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{centerX:-51,top:130,width:35,height:30},toolTip:"Click a dragon and then scope it with this button.  Does it have the right alleles to match the targets?",classNames:"hint-available breeding-completed-hint"}),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:9,width:410,height:117},dragonSize:96}),breedView:Geniverse.BreedDragonView.design({layout:{top:120,left:30,height:330,right:30},showChildView:NO,trackScore:YES,motherView:Geniverse.OrganismView.design({layout:{top:100,left:0,width:180,height:180},classNames:"sc-theme motherView opaque".w(),contentBinding:"*parentView.mother",parent:"mother",label:"Mother",showLabel:true,sex:1,isDropTarget:YES,glow:YES,trackScoreBinding:"*parentView.trackScore"}),fatherView:Geniverse.OrganismView.design({layout:{top:100,right:0,width:180,height:180},classNames:"fatherView opaque".w(),contentBinding:"*parentView.father",parent:"father",label:"Father",showLabel:true,sex:0,isDropTarget:YES,glow:YES,trackScoreBinding:"*parentView.trackScore"}),breedButtonView:SC.ButtonView.design({layout:{top:10,centerX:20,width:100,height:24},target:"Geniverse.breedDragonController",trackScore:NO,action:function(){Lab.statechart.sendAction("breedingPageMatchBreedingCompleted");
return this.get("trackScore")?"breedAndIncrementScore":"breed"}.property("trackScore"),isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()})}),breedingPenView:Lab.BreedingPenView.design({layout:{centerX:0,top:159,width:406,height:347}}),stableView:Lab.StableView.design({layout:{centerX:0,top:501,width:520,height:97}}),marketplaceView:SC.ImageView.design({layout:{right:35,top:507,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(g&&g.get("bred")){g.set("isInMarketplace",YES);Geniverse.eggsController.removeObject(g)
}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")},toolTip:"If your stable is full, drag drakes here to remove them!",classNames:"first-stable-hint hint-target-topMiddle hint-tooltip-bottomMiddle".w()}),scoreView:Geniverse.ScoreView.design({layout:{left:20,top:445,height:49,width:184},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES}),glowHintView:SC.View.design({layout:{top:200,centerX:220,width:15,height:173},toolTip:"Drag parents to the yellow spots.",classNames:"hint-available hint-target-leftMiddle hint-tooltip-rightTop".w()}),stableHintView:SC.View.design({layout:{top:500,centerX:-260,width:20,height:100},toolTip:"To save an offspring drake to use as a parent later, drag it here. If you cant match the target, change the parents and try again!",classNames:"breeding-completed-hint hint-target-leftMiddle hint-tooltip-rightMiddle".w()})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.breedingPagePaper=SC.Page.design({pagePath:"Lab.breedingPagePaper",title:"Breeding Page Paper",mainPane:Lab.LabPane.design({mainAppView:SC.View.create({layout:{centerX:0,top:100,width:860,height:600},childViews:"breedView challengePoolView breedingPenView stableView marketplaceView chatView allArticlesView".w(),challengePoolView:Lab.ChallengePoolView.design({layout:{left:20,top:70,width:70,height:300}}),breedView:Geniverse.BreedDragonView.design({layout:{top:70,left:100,height:300,width:150},showChildView:NO}),breedingPenView:Lab.BreedingPenView.design({layout:{left:265,top:60,width:300,height:340}}),breedingChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{left:570,top:70,width:35,height:40}}),marketplaceView:SC.ImageView.design({layout:{left:570,top:150,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(g&&g.get("bred")){g.set("isInMarketplace",YES)}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),stableView:Lab.StableView.design({layout:{left:680,top:70,height:300,width:240}}),allArticlesView:SC.TabView.design({layout:{bottom:10,right:30,width:450,height:235},items:[{title:"Your paper",value:"Geniverse.yourArticleView"},{title:"Published papers",value:"Geniverse.publishedArticlesView"}],itemTitleKey:"title",itemValueKey:"value",nowShowingBinding:"Geniverse.articleController.nowShowing"}),chatView:SC.StackedView.design({layout:{bottom:10,left:20,width:385,height:215},classNames:"transparent".w(),isVisible:false,childViews:"userListLabel userListView chatListView chatComposeView ".w(),userListLabel:SC.LabelView.design({layout:{top:0,left:0,width:125,height:20},value:"Users in room",classNames:"container_label",controlSize:"bity",textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT}),userListView:CcChat.UserListView.design({layout:{top:20,left:0,width:125,height:210}}),chatListView:CC.AutoScrollView.design({layerId:"chatList",hasHorizontalScroller:NO,layout:{left:135,top:20,height:150,width:250},backgroundColor:"white",contentView:SC.StackedView.design({layerId:"chatListContent",contentBinding:"Geniverse.chatListController.arrangedObjects",selectionBinding:"Geniverse.chatListController.selection",rowHeight:30,canEditContent:NO,hasContentIcon:YES,contentValueKey:"message",isSelectable:YES,showAlternatingRows:YES,exampleView:CcChat.ChatMessageView}),autoScrollTriggerBinding:"Geniverse.chatListController.length"}),chatComposeView:Geniverse.DragonChatComposeView.design({layout:{left:135,top:180,height:100,width:250},layerId:"chatCompose"})})})})});
(function(D){D.fn.qtip=function(a,h){var d,j,b,k,e,f,g,c;if(typeof a=="string"){if(typeof D(this).data("qtip")!=="object"){D.fn.qtip.log.error.call(self,1,D.fn.qtip.constants.NO_TOOLTIP_PRESENT,false)
}if(a=="api"){return D(this).data("qtip").interfaces[D(this).data("qtip").current]
}else{if(a=="interfaces"){return D(this).data("qtip").interfaces}}}else{if(!a){a={}
}if(typeof a.content!=="object"||(a.content.jquery&&a.content.length>0)){a.content={text:a.content}
}if(typeof a.content.title!=="object"){a.content.title={text:a.content.title}}if(typeof a.position!=="object"){a.position={corner:a.position}
}if(typeof a.position.corner!=="object"){a.position.corner={target:a.position.corner,tooltip:a.position.corner}
}if(typeof a.show!=="object"){a.show={when:a.show}}if(typeof a.show.when!=="object"){a.show.when={event:a.show.when}
}if(typeof a.show.effect!=="object"){a.show.effect={type:a.show.effect}}if(typeof a.hide!=="object"){a.hide={when:a.hide}
}if(typeof a.hide.when!=="object"){a.hide.when={event:a.hide.when}}if(typeof a.hide.effect!=="object"){a.hide.effect={type:a.hide.effect}
}if(typeof a.style!=="object"){a.style={name:a.style}}a.style=G(a.style);k=D.extend(true,{},D.fn.qtip.defaults,a);
k.style=I.call({options:k},k.style);k.user=D.extend(true,{},a)}return D(this).each(function(){if(typeof a=="string"){f=a.toLowerCase();
b=D(this).qtip("interfaces");if(typeof b=="object"){if(h===true&&f=="destroy"){while(b.length>0){b[b.length-1].destroy()
}}else{if(h!==true){b=[D(this).qtip("api")]}for(d=0;d<b.length;d++){if(f=="destroy"){b[d].destroy()
}else{if(b[d].status.rendered===true){if(f=="show"){b[d].show()}else{if(f=="hide"){b[d].hide()
}else{if(f=="focus"){b[d].focus()}else{if(f=="disable"){b[d].disable(true)}else{if(f=="enable"){b[d].disable(false)
}}}}}}}}}}}else{g=D.extend(true,{},k);g.hide.effect.length=k.hide.effect.length;g.show.effect.length=k.show.effect.length;
if(g.position.container===false){g.position.container=D(document.body)}if(g.position.target===false){g.position.target=D(this)
}if(g.show.when.target===false){g.show.when.target=D(this)}if(g.hide.when.target===false){g.hide.when.target=D(this)
}j=D.fn.qtip.interfaces.length;for(d=0;d<j;d++){if(typeof D.fn.qtip.interfaces[d]=="undefined"){j=d;
break}}e=new F(D(this),g,j);D.fn.qtip.interfaces[j]=e;if(typeof D(this).data("qtip")=="object"){if(typeof D(this).attr("qtip")==="undefined"){D(this).data("qtip").current=D(this).data("qtip").interfaces.length
}D(this).data("qtip").interfaces.push(e)}else{D(this).data("qtip",{current:0,interfaces:[e]})
}if(g.content.prerender===false&&g.show.when.event!==false&&g.show.ready!==true){g.show.when.target.bind(g.show.when.event+".qtip-"+j+"-create",{qtip:j},function(l){c=D.fn.qtip.interfaces[l.data.qtip];
c.options.show.when.target.unbind(c.options.show.when.event+".qtip-"+l.data.qtip+"-create");
c.cache.mouse={x:l.pageX,y:l.pageY};u.call(c);c.options.show.when.target.trigger(c.options.show.when.event)
})}else{e.cache.mouse={x:g.show.when.target.offset().left,y:g.show.when.target.offset().top};
u.call(e)}}})};function F(b,c,a){var d=this;d.id=a;d.options=c;d.status={animated:false,rendered:false,disabled:false,focused:false};
d.elements={target:b.addClass(d.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};
d.cache={mouse:{},position:{},toggle:0};d.timers={};D.extend(d,d.options.api,{show:function(h){var e,g;
if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show")
}if(d.elements.tooltip.css("display")!=="none"){return d}d.elements.tooltip.stop(true,false);
e=d.beforeShow.call(d,h);if(e===false){return d}function f(){if(d.options.position.type!=="static"){d.focus()
}d.onShow.call(d,h);if(D.browser.msie){d.elements.tooltip.get(0).style.removeAttribute("filter")
}}d.cache.toggle=1;if(d.options.position.type!=="static"){d.updatePosition(h,(d.options.show.effect.length>0))
}if(typeof d.options.show.solo=="object"){g=D(d.options.show.solo)}else{if(d.options.show.solo===true){g=D("div.qtip").not(d.elements.tooltip)
}}if(g){g.each(function(){if(D(this).qtip("api").status.rendered===true){D(this).qtip("api").hide()
}})}if(typeof d.options.show.effect.type=="function"){d.options.show.effect.type.call(d.elements.tooltip,d.options.show.effect.length);
d.elements.tooltip.queue(function(){f();D(this).dequeue()})}else{switch(d.options.show.effect.type.toLowerCase()){case"fade":d.elements.tooltip.fadeIn(d.options.show.effect.length,f);
break;case"slide":d.elements.tooltip.slideDown(d.options.show.effect.length,function(){f();
if(d.options.position.type!=="static"){d.updatePosition(h,true)}});break;case"grow":d.elements.tooltip.show(d.options.show.effect.length,f);
break;default:d.elements.tooltip.show(null,f);break}d.elements.tooltip.addClass(d.options.style.classes.active)
}return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(g){var e;
if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide")
}else{if(d.elements.tooltip.css("display")==="none"){return d}}clearTimeout(d.timers.show);
d.elements.tooltip.stop(true,false);e=d.beforeHide.call(d,g);if(e===false){return d
}function f(){d.onHide.call(d,g)}d.cache.toggle=0;if(typeof d.options.hide.effect.type=="function"){d.options.hide.effect.type.call(d.elements.tooltip,d.options.hide.effect.length);
d.elements.tooltip.queue(function(){f();D(this).dequeue()})}else{switch(d.options.hide.effect.type.toLowerCase()){case"fade":d.elements.tooltip.fadeOut(d.options.hide.effect.length,f);
break;case"slide":d.elements.tooltip.slideUp(d.options.hide.effect.length,f);break;
case"grow":d.elements.tooltip.hide(d.options.hide.effect.length,f);break;default:d.elements.tooltip.hide(null,f);
break}d.elements.tooltip.removeClass(d.options.style.classes.active)}return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_HIDDEN,"hide")
},updatePosition:function(q,o){var f,M,k,n,r,O,m,p,g,e,l,h,N,j;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition")
}else{if(d.options.position.type=="static"){return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition")
}}M={position:{left:0,top:0},dimensions:{height:0,width:0},corner:d.options.position.corner.target};
k={position:d.getPosition(),dimensions:d.getDimensions(),corner:d.options.position.corner.tooltip};
if(d.options.position.target!=="mouse"){if(d.options.position.target.get(0).nodeName.toLowerCase()=="area"){n=d.options.position.target.attr("coords").split(",");
for(f=0;f<n.length;f++){n[f]=parseInt(n[f])}r=d.options.position.target.parent("map").attr("name");
O=D('img[usemap="#'+r+'"]:first').offset();M.position={left:Math.floor(O.left+n[0]),top:Math.floor(O.top+n[1])};
switch(d.options.position.target.attr("shape").toLowerCase()){case"rect":M.dimensions={width:Math.ceil(Math.abs(n[2]-n[0])),height:Math.ceil(Math.abs(n[3]-n[1]))};
break;case"circle":M.dimensions={width:n[2]+1,height:n[2]+1};break;case"poly":M.dimensions={width:n[0],height:n[1]};
for(f=0;f<n.length;f++){if(f%2==0){if(n[f]>M.dimensions.width){M.dimensions.width=n[f]
}if(n[f]<n[0]){M.position.left=Math.floor(O.left+n[f])}}else{if(n[f]>M.dimensions.height){M.dimensions.height=n[f]
}if(n[f]<n[1]){M.position.top=Math.floor(O.top+n[f])}}}M.dimensions.width=M.dimensions.width-(M.position.left-O.left);
M.dimensions.height=M.dimensions.height-(M.position.top-O.top);break;default:return D.fn.qtip.log.error.call(d,4,D.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition");
break}M.dimensions.width-=2;M.dimensions.height-=2}else{if(d.options.position.target.add(document.body).length===1){M.position={left:D(document).scrollLeft(),top:D(document).scrollTop()};
M.dimensions={height:D(window).height(),width:D(window).width()}}else{if(typeof d.options.position.target.attr("qtip")!=="undefined"){M.position=d.options.position.target.qtip("api").cache.position
}else{M.position=d.options.position.target.offset()}M.dimensions={height:d.options.position.target.outerHeight(),width:d.options.position.target.outerWidth()}
}}m=D.extend({},M.position);if(M.corner.search(/right/i)!==-1){m.left+=M.dimensions.width
}if(M.corner.search(/bottom/i)!==-1){m.top+=M.dimensions.height}if(M.corner.search(/((top|bottom)Middle)|center/)!==-1){m.left+=(M.dimensions.width/2)
}if(M.corner.search(/((left|right)Middle)|center/)!==-1){m.top+=(M.dimensions.height/2)
}}else{M.position=m={left:d.cache.mouse.x,top:d.cache.mouse.y};M.dimensions={height:1,width:1}
}if(k.corner.search(/right/i)!==-1){m.left-=k.dimensions.width}if(k.corner.search(/bottom/i)!==-1){m.top-=k.dimensions.height
}if(k.corner.search(/((top|bottom)Middle)|center/)!==-1){m.left-=(k.dimensions.width/2)
}if(k.corner.search(/((left|right)Middle)|center/)!==-1){m.top-=(k.dimensions.height/2)
}p=(D.browser.msie)?1:0;g=(D.browser.msie&&parseInt(D.browser.version.charAt(0))===6)?1:0;
if(d.options.style.border.radius>0){if(k.corner.search(/Left/)!==-1){m.left-=d.options.style.border.radius
}else{if(k.corner.search(/Right/)!==-1){m.left+=d.options.style.border.radius}}if(k.corner.search(/Top/)!==-1){m.top-=d.options.style.border.radius
}else{if(k.corner.search(/Bottom/)!==-1){m.top+=d.options.style.border.radius}}}if(p){if(k.corner.search(/top/)!==-1){m.top-=p
}else{if(k.corner.search(/bottom/)!==-1){m.top+=p}}if(k.corner.search(/left/)!==-1){m.left-=p
}else{if(k.corner.search(/right/)!==-1){m.left+=p}}if(k.corner.search(/leftMiddle|rightMiddle/)!==-1){m.top-=1
}}if(d.options.position.adjust.screen===true){m=v.call(d,m,M,k)}if(d.options.position.target==="mouse"&&d.options.position.adjust.mouse===true){if(d.options.position.adjust.screen===true&&d.elements.tip){l=d.elements.tip.attr("rel")
}else{l=d.options.position.corner.tooltip}m.left+=(l.search(/right/i)!==-1)?-6:6;
m.top+=(l.search(/bottom/i)!==-1)?-6:6}if(!d.elements.bgiframe&&D.browser.msie&&parseInt(D.browser.version.charAt(0))==6){D("select, object").each(function(){h=D(this).offset();
h.bottom=h.top+D(this).height();h.right=h.left+D(this).width();if(m.top+k.dimensions.height>=h.top&&m.left+k.dimensions.width>=h.left){z.call(d)
}})}m.left+=d.options.position.adjust.x;m.top+=d.options.position.adjust.y;N=d.getPosition();
if(m.left!=N.left||m.top!=N.top){j=d.beforePositionUpdate.call(d,q);if(j===false){return d
}d.cache.position=m;if(o===true){d.status.animated=true;d.elements.tooltip.animate(m,200,"swing",function(){d.status.animated=false
})}else{d.elements.tooltip.css(m)}d.onPositionUpdate.call(d,q);if(typeof q!=="undefined"&&q.type&&q.type!=="mousemove"){D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")
}}return d},updateWidth:function(f){var e;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")
}else{if(f&&typeof f!=="number"){return D.fn.qtip.log.error.call(d,2,"newWidth must be of type number","updateWidth")
}}e=d.elements.contentWrapper.siblings().add(d.elements.tip).add(d.elements.button);
if(!f){if(typeof d.options.style.width.value=="number"){f=d.options.style.width.value
}else{d.elements.tooltip.css({width:"auto"});e.hide();if(D.browser.msie){d.elements.wrapper.add(d.elements.contentWrapper.children()).css({zoom:"normal"})
}f=d.getDimensions().width+1;if(!d.options.style.width.value){if(f>d.options.style.width.max){f=d.options.style.width.max
}if(f<d.options.style.width.min){f=d.options.style.width.min}}}}if(f%2!==0){f-=1}d.elements.tooltip.width(f);
e.show();if(d.options.style.border.radius){d.elements.tooltip.find(".qtip-betweenCorners").each(function(g){D(this).width(f-(d.options.style.border.radius*2))
})}if(D.browser.msie){d.elements.wrapper.add(d.elements.contentWrapper.children()).css({zoom:"1"});
d.elements.wrapper.width(f);if(d.elements.bgiframe){d.elements.bgiframe.width(f).height(d.getDimensions.height)
}}return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")
},updateStyle:function(g){var h,f,e,k,j;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")
}else{if(typeof g!=="string"||!D.fn.qtip.styles[g]){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle")
}}d.options.style=I.call(d,D.fn.qtip.styles[g],d.options.user.style);d.elements.content.css(t(d.options.style));
if(d.options.content.title.text!==false){d.elements.title.css(t(d.options.style.title,true))
}d.elements.contentWrapper.css({borderColor:d.options.style.border.color});if(d.options.style.tip.corner!==false){if(D("<canvas>").get(0).getContext){h=d.elements.tooltip.find(".qtip-tip canvas:first");
e=h.get(0).getContext("2d");e.clearRect(0,0,300,300);k=h.parent("div[rel]:first").attr("rel");
j=H(k,d.options.style.tip.size.width,d.options.style.tip.size.height);B.call(d,h,j,d.options.style.tip.color||d.options.style.border.color)
}else{if(D.browser.msie){h=d.elements.tooltip.find('.qtip-tip [nodeName="shape"]');
h.attr("fillcolor",d.options.style.tip.color||d.options.style.border.color)}}}if(d.options.style.border.radius>0){d.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:d.options.style.border.color});
if(D("<canvas>").get(0).getContext){f=C(d.options.style.border.radius);d.elements.tooltip.find(".qtip-wrapper canvas").each(function(){e=D(this).get(0).getContext("2d");
e.clearRect(0,0,300,300);k=D(this).parent("div[rel]:first").attr("rel");s.call(d,D(this),f[k],d.options.style.border.radius,d.options.style.border.color)
})}else{if(D.browser.msie){d.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){D(this).attr("fillcolor",d.options.style.border.color)
})}}}return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")
},updateContent:function(f,k){var h,e,g;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent")
}else{if(!f){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent")
}}h=d.beforeContentUpdate.call(d,f);if(typeof h=="string"){f=h}else{if(h===false){return
}}if(D.browser.msie){d.elements.contentWrapper.children().css({zoom:"normal"})}if(f.jquery&&f.length>0){f.clone(true).appendTo(d.elements.content).show()
}else{d.elements.content.html(f)}e=d.elements.content.find("img[complete=false]");
if(e.length>0){g=0;e.each(function(l){D('<img src="'+D(this).attr("src")+'" />').load(function(){if(++g==e.length){j()
}})})}else{j()}function j(){d.updateWidth();if(k!==false){if(d.options.position.type!=="static"){d.updatePosition(d.elements.tooltip.is(":visible"),true)
}if(d.options.style.tip.corner!==false){w.call(d)}}}d.onContentUpdate.call(d);return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")
},loadContent:function(g,h,f){var j;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")
}j=d.beforeContentLoad.call(d);if(j===false){return d}if(f=="post"){D.post(g,h,e)
}else{D.get(g,h,e)}function e(k){d.onContentLoad.call(d);D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");
d.updateContent(k)}return d},updateTitle:function(e){if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")
}else{if(!e){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle")
}}returned=d.beforeTitleUpdate.call(d);if(returned===false){return d}if(d.elements.button){d.elements.button=d.elements.button.clone(true)
}d.elements.title.html(e);if(d.elements.button){d.elements.title.prepend(d.elements.button)
}d.onTitleUpdate.call(d);return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle")
},focus:function(f){var j,e,g,h;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus")
}else{if(d.options.position.type=="static"){return D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus")
}}j=parseInt(d.elements.tooltip.css("z-index"));e=6000+D("div.qtip[qtip]").length-1;
if(!d.status.focused&&j!==e){h=d.beforeFocus.call(d,f);if(h===false){return d}D("div.qtip[qtip]").not(d.elements.tooltip).each(function(){if(D(this).qtip("api").status.rendered===true){g=parseInt(D(this).css("z-index"));
if(typeof g=="number"&&g>-1){D(this).css({zIndex:parseInt(D(this).css("z-index"))-1})
}D(this).qtip("api").status.focused=false}});d.elements.tooltip.css({zIndex:e});d.status.focused=true;
d.onFocus.call(d,f);D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_FOCUSED,"focus")
}return d},disable:function(e){if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")
}if(e){if(!d.status.disabled){d.status.disabled=true;D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_DISABLED,"disable")
}else{D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable")
}}else{if(d.status.disabled){d.status.disabled=false;D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_ENABLED,"disable")
}else{D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable")
}}return d},destroy:function(){var f,e,g;e=d.beforeDestroy.call(d);if(e===false){return d
}if(d.status.rendered){d.options.show.when.target.unbind("mousemove.qtip",d.updatePosition);
d.options.show.when.target.unbind("mouseout.qtip",d.hide);d.options.show.when.target.unbind(d.options.show.when.event+".qtip");
d.options.hide.when.target.unbind(d.options.hide.when.event+".qtip");d.elements.tooltip.unbind(d.options.hide.when.event+".qtip");
d.elements.tooltip.unbind("mouseover.qtip",d.focus);d.elements.tooltip.remove()}else{d.options.show.when.target.unbind(d.options.show.when.event+".qtip-create")
}if(typeof d.elements.target.data("qtip")=="object"){g=d.elements.target.data("qtip").interfaces;
if(typeof g=="object"&&g.length>0){for(f=0;f<g.length-1;f++){if(g[f].id==d.id){g.splice(f,1)
}}}}delete D.fn.qtip.interfaces[d.id];if(typeof g=="object"&&g.length>0){d.elements.target.data("qtip").current=g.length-1
}else{d.elements.target.removeData("qtip")}d.onDestroy.call(d);D.fn.qtip.log.error.call(d,1,D.fn.qtip.constants.EVENT_DESTROYED,"destroy");
return d.elements.target},getPosition:function(){var f,e;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")
}f=(d.elements.tooltip.css("display")!=="none")?false:true;if(f){d.elements.tooltip.css({visiblity:"hidden"}).show()
}e=d.elements.tooltip.offset();if(f){d.elements.tooltip.css({visiblity:"visible"}).hide()
}return e},getDimensions:function(){var f,e;if(!d.status.rendered){return D.fn.qtip.log.error.call(d,2,D.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")
}f=(!d.elements.tooltip.is(":visible"))?true:false;if(f){d.elements.tooltip.css({visiblity:"hidden"}).show()
}e={height:d.elements.tooltip.outerHeight(),width:d.elements.tooltip.outerWidth()};
if(f){d.elements.tooltip.css({visiblity:"visible"}).hide()}return e}})}function u(){var f,b,d,e,c,g,a;
f=this;f.beforeRender.call(f);f.status.rendered=true;f.elements.tooltip='<div qtip="'+f.id+'" class="qtip '+(f.options.style.classes.tooltip||f.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+f.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+f.options.style.classes.content+'"></div></div></div></div>';
f.elements.tooltip=D(f.elements.tooltip);f.elements.tooltip.appendTo(f.options.position.container);
f.elements.tooltip.data("qtip",{current:0,interfaces:[f]});f.elements.wrapper=f.elements.tooltip.children("div:first");
f.elements.contentWrapper=f.elements.wrapper.children("div:first").css({background:f.options.style.background});
f.elements.content=f.elements.contentWrapper.children("div:first").css(t(f.options.style));
if(D.browser.msie){f.elements.wrapper.add(f.elements.content).css({zoom:1})}if(f.options.hide.when.event=="unfocus"){f.elements.tooltip.attr("unfocus",true)
}if(typeof f.options.style.width.value=="number"){f.updateWidth()}if(D("<canvas>").get(0).getContext||D.browser.msie){if(f.options.style.border.radius>0){x.call(f)
}else{f.elements.contentWrapper.css({border:f.options.style.border.width+"px solid "+f.options.style.border.color})
}if(f.options.style.tip.corner!==false){E.call(f)}}else{f.elements.contentWrapper.css({border:f.options.style.border.width+"px solid "+f.options.style.border.color});
f.options.style.border.radius=0;f.options.style.tip.corner=false;D.fn.qtip.log.error.call(f,2,D.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")
}if((typeof f.options.content.text=="string"&&f.options.content.text.length>0)||(f.options.content.text.jquery&&f.options.content.text.length>0)){d=f.options.content.text
}else{if(typeof f.elements.target.attr("title")=="string"&&f.elements.target.attr("title").length>0){d=f.elements.target.attr("title").replace("\\n","<br />");
f.elements.target.attr("title","")}else{if(typeof f.elements.target.attr("alt")=="string"&&f.elements.target.attr("alt").length>0){d=f.elements.target.attr("alt").replace("\\n","<br />");
f.elements.target.attr("alt","")}else{d=" ";D.fn.qtip.log.error.call(f,1,D.fn.qtip.constants.NO_VALID_CONTENT,"render")
}}}if(f.options.content.title.text!==false){A.call(f)}f.updateContent(d);y.call(f);
if(f.options.show.ready===true){f.show()}if(f.options.content.url!==false){e=f.options.content.url;
c=f.options.content.data;g=f.options.content.method||"get";f.loadContent(e,c,g)}f.onRender.call(f);
D.fn.qtip.log.error.call(f,1,D.fn.qtip.constants.EVENT_RENDERED,"render")}function x(){var m,e,n,c,g,p,l,k,a,f,h,b,d,o,j;
m=this;m.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();n=m.options.style.border.width;
c=m.options.style.border.radius;g=m.options.style.border.color||m.options.style.tip.color;
p=C(c);l={};for(e in p){l[e]='<div rel="'+e+'" style="'+((e.search(/Left/)!==-1)?"left":"right")+":0; position:absolute; height:"+c+"px; width:"+c+'px; overflow:hidden; line-height:0.1px; font-size:1px">';
if(D("<canvas>").get(0).getContext){l[e]+='<canvas height="'+c+'" width="'+c+'" style="vertical-align: top"></canvas>'
}else{if(D.browser.msie){k=c*2+3;l[e]+='<v:arc stroked="false" fillcolor="'+g+'" startangle="'+p[e][0]+'" endangle="'+p[e][1]+'" style="width:'+k+"px; height:"+k+"px; margin-top:"+((e.search(/bottom/)!==-1)?-2:-1)+"px; margin-left:"+((e.search(/Right/)!==-1)?p[e][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'
}}l[e]+="</div>"}a=m.getDimensions().width-(Math.max(n,c)*2);f='<div class="qtip-betweenCorners" style="height:'+c+"px; width:"+a+"px; overflow:hidden; background-color:"+g+'; line-height:0.1px; font-size:1px;">';
h='<div class="qtip-borderTop" dir="ltr" style="height:'+c+"px; margin-left:"+c+'px; line-height:0.1px; font-size:1px; padding:0;">'+l.topLeft+l.topRight+f;
m.elements.wrapper.prepend(h);b='<div class="qtip-borderBottom" dir="ltr" style="height:'+c+"px; margin-left:"+c+'px; line-height:0.1px; font-size:1px; padding:0;">'+l.bottomLeft+l.bottomRight+f;
m.elements.wrapper.append(b);if(D("<canvas>").get(0).getContext){m.elements.wrapper.find("canvas").each(function(){d=p[D(this).parent("[rel]:first").attr("rel")];
s.call(m,D(this),d,c,g)})}else{if(D.browser.msie){m.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>')
}}o=Math.max(c,(c+(n-c)));j=Math.max(n-c,0);m.elements.contentWrapper.css({border:"0px solid "+g,borderWidth:j+"px "+o+"px"})
}function s(c,a,e,d){var b=c.get(0).getContext("2d");b.fillStyle=d;b.beginPath();
b.arc(a[0],a[1],e,0,Math.PI*2,false);b.fill()}function E(c){var e,f,a,d,b;e=this;
if(e.elements.tip!==null){e.elements.tip.remove()}f=e.options.style.tip.color||e.options.style.border.color;
if(e.options.style.tip.corner===false){return}else{if(!c){c=e.options.style.tip.corner
}}a=H(c,e.options.style.tip.size.width,e.options.style.tip.size.height);e.elements.tip='<div class="'+e.options.style.classes.tip+'" dir="ltr" rel="'+c+'" style="position:absolute; height:'+e.options.style.tip.size.height+"px; width:"+e.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';
if(D("<canvas>").get(0).getContext){e.elements.tip+='<canvas height="'+e.options.style.tip.size.height+'" width="'+e.options.style.tip.size.width+'"></canvas>'
}else{if(D.browser.msie){d=e.options.style.tip.size.width+","+e.options.style.tip.size.height;
b="m"+a[0][0]+","+a[0][1];b+=" l"+a[1][0]+","+a[1][1];b+=" "+a[2][0]+","+a[2][1];
b+=" xe";e.elements.tip+='<v:shape fillcolor="'+f+'" stroked="false" filled="true" path="'+b+'" coordsize="'+d+'" style="width:'+e.options.style.tip.size.width+"px; height:"+e.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+((c.search(/top/)!==-1)?"bottom":"top")+'"></v:shape>';
e.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';e.elements.contentWrapper.css("position","relative")
}}e.elements.tooltip.prepend(e.elements.tip+"</div>");e.elements.tip=e.elements.tooltip.find("."+e.options.style.classes.tip).eq(0);
if(D("<canvas>").get(0).getContext){B.call(e,e.elements.tip.find("canvas:first"),a,f)
}if(c.search(/top/)!==-1&&D.browser.msie&&parseInt(D.browser.version.charAt(0))===6){e.elements.tip.css({marginTop:-4})
}w.call(e,c)}function B(c,a,d){var b=c.get(0).getContext("2d");b.fillStyle=d;b.beginPath();
b.moveTo(a[0][0],a[0][1]);b.lineTo(a[1][0],a[1][1]);b.lineTo(a[2][0],a[2][1]);b.fill()
}function w(d){var e,b,f,a,c;e=this;if(e.options.style.tip.corner===false||!e.elements.tip){return
}if(!d){d=e.elements.tip.attr("rel")}b=positionAdjust=(D.browser.msie)?1:0;e.elements.tip.css(d.match(/left|right|top|bottom/)[0],0);
if(d.search(/top|bottom/)!==-1){if(D.browser.msie){if(parseInt(D.browser.version.charAt(0))===6){positionAdjust=(d.search(/top/)!==-1)?-3:1
}else{positionAdjust=(d.search(/top/)!==-1)?1:2}}if(d.search(/Middle/)!==-1){e.elements.tip.css({left:"50%",marginLeft:-(e.options.style.tip.size.width/2)})
}else{if(d.search(/Left/)!==-1){e.elements.tip.css({left:e.options.style.border.radius-b})
}else{if(d.search(/Right/)!==-1){e.elements.tip.css({right:e.options.style.border.radius+b})
}}}if(d.search(/top/)!==-1){e.elements.tip.css({top:-positionAdjust})}else{e.elements.tip.css({bottom:positionAdjust})
}}else{if(d.search(/left|right/)!==-1){if(D.browser.msie){positionAdjust=(parseInt(D.browser.version.charAt(0))===6)?1:((d.search(/left/)!==-1)?1:2)
}if(d.search(/Middle/)!==-1){e.elements.tip.css({top:"50%",marginTop:-(e.options.style.tip.size.height/2)})
}else{if(d.search(/Top/)!==-1){e.elements.tip.css({top:e.options.style.border.radius-b})
}else{if(d.search(/Bottom/)!==-1){e.elements.tip.css({bottom:e.options.style.border.radius+b})
}}}if(d.search(/left/)!==-1){e.elements.tip.css({left:-positionAdjust})}else{e.elements.tip.css({right:positionAdjust})
}}}f="padding-"+d.match(/left|right|top|bottom/)[0];a=e.options.style.tip.size[(f.search(/left|right/)!==-1)?"width":"height"];
e.elements.tooltip.css("padding",0);e.elements.tooltip.css(f,a);if(D.browser.msie&&parseInt(D.browser.version.charAt(0))==6){c=parseInt(e.elements.tip.css("margin-top"))||0;
c+=parseInt(e.elements.content.css("margin-top"))||0;e.elements.tip.css({marginTop:c})
}}function A(){var a=this;if(a.elements.title!==null){a.elements.title.remove()}a.elements.title=D('<div class="'+a.options.style.classes.title+'">').css(t(a.options.style.title,true)).css({zoom:(D.browser.msie)?1:0}).appendTo(a.elements.contentWrapper);
if(a.options.content.title.text){a.updateTitle.call(a,a.options.content.title.text)
}if(a.options.content.title.button!==false&&typeof a.options.content.title.button=="string"){a.elements.button=D('<a class="'+a.options.style.classes.button+'" style="float:right; position: relative"></a>').css(t(a.options.style.button,true)).html(a.options.content.title.button).prependTo(a.elements.title).click(function(b){if(!a.status.disabled){a.hide(b)
}})}}function y(){var e,c,d,f;e=this;c=e.options.show.when.target;d=e.options.hide.when.target;
if(e.options.hide.fixed){d=d.add(e.elements.tooltip)}if(e.options.hide.when.event=="inactive"){f=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];
function g(h){if(e.status.disabled===true){return}clearTimeout(e.timers.inactive);
e.timers.inactive=setTimeout(function(){D(f).each(function(){d.unbind(this+".qtip-inactive");
e.elements.content.unbind(this+".qtip-inactive")});e.hide(h)},e.options.hide.delay)
}}else{if(e.options.hide.fixed===true){e.elements.tooltip.bind("mouseover.qtip",function(){if(e.status.disabled===true){return
}clearTimeout(e.timers.hide)})}}function a(h){if(e.status.disabled===true){return
}if(e.options.hide.when.event=="inactive"){D(f).each(function(){d.bind(this+".qtip-inactive",g);
e.elements.content.bind(this+".qtip-inactive",g)});g()}clearTimeout(e.timers.show);
clearTimeout(e.timers.hide);e.timers.show=setTimeout(function(){e.show(h)},e.options.show.delay)
}function b(h){if(e.status.disabled===true){return}if(e.options.hide.fixed===true&&e.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&D(h.relatedTarget).parents("div.qtip[qtip]").length>0){h.stopPropagation();
h.preventDefault();clearTimeout(e.timers.hide);return false}clearTimeout(e.timers.show);
clearTimeout(e.timers.hide);e.elements.tooltip.stop(true,true);e.timers.hide=setTimeout(function(){e.hide(h)
},e.options.hide.delay)}if((e.options.show.when.target.add(e.options.hide.when.target).length===1&&e.options.show.when.event==e.options.hide.when.event&&e.options.hide.when.event!=="inactive")||e.options.hide.when.event=="unfocus"){e.cache.toggle=0;
c.bind(e.options.show.when.event+".qtip",function(h){if(e.cache.toggle==0){a(h)}else{b(h)
}})}else{c.bind(e.options.show.when.event+".qtip",a);if(e.options.hide.when.event!=="inactive"){d.bind(e.options.hide.when.event+".qtip",b)
}}if(e.options.position.type.search(/(fixed|absolute)/)!==-1){e.elements.tooltip.bind("mouseover.qtip",e.focus)
}if(e.options.position.target==="mouse"&&e.options.position.type!=="static"){c.bind("mousemove.qtip",function(h){e.cache.mouse={x:h.pageX,y:h.pageY};
if(e.status.disabled===false&&e.options.position.adjust.mouse===true&&e.options.position.type!=="static"&&e.elements.tooltip.css("display")!=="none"){e.updatePosition(h)
}})}}function v(g,f,a){var b,j,d,c,h,e;b=this;if(a.corner=="center"){return f.position
}j=D.extend({},g);c={x:false,y:false};h={left:(j.left<D.fn.qtip.cache.screen.scroll.left),right:(j.left+a.dimensions.width+2>=D.fn.qtip.cache.screen.width+D.fn.qtip.cache.screen.scroll.left),top:(j.top<D.fn.qtip.cache.screen.scroll.top),bottom:(j.top+a.dimensions.height+2>=D.fn.qtip.cache.screen.height+D.fn.qtip.cache.screen.scroll.top)};
d={left:(h.left&&(a.corner.search(/right/i)!=-1||(a.corner.search(/right/i)==-1&&!h.right))),right:(h.right&&(a.corner.search(/left/i)!=-1||(a.corner.search(/left/i)==-1&&!h.left))),top:(h.top&&a.corner.search(/top/i)==-1),bottom:(h.bottom&&a.corner.search(/bottom/i)==-1)};
if(d.left){if(b.options.position.target!=="mouse"){j.left=f.position.left+f.dimensions.width
}else{j.left=b.cache.mouse.x}c.x="Left"}else{if(d.right){if(b.options.position.target!=="mouse"){j.left=f.position.left-a.dimensions.width
}else{j.left=b.cache.mouse.x-a.dimensions.width}c.x="Right"}}if(d.top){if(b.options.position.target!=="mouse"){j.top=f.position.top+f.dimensions.height
}else{j.top=b.cache.mouse.y}c.y="top"}else{if(d.bottom){if(b.options.position.target!=="mouse"){j.top=f.position.top-a.dimensions.height
}else{j.top=b.cache.mouse.y-a.dimensions.height}c.y="bottom"}}if(j.left<0){j.left=g.left;
c.x=false}if(j.top<0){j.top=g.top;c.y=false}if(b.options.style.tip.corner!==false){j.corner=new String(a.corner);
if(c.x!==false){j.corner=j.corner.replace(/Left|Right|Middle/,c.x)}if(c.y!==false){j.corner=j.corner.replace(/top|bottom/,c.y)
}if(j.corner!==b.elements.tip.attr("rel")){E.call(b,j.corner)}}return j}function t(b,c){var a,d;
a=D.extend(true,{},b);for(d in a){if(c===true&&d.search(/(tip|classes)/i)!==-1){delete a[d]
}else{if(!c&&d.search(/(width|border|tip|title|classes|user)/i)!==-1){delete a[d]
}}}return a}function G(a){if(typeof a.tip!=="object"){a.tip={corner:a.tip}}if(typeof a.tip.size!=="object"){a.tip.size={width:a.tip.size,height:a.tip.size}
}if(typeof a.border!=="object"){a.border={width:a.border}}if(typeof a.width!=="object"){a.width={value:a.width}
}if(typeof a.width.max=="string"){a.width.max=parseInt(a.width.max.replace(/([0-9]+)/i,"$1"))
}if(typeof a.width.min=="string"){a.width.min=parseInt(a.width.min.replace(/([0-9]+)/i,"$1"))
}if(typeof a.tip.size.x=="number"){a.tip.size.width=a.tip.size.x;delete a.tip.size.x
}if(typeof a.tip.size.y=="number"){a.tip.size.height=a.tip.size.y;delete a.tip.size.y
}return a}function I(){var f,e,d,a,c,b;f=this;d=[true,{}];for(e=0;e<arguments.length;
e++){d.push(arguments[e])}a=[D.extend.apply(D,d)];while(typeof a[0].name=="string"){a.unshift(G(D.fn.qtip.styles[a[0].name]))
}a.unshift(true,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},D.fn.qtip.styles.defaults);
c=D.extend.apply(D,a);b=(D.browser.msie)?1:0;c.tip.size.width+=b;c.tip.size.height+=b;
if(c.tip.size.width%2>0){c.tip.size.width+=1}if(c.tip.size.height%2>0){c.tip.size.height+=1
}if(c.tip.corner===true){c.tip.corner=(f.options.position.corner.tooltip==="center")?false:f.options.position.corner.tooltip
}return c}function H(a,b,c){var d={bottomRight:[[0,0],[b,c],[b,0]],bottomLeft:[[0,0],[b,0],[0,c]],topRight:[[0,c],[b,0],[b,c]],topLeft:[[0,0],[0,c],[b,c]],topMiddle:[[0,c],[b/2,0],[b,c]],bottomMiddle:[[0,0],[b,0],[b/2,c]],rightMiddle:[[0,0],[b,c/2],[0,c]],leftMiddle:[[b,0],[b,c],[0,c/2]]};
d.leftTop=d.bottomRight;d.rightTop=d.bottomLeft;d.leftBottom=d.topRight;d.rightBottom=d.topLeft;
return d[a]}function C(b){var a;if(D("<canvas>").get(0).getContext){a={topLeft:[b,b],topRight:[0,b],bottomLeft:[b,0],bottomRight:[0,0]}
}else{if(D.browser.msie){a={topLeft:[-90,90,0],topRight:[-90,90,-b],bottomLeft:[90,270,0],bottomRight:[90,270,-b]}
}}return a}function z(){var c,b,a;c=this;a=c.getDimensions();b='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+a.height+"px; width:"+a.width+'px" />';
c.elements.bgiframe=c.elements.wrapper.prepend(b).children(".qtip-bgiframe:first")
}D(document).ready(function(){D.fn.qtip.cache={screen:{scroll:{left:D(window).scrollLeft(),top:D(window).scrollTop()},width:D(window).width(),height:D(window).height()}};
var a;D(window).bind("resize scroll",function(b){clearTimeout(a);a=setTimeout(function(){if(b.type==="scroll"){D.fn.qtip.cache.screen.scroll={left:D(window).scrollLeft(),top:D(window).scrollTop()}
}else{D.fn.qtip.cache.screen.width=D(window).width();D.fn.qtip.cache.screen.height=D(window).height()
}for(i=0;i<D.fn.qtip.interfaces.length;i++){var c=D.fn.qtip.interfaces[i];if(c.status.rendered===true&&(c.options.position.type!=="static"||c.options.position.adjust.scroll&&b.type==="scroll"||c.options.position.adjust.resize&&b.type==="resize")){c.updatePosition(b,true)
}}},100)});D(document).bind("mousedown.qtip",function(b){if(D(b.target).parents("div.qtip").length===0){D(".qtip[unfocus]").each(function(){var c=D(this).qtip("api");
if(D(this).is(":visible")&&!c.status.disabled&&D(b.target).add(c.elements.target).length>1){c.hide(b)
}})}})});D.fn.qtip.interfaces=[];D.fn.qtip.log={error:function(){return this}};D.fn.qtip.constants={};
D.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:"absolute",container:false},show:{when:{target:false,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};
D.fn.qtip.styles={defaults:{color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"0 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}
})(jQuery);
/*
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)
}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))
}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")
}return c.json?JSON.parse(g):g}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);
if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q)
}o=c.json?JSON.stringify(o):String(o);return(document.cookie=[encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""))
}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;
n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);
break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend(g,{expires:-1}));
return true}return false}}));jQuery.preloadCssImages=function(c){c=jQuery.extend({statusTextEl:null,statusBarEl:null,errorDelay:999,onComplete:function(){console.log("completed.")
},showImageName:true,simultaneousCacheLoading:2},c);var a=[],f=0,d=[],g,e;function j(){clearTimeout(e);
if(d&&d.length&&d[f]){f++;if(c.statusTextEl){var k="";if(c.showImageName){k=(d[f])?"Now Loading: <span>"+d[f].split("/")[d[f].split("/").length-1]:"Loading complete"
}jQuery(c.statusTextEl).html('<span class="numLoaded">'+f+'</span> of <span class="numTotal">'+d.length+'</span> loaded (<span class="percentLoaded">'+(f/d.length*100).toFixed(0)+'%</span>) <span class="currentImg">'+k+"</span></span>");
if(!d[f]){c.onComplete()}}if(c.statusBarEl){var l=jQuery(c.statusBarEl).width();jQuery(c.statusBarEl).css("background-position",-(l-(l*f/d.length).toFixed(0))+"px 50%")
}h()}}function h(){if(d&&d.length&&d[f]){var k=new Image();k.src=d[f];if(!k.complete){jQuery(k).bind("error load onreadystatechange",j)
}else{j()}e=setTimeout(j,c.errorDelay)}}function b(o,A){var x=false,t=[],r=[],B;var q=o.length;
while(q--){var z="";if(A&&A[q]){B=A[q]}else{var D=(o[q].href)?o[q].href:"window.location.href";
var C=D.split("/");C.pop();B=C.join("/");if(B){B+="/"}}try{g=(o[q].cssRules)?o[q].cssRules:o[q].rules
}catch(p){g=null}if(g){var u=g.length;while(u--){if(g[u].style&&g[u].style.cssText){var s=g[u].style.cssText;
if(s.toLowerCase().indexOf("url")!=-1){z+=s}}else{if(g[u].styleSheet){t.push(g[u].styleSheet);
x=true}}}}var E=z.match(/url\((.*?)\)/g);if(E){var w=E.length;while(w--){E[w]=E[w].replace(/^url\(['"]?/,"").replace(/["']?\)$/,"");
var l=(E[w].charAt(0)=="/"||E[w].match("://"))?E[w]:B+E[w];if(jQuery.inArray(l,d)==-1){d.push(l)
}}}if(!x&&o[q].imports&&o[q].imports.length){for(var m=0,k=o[q].imports.length;m<k;
m++){var y=o[q].imports[m].href;y=y.split("/");y.pop();y=y.join("/");if(y){y+="/"
}var n=(y.charAt(0)=="/"||y.match("://"))?y:B+y;r.push(n);t.push(o[q].imports[m])
}}}if(t.length){b(t,r);return false}var v=c.simultaneousCacheLoading;while(v--){setTimeout(h,v)
}}b(document.styleSheets);return d};Lab.loadAssetsPage=SC.Page.design({pagePath:"Lab.loadAssetsPage",title:"Lab Asset Loading Page",mainPane:SC.MainPane.design({defaultResponder:Lab.statechart,childViews:"wait status".w(),wait:SC.LabelView.design({layerId:"pleaseWait",classNames:"rather-unfortunate".w(),layout:{centerX:0,centerY:-23,width:350,height:46},textAlign:SC.ALIGN_CENTER,value:"Loading. Please wait..."}),status:SC.View.design({layerId:"loadingStatus",classNames:"rather-unfortunate".w(),layout:{centerX:0,centerY:23,width:350,height:46}})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.meiosisPageRecomb=SC.Page.design({pagePath:"Lab.meiosisPage",title:"Meiosis Page",challengeType:"firstMeiosisWithMatchTarget",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"genomePanel".w(),layout:{centerX:0,top:100,width:1050,height:640},genomePanel:SC.View.design({layout:{top:0,bottom:10,left:5,right:5},childViews:"mothersPoolView fathersPoolView femaleView motherMeiosis offspringTitle offspringView maleView fatherMeiosis fertilization matchView scoreView".w(),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:5,height:120,width:400},dragonSize:100}),mothersPoolView:Lab.ChallengePoolView.design({layout:{left:12,top:16,width:300,height:97},sex:"female"}),fathersPoolView:Lab.ChallengePoolView.design({layout:{right:12,top:16,width:300,height:97},sex:"male"}),femaleView:Geniverse.OrganismView.design({layout:{top:131,left:115,height:100,width:100},classNames:"sc-theme motherView opaque".w(),contentBinding:"Geniverse.meiosisAnimationController.mother",label:"Mother",showLabel:true,sex:1,isDropTarget:YES,trackScore:YES,glow:YES,acceptsOffspringDrop:NO}),offspringTitle:SC.LabelView.design({layout:{top:131,centerX:107,height:25,width:140},fontWeight:SC.BOLD_WEIGHT,value:"Offspring Drake"}),offspringView:SC.View.design({layout:{top:138,centerX:85,height:100,width:100},childViews:"org".w(),org:Geniverse.OrganismView.design({layout:{left:0,right:0,top:0,bottom:0},contentBinding:"Geniverse.meiosisAnimationController.offspring",canDrag:YES})}),maleView:Geniverse.OrganismView.design({layout:{top:131,right:115,height:100,width:100},classNames:"sc-theme fatherView opaque".w(),contentBinding:"Geniverse.meiosisAnimationController.father",label:"Father",showLabel:true,sex:0,isDropTarget:YES,trackScore:YES,glow:YES,acceptsOffspringDrop:NO}),motherMeiosis:Geniverse.AnimationView.design({layout:{top:246,left:17,height:360,width:325},mode:"parent",swapping:"user",meiosisOwner:"mother",dragonBinding:"Geniverse.meiosisAnimationController.mother",gameteJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson"}),fertilization:Geniverse.AnimationView.design({layout:{top:246,centerX:0,height:360,width:325},mode:"offspring",meiosisOwner:"offspring",motherJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson",fatherJsonBinding:"Geniverse.meiosisAnimationController.fatherGameteJson",trackScoreOnPlayButton:YES}),fatherMeiosis:Geniverse.AnimationView.design({layout:{top:246,right:17,height:360,width:325},mode:"parent",swapping:"user",meiosisOwner:"father",dragonBinding:"Geniverse.meiosisAnimationController.father",gameteJsonBinding:"Geniverse.meiosisAnimationController.fatherGameteJson"}),scoreView:Geniverse.ScoreView.design({layout:{top:148,centerX:-78,height:46,width:165},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.meiosisPageSkip=SC.Page.design({pagePath:"Lab.meiosisPageSkip",title:"Meiosis Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"genomePanel".w(),layout:{centerX:0,top:100,width:1050,height:640},genomePanel:SC.View.design({layout:{top:0,bottom:10,left:5,right:5},childViews:"mothersPoolView fathersPoolView femaleView motherMeiosis offspringTitle offspringView maleView fatherMeiosis fertilization matchView nextButton scoreView".w(),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:5,height:120,width:400},dragonSize:100}),mothersPoolView:Lab.ChallengePoolView.design({layout:{left:12,top:16,width:300,height:97},sex:"female"}),fathersPoolView:Lab.ChallengePoolView.design({layout:{left:733,top:16,width:300,height:97},sex:"male"}),femaleView:Geniverse.OrganismView.design({layout:{top:131,left:115,height:100,width:100},classNames:"sc-theme motherView opaque".w(),contentBinding:"Geniverse.meiosisAnimationController.mother",label:"Mother",showLabel:true,sex:1,isDropTarget:YES,trackScore:YES,glow:YES,acceptsOffspringDrop:NO}),offspringTitle:SC.LabelView.design({layout:{top:131,centerX:107,height:25,width:140},fontWeight:SC.BOLD_WEIGHT,value:"Offspring Drake"}),offspringView:SC.View.design({layout:{top:138,centerX:85,height:100,width:100},childViews:"org".w(),org:Geniverse.OrganismView.design({layout:{left:0,right:0,top:0,bottom:0},contentBinding:"Geniverse.meiosisAnimationController.offspring",canDrag:YES})}),maleView:Geniverse.OrganismView.design({layout:{top:131,right:115,height:100,width:100},classNames:"sc-theme fatherView opaque".w(),contentBinding:"Geniverse.meiosisAnimationController.father",label:"Father",showLabel:true,sex:0,isDropTarget:YES,trackScore:YES,glow:YES,acceptsOffspringDrop:NO}),motherMeiosis:Geniverse.AnimationView.design({layout:{top:246,left:17,height:360,width:325},mode:"parent",swapping:false,meiosisOwner:"mother",dragonBinding:"Geniverse.meiosisAnimationController.mother",gameteJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson"}),fertilization:Geniverse.AnimationView.design({layout:{top:246,centerX:0,height:360,width:325},mode:"offspring",meiosisOwner:"offspring",motherJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson",fatherJsonBinding:"Geniverse.meiosisAnimationController.fatherGameteJson",trackScoreOnPlayButton:YES}),fatherMeiosis:Geniverse.AnimationView.design({layout:{top:246,right:17,height:360,width:325},mode:"parent",swapping:false,meiosisOwner:"father",dragonBinding:"Geniverse.meiosisAnimationController.father",gameteJsonBinding:"Geniverse.meiosisAnimationController.fatherGameteJson"}),nextButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:148,centerX:-78,width:118,height:27},isEnabled:YES,hasHover:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge"),classNames:"bringItButton".w(),alt:"Bring it on!",title:"Bring it on!",toolTip:"Click when ready for the next challenge.",action:function(){Lab.statechart.sendAction("endChallenge");
Lab.statechart.sendAction("gotoNextActivity")}}),scoreView:Geniverse.ScoreView.design({layout:{top:148,centerX:-78,height:46,width:165},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})})});
Lab.pageIndex=SC.Page.design({mainPane:SC.MainPane.design({title:"Welcome to the Geniverse Labs",childViews:"labelView".w(),init:function(){arguments.callee.base.apply(this,arguments);
this.addLinks()},labelView:SC.LabelView.design({layout:{top:50,left:50,width:200,height:18},textAlign:SC.ALIGN_CENTER,tagName:"h1",valueBinding:"Lab.mainPage.mainPane.title"}),addLinks:function(c,b){var a=SC.Page.instances;
var d=0;var e=[];a.forEach(function(g,f){if(g.pagePath&&g.title){var j=g.pagePath.split(".");
if(j[0]==="Lab"){j="lab/"+j[1]}else{if(j[0]==="Geniverse"){j="geniverse/"+j[1]}else{j=""
}}if(!e[g.title]){var h=SC.LabelView.create({value:'<a href="#'+j+'">'+g.title+"</a>",layout:{top:(100+(d*30)),left:100,height:40,width:200},escapeHTML:NO});
this.appendChild(h);d++;e[g.title]=true}}},this)}})});Lab.signUp=SC.Page.design({mainPane:SC.MainPane.design({defaultResponder:Lab.LOGIN,classNames:["brown"],title:"Welcome to the Geniverse Labs",childViews:"background loginView".w(),background:SC.ImageView.design({layout:{top:0,left:0,right:0},value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/mainscreen-bg.jpg",classNames:["super-transparent"]}),loginView:SC.LabelView.design({layout:{centerX:0,top:Lab.marginSize,width:200,height:300},escapeHTML:NO,value:'first <a href="http://geniverse-portal.dev.concord.org/login">login</a> to participate '})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.singleIframePage=SC.Page.design({pagePath:"Lab.singleIframePage",title:"DNA to Trait Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwView".w(),mwView:SC.WebView.design({layout:{centerY:-20,centerX:0,width:706,height:500},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/transcribeFlash/playTranscribe.html",shouldAutoResize:YES})})})});
Lab.routes=SC.Object.create({_currentPagePane:null,_firstHomePane:null,openHomePageRoute:function(){SC.routes.set("location","")
},gotoHomePage:function(a){Lab.statechart.sendAction("gotoHomePage")},openCaselogRoute:function(){SC.routes.set("location","caselog")
},gotoCaselog:function(a){var b=a.level;if(b){Lab.caselogController.set("currentLevelName",b)
}Lab.statechart.sendAction("gotoCaselog")},openAvatarPageRoute:function(){SC.routes.set("location","avatar")
},gotoAvatarPage:function(a){Lab.statechart.sendAction("gotoAvatarPage")},gotoEndingHub:function(){Lab.statechart.sendAction("gotoEndingHub")
},gotoActivity:function(a){Lab.ACTIVITY.set("strand",a.strand);Lab.ACTIVITY.set("level",a.level);
Lab.ACTIVITY.set("activityType",a.activityType);Lab.ACTIVITY.set("activityIndex",a.activityIndex);
Lab.statechart.sendAction("gotoActivity")},gotoLabRoute:function(a){this.gotoRoute(Lab,a)
},gotoGeniverseRoute:function(a){this.gotoRoute(Geniverse,a)},gotoLabRouteWithFixtures:function(a){SC.Logger.log("fixtures: going to ");
SC.Logger.dir(a);function b(){Geniverse.set("store",SC.Store.create().from(SC.FixturesDataSource.create()));
var c=Geniverse.store.find(Geniverse.ACTIVITIES_QUERY);Geniverse.activityController.set("content",c.lastObject());
Geniverse.userController.set("content",Geniverse.store.find(Geniverse.User,1));Lab.ACTIVITY.loadData()
}b();this.gotoLabRoute(a)},gotoActivityRouteWithFixtures:function(a){SC.Logger.log("fixtures: going to ");
SC.Logger.dir(a);Geniverse.set("store",SC.Store.create().from(SC.FixturesDataSource.create()));
Lab.START.gotoActivity(a)},gotoRoute:function(e,b){var a=b.pageName||"mainPage",c=b.paneName||"mainPane",d=e[a],f=d.get(c);
if(this._currentPagePane!==null){this._currentPagePane.remove()}Lab.infoController.removeView();
f.set("pageName",a);f.append();this._currentPagePane=f;$(".qtip").remove()}});Lab.statechart=Ki.Statechart.create({initialState:"loggedOut",loggedOut:Ki.State.plugin("Lab.loggedOut"),loggedIn:Ki.State.plugin("Lab.loggedIn")});
Lab.ACTIVITY=SC.Responder.create({strand:null,level:null,activityType:null,activityIndex:null,LOAD_CHALLENGE_DRAKES:YES,nextResponder:null,didBecomeFirstResponder:function(){},hasLoadedActivityData:NO,willLoseFirstResponder:function(){},gotoActivity:function(){Lab.makeFirstResponder(this);
this.set("hasLoadedActivityData",NO);this.initActivity()},initActivity:function(){this.clearData();
var l=this;var k=this.get("strand");var b=this.get("level");var j=this.get("activityType");
var m=this.get("activityIndex");var c=k;var f=[b,j,m];for(var g=0;g<3;g++){var d=f[g];
if(typeof(d)!="undefined"){c+="/"+d}}var a=SC.Query.local(Geniverse.Activity,{orderBy:"id",restParams:Geniverse.makeRestParams({route:c})});
this._startTimer();var e=Geniverse.store.find(a);function h(){if(e.get("status")===SC.Record.READY_CLEAN){this._cancelTimer();
var n=e.lastObject();var o=e.find(function(p){var s=true;var q=p.get("route");if(!q){s=false
}else{var r=q.split("/");s=(r[0]===k);s=(s&&!(q.length>1&&r[1]!==b));s=(s&&!(q.length>2&&r[2]!==j));
s=(s&&!(q.length>3&&r[3]!==m))}var t=p.get("title");if(s){SC.Logger.info("Using activity named: %s, with route: %s",t,q);
return YES}return NO});if(!o){SC.Logger.info("Could not find activity with route: "+k+"/"+b+"/"+j+"/"+m);
o=n}Geniverse.activityController.set("content",o);Geniverse.activityController.propertyDidChange("content");
e.removeObserver("status",l,h);Lab.ACTIVITY.initChatChannels();Lab.ACTIVITY.reloadData();
Lab.ACTIVITY.gotoActivityRoute()}}if(e.get("status")===SC.Record.READY_CLEAN){h()
}else{e.addObserver("status",this,h)}},_failureTimer:null,_startTimer:function(){this._failureTimer=SC.Timer.schedule({target:this,action:"_showFailureMessage",interval:10000,repeats:NO})
},_cancelTimer:function(){this.get("_failureTimer").invalidate();if(this._failureDialog){this._failureDialog.dismiss();
this._failureDialog=null}},_showFailureMessage:function(){this._cancelTimer();this._failureDialog=SC.AlertPane.extend({layout:{top:0,centerX:0,width:400,height:100}}).show("Error loading activity","The activity is taking a long time to load. Please check your internet connection and refresh the page.","","OK",this)
},initChatChannels:function(){if(Lab.ENABLE_CHAT){var a=Geniverse.userController.get("content");
var f=a.get("username");var e=Geniverse.activityController.get("content");var d=Geniverse.activityController.get("baseChannelName");
var b=a.get("className");var c=d+"-"+b+"-"+a.get("groupId");CcChat.chatController.set("username",f);
CcChat.chatController.initChat(c);SC.Logger.info("logged into %s",c)}},loadData:function(){Geniverse.activityController.startNewSession();
this.set("hasLoadedActivityData",NO);var h=Geniverse.userController.get("content");
var f=Geniverse.activityController.get("content");Geniverse.stableOrganismsController.set("content",[]);
Geniverse.eggsController.set("content",[]);Geniverse.challengePoolController.set("content",[]);
Geniverse.dragonGenomeController.set("content",[]);var b=SC.Query.local(Geniverse.Dragon,{conditions:"bred = true AND isEgg = false AND user = {user} AND isInMarketplace = false AND activity = {activity}",user:h,activity:f,orderBy:"stableOrder",restParams:Geniverse.makeRestParams({bred:"true",isEgg:"false",isInMarketplace:"false",user:h,activity:f})});
var d=Geniverse.store.find(b);var a=function(){Geniverse.stableOrganismsController.set("content",d)
};var c=SC.Timer.schedule({action:a,interval:2000});Geniverse.eggsController.set("content",[]);
if(Lab.ENABLE_CHAT){var k=SC.Query.local(CcChat.ChatMessage,{orderBy:"time"});var p=CcChat.store.find(k);
Geniverse.chatListController.set("content",p)}var m=SC.Query.local("Geniverse.Dragon",{conditions:"bred = false AND isInMarketplace = false AND isMatchDragon = false AND user = {user} AND activity = {activity} AND mother = {mother} AND father = {father} AND session = {session}",user:h,activity:f,mother:null,father:null,orderBy:"name, storeKey",session:Geniverse.activityController.get("currentSession"),restParams:Geniverse.makeRestParams({mother_id:"null",father_id:"null",bred:"false",isInMarketplace:"false",isMatchDragon:"false",user:h,activity:f}),LOCAL_SEARCH_ONLY:!Lab.ACTIVITY.get("LOAD_CHALLENGE_DRAKES")});
var l=Geniverse.store.find(m);var o=this;function e(){o.initDragons(l,this,false,o)
}if(!Lab.ACTIVITY.get("LOAD_CHALLENGE_DRAKES")){this.sellDragonsToMarket(l);Geniverse.challengePoolController.set("content",l);
this.initDragonsFromJson(false,this.getOrganismConfigurations(false).length)}else{if((l.get("status")&SC.Record.READY)===SC.Record.READY){e()
}else{l.addObserver("status",e)}}var j=SC.Query.local("Geniverse.Dragon",{conditions:"bred = false AND isMatchDragon = true AND user = {user} AND activity = {activity} AND isInMarketplace = false AND mother = {mother} AND father = {father} AND session = {session}",user:h,activity:f,mother:null,father:null,orderBy:"name, storeKey",session:Geniverse.activityController.get("currentSession"),restParams:Geniverse.makeRestParams({mother_id:"null",father_id:"null",bred:"false",user:h,isMatchDragon:"true",isInMarketplace:"false",activity:f}),LOCAL_SEARCH_ONLY:Geniverse.NEVER_SAVE_MATCH_DRAGONS});
var g=Geniverse.store.find(j);function n(){o.initDragons(g,this,true,o)}if(Geniverse.NEVER_SAVE_MATCH_DRAGONS){this.sellDragonsToMarket(g);
Geniverse.matchController.set("content",g);this.initDragonsFromJson(true,this.getOrganismConfigurations(true).length)
}else{if((g.get("status")&SC.Record.READY)===SC.Record.READY){n()}else{g.addObserver("status",n)
}}this.set("hasLoadedActivityData",YES)},initDragons:function(e,d,c,b){if((e.get("status")&SC.Record.READY)===SC.Record.READY){e.removeObserver("status",d);
var a;if(c){a=Geniverse.matchController}else{a=Geniverse.challengePoolController}a.set("content",e);
var g=b.getOrganismConfigurations(c).length;var f=a.get("content").length();if((Geniverse.NEVER_SAVE_MATCH_DRAGONS&&c)||(!Lab.ACTIVITY.get("LOAD_CHALLENGE_DRAKES")&&!c)||f!=g){SC.Logger.info("Regenerating "+(c?"match":"challenge")+" dragons");
if(Geniverse.NEVER_SAVE_MATCH_DRAGONS&&c){SC.Logger.info("because saving match dragons is disabled")
}else{if(!Lab.ACTIVITY.get("LOAD_CHALLENGE_DRAKES")&&!c){SC.Logger.info("because LOAD_CHALLENGE_DRAKES is false")
}else{if(f!=g){SC.Logger.info("because current dragons ("+f+") doesn't match the needed dragons ("+g+")")
}}}b.sellDragonsToMarket(a);b.initDragonsFromJson(c,g)}else{SC.Logger.info("Found "+a.get("content").length()+" dragons for "+c)
}}},initDragonsFromJson:function(a,f){function g(j){SC.RunLoop.begin();j.set("session",Geniverse.activityController.get("currentSession"));
if(a){j.set("isMatchDragon",YES);j.set("isInMarketplace",NO)}else{j.set("isInMarketplace",NO)
}SC.Logger.info("created dragon for "+(a?"match dragons":"challenge dragons"));SC.Logger.dir(j.attributes());
SC.RunLoop.end()}var e=this.getOrganismConfigurations(a);SC.Logger.info("Found "+e.length+" defaults for "+(a?"match dragons":"challenge dragons"));
var h=f?f:e.length;for(var d=0;d<h;d++){var c=e[d];var b=(typeof c.name!="undefined")?c.name:("Starter"+d);
if(d<10){b="0"+d+" - "+b}else{b=""+d+" - "+b}Geniverse.gwtController.generateDragonWithAlleles(c.alleles,c.sex,b,g,true)
}},sellDragonsToMarket:function(b){SC.RunLoop.begin();var d=b.get("length");var a=function(e){if((e.get("status")&SC.Record.READY)===SC.Record.READY){e.removeObserver("status",a);
e.set("isInMarketplace",YES)}else{e.addObserver("status",a)}};for(var c=0;c<d;c++){a(b.objectAt(c))
}SC.RunLoop.end()},getOrganismConfigurations:function(b){var a=Geniverse.userController.get("content");
var c=a.get("groupId")-1;var d=a.get("memberId")-1;return Geniverse.activityController.getConfigurationForRoomMember(c,d,b)
},clearData:function(){Geniverse.dragonGenomeController.reset();Geniverse.matchController.set("content",[]);
Geniverse.challengePoolController.set("content",[]);Geniverse.challengePoolController.firstFemale=null;
Geniverse.challengePoolController.firstMale=null;Geniverse.breedDragonController.reset();
Geniverse.articleController.set("article",null);Geniverse.articleController.set("started",NO);
Geniverse.scoringController.resetScore();Geniverse.scoringController.resetChallengeScore();
Geniverse.meiosisAnimationController.reset()},reloadData:function(){SC.Logger.log("Lab.Activity.reloadData");
this.set("hasLoadedActivityData",NO);SC.RunLoop.begin();this.clearData();Lab.infoController.removeView();
SC.RunLoop.end();this.loadData()},sellAllUsersDrakes:function(){SC.Logger.log("selling owned drakes");
var c=Geniverse.userController.get("content");var f=Geniverse.activityController.get("content");
var e=Geniverse.stableOrganismsController.get("arrangedObjects");function d(){e.removeObserver("status",d);
SC.RunLoop.begin();e.setEach("isInMarketplace",true);SC.RunLoop.end()}if((e.get("status")&SC.Record.READY)===SC.Record.READY){d()
}else{e.addObserver("status",d)}var b=Geniverse.challengePoolController.get("arrangedObjects");
function a(){b.removeObserver("status",d);SC.RunLoop.begin();b.setEach("isInMarketplace",true);
SC.RunLoop.end()}if((b.get("status")&SC.Record.READY)===SC.Record.READY){a()}else{b.addObserver("status",a)
}},gotoActivityRoute:function(){var a=Geniverse.activityController.get("pageType");
Lab.routes.gotoLabRoute({pageName:a});var b=Geniverse.activityController.get("message");
if(b){Lab.infoController.display(b,function(){Lab.get("statechart").sendAction("showAllTooltips","hint-available")
})}Lab.statechart.sendAction("registerAllTooltips","topbar-hint-available");Lab.statechart.sendAction("registerAllTooltips","hint-available-no-show")
}});Lab.argumentationChallenge=Ki.State.extend({challengeComplete:NO,challengeWasAlreadyComplete:NO,enterState:function(){this.startChallenge()
},startChallenge:function(){this.set("challengeComplete",NO);var b=Geniverse.activityController.get("route"),a=Geniverse.userController.getPageStars(b);
this.set("challengeWasAlreadyComplete",a==1);this.get("statechart").sendAction("blockNextNavButton");
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO)},endChallenge:function(){this.set("challengeComplete",YES);
this.get("statechart").sendAction("unblockNextNavButton");Geniverse.doWhenReady(this,Geniverse.userController.get("content"),function(){var a=Geniverse.activityController.get("route");
Geniverse.userController.setPageStars(a,1);Lab.logController.logEvent(Lab.EVENT.COMPLETED_CHALLENGE,{route:a,starsAwarded:1});
Geniverse.unlockablesController.unlockFor(a);Geniverse.store.commitRecords();Lab.caselogController.propertyDidChange("userMetadata")
})},didSendBlogPost:function(){if(this.get("challengeComplete")){this.set("challengeWasAlreadyComplete",YES)
}else{this.endChallenge()}},checkMatchDragon:function(b,a){Geniverse.scoringController.incrementScore(1);
if(Geniverse.matchController.doesMatch(b[0],b[1])){a.setPath("content.hasBeenMatched",YES);
a._setClassNames();SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).plain("Good work!","The drake you have created matches the target drake.","","OK","",this)
}else{SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).error("That's not the drake!","The drake you have created doesn't match the target drake. Please try again.","","Try again","",this)
}},exitState:function(){}});Lab.challenge=Ki.State.extend({challengeComplete:NO,challengePreviouslyCompleted:NO,starsEarned:0,enterState:function(){var b=Geniverse.userController.getUserMetadata(),a=Geniverse.activityController.get("route");
if(b.stars&&b.stars[a]){this.challengePreviouslyCompleted=YES}else{this.challengePreviouslyCompleted=NO
}this.startChallenge()},startChallenge:function(){if(this.challengePreviouslyCompleted){this.get("statechart").sendAction("unblockNextNavButton")
}else{this.get("statechart").sendAction("blockNextNavButton")}var a=new Image();a.src="/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/spinner-large.gif"
},endChallenge:function(){this.challengeComplete=YES;this.get("statechart").sendAction("unblockNextNavButton");
var a=Geniverse.scoringController.get("achievedChallengeStars");var b=Geniverse.activityController.get("route");
Geniverse.userController.setPageStars(b,a);Lab.caselogController.propertyDidChange("userMetadata");
Geniverse.store.commitRecords();this.starsEarned=a;Lab.logController.logEvent(Lab.EVENT.COMPLETED_CHALLENGE,{route:b,starsAwarded:a})
},checkAnswerIfDrakesReady:function(){if(!Geniverse.gwtController.get("drakesArePending")){this.checkAnswer()
}else{this.spinnerPanel=SC.PanelPane.create({layout:{width:100,height:100,centerX:0,centerY:0},classNames:["frameless"],contentView:SC.ImageView.extend({value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/spinner-large.gif"})}).append();
Geniverse.gwtController.addObserver("drakesArePending",this,"checkAnswer")}},checkAnswer:function(){if(this.spinnerPanel){Geniverse.gwtController.removeObserver("drakesArePending",this,"checkAnswer");
this.spinnerPanel.remove();this.spinnerPanel=null}},_challengeComplete:function(c){var a=this;
this.endChallenge();if(!c){c="You've completed all the trials in this challenge!\n"
}var b=Geniverse.activityController.getNextActivity();var e=this.starsEarned===3?"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/three-star.png":this.starsEarned===2?"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/two-star.png":"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/one-star.png";
var d="<img src='"+e+"' class='centered-block'/>\nYou earned "+this.starsEarned+" star"+(this.starsEarned===1?"":"s")+"!\n\n";
SC.AlertPane.extend({layout:{top:0,centerX:0,width:350,height:100},displayDescription:function(){var f=this.get("description");
if(!f||f.length===0){return f}return'<p class="description">'+f.split("\n").join('</p><p class="description">')+"</p>"
}.property("description").cacheable()}).plain("Good work!",c+d,"",(b?"Go on to the next challenge":"Go back to the Case Log"),"Try again",{alertPaneDidDismiss:function(h,f){Geniverse.scoringController.resetChallengeScore();
Geniverse.scoringController.resetScore();Geniverse.matchController.nextDragon();if(f===SC.BUTTON1_STATUS){a._showCongrats(b)
}else{var g=Geniverse.activityController.get("route");Geniverse.unlockablesController.unlockFor(g);
Lab.statechart.sendAction("repeatChallenge")}}})},_showCongrats:function(b){var a=this;
var c=Geniverse.activityController.get("congratulations");if(typeof(c)!="undefined"&&c!==null&&c!==""){Lab.congratulationsController.display(c,function(){a._moveOn(b)
})}else{a._moveOn(b)}},_moveOn:function(b){var a=Geniverse.activityController.get("route");
Geniverse.unlockablesController.unlockFor(a);if(b){Lab.statechart.sendAction("gotoNextActivity")
}else{Lab.routes.openCaselogRoute()}},_updateNumTrials:function(){Geniverse.scoringController.set("numberOfTrials",Geniverse.matchController.getPath("arrangedObjects.length"))
},exitState:function(){}});Lab.matchTargetDrakesOneAtATimeChallenge=Lab.challenge.extend({successfulMatch:NO,startChallenge:function(){arguments.callee.base.apply(this,arguments);
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO);Geniverse.matchController.addObserver("arrangedObjects.length",this._updateNumTrials)
},checkMatchDragon:function(b,a){Geniverse.scoringController.incrementScore(1);if(Geniverse.matchController.doesMatch(b[0],b[1])){a.setPath("content.hasBeenMatched",YES);
a._setClassNames();this.successfulMatch=YES;SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).plain("Good work!","The drake you have created matches the target drake.","","OK","",this)
}else{this.successfulMatch=NO;SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).error("That's not the drake!","The drake you have created doesn't match the target drake. Please try again.","","Try again","",this)
}},alertPaneDidDismiss:function(){if(this.successfulMatch){if(Geniverse.matchController.isLastDragon()){this._challengeComplete()
}else{Geniverse.scoringController.resetScore();Geniverse.matchController.nextDragon()
}this.successfulMatch=NO}},exitState:function(){arguments.callee.base.apply(this,arguments);
Geniverse.matchController.removeObserver("arrangedObjects.length",this._updateNumTrials)
}});sc_require("states/challenges/matchTargetDrakesOneAtATimeChallenge");Lab.chromosomeBreedingOneAtATimeChallenge=Lab.matchTargetDrakesOneAtATimeChallenge.extend({firstChromosomeDragonLoaded:NO,secondChromosomeDragonLoaded:NO,matchDragonChanged:function(){this.setTargetScore()
},chromosomeDragonChanged:function(){if(!this.firstChromosomeDragonLoaded&&Geniverse.dragonGenomeController.get("firstDragon")){this.firstChromosomeDragonLoaded=YES;
this.setTargetScore()}if(!this.secondChromosomeDragonLoaded&&Geniverse.dragonGenomeController.get("secondDragon")){this.secondChromosomeDragonLoaded=YES;
this.setTargetScore()}},setTargetScore:function(){var k=Geniverse.dragonGenomeController.get("firstDragon"),j=Geniverse.dragonGenomeController.get("secondDragon");
if(k&&k.get("alleles")&&j&&j.get("alleles")&&Geniverse.matchController.get("currentDragon")&&Geniverse.matchController.get("currentDragon").get("characteristicMap")){var b=Geniverse.chromosomeController.get("allAlleles").join(",").split(","),f=Geniverse.activityController.getHiddenOrStaticGenes("hiddenGenes",1),e=Geniverse.activityController.getHiddenOrStaticGenes("hiddenGenes",0),d=Geniverse.activityController.getHiddenOrStaticGenes("staticGenes",1),c=Geniverse.activityController.getHiddenOrStaticGenes("staticGenes",0),h=this._removeObjectsIgnoreCase(b.copy(),f.concat(d)),g=this._removeObjectsIgnoreCase(b.copy(),e.concat(c));
var a=Geniverse.matchController.numberOfBreedingMovesToReachCurrent(k,j,h,g);a=a+1;
Geniverse.scoringController.set("minimumScore",a)}},_removeObjectsIgnoreCase:function(c,b){for(var a=c.length-1;
a>=0;--a){if(b.indexOf(c[a].toLowerCase())>=0){c.splice(a,1)}}return c}});Lab.defaultChallenge=Ki.State.extend({challengeComplete:YES,_pageId:null,enterState:function(){this.get("statechart").sendAction("unblockNextNavButton");
this._pageId=Geniverse.activityController.get("route")},exitState:function(){var a=this._pageId||Geniverse.activityController.get("route");
Geniverse.userController.setPageStars(a,3);Geniverse.store.commitRecords();Lab.logController.logEvent(Lab.EVENT.COMPLETED_CHALLENGE,{route:a,starsAwarded:3});
Geniverse.unlockablesController.unlockFor(a);Lab.caselogController.propertyDidChange("userMetadata")
}});Lab.matchTargetDrakesListChallenge=Lab.challenge.extend({successfulMatch:NO,organismView:null,_hasBred:NO,_hasBredMeiosis:NO,startChallenge:function(){arguments.callee.base.apply(this,arguments);
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO);Geniverse.scoringController.set("numberOfTrials",1)
},checkMatchDragon:function(b,a){Geniverse.scoringController.incrementScore(1);if(Geniverse.matchController.doesMatch(b[0],b[1])){a.setPath("content.hasBeenMatched",YES);
a._setClassNames();SC.AlertPane.extend({layout:{centerY:0,centerX:0,width:300,height:100}}).plain("Good work!","The drake you have created matches the target drake.","","OK","",this)
}else{SC.AlertPane.extend({layout:{centerY:0,centerX:0,width:300,height:100}}).error("That's not the drake!","The drake you have created doesn't match the target drake. Please try again.","","Try again","",this)
}},alertPaneDidDismiss:function(){var a=Geniverse.matchController.filterProperty("hasBeenMatched",false).length;
if(a===0){this._challengeComplete()}},didBreed:function(){},didBreedMeiosis:function(){if(!this._hasBredMeiosis){this._hasBred=false;
this.didBreed();this._hasBredMeiosis=true}}});sc_require("states/challenges/matchTargetDrakesListChallenge");
Lab.firstMeiosisWithMatchTarget=Lab.matchTargetDrakesListChallenge.extend({_hasReachdRecombination:NO,_hasSelectedSomeAlleles:NO,_hasSeenMessageToTryMore:NO,_hasSeenYSwapWarning:NO,showInitialRecobinationMsg:function(){if(!this._hasReachdRecombination){setTimeout(function(){SC.AlertPane.extend({layout:{centerY:0,centerX:0,width:300,height:100}}).plain("Step 1","You can select parts of chromosomes to swap by hovering over and clicking on a chromosome. Try it now.","","OK","",this)
},800);this._hasReachdRecombination=YES}},showSelectTargetnMsg:function(){if(!this._hasSelectedSomeAlleles){setTimeout(function(){SC.AlertPane.extend({layout:{centerY:0,centerX:0,width:300,height:100}}).plain("Step 2","Click on one of the red highlighted portions to swap. Click on any other chromosome to start over.","","OK","",this)
},800);this._hasSelectedSomeAlleles=YES}},showYSwapAttemptedMsg:function(){setTimeout(function(){SC.AlertPane.extend({layout:{centerY:0,centerX:0,width:300,height:100}}).plain("Improper Swap Attempted","No recombniation occurs between X and Y chromosomes.","","OK","",this)
},50)},showTryMoreRecombinationMsg:function(){if(!this._hasSeenMessageToTryMore){setTimeout(function(){SC.AlertPane.extend({layout:{centerY:0,centerX:0,width:300,height:100}}).plain("Nice job!","You completed your first crossover between chromosomes. Make additional recombinations, or press 'play' or 'end' to continue meiosis.","","OK","",this)
},800);this._hasSeenMessageToTryMore=YES}}});Lab.initialChallenge=Ki.State.extend({challengeComplete:YES,enterState:function(){},exitState:function(){}});
Lab.invisibleGenotypeChallenge=Lab.challenge.extend({challengeComplete:NO,challengeWasAlreadyComplete:NO,solved:NO,enterState:function(){this.startChallenge()
},startChallenge:function(){this.set("challengeComplete",NO);this.set("challengeWasAlreadyComplete",NO);
this.set("solved",NO);this.get("statechart").sendAction("blockNextNavButton");Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO)
},endChallenge:function(){this.set("challengeComplete",YES);this.get("statechart").sendAction("unblockNextNavButton");
var b=Geniverse.activityController.get("route");var a=this.get("starsEarned");Geniverse.userController.setPageStars(b,a);
Geniverse.store.commitRecords();Lab.logController.logEvent(Lab.EVENT.COMPLETED_CHALLENGE,{route:b,starsAwarded:a});
Lab.caselogController.propertyDidChange("userMetadata")},solveInvisibleMaleGenotype:function(){Geniverse.invisibleGenomeController.set("content",Geniverse.challengePoolController.get("firstMale"));
Geniverse.invisibleGenomeController.showGenomePane()},solveInvisibleFemaleGenotype:function(){Geniverse.invisibleGenomeController.set("content",Geniverse.challengePoolController.get("firstFemale"));
Geniverse.invisibleGenomeController.showGenomePane()},submitInvisibleGenotype:function(){var a=Geniverse.invisibleGenomeController.timesAttempted;
Geniverse.invisibleGenomeController.timesAttempted=a+1;var b=Geniverse.invisibleGenomeController.isAllCorrect();
if(b){this.solved=YES;this.set("starsEarned",Math.max(3-a,1));SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).plain("Good work!","You correctly determined the Drake's genotype.","","OK","",this)
}else{SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).error("That's not right!","You have not yet correctly determined the Drake's genotype. Keep trying!","","OK","",this)
}},alertPaneDidDismiss:function(){Geniverse.invisibleGenomeController.hideGenomePane();
if(this.solved){this._challengeComplete(" ")}},exitState:function(){}});Lab.matchOneAtATimeChallenge=Lab.challenge.extend({successfulMatch:NO,organismView:null,starsEarned:0,firstChromosomeDragonLoaded:NO,buttonView:null,startChallenge:function(){arguments.callee.base.apply(this,arguments);
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO);Geniverse.matchController.addObserver("arrangedObjects.length",this._updateNumTrials)
},exitState:function(){arguments.callee.base.apply(this,arguments);Geniverse.matchController.removeObserver("arrangedObjects.length",this._updateNumTrials)
},matchDragonChanged:function(){this.setTargetScore()},chromosomeDragonChanged:function(){if(!this.firstChromosomeDragonLoaded){this.firstChromosomeDragonLoaded=YES;
this.setTargetScore()}},setTargetScore:function(){var a=Geniverse.dragonGenomeController.get("firstDragon");
if(a&&a.get("characteristicMap")&&Geniverse.matchController.get("currentDragon")&&Geniverse.matchController.get("currentDragon").get("characteristicMap")){Geniverse.scoringController.set("minimumScore",Geniverse.matchController.numberOfMovesToReachCurrent(a))
}},revealClicked:function(a){this.buttonView=a;this.get("statechart").sendAction("checkAnswerIfDrakesReady")
},checkAnswer:function(){arguments.callee.base.apply(this,arguments);this.organismView=this.buttonView.getPath("parentView.genomeView.dragonView");
this._revealImage();SC.Timer.schedule({target:this,action:function(){if(this._drakesMatch(this.organismView.get("content"))){this.successfulMatch=YES;
SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).plain("Good work!","The drake you have created matches the target drake.","","OK","",this)
}else{this.successfulMatch=NO;Geniverse.scoringController.incrementScore(1);SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).error("That's not the drake!","The drake you have created doesn't match the target drake. Please try again.","","Try again","",this)
}Lab.logController.logEvent(Lab.EVENT.DRAKES_REVEALED,{success:this.successfulMatch})
},interval:500,repeats:NO})},_revealImage:function(){SC.RunLoop.begin();this.organismView.set("hideDragon",NO);
SC.RunLoop.end();this.organismView.get("imageView").notifyPropertyChange("valueNeedsRecalculated")
},_hideImage:function(){SC.RunLoop.begin();this.organismView.set("hideDragon",YES);
SC.RunLoop.end();this.organismView.get("imageView").notifyPropertyChange("valueNeedsRecalculated")
},alertPaneDidDismiss:function(){if(this.successfulMatch){if(Geniverse.matchController.isLastDragon()){this._challengeComplete()
}else{Geniverse.scoringController.resetScore();Geniverse.matchController.nextDragon()
}this.successfulMatch=NO}this._hideImage()},_drakesMatch:function(a){return Geniverse.matchController.doesMatchCurrent(a)
}});Lab.matchThreeToOneChallenge=Lab.challenge.extend({successfulMatch:NO,organismViews:[],matchedOrganismViews:[],duplicateOrganismViews:[],incorrectOrganismViews:[],buttonView:null,startChallenge:function(){arguments.callee.base.apply(this,arguments);
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO);Geniverse.matchController.addObserver("arrangedObjects.length",this._updateNumTrials)
},exitState:function(){arguments.callee.base.apply(this,arguments);Geniverse.matchController.removeObserver("arrangedObjects.length",this._updateNumTrials)
},revealClicked:function(a){this.buttonView=a;this.get("statechart").sendAction("checkAnswerIfDrakesReady")
},checkAnswer:function(){arguments.callee.base.apply(this,arguments);var f=this.buttonView.get("parentView");
this.organismViews=f.get("organismViews");this._revealImages();this.matchedOrganismViews=[];
this.duplicateOrganismViews=[];this.incorrectOrganismViews=[];var b=this.organismViews.map(function(k){return k.getPath("content.alleles")
});var h=b.map(function(k){if(b.indexOf(k)!=b.lastIndexOf(k)){return YES}return NO
});var g=this;var d=this.organismViews.map(function(k){return g._drakesMatch(k.get("content"))
});for(var c=0;c<this.organismViews.length;c++){var j=h[c];var e=d[c];var a=this.organismViews[c];
if(j&&e){this.duplicateOrganismViews.push(a)}else{if(e){this.matchedOrganismViews.push(a)
}else{this.incorrectOrganismViews.push(a)}}}this._showAlert()},_showAlert:function(){SC.Timer.schedule({target:this,action:function(){var a=this.matchedOrganismViews.length;
var d=this.duplicateOrganismViews.length;var b=this.incorrectOrganismViews.length;
if(a===3){this.successfulMatch=YES;SC.AlertPane.extend({layout:{right:0,centerY:0,width:300,height:100}}).plain("Good work!","All of the drakes you have created match the target drake.","","OK","",this)
}else{Geniverse.scoringController.incrementScore(1);this.successfulMatch=NO;this._resetTargetMatchedState();
if(b>0){var c="";if(b===3){c="None of the drakes you have created match the target."
}else{c=""+b+" of the drakes you have created do"+(b===1?"es":"")+"n't match the target.";
if(d!==0){c+=" Also, some of your drakes are exactly the same! All of your drakes need to have different alleles."
}}c+=" Please try again.";SC.AlertPane.extend({layout:{right:0,centerY:0,width:300,height:100}}).error("You didn't get all of them.",c,"","Try again","",this)
}else{SC.AlertPane.extend({layout:{right:0,centerY:0,width:300,height:100}}).error("You have some duplicates.","Some of your drakes are exactly the same! All of your drakes need to have different alleles.","","Try again","",this)
}}Lab.logController.logEvent(Lab.EVENT.DRAKES_REVEALED,{success:this.successfulMatch})
},interval:500,repeats:NO})},_revealImages:function(){SC.RunLoop.begin();for(var a=0;
a<this.organismViews.length;a++){this.organismViews[a].set("hideDragon",NO)}SC.RunLoop.end();
for(a=0;a<this.organismViews.length;a++){this.organismViews[a].get("imageView").notifyPropertyChange("valueNeedsRecalculated")
}},_hideImages:function(){SC.RunLoop.begin();var a=0;if(this.successfulMatch){for(a=0;
a<this.organismViews.length;a++){this.organismViews[a].set("hideDragon",YES)}}else{for(a=0;
a<this.incorrectOrganismViews.length;a++){this.incorrectOrganismViews[a].set("hideDragon",YES)
}for(a=0;a<this.duplicateOrganismViews.length;a++){this.duplicateOrganismViews[a].set("hideDragon",YES)
}}SC.RunLoop.end();for(a=0;a<this.organismViews.length;a++){this.organismViews[a].get("imageView").notifyPropertyChange("valueNeedsRecalculated")
}},alertPaneDidDismiss:function(){if(this.successfulMatch){if(Geniverse.matchController.isLastDragon()){this._challengeComplete()
}else{Geniverse.scoringController.resetScore();Geniverse.matchController.nextDragon()
}}this._hideImages();this.successfulMatch=NO},_drakesMatch:function(a){return Geniverse.matchController.doesMatchCurrent(a)
},_resetTargetMatchedState:function(){Geniverse.matchController.setPath("currentDragon.hasBeenMatched",NO)
}});Lab.selectParentsChallenge=Lab.challenge.extend({challengeComplete:NO,challengeWasAlreadyComplete:NO,solved:NO,timesAttempted:0,enterState:function(){this.startChallenge()
},startChallenge:function(){this.set("challengeComplete",NO);this.set("challengeWasAlreadyComplete",NO);
this.set("timesAttempted",0);this.set("solved",NO);this.get("statechart").sendAction("blockNextNavButton");
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO)},endChallenge:function(){this.set("challengeComplete",YES);
this.get("statechart").sendAction("unblockNextNavButton");var a=Geniverse.activityController.get("route");
Geniverse.userController.setPageStars(a,this.get("starsEarned"));Geniverse.store.commitRecords();
Lab.caselogController.propertyDidChange("userMetadata")},submitParents:function(){var k=Geniverse.activityController.getConfigurationForRoomMember(0,0,true),g=k[0].alleles,b=k[1].alleles,a=this._getPossibleCharacteristics(g,b),l=Geniverse.breedDragonController.getPath("mother.alleles"),f=Geniverse.breedDragonController.getPath("father.alleles"),c=this._getPossibleCharacteristics(l,f),h=this.timesAttempted;
this.timesAttempted=h+1;var e=true;var j,d;for(j in a){if(!a.hasOwnProperty(j)){continue
}characteristics=a[j];for(d in characteristics){if(!characteristics.hasOwnProperty(d)){continue
}if(characteristics[d]!==c[j][d]){e=false}}}if(e){this.solved=YES;this.set("starsEarned",Math.max(3-h,1));
SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).plain("Good work!","Those parents will do perfectly!","","OK","",this)
}else{SC.AlertPane.extend({layout:{top:0,centerX:0,width:300,height:100}}).error("That's not right!","Those parents will not produce the right proportions of offspring. Keep trying!","","OK","",this)
}},_getPossibleCharacteristics:function(s,m){var n=s.match(/a:([^,]*)/g).map(function(j){return j.match(/[^:]+$/)[0]
}),e=s.match(/b:([^,]*)/g).map(function(j){return j.match(/[^:]+$/)[0]}),r=m.match(/a:([^,]*)/g).map(function(j){return j.match(/[^:]+$/)[0]
}),p=m.match(/b:([^,]*)/g).map(function(j){return j.match(/[^:]+$/)[0]}),l={},q={};
var h,g,d;for(h=0,ii=n.length;h<ii;h++){a1=n[h];o=this._getTraitOfAllele(a1);alleleCombos=[];
alleleCombos[0]=[a1,r[h]];alleleCombos[1]=[a1,p[h]];alleleCombos[2]=[e[h],r[h]];alleleCombos[3]=[e[h],p[h]];
var a=l[o];var b=[];if(typeof(a)!="undefined"){var f,c;for(g=0,jj=a.length;g<jj;g++){f=a[g];
for(d=0,kk=alleleCombos.length;d<kk;d++){c=alleleCombos[d].slice(0);currentCombo=f.slice(0);
currentCombo.pushObjects(c);b.push(currentCombo)}}}else{b=alleleCombos}l[o]=b}for(var o in l){if(!l.hasOwnProperty(o)){continue
}q[o]={};configs=l[o];for(h=0,ii=configs.length;h<ii;h++){config=configs[h];alleleString="";
for(g=0,jj=config.length;g<jj;g+=2){alleleString+="a:"+config[g]+",b:"+config[g+1]+","
}alleleString=alleleString.slice(0,alleleString.length-1);org=new BioLogica.Organism.createOrganism(BioLogica.Species.Drake,alleleString);
characteristic=org.getCharacteristic(o);if(!q[o][characteristic]){q[o][characteristic]=0
}q[o][characteristic]++}}return q},_getTraitOfAllele:function(d){var b,f,e,g;e=BioLogica.Species.Drake.traitRules;
for(f in e){if(!e.hasOwnProperty(f)){continue}b=e[f];for(g in b){if(!b.hasOwnProperty(g)){continue
}charac=b[g];for(var a=0,c=charac.length;a<c;a++){var h=charac[a];if(~h.indexOf(d)){return f
}}}}},alertPaneDidDismiss:function(){if(this.solved){this._challengeComplete(" ")
}},exitState:function(){}});Lab.inActivity=Ki.State.extend({substatesAreConcurrent:YES,myCase:null,challengeState:Ki.State.design({substatesAreConcurrent:NO,initialSubstate:"initialChallenge",argumentationChallenge:Ki.State.plugin("Lab.argumentationChallenge"),matchOneAtATimeChallenge:Ki.State.plugin("Lab.matchOneAtATimeChallenge"),matchThreeToOneChallenge:Ki.State.plugin("Lab.matchThreeToOneChallenge"),matchTargetDrakesListChallenge:Ki.State.plugin("Lab.matchTargetDrakesListChallenge"),matchTargetDrakesOneAtATimeChallenge:Ki.State.plugin("Lab.matchTargetDrakesOneAtATimeChallenge"),chromosomeBreedingOneAtATimeChallenge:Ki.State.plugin("Lab.chromosomeBreedingOneAtATimeChallenge"),invisibleGenotypeChallenge:Ki.State.plugin("Lab.invisibleGenotypeChallenge"),selectParentsChallenge:Ki.State.plugin("Lab.selectParentsChallenge"),defaultChallenge:Ki.State.plugin("Lab.defaultChallenge"),initialChallenge:Ki.State.plugin("Lab.initialChallenge"),firstMeiosisWithMatchTarget:Ki.State.plugin("Lab.firstMeiosisWithMatchTarget"),currentChallenge:null}),showingIntroScreen:Ki.State.plugin("Lab.showingIntroScreen"),enterState:function(){this.get("statechart").sendAction("gotoActivity")
},lastNavigation:0,gotoActivity:function(){var a=new Date().getTime();if((a-this.lastNavigation)>2000){this.lastNavigation=a;
SC.RunLoop.begin();Geniverse.activityController.set("content",null);SC.RunLoop.end();
if(Geniverse.activityController.get("status")&SC.Record.READY){this._activityLoaded()
}else{Geniverse.activityController.addObserver("content",this,this._activityLoaded)
}Lab.ACTIVITY.gotoActivity()}return YES},_activityLoaded:function(){Geniverse.activityController.removeObserver("content",this,this._activityLoaded);
Lab.ACTIVITY.set("LOAD_CHALLENGE_DRAKES",NO);var pageType=Geniverse.activityController.get("pageType");
var challengeType=Lab[pageType].get("challengeType");if(Geniverse.activityController.get("isArgumentationChallenge")){this.get("challengeState").gotoState("argumentationChallenge")
}else{if(challengeType){this.get("challengeState").gotoState(challengeType)}else{if(eval(Geniverse.activityController.get("matchDragonAlleles"))){this.get("challengeState").gotoState("matchTargetDrakesListChallenge")
}else{this.get("challengeState").gotoState("defaultChallenge")}}}this._setupGenomeDragons(pageType);
if(Geniverse.activityController.get("myCase")){if(Geniverse.activityController.getPath("myCase.status")&SC.Record.READY){this._caseLoaded()
}else{this.myCase=Geniverse.activityController.get("myCase");this.myCase.addObserver("status",this,this._caseLoaded)
}}},_setupGenomeDragons:function(a){switch(a){case"chromosomeChallengePage":case"chromosomeTrainingSinglePage":Geniverse.dragonGenomeController.initDragonForView(1,1,true);
break;case"chromosomeBreedingPage":case"chromosomeBreedingChallengePage":case"chromosomeTrainingPage":case"invisibleMaleGenotypePage":case"invisibleFemaleGenotypePage":case"chromosomeBreedingSelectParentsPage":Geniverse.dragonGenomeController.initDragonForView(1,1,true);
Geniverse.dragonGenomeController.initDragonForView(2,0,true);break;case"chromosomeTripleChallengePage":Geniverse.dragonGenomeController.initDragonForView(1,1,true);
Geniverse.dragonGenomeController.initDragonForView(2,1,true);Geniverse.dragonGenomeController.initDragonForView(3,1,true);
break}},_caseLoaded:function(){if(this.myCase){this.myCase.removeObserver("status",this,this._caseLoaded)
}if(Geniverse.activityController.getPreviousActivity()){this.get("statechart").sendAction("enablePreviousNavButton")
}else{this.get("statechart").sendAction("disablePreviousNavButton")}if(Geniverse.activityController.getNextActivity()){this.get("statechart").sendAction("enableNextNavButton")
}else{this.get("statechart").sendAction("disableNextNavButton")}var b=Geniverse.activityController.get("myCase");
if(Geniverse.activityController.get("myCaseOrder")===1){var a=b.get("introImageUrl");
if(a){if(a.length>5){this.get("showingIntroScreen").gotoState("showingIntroScreenPanel")
}}}},enablePreviousNavButton:function(){Lab.navigationController.set("showPreviousButton",true)
},enableNextNavButton:function(){Lab.navigationController.set("showNextButton",true)
},disablePreviousNavButton:function(){Lab.navigationController.set("showPreviousButton",false)
},disableNextNavButton:function(){Lab.navigationController.set("showNextButton",false)
},blockNextNavButton:function(){Lab.navigationController.set("blockNextButton",true)
},unblockNextNavButton:function(){Lab.navigationController.set("blockNextButton",false)
},gotoNextActivity:function(){this.get("statechart").sendAction("unblockNextNavButton");
var a=Geniverse.activityController.getNextActivity();if(a){SC.routes.set("location",a.get("route"))
}},gotoPreviousActivity:function(){this.get("statechart").sendAction("unblockNextNavButton");
var a=Geniverse.activityController.getPreviousActivity();if(a){SC.routes.set("location",a.get("route"))
}},repeatChallenge:function(){Lab.logController.logEvent(Lab.EVENT.REPEAT_CHALLENGE,Geniverse.activityController,"title route case:myCase.order challenge:myCaseOrder".w());
this.gotoActivity()},gotoHomePage:function(){Lab.statechart.getState("atLocation").startPage="home";
this.gotoState("inHomePage")},gotoAvatarPage:function(){Lab.statechart.getState("atLocation").startPage="avatar";
this.gotoState("inAvatar")},gotoEndingHub:function(){Lab.statechart.getState("atLocation").startPage="endingHub";
this.gotoState("inEndingHub")},meiosisAnimationReady:function(){Lab.statechart.sendAction("showAllTooltips","meiosis-ready-hint")
},meiosisAnimationCompleted:function(a){if(a!=="offspring"){Lab.statechart.sendAction("showAllTooltips","meiosis-completion-hint")
}},fertilizationReady:function(){Lab.statechart.sendAction("showAllTooltips","fertilization-ready-hint")
},meiosisOffspringReady:function(){Lab.statechart.sendAction("showAllTooltips","meiosis-offspring-ready-hint")
},breedingPageMatchBreedingCompleted:function(){Lab.statechart.sendAction("showAllTooltips","breeding-completed-hint")
},stabledFirstDrake:function(){Lab.statechart.sendAction("showAllTooltips","first-stable-hint")
},exitState:function(){$(".qtip").remove();Geniverse.activityController.removeObserver("content",this,this._activityLoaded);
if(this.myCase){this.myCase.removeObserver("status",this,this._caseLoaded);this.myCase=null
}}});Lab.inAvatar=Ki.State.extend({enterState:function(){var a=Geniverse.userController.get("content");
a.set("avatar","");Lab.routes.gotoLabRoute({pageName:"avatarPage"})},exitState:function(){},choseScarlett:function(){this._chooseAvatar("Scarlett",Geniverse.resourceURL("/resources/narrative/intro/introduction.html#sequence-1.html"))
},choseStrider:function(){this._chooseAvatar("Strider",Geniverse.resourceURL("/resources/narrative/intro/introduction.html#sequence-1-strider.html"))
},_chooseAvatar:function(c,b){Lab.avatarController.set("waiting",YES);var a=Geniverse.userController.get("content");
stateChanged=function(){console.log("status: "+a.get("status"));if(a.get("status")==SC.Record.READY_CLEAN){a.removeObserver("status",stateChanged);
window.location.hash="";window.location=b}};a.addObserver("status",stateChanged);
console.log("setting avatar "+c+" on user: "+a.get("firstName")+" "+a.get("lastName"));
$.cookie("avatar",c);a.set("avatar",c);Geniverse.store.commitRecords()}});Lab.inCaselog=Ki.State.extend({enterState:function(){var a=this.get("dummyActivity");
if(!a){a=Geniverse.store.createRecord(Geniverse.Activity,{title:"Case Log"});this.set("dummyActivity",a)
}Geniverse.activityController.set("content",a);Lab.routes.gotoLabRoute({pageName:"caselogPage"});
Lab.statechart.sendAction("registerAllTooltips","topbar-hint-available")},exitState:function(){console.log("Exiting caselog state")
}});Lab.inEndingHub=Ki.State.extend({enterState:function(){Lab.routes.gotoLabRoute({pageName:"mainPage"});
var a=Geniverse.unlockablesController.unlockFor("endingHub",true);if(a.length>0){Geniverse.unlockablesController.set("selectedUnlockable",a[0])
}Geniverse.store.commitRecords()},exitState:function(){}});Lab.inHomePage=Ki.State.extend({dummyActivity:null,enterState:function(){var a=this.get("dummyActivity");
if(!a){a=Geniverse.store.createRecord(Geniverse.Activity,{title:"Office"});this.set("dummyActivity",a)
}Geniverse.activityController.set("content",a);Lab.routes.gotoLabRoute({pageName:"mainPage"});
Lab.statechart.sendAction("registerAllTooltips","topbar-hint-available");setTimeout(function(){Lab.statechart.sendAction("showAllTooltips","topbar-hint-available-show");
setTimeout(function(){$(".qtip").fadeOut()},3500)},500)},exitState:function(){}});
Lab.loadingData=Ki.State.extend({hasLoadedActivityData:NO,enterState:function(){this.set("hasLoadedActivityData",NO);
if(Geniverse.gwtController.get("isReady")){this.initActivity()}else{Geniverse.gwtController.addObserver("isReady",this,"initActivity")
}},startTrial:function(){},exitState:function(){}});Lab.loggedIn=Ki.State.extend({substatesAreConcurrent:YES,atLocation:Ki.State.design({substatesAreConcurrent:NO,initialSubstate:"empty",inHomePage:Ki.State.plugin("Lab.inHomePage"),inActivity:Ki.State.plugin("Lab.inActivity"),inCaselog:Ki.State.plugin("Lab.inCaselog"),inAvatar:Ki.State.plugin("Lab.inAvatar"),inEndingHub:Ki.State.plugin("Lab.inEndingHub"),empty:Ki.State.design(),startPage:null,enterState:function(){avatar=Geniverse.userController.get("avatar");
if(typeof(avatar)=="undefined"||avatar===null||avatar===""){Lab.statechart.getState("atLocation").startPage="avatar"
}this.get("statechart").sendAction("gotoRequestedPage")},gotoHomePage:function(){this.startPage="home";
this.get("statechart").sendAction("gotoRequestedPage")},gotoCaselog:function(){this.startPage="caselog";
this.get("statechart").sendAction("gotoRequestedPage")},gotoActivity:function(){this.startPage="activity";
this.get("statechart").sendAction("gotoRequestedPage")},gotoAvatarPage:function(){this.startPage="avatar";
this.get("statechart").sendAction("gotoRequestedPage")},gotoEndingHub:function(){this.startPage="endingHub";
this.get("statechart").sendAction("gotoRequestedPage")},gotoRequestedPage:function(){switch(this.startPage||"home"){case"home":this.gotoState("inHomePage");
break;case"caselog":this.gotoState("inCaselog");break;case"activity":this.gotoState("inActivity");
break;case"avatar":this.gotoState("inAvatar");break;case"endingHub":this.gotoState("inEndingHub");
break;default:throw new Error("Lab.statechart.loggedIn.atLocation.startPage was set to an unexpected value, '%@'".fmt(this.startPage))
}},exitState:function(){this.startPage=null}}),showingBlogButton:Ki.State.plugin("Lab.showingBlogButton"),warningUserBeforeLeaving:Ki.State.plugin("Lab.warningUserBeforeLeaving"),logOut:function(){SC.Request.postUrl(Lab.loginController.logoutUrl,null).header({Accept:"application/json"}).json().notify(this,function(){Lab.statechart.gotoState("loggedOut")
}).send();Lab.loginController.logout()},enterState:function(){Lab.logController.logEvent(Lab.EVENT.USER_LOGGED_IN,Geniverse.userController,"username firstName lastName className".w())
},exitState:function(){Lab.logController.logEvent(Lab.EVENT.USER_LOGGED_OUT);Lab.logController.endSession();
SC.routes.set("location","");if(history&&history.pushState){history.pushState("",document.title,window.location.pathname)
}else{window.location.hash=""}},showTooltip:function(d,k,l){if(!Geniverse.activityController.getPath("content.showTooltips")&&Geniverse.activityController.getPath("content.title")!=="Office"){return
}if(!d.attr("alt")){d.attr("alt",d.attr("title"))}var e,f,c,g,j,h,a=l||{};target=a.target||"leftMiddle",tooltip=a.tooltip||"rightMiddle",maxWidth=a.maxWidth||250,k=k||d.attr("alt"),dark=false,showOnReady=a.showOnReady==null?true:a.showOnReady;
if(!k){return}g=d.attr("class").split(/\s+/);for(h=0;h<g.length;h++){j=g[h];if(/hint-target-(.*)/.exec(j)){target=/hint-target-(.*)/.exec(j)[1]
}else{if(/hint-tooltip-(.*)/.exec(j)){tooltip=/hint-tooltip-(.*)/.exec(j)[1]}else{if(/hint-max-width-(.*)/.exec(j)){maxWidth=/hint-max-width-(.*)/.exec(j)[1]
}else{if(/hint-dark/.exec(j)){dark=true}}}}}var b=Math.min(maxWidth,240);c={width:{min:b,max:maxWidth},padding:"14px",border:{width:0,radius:2,color:"#FFF"},color:"#FFF"};
c.tip=tooltip;f={content:{title:{text:""},text:k},position:{corner:{target:target,tooltip:tooltip}},show:{delay:800,ready:showOnReady,solo:false,effect:{type:"fade",length:800}},hide:{effect:{type:"fade"}},style:c,api:{onRender:function(){this.elements.tooltip.click(this.hide)
}}};if(a.hideAction!=null){f.api.onHide=a.hideAction}d.attr("title","");return d.qtip(f)
},showAllTooltips:function(b){$(".qtip").hide();var c=$("."+b),a=this;c.each(function(){a.showTooltip($(this))
});hideListener=function(){$(".qtip").hide();$("body").unbind("mousedown",hideListener)
};$("body").bind("mousedown",hideListener)},registerAllTooltips:function(b){var c=$("."+b),a=this;
c.each(function(){a.showTooltip($(this),null,{showOnReady:false})})}});Lab.loggedOut=Ki.State.extend({enterState:function(){Lab.routes.gotoLabRoute({pageName:"loadAssetsPage",paneName:"mainPane"});
this.get("statechart").sendAction("loadAssets")},loadAssets:function(){var b=this;
var a=$.preloadCssImages({statusTextEl:"#loadingStatus",showImageName:false,onComplete:function(){b.get("statechart").sendAction("gotoLogin")
}})},gotoLogin:function(){Lab.routes.gotoLabRoute({pageName:"loginPage",paneName:"mainPane"});
Lab.loginController.checkCCAuthToken()},gotoHomePage:function(){Lab.statechart.getState("atLocation").startPage="home"
},gotoCaselog:function(){Lab.statechart.getState("atLocation").startPage="caselog"
},gotoActivity:function(){Lab.statechart.getState("atLocation").startPage="activity"
},gotoAvatarPage:function(){Lab.statechart.getState("atLocation").startPage="avatar"
},gotoEndingHub:function(){Lab.statechart.getState("atLocation").startPage="endingHub"
},logIn:function(){this.gotoState("loggedIn")},exitState:function(){}});Lab.showingBlogButton=Ki.State.extend({initialSubstate:"ready",enterState:function(){},exitState:function(){},ready:Ki.State.design({showBlogPostPanel:function(){this.gotoState("showingBlogPostPanel")
}}),showingBlogPostPanel:Ki.State.design({enterState:function(){Geniverse.blogPostController.showBlogPane();
Lab.logController.logEvent(Lab.EVENT.OPENED_JOURNAL_POST)},exitState:function(){Geniverse.blogPostController.hideBlogPane()
},post:function(){this.save();if(!this._checkURL()){return}Geniverse.blogPostController.saveBlogPost();
Lab.statechart.sendEvent("didSendBlogPost");Lab.statechart.sendEvent("showFeedbackAndClose");
Lab.logController.logEvent(Lab.EVENT.JOURNAL_POST)},save:function(){Geniverse.blogPostController.saveDraftBlogPost();
Lab.logController.logEvent(Lab.EVENT.SAVED_JOURNAL_POST)},closePanel:function(){this.gotoState("ready");
Lab.logController.logEvent(Lab.EVENT.CLOSED_JOURNAL_POST)},saveAndClose:function(){this.save();
this.closePanel()},showFeedbackAndClose:function(){Lab.feedbackController.didSendBlogPost();
this.closePanel()},_checkURL:function(){var a=Geniverse.blogPostController.get("content3");
if(a&&!/^http[s]?:\/\//.exec(a)){SC.AlertPane.extend({layout:{top:0,centerX:0,width:400,height:100}}).show("","Please make sure your evidence URL starts with http://","","OK");
return false}else{return true}}})});Lab.showingIntroScreen=Ki.State.extend({initialSubstate:"introScreenReady",enterState:function(){},exitState:function(){},introScreenReady:Ki.State.design({showIntroScreenPanel:function(){this.gotoState("showingIntroScreenPanel")
}}),showingIntroScreenPanel:Ki.State.design({enterState:function(){this.set("infoPaneShouldBeHidden",YES);
this.introScreenView=Geniverse.IntroScreenView.create({layerId:"introScreenView"});
this.introScreenView.append()},exitState:function(){this.introScreenView.remove();
this.set("infoPaneShouldBeHidden",NO);Lab.infoController.showPane()},closePanel:function(){this.gotoState("introScreenReady")
},infoPaneShouldBeHidden:NO,infoPaneIsVisibleBinding:"Lab.infoController*pane.isVisibleInWindow",infoPaneVisibilityDidChange:function(){if(this.infoPaneShouldBeHidden){Lab.infoController.removeView()
}}.observes("infoPaneIsVisible","infoPaneShouldBeHidden")})});Lab.warningUserBeforeLeaving=Ki.State.extend({initialSubstate:"dontWarnUser",enterState:function(){},exitState:function(){},dontWarnUser:Ki.State.design({enterState:function(){window.onbeforeunload=null
},warnUserBeforeLeaving:function(){this.gotoState("warnUser")}}),warnUser:Ki.State.design({enterState:function(){function a(){return"You have unsaved changes in your notepad. Are you sure you want to leave this page?"
}window.onbeforeunload=a},dontWarnUserBeforeLeaving:function(){this.gotoState("dontWarnUser")
}})});Lab.AvatarView=SC.View.extend({touchStart:function(a){a.allowDefault();return YES
},touchEnd:function(a){a.allowDefault();this.click();return YES}});Lab.DragonBreedingGenomeView=Geniverse.DragonGenomeView.extend({generateDragonAtStart:NO,displayChallengeDragon:YES,showDragon:NO,showGenerateNewDragon:NO,showIsEditableCheck:NO,showFromLabels:NO,trackScore:YES,parentToUpdate:function(){switch(this.get("sex")){case 0:return"father";
case 1:return"mother"}}.property("sex"),dragonDidChange:function(){this.possiblyUpdateBreedDragon()
}.observes("dragon"),domStatusDidChange:function(){this.possiblyUpdateBreedDragon()
}.observes(".pane.isPaneAttached"),possiblyUpdateBreedDragon:function(){if(this.getPath("pane.isPaneAttached")){Geniverse.breedDragonController.set(this.get("parentToUpdate"),this.get("dragon"))
}}});Lab.InvisibleGenomeView=SC.View.extend({childViews:"questionMark revealButton".w(),sex:0,questionMark:SC.ImageView.design({layout:{centerY:-120,centerX:0,width:235,height:235},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/question_mark.png",classNames:["opaque"]}),revealButton:SC.ButtonView.design({layout:{centerX:0,centerY:20,height:24,width:130},title:"Ready to Answer",target:"Lab.statechart",action:function(){if(this.getPath("parentView.sex")===0){return"solveInvisibleMaleGenotype"
}else{return"solveInvisibleFemaleGenotype"}}.property("*parentView.sex")})});Lab.LoginCheckView=SC.View.extend({layout:{left:0,top:0,width:400,height:100},childViews:"welcomeView ".w(),welcomeView:SC.LabelView.design({layout:{top:5,height:24,left:10,width:400},value:"please wait ..."})});
Lab.LoginGroupView=SC.PanelPane.extend({layout:{centerX:0,top:10,width:400,height:100},contentView:SC.View.design({layout:{left:0,top:0,width:400,height:100},childViews:"startButtonView welcomeView memberSelectView groupSelectView".w(),startButtonView:SC.ButtonView.design({layout:{bottom:10,height:24,right:10,width:100},title:"Start",action:"Lab.loginController.finish",isEnabled:NO,isEnabledBinding:"Lab.loginController.loggedIn"}),welcomeView:SC.LabelView.design({layout:{top:5,height:24,left:10,width:400},value:"",valueBinding:SC.Binding.from("Lab.loginController.welcomeMessage").oneWay()}),memberSelectView:SC.SelectFieldView.design({layout:{bottom:10,left:10,height:25,width:90},objects:[SC.Object.create({value:1,title:"member 1"}),SC.Object.create({value:2,title:"member 2"}),SC.Object.create({value:3,title:"member 3"}),SC.Object.create({value:4,title:"member 4"}),SC.Object.create({value:5,title:"member 5"})],valueBinding:"Geniverse.userController.content.memberId",nameKey:"title",valueKey:"value"}),groupSelectView:SC.SelectFieldView.design({layout:{bottom:10,left:110,height:25,width:90},objects:[SC.Object.create({value:1,title:"group 1"}),SC.Object.create({value:2,title:"group 2"}),SC.Object.create({value:3,title:"group 3"}),SC.Object.create({value:4,title:"group 4"}),SC.Object.create({value:5,title:"group 5"}),SC.Object.create({value:6,title:"group 6"}),SC.Object.create({value:7,title:"group 7"}),SC.Object.create({value:8,title:"group 8"}),SC.Object.create({value:9,title:"group 9"}),SC.Object.create({value:10,title:"group 10"})],disableSort:YES,valueBinding:"Geniverse.userController.content.groupId",nameKey:"title",valueKey:"value"})})});
Lab.LoginLoginView=SC.View.extend({layout:{left:0,top:0,width:400,height:100},childViews:"logo loginButtonView welcomeView usernameLabel usernameView passwordLabel passwordView registerView demoLinkView".w(),logo:SC.ImageView.design({layout:{top:0,left:11,width:188,height:84},value:"/static/lab/en/bf72c297ce97d03a2ea3d5d5cd469ea1026d2380/resources/images/geniverse-logo.png"}),loginButtonView:SC.ButtonView.design({layout:{top:216,height:40,right:0,width:90},title:"enter &raquo;",isVisibleBinding:"Lab.loginController.loginShowing",action:"Lab.loginController.loginPortal"}),welcomeView:SC.LabelView.design({layout:{top:89,height:20,left:0,width:210},valueBinding:"Lab.loginController.welcomeMessage"}),registerView:SC.LabelView.design({layout:{bottom:61,height:40,left:0,width:210},escapeHTML:false,value:"Don't have a login? <p><a style='font-size: 1.3em; text-decoration:none; color:#2a777b;' href='"+Geniverse.portalBase+"'>Sign up now <span style='color:#eb8723;'>&raquo;</span></a>"}),demoLinkView:SC.LabelView.design({layout:{bottom:11,height:45,left:0,width:210},escapeHTML:false,value:"or <a style='text-decoration:none; color:#2a777b;' href='http://demo.geniverse.concord.org'>Play as a guest <span style='color:#eb8723;'>&raquo;</span></a>"}),usernameLabel:SC.LabelView.design({layout:{top:117,left:0,height:20,width:210},isVisibleBinding:"Lab.loginController.loginShowing",value:"username"}),usernameView:SC.TextFieldView.design({layout:{top:137,left:0,height:20,width:210},isVisibleBinding:"Lab.loginController.loginShowing",valueBinding:"Lab.loginController.username",keyDown:function(a){if(a.keyCode===9){this.getPath("parentView.passwordView").$input().focus();
return YES}this.fieldValueDidChange();a.allowDefault();return YES}}),passwordLabel:SC.LabelView.design({layout:{top:166,left:0,height:20,width:210},isVisibleBinding:"Lab.loginController.loginShowing",value:"password"}),passwordView:SC.TextFieldView.design({layout:{top:185,left:0,height:20,width:210},isVisibleBinding:"Lab.loginController.loginShowing",isPassword:YES,valueBinding:"Lab.loginController.password",keyUp:function(a){if(a.keyCode===13){Lab.loginController.loginPortal()
}this.fieldValueDidChange();a.allowDefault();return YES}})});Lab.TouchEnabledView=SC.View.extend({touchStart:function(a){a.allowDefault();
return YES},touchEnd:function(a){a.allowDefault();return YES}});Lab.avatarPage=SC.Page.design({pagePath:"Lab.avatarPage",title:"Lab Avatar Page",mainPane:SC.MainPane.design({defaultResponder:Lab.statechart,childViews:"pleaseWait welcome scarlett strider scarlettLabel striderLabel".w(),pleaseWait:SC.LabelView.design({layout:{top:30,width:660,height:60,centerX:0},classNames:["avatar","title"],value:"<div>Please wait...</div>",escapeHTML:NO,isVisibleBinding:"Lab.avatarController.waiting"}),welcome:SC.LabelView.design({layout:{top:30,width:660,height:80,centerX:0},classNames:["avatar","title"],value:"<div>A grand adventure awaits...<br/>Choose a character and begin your journey!</div>",escapeHTML:NO,isVisibleBinding:SC.Binding.not("Lab.avatarController.waiting")}),scarlett:Lab.AvatarView.design({layerId:"scarlett",layout:{top:110,width:340,height:545,centerX:-170},isVisibleBinding:SC.Binding.not("Lab.avatarController.waiting"),click:function(){Lab.statechart.sendAction("choseScarlett");
return YES}}),scarlettLabel:SC.LabelView.design({layout:{top:660,width:340,height:60,centerX:-190},classNames:["avatar","title"],value:"<div>SCARLETT</div>",escapeHTML:NO,isVisibleBinding:SC.Binding.not("Lab.avatarController.waiting"),click:function(){Lab.statechart.sendAction("choseScarlett");
return YES}}),strider:Lab.AvatarView.design({layerId:"strider",layout:{top:120,width:340,height:540,centerX:170},isVisibleBinding:SC.Binding.not("Lab.avatarController.waiting"),click:function(){Lab.statechart.sendAction("choseStrider");
return YES}}),striderLabel:SC.LabelView.design({layout:{top:660,width:340,height:60,centerX:190},classNames:["avatar","title"],value:"<div>STRIDER</div>",escapeHTML:NO,isVisibleBinding:SC.Binding.not("Lab.avatarController.waiting"),click:function(){Lab.statechart.sendAction("choseStrider");
return YES}})})});Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.breedingChallengePage=SC.Page.design({pagePath:"Lab.breedingPage",title:"Breeding Page",challengeType:"matchTargetDrakesOneAtATimeChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:100,width:840,height:600},childViews:"matchView breedView mothersPoolView fathersPoolView challengeChromosomeToolView breedingPenView stableView marketplaceView scoreView".w(),mothersPoolView:Lab.ChallengePoolView.design({layout:{left:20,top:60,width:165,height:173},sex:"female"}),fathersPoolView:Lab.ChallengePoolView.design({layout:{right:20,top:60,width:165,height:173},sex:"male"}),challengeChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{centerX:-51,top:150,width:35,height:30}}),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:-20,height:190,width:270},onlyOne:YES,labelPosition:"right",dragonSize:170}),breedView:Geniverse.BreedDragonView.design({layout:{top:140,left:30,height:330,right:30},showChildView:NO,trackScore:YES,motherView:Geniverse.OrganismView.design({layout:{top:100,left:0,width:180,height:180},classNames:"sc-theme motherView opaque".w(),contentBinding:"*parentView.mother",parent:"mother",label:"Mother",showLabel:true,sex:1,isDropTarget:YES,glow:YES,trackScoreBinding:"*parentView.trackScore"}),fatherView:Geniverse.OrganismView.design({layout:{top:100,right:0,width:180,height:180},classNames:"fatherView opaque".w(),contentBinding:"*parentView.father",parent:"father",label:"Father",showLabel:true,sex:0,isDropTarget:YES,glow:YES,trackScoreBinding:"*parentView.trackScore"}),breedButtonView:SC.ButtonView.design({layout:{top:10,centerX:20,width:100,height:24},target:"Geniverse.breedDragonController",trackScore:NO,action:function(){return this.get("trackScore")?"breedAndIncrementScore":"breed"
}.property("trackScore"),isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()})}),breedingPenView:Lab.BreedingPenView.design({layout:{centerX:0,top:179,width:406,height:347}}),stableView:Lab.StableView.design({layout:{centerX:0,top:501,width:520,height:97}}),marketplaceView:SC.ImageView.design({layout:{right:35,top:507,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(g&&g.get("bred")){g.set("isInMarketplace",YES);Geniverse.eggsController.removeObject(g)
}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),scoreView:Geniverse.ScoreView.design({layout:{left:20,top:445,height:49,width:184},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.breedingPage=SC.Page.design({pagePath:"Lab.breedingPage",title:"Breeding Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:90,width:840,height:545},childViews:"breedView mothersPoolView fathersPoolView challengeChromosomeToolView breedingPenView stableView marketplaceView scoreView".w(),mothersPoolView:Lab.ChallengePoolView.design({layout:{left:20,top:21,width:165,height:173},sex:"female"}),fathersPoolView:Lab.ChallengePoolView.design({layout:{right:20,top:21,width:165,height:173},sex:"male"}),challengeChromosomeToolView:Geniverse.ChromosomeToolView.design({layout:{centerX:-51,top:30,width:35,height:30},toolTip:"The magnifying glass shows you some of the genes. But unfortunately, not always the ones you need...",classNames:"hint-available"}),breedView:Geniverse.BreedDragonView.design({layout:{top:20,left:30,height:430,width:780},showChildView:NO,trackScore:YES,motherView:Geniverse.OrganismView.design({layout:{top:184,left:0,width:180,height:180},classNames:"sc-theme motherView opaque".w(),contentBinding:"*parentView.mother",parent:"mother",label:"Mother",showLabel:true,sex:1,isDropTarget:YES,glow:YES,trackScoreBinding:"*parentView.trackScore"}),fatherView:Geniverse.OrganismView.design({layout:{top:184,right:0,width:180,height:180},classNames:"fatherView opaque".w(),contentBinding:"*parentView.father",parent:"father",label:"Father",showLabel:true,sex:0,isDropTarget:YES,glow:YES,trackScoreBinding:"*parentView.trackScore"}),breedButtonView:SC.ButtonView.design({layout:{top:10,centerX:20,width:100,height:24},target:"Geniverse.breedDragonController",trackScore:NO,action:function(){Lab.statechart.sendAction("breedingPageMatchBreedingCompleted");
return this.get("trackScore")?"breedAndIncrementScore":"breed"}.property("trackScore"),isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()})}),breedingPenView:Lab.BreedingPenView.design({layout:{centerX:0,top:66,width:406,height:347}}),stableView:Lab.StableView.design({layout:{centerX:0,top:428,width:520,height:100},toolTip:"Drag up to 10 offspring drakes here to keep them and use them to breed. To make room for different drakes, drag them to 'Remove From Stable.'",classNames:"hint-available hint-target-bottomMiddle hint-tooltip-topLeft".w()}),marketplaceView:SC.ImageView.design({layout:{right:35,top:428,height:90,width:90},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/sell-to-market.jpg",canLoadInBackground:NO,useImageCache:NO,isDropTarget:YES,acceptDragOperation:function(d,f){function e(g){SC.RunLoop.begin();
if(g&&g.get("bred")){g.set("isInMarketplace",YES);Geniverse.eggsController.removeObject(g)
}SC.RunLoop.end()}if((""+d.get("source").constructor==="Geniverse.OrganismView")){var c=d.get("source").get("content");
e(c)}else{var b=d.get("source").get("selection");for(var a=0;a<b.get("length");a++){e(b.firstObject())
}}this.invokeLast(function(){SC.RunLoop.begin();Geniverse.eggsController.set("selection",null);
Geniverse.stableOrganismsController.set("selection",null);SC.RunLoop.end()});return f
},computeDragOperations:function(b,a){return SC.DRAG_ANY},dragEntered:function(b,a){this.$().addClass("drop-target")
},dragExited:function(b,a){this.$().removeClass("drop-target")}}),scoreView:Geniverse.ScoreView.design({layout:{left:20,top:376,height:49,width:184},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})});
sc_require("views/top_bar_view");sc_require("views/bottom_bar_view");Lab.caselogPage=SC.Page.design({pagePath:"Lab.caselogPage",title:"Caselog Page",mainPane:SC.MainPane.design({layout:{minWidth:1056,minHeight:820},childViews:["caselogView","topBar"],classNames:["mainPane"],caselogView:Lab.TouchEnabledView.design({layout:{top:57},classNames:["caselog-view","mainPane"],currentLevelBinding:"Lab.caselogController.currentLevel",currentLevelNameBinding:"Lab.caselogController.currentLevelName",levelsBinding:"Lab.caselogController.levels",displayProperties:["currentLevel","levels"],render:function(b,o){var a=this.get("currentLevel"),c=this.get("currentLevelName"),p=this.get("levels"),q,g,m,n,f,l,k,e,h;
if(!o||typeof p==="undefined"||typeof a==="undefined"||typeof c==="undefined"){this.invokeLast(this.replaceLayer);
return}q=p[a].cases;b.push('<div id="caselog-wrap">');b.push('<div id="caselog-book">');
b.push('<div id="col1">');b.push('<div id="title">');b.push('<div class="title">Case Log</div>');
b.push('<div class="section">'+c.capitalize()+"</div>");b.push("</div>");k=function(j){j=j||{};
if(j.useQuill){return j.stars>0?"quill-on":"quill-off"}switch(j.stars){case 1:return"one-star";
case 2:return"two-star";case 3:return"three-star"}return"no-star"};for(g=0,m=q.length;
g<m;g++){var d="";if(q[g].hidden&&!Geniverse.userController.isAccelerated()&&!Geniverse.userController.isUnlocked(c,q[g].title)){d=' style="display: none;"'
}b.push('<div class="case caselog-active case'+g+'"'+d+">");b.push('<div class="title"><div>'+q[g].title+"</div></div>");
b.push("<ul>");n=q[g].challenges;for(f=0,l=n.length;f<l;f++){b.push('<li class="'+k(n[f].starInfo)+'"><a href="'+n[f].href+'">'+n[f].title+"</a></li>")
}b.push("</ul>");b.push("</div>");if(g===1){b.push("</div>");b.push('<div id="col2">')
}}b.push("</div>");b.push("</div>");b.push('<div id="caselog-nav">');b.push("<ul>");
e=Lab.caselogController.levelNames;for(g=0,m=e.length;g<m;g++){h=g==a?"caselog-active":"";
b.push('<li id="'+e[g]+'" class="'+h+'"><a href="#caselog/'+e[g]+'"><div></div></a></li>')
}b.push("</ul>");b.push("</div>");b.push("</div>");return b}}),topBar:Lab.TopBarView.design({classNames:["brown"]})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");sc_require("views/dragon_breeding_genome_view");
Lab.chromosomeBreedingChallengePage=SC.Page.design({pagePath:"Lab.chromosomeBreedingPage",title:"Chromosome Breeding Page",challengeType:"chromosomeBreedingOneAtATimeChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:80,width:1080,height:880},childViews:"genomePanel breedingPenView matchView scoreView chromosome1HintView chromosome2HintView chromosome3HintView chromosome4HintView".w(),genomePanel:SC.View.design({layout:{top:35,height:585,left:15,width:1005},childViews:"femaleTitle femaleGenomeView femalePhenotypeView maleTitle maleGenomeView malePhenotypeView breedButton".w(),femaleTitle:SC.LabelView.design({layout:{top:10,height:25,left:70,width:200},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Female Drake"}),femalePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:30,width:200,height:200},contentBinding:"*parentView.femaleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),femaleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,left:15,height:500,width:500},sex:1,index:1}),maleTitle:SC.LabelView.design({layout:{top:10,height:25,right:35,width:170},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Male Drake"}),malePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,right:60,width:200,height:200},contentBinding:"*parentView.maleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),maleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,right:0,height:500,width:500},sex:0,index:2,dragonOnRight:YES}),breedButton:SC.ButtonView.design({layout:{top:150,centerX:-60,width:100,height:24},target:"Geniverse.breedDragonController",bredOnce:false,action:function(){Geniverse.breedDragonController.breed();
if(!this.get("bredOnce")){Lab.statechart.sendAction("breedingPageMatchBreedingCompleted");
this.set("bredOnce",true)}},isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable(),toolTip:"Click Breed to create a clutch of 20 offspring drakes. Clicking Breed costs zero moves!",classNames:"hint-available hint-max-width-151".w()})}),breedingPenView:Lab.BreedingPenView.design({layout:{left:329,top:240,width:380,height:350},breedingRecordRight:-20}),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:-10,height:190,width:270},onlyOne:YES,labelPosition:"right",dragonSize:170,toolTip:"Drag a matching drake from the pen onto the target.",classNames:"breeding-completed-hint hint-target-leftMiddle hint-tooltip-rightMiddle".w()}),scoreView:Geniverse.ScoreView.design({layout:{top:175,centerX:60,width:150,height:46},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES}),chromosome1HintView:SC.View.design({layout:{left:29,top:228,height:385,width:20},toolTip:"Set the alleles to increase your chances of breeding the target drake. Each change costs a move.",classNames:"hint-available-no-show hint-target-rightMiddle hint-tooltip-leftBottom".w()}),chromosome2HintView:SC.View.design({layout:{left:175,top:228,height:385,width:20},toolTip:"Set the alleles to increase your chances of breeding the target drake. Each change costs a move.",classNames:"hint-available hint-target-rightMiddle hint-tooltip-leftBottom".w()}),chromosome3HintView:SC.View.design({layout:{left:725,top:228,height:385,width:20},toolTip:"Set the alleles to increase your chances of breeding the target drake. Each change costs a move.",classNames:"hint-available-no-show hint-target-rightMiddle hint-tooltip-leftBottom".w()}),chromosome4HintView:SC.View.design({layout:{left:870,top:228,height:385,width:20},toolTip:"Set the alleles to increase your chances of breeding the target drake. Each change costs a move.",classNames:"hint-available-no-show hint-target-rightMiddle hint-tooltip-leftBottom".w()})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");sc_require("views/dragon_breeding_genome_view");
Lab.chromosomeBreedingPage=SC.Page.design({pagePath:"Lab.chromosomeBreedingPage",title:"Chromosome Breeding Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:80,width:1080,height:880},childViews:"genomePanel breedingPenView matchView scoreView".w(),genomePanel:SC.View.design({layout:{top:35,height:585,left:15,width:1005},childViews:"femaleTitle femaleGenomeView femalePhenotypeView maleTitle maleGenomeView malePhenotypeView breedButton".w(),femaleTitle:SC.LabelView.design({layout:{top:10,height:25,left:70,width:200},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Female Drake"}),femalePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:30,width:200,height:200},contentBinding:"*parentView.femaleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),femaleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,left:15,height:500,width:500},sex:1,index:1}),maleTitle:SC.LabelView.design({layout:{top:10,height:25,right:35,width:170},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Male Drake"}),malePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,right:60,width:200,height:200},contentBinding:"*parentView.maleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),maleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,right:0,height:500,width:500},sex:0,index:2,dragonOnRight:YES}),breedButton:SC.ButtonView.design({layout:{top:150,centerX:-60,width:100,height:24},target:"Geniverse.breedDragonController",action:"breed",isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()})}),breedingPenView:Lab.BreedingPenView.design({layout:{left:329,top:240,width:380,height:350},breedingRecordRight:-20}),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:40,height:125,width:410},dragonSize:105}),scoreView:Geniverse.ScoreView.design({layout:{top:175,centerX:60,width:150,height:46},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");sc_require("views/dragon_breeding_genome_view");
Lab.chromosomeBreedingSelectParentsPage=SC.Page.design({pagePath:"Lab.chromosomeBreedingSelectParentsPage",title:"Chromosome Breeding Select Parents Page",challengeType:"selectParentsChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:80,width:1080,height:880},childViews:"genomePanel breedingPenView".w(),genomePanel:SC.View.design({layout:{top:35,height:585,left:15,width:1005},childViews:"femaleTitle femaleGenomeView femalePhenotypeView maleTitle maleGenomeView malePhenotypeView breedButton submitParents".w(),femaleTitle:SC.LabelView.design({layout:{top:10,height:25,left:70,width:200},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Female Drake"}),femalePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:30,width:200,height:200},contentBinding:"*parentView.femaleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),femaleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,left:15,height:500,width:500},sex:1,index:1}),maleTitle:SC.LabelView.design({layout:{top:10,height:25,right:35,width:170},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Male Drake"}),malePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,right:60,width:200,height:200},contentBinding:"*parentView.maleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),maleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,right:0,height:500,width:500},sex:0,index:2,dragonOnRight:YES}),breedButton:SC.ButtonView.design({layout:{top:150,centerX:0,width:100,height:24},target:"Geniverse.breedDragonController",action:"breed",isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()}),submitParents:SC.ButtonView.design({layout:{centerX:0,bottom:20,height:29,width:180},title:"Submit These Parents",target:"Lab.statechart",action:"submitParents"})}),breedingPenView:Lab.BreedingPenView.design({layout:{left:329,top:230,width:380,height:350},breedingRecordRight:-20})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.chromosomeChallengePage=SC.Page.design({pagePath:"Lab.chromosomeChallengePage",title:"Chromosome Challenge Page",challengeType:"matchOneAtATimeChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"line genomePanel scoreLabel targetDrakes targetTitle yourTitle chromoTitle drakeHintView".w(),layout:{centerX:0,top:90,width:850,height:560},line:SC.View.design({layout:{top:80,left:280,width:2,bottom:110},classNames:["genome-view-intro"]}),genomePanel:SC.View.design({layout:{top:40,height:530,right:0,width:580},childViews:"genomeView switchSexButton revealButton".w(),switchSexButton:SC.ImageView.design(Geniverse.SimpleButton,Geniverse.ChangeSexButton,{layout:{top:268,left:53,width:Geniverse.ChangeSexButton.WIDTH,height:Geniverse.ChangeSexButton.HEIGHT}}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:35,right:-120,height:500,width:630},classNames:["overflowVis"],dragonView:Geniverse.OrganismView.design({layout:{top:0,left:-35,width:200,height:215},contentBinding:"*parentView.dragon",allowDrop:YES,isVisibleBinding:"*parentView.showDragon",useRevealButtonBinding:"*parentView.useRevealButton",revealButtonEnabledBinding:"*parentView.revealButtonEnabled",hideDragonBinding:"*parentView.hideDragon",showBackground:NO,glow:YES}),dragonOnRight:YES,generateDragonAtStart:NO,sex:1,displayChallengeDragon:YES,showGenerateNewDragon:NO,showIsEditableCheck:NO,hideDragon:YES,trackScore:YES,revealButtonNeedsEnabled:function(){this.set("revealButtonEnabled",this.get("allAllelesSelected"))
}.observes("allAllelesSelected"),showEmptyOptions:NO,showFromLabels:NO,startWithEmptyOptions:NO}),revealButton:SC.ButtonView.design({layout:{height:24,bottom:30,width:120,right:100},title:"Enter",action:"revealClicked",target:"Lab.statechart",classNames:"hint-available hint-target-rightMiddle hint-tooltip-leftMiddle",toolTip:"Click this to reveal your drake.  Does it match the target?"})}),scoreLabel:Geniverse.ScoreView.design({layout:{left:53,top:370,height:49,width:184},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES,toolTip:"To win the most stars, make the fewest number of allele and male/female changes.",classNames:"hint-available hint-target-rightMiddle hint-tooltip-leftTop"}),targetDrakes:Geniverse.MatchView.design({layout:{left:40,top:60,height:280,width:210},onlyOne:YES,dragonSize:202}),targetTitle:SC.LabelView.design({layout:{top:40,height:25,left:75,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),value:"Target Drake"}),yourTitle:SC.LabelView.design({layout:{top:40,height:25,left:345,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),value:"Your Drake"}),chromoTitle:SC.LabelView.design({layout:{top:40,height:25,left:545,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),value:"Chromosome Control"}),drakeHintView:SC.View.design({layout:{top:55,left:288,width:245,height:231},toolTip:"Your drake is hidden. Change the alleles until you think it matches the target.",classNames:"hint-available hint-target-topMiddle hint-tooltip-bottomMiddle"})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.chromosomeTrainingPage=SC.Page.design({pagePath:"Lab.chromosomeTrainingPage",title:"Chromosome Training Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:100,width:1150,height:600},childViews:"femaleGenomePanel maleGenomePanel".w(),femaleGenomePanel:SC.View.design({layout:{top:50,height:550,left:15,width:500},childViews:"title genomeView".w(),title:SC.LabelView.design({layout:{top:20,height:25,left:20,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),value:"Female Drake"}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:80,left:15,height:500,width:500},index:1,generateDragonAtStart:NO,displayChallengeDragon:YES,sex:1,showGenerateNewDragon:NO,showFromLabels:NO,showIsEditableCheck:NO})}),maleGenomePanel:SC.View.design({layout:{top:50,height:550,left:600,width:500},childViews:"maleTitle maleGenomeView".w(),maleTitle:SC.LabelView.design({layout:{top:20,height:25,left:20,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),value:"Male Drake"}),maleGenomeView:Geniverse.DragonGenomeView.design({layout:{top:80,left:15,height:500,width:500},index:2,generateDragonAtStart:NO,displayChallengeDragon:YES,sex:0,showGenerateNewDragon:NO,showFromLabels:NO,showIsEditableCheck:NO})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.chromosomeTrainingSinglePage=SC.Page.design({pagePath:"Lab.chromosomeTrainingSinglePage",title:"Chromosome Training Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"drakeGenomePanel".w(),drakeGenomePanel:SC.View.design({layout:{top:110,height:550,centerX:0,width:550},childViews:"chromoTitle drakeTitle genomeView switchSexButton nextButton chromoHintView".w(),chromoTitle:SC.LabelView.design({layout:{top:20,height:25,left:75,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),value:"Chromosome Control"}),drakeTitle:SC.LabelView.design({layout:{top:20,height:25,left:380,width:200},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,classNames:"title".w(),sexBinding:"*parentView.genomeView.sex",value:function(){return(this.get("sex")===0?"Male ":"Female ")+"Drake"
}.property("sex")}),switchSexButton:SC.ImageView.design(Geniverse.SimpleButton,Geniverse.ChangeSexButton,{layout:{top:350,left:338,width:Geniverse.ChangeSexButton.WIDTH,height:Geniverse.ChangeSexButton.HEIGHT},classNames:"switchsex switch-female hint-available hint-target-leftMiddle hint-tooltip-rightMiddle".w(),toolTip:"Click to change between a male and female drake. Notice the drakes neck!"}),nextButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{bottom:20,right:20,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"bringItButton hint-available hint-target-topMiddle hint-tooltip-bottomMiddle".w(),alt:"Bring it on!",title:"Bring it on!",toolTip:"Click when ready for the challenge.",target:"Lab.statechart",action:"gotoNextActivity"}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:80,left:15,height:500,width:500},generateDragonAtStart:NO,displayChallengeDragon:YES,dragonImageLeft:313,sex:1,showGenerateNewDragon:NO,showIsEditableCheck:NO,showFromLabels:NO,showSwitchSex:YES,toolTip:"Select a different allele for each gene.  Watch to see if the drake changes.",classNames:"hint-available hint-target-topMiddle hint-tooltip-bottomLeft hint-max-width-280"}),chromoHintView:SC.View.design({layout:{top:100,left:16,height:390,width:19},toolTip:"Every drake has 3 pairs of chromosomes. (Humans have 23 pairs of chromosomes).",classNames:"hint-available hint-target-bottomMiddle hint-tooltip-topRight"})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.chromosomeTripleChallengePage=SC.Page.design({pagePath:"Lab.chromosomeTripleChallengePage",title:"Chromosome Triple Challenge Page",challengeType:"matchThreeToOneChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:95,width:1080,height:605},childViews:"targetDrake targetTitle genomePanels revealButton scoreLabel line1 line2 line3".w(),panel1AllSelectedBinding:"*genomePanels.genome1Panel.genomeView.allAllelesSelected",panel2AllSelectedBinding:"*genomePanels.genome2Panel.genomeView.allAllelesSelected",panel3AllSelectedBinding:"*genomePanels.genome3Panel.genomeView.allAllelesSelected",allAllelesSelected:NO,allAllelesSelectedChanged:function(){this.set("allAllelesSelected",(this.get("panel1AllSelected")&&this.get("panel2AllSelected")&&this.get("panel3AllSelected")))
}.observes("panel1AllSelected","panel2AllSelected","panel3AllSelected"),targetDrake:Geniverse.MatchView.design({layout:{left:2,top:50,height:250,width:193},onlyOne:YES,dragonSize:178}),scoreLabel:Geniverse.ScoreView.design({layout:{left:17,top:340,height:49,width:160},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES}),revealButton:SC.ButtonView.design({layout:{top:410,height:24,left:40,width:100},title:"Reveal All",isEnabledBinding:"*parentView.allAllelesSelected",action:"revealClicked",target:"Lab.statechart"}),targetTitle:SC.LabelView.design({layout:{top:40,height:25,left:25,width:190},classNames:"title".w(),controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,value:"Target Drake"}),line1:SC.View.design({layout:{top:100,left:197,width:1,bottom:40},classNames:["genome-view-intro"]}),line2:SC.View.design({layout:{top:100,left:487,width:1,bottom:40},classNames:["genome-view-intro"]}),line3:SC.View.design({layout:{top:100,left:774,width:1,bottom:40},classNames:["genome-view-intro"]}),genomePanels:SC.View.design({layout:{top:0,height:600,left:200,width:950},childViews:"genome1Panel genome2Panel genome3Panel".w(),genome1Panel:SC.View.design({layout:{top:0,height:660,left:0,width:290},childViews:"genomeView phenotypeView switchSexButton".w(),phenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:50,width:190,height:170},contentBinding:"*parentView.genomeView.dragon",allowDrop:NO,showBackground:NO,hideDragon:YES,glow:YES}),switchSexButton:SC.ImageView.design(Geniverse.SimpleButton,Geniverse.ChangeSexButton,{layout:{top:163,left:63,width:Geniverse.ChangeSexButton.WIDTH,height:Geniverse.ChangeSexButton.HEIGHT}}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:185,left:5,height:500,width:300},index:1,generateDragonAtStart:NO,sex:1,showDragon:NO,displayChallengeDragon:YES,showGenerateNewDragon:NO,showIsEditableCheck:NO,showEmptyOptions:NO,startWithEmptyOptions:NO,trackScore:YES,showFromLabels:NO})}),genome2Panel:SC.View.design({layout:{top:0,height:600,left:290,width:290},childViews:"genomeView phenotypeView switchSexButton".w(),phenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:50,width:190,height:170},contentBinding:"*parentView.genomeView.dragon",allowDrop:NO,showBackground:NO,hideDragon:YES,glow:YES}),switchSexButton:SC.ImageView.design(Geniverse.SimpleButton,Geniverse.ChangeSexButton,{layout:{top:163,left:95,width:Geniverse.ChangeSexButton.WIDTH,height:Geniverse.ChangeSexButton.HEIGHT}}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:185,left:5,height:500,width:300},index:2,generateDragonAtStart:NO,sex:1,showDragon:NO,displayChallengeDragon:YES,showGenerateNewDragon:NO,showIsEditableCheck:NO,showEmptyOptions:NO,startWithEmptyOptions:NO,trackScore:YES,showFromLabels:NO})}),genome3Panel:SC.View.design({layout:{top:0,height:600,left:580,width:290},childViews:"genomeView phenotypeView switchSexButton".w(),phenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:50,width:190,height:170},contentBinding:"*parentView.genomeView.dragon",allowDrop:NO,showBackground:NO,hideDragon:YES,glow:YES}),switchSexButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{top:163,left:95,width:Geniverse.ChangeSexButton.WIDTH,height:Geniverse.ChangeSexButton.HEIGHT}}),genomeView:Geniverse.DragonGenomeView.design({layout:{top:185,left:5,height:500,width:300},index:3,generateDragonAtStart:NO,sex:1,showDragon:NO,displayChallengeDragon:YES,showGenerateNewDragon:NO,showIsEditableCheck:NO,showEmptyOptions:NO,startWithEmptyOptions:NO,trackScore:YES,showFromLabels:NO})})}),organismViews:function(){return[this.getPath("genomePanels.genome1Panel.phenotypeView"),this.getPath("genomePanels.genome2Panel.phenotypeView"),this.getPath("genomePanels.genome3Panel.phenotypeView")]
}.property("*genomePanels.genome1Panel.phenotypeView","*genomePanels.genome2Panel.phenotypeView","*genomePanels.genome3Panel.phenotypeView").cacheable()})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.dnaComplexPlayground=SC.Page.design({pagePath:"Lab.dnaComplexPlayground",title:"Identify the Connection Between DNA and Amino Acids",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwAppletView".w(),mwAppletView:SC.View.design({childViews:"mwApplet".w(),mwApplet:CC.MwAppletView.design({cmlUrl:"http://mw2.concord.org/model/1371d2e9897/playground2.cml",width:1000,height:500,layout:{centerX:0,centerY:-25,width:1000,height:500}})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.dnaSimplePlayground=SC.Page.design({pagePath:"Lab.dnaSimplePlayground",title:"Identify the Connection Between DNA and Amino Acids",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwAppletView".w(),mwAppletView:SC.View.design({childViews:"mwApplet".w(),mwApplet:CC.MwAppletView.design({cmlUrl:"http://mw2.concord.org/model/13719d0b711/playground1.cml",width:825,height:500,layout:{centerX:0,centerY:-25,width:825,height:500}})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.identCodonPage=SC.Page.design({pagePath:"Lab.identCodonPage",title:"Identify the Connection Between DNA and Amino Acids",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwAppletView".w(),mwAppletView:SC.View.design({childViews:"mwApplet DNAString setDNAButton unfoldButton refoldButton".w(),mwApplet:CC.MwAppletView.design({cmlUrl:"http://mw2.concord.org/model/133ec51e63b/transcribe-translate.cml",layout:{centerX:0,centerY:-90,width:615,height:348}}),DNAString:SC.TextFieldView.design({layout:{centerX:-60,centerY:115,width:400,height:25},value:"AGATATGCGCTCATGCTAGCTATAGTAGTATAA",leftAccessoryView:SC.LabelView.design({layout:{left:5,top:3,width:90,height:25},value:"Coding Strand: ",classNames:["textFieldLabel"]})}),setDNAButton:SC.ButtonView.design({layout:{centerY:116,centerX:207,height:25,width:125},title:"Set DNA / Reset",appletBinding:"*parentView.mwApplet",strandBinding:"*parentView.DNAString.value",action:function(){this.get("applet").run(this.appletAction,this)
},appletAction:function(a){var b=this.get("strand");setTimeout(function(){a.runMwScript("mw2d:1:stop; select atom all; remove; set DNA "+b)
},1000)}}),unfoldButton:SC.ButtonView.design({layout:{centerY:155,centerX:-60,height:50,width:80},title:"Unfold",appletBinding:"*parentView.mwApplet",action:function(){this.get("applet").run(this.appletAction)
},appletAction:function(a){a.runMwScript("mw2d:1:set %startPos %width/2 - %number_of_atoms*3/2; set %i 0; while (%i < %number_of_atoms); set atom[%i].restraint 100; set atom[%i].restraint.x %startPos+%i*3; set atom[%i].restraint.y %height/2; %i++; endwhile;")
}}),refoldButton:SC.ButtonView.design({layout:{centerY:155,centerX:25,height:50,width:80},title:"Re-fold",appletBinding:"*parentView.mwApplet",action:function(){this.get("applet").run(this.appletAction)
},appletAction:function(a){a.runMwScript("mw2d:1:set %i 0; while (%i < %number_of_atoms); set atom[%i].restraint 0; %i++; endwhile;")
}})})})})});Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");sc_require("views/dragon_breeding_genome_view");
Lab.invisibleFemaleGenotypePage=SC.Page.design({pagePath:"Lab.invisibleFemaleGenotypePage",title:"Invisible Genotype Page",challengeType:"invisibleGenotypeChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:90,width:1080,height:880},childViews:"genomePanel breedingPenView".w(),genomePanel:SC.View.design({layout:{top:35,height:585,left:15,width:1005},childViews:"femaleTitle femaleGenomeView femalePhenotypeView maleTitle maleGenomeView malePhenotypeView breedButton".w(),femaleTitle:SC.LabelView.design({layout:{top:10,height:25,left:70,width:200},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Female Drake"}),femalePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:30,width:200,height:200},contentBinding:"Geniverse.challengePoolController.firstFemale",allowDrop:NO,showBackground:NO,glow:YES,dragonDidChange:function(){this.possiblyUpdateBreedDragon()
}.observes("content"),domStatusDidChange:function(){this.possiblyUpdateBreedDragon()
}.observes(".pane.isPaneAttached"),possiblyUpdateBreedDragon:function(){if(this.getPath("pane.isPaneAttached")){Geniverse.breedDragonController.set("mother",this.get("content"))
}}}),femaleGenomeView:Lab.InvisibleGenomeView.design({layout:{top:170,left:-105,height:500,width:500},sex:1,index:1}),maleTitle:SC.LabelView.design({layout:{top:10,height:25,right:35,width:170},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Male Drake"}),malePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,right:60,width:200,height:200},contentBinding:"*parentView.maleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),maleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,right:0,height:500,width:500},sex:0,index:2,dragonOnRight:YES}),breedButton:SC.ButtonView.design({layout:{top:150,centerX:0,width:100,height:24},target:"Geniverse.breedDragonController",action:"breed",isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()})}),breedingPenView:Lab.BreedingPenView.design({layout:{left:329,top:240,width:380,height:350},breedingRecordRight:-20}),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:-10,height:190,width:270},onlyOne:YES,labelPosition:"right",dragonSize:170}),scoreView:Geniverse.ScoreView.design({layout:{top:175,centerX:60,width:150,height:46},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");sc_require("views/dragon_breeding_genome_view");
Lab.invisibleMaleGenotypePage=SC.Page.design({pagePath:"Lab.invisibleMaleGenotypePage",title:"Invisible Genotype Page",challengeType:"invisibleGenotypeChallenge",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({layout:{centerX:0,top:90,width:1080,height:880},childViews:"genomePanel breedingPenView".w(),genomePanel:SC.View.design({layout:{top:35,height:585,left:15,width:1005},childViews:"femaleTitle femaleGenomeView femalePhenotypeView maleTitle maleGenomeView malePhenotypeView breedButton".w(),femaleTitle:SC.LabelView.design({layout:{top:10,height:25,left:70,width:200},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Female Drake"}),femalePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,left:30,width:200,height:200},contentBinding:"*parentView.femaleGenomeView.dragon",allowDrop:NO,showBackground:NO,glow:YES}),femaleGenomeView:Lab.DragonBreedingGenomeView.design({layout:{top:170,left:15,height:500,width:500},sex:1,index:1}),maleTitle:SC.LabelView.design({layout:{top:10,height:25,right:35,width:170},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Male Drake"}),malePhenotypeView:Geniverse.OrganismView.design({layout:{top:0,right:60,width:200,height:200},contentBinding:"Geniverse.challengePoolController.firstMale",allowDrop:NO,showBackground:NO,glow:YES,dragonDidChange:function(){this.possiblyUpdateBreedDragon()
}.observes("content"),domStatusDidChange:function(){this.possiblyUpdateBreedDragon()
}.observes(".pane.isPaneAttached"),possiblyUpdateBreedDragon:function(){if(this.getPath("pane.isPaneAttached")){Geniverse.breedDragonController.set("father",this.get("content"))
}}}),maleGenomeView:Lab.InvisibleGenomeView.design({layout:{top:170,right:0,height:500,width:300},sex:0,index:2,dragonOnRight:YES}),breedButton:SC.ButtonView.design({layout:{top:150,centerX:0,width:100,height:24},target:"Geniverse.breedDragonController",action:"breed",isBreedingBinding:"Geniverse.breedDragonController.isBreeding",hasParentsBinding:"Geniverse.breedDragonController.hasParents",isEnabled:function(){return(this.get("hasParents")&&!this.get("isBreeding"))
}.property("hasParents","isBreeding").cacheable(),title:function(){return this.get("isBreeding")?"Breeding...":"Breed"
}.property("isBreeding").cacheable()})}),breedingPenView:Lab.BreedingPenView.design({layout:{left:329,top:240,width:380,height:350},breedingRecordRight:-20}),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:-10,height:190,width:270},onlyOne:YES,labelPosition:"right",dragonSize:170}),scoreView:Geniverse.ScoreView.design({layout:{top:175,centerX:60,width:150,height:46},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES})})})});
Lab.loginPage=SC.Page.design({pagePath:"Lab.loginPage",title:"Lab Login Page",mainPane:SC.MainPane.design({defaultResponder:Lab.statechart,layerId:"login",title:"Welcome to the Geniverse Labs",childViews:"loginBg loginPanel drakes".w(),loginBg:SC.View.design({layerId:"loginBox",layout:{height:360,width:250,top:100,right:50}}),drakes:SC.View.design({layerId:"drakes",layout:{height:80,right:140,top:0,width:501}}),loginPanel:Lab.LoginLoginView.design({layout:{top:120,width:210,height:350,right:70}}),drakesTimer:null,didDisplay:function(){if(this.get("isVisibleInWindow")){this.animate()
}else{if(this.get("drakesTimer")){clearTimeout(this.get("drakesTimer"));this.set("drakesTimer",null)
}}}.observes("isVisibleInWindow"),animationStep:0,animate:function(){var b=this;var a=function(){clearTimeout(b.get("drakesTimer"));
var d=b.get("animationStep");var e=d*80;var c=150;if(d==9){b.set("animationStep",0);
c=7000}else{b.set("animationStep",d+1)}$("#drakes").css({"background-position":"right -"+e+"px"});
b.set("drakesTimer",setTimeout(a,c))};this.set("drakesTimer",setTimeout(a,150))}})});
Lab.mainPage=SC.Page.design({pagePath:"Lab.mainPage",title:"Lab Main Page",mainPane:SC.MainPane.design({title:"Office",classNames:["brown","mainPane"],childViews:"mainAppView topBar".w(),topBar:Lab.TopBarView.design(),mainAppView:SC.View.design({layout:{top:57,centerX:0,width:1890,height:890},classNames:["mainscreen"],childViews:"caselogButtonView doorButtonView backdoorButtonView".w(),caselogButtonView:SC.View.design(Geniverse.SimpleButton,{layerId:"caselog",tagName:"a",hasHover:YES,layout:{top:614,centerX:29,width:258,height:172},target:"Lab.routes",action:"openCaselogRoute",value:""}),doorButtonView:SC.View.design(Geniverse.SimpleButton,{layerId:"door",tagName:"a",hasHover:YES,layout:{top:23,centerX:403,width:302,height:485},target:"Lab.statechart",action:"logOut",value:""}),backdoorButtonView:SC.View.design(Geniverse.SimpleButton,{layout:{top:159,centerX:71,width:39,height:39},layerId:"backdoor",tagName:"a",hasHover:YES,target:"Lab.backdoorController",action:"showPane"}),focusMainFrom:function(a){SC.$("title").text(this.get("title"))
}})})});Lab.marginSize=15;sc_require("views/lab_pane");Lab.matchNucleotidesGame=SC.Page.design({pagePath:"Lab.matchNucleotidesGame",title:"Identify the Connection Between DNA and Amino Acids",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwAppletView".w(),mwAppletView:SC.View.design({childViews:"mwApplet".w(),mwApplet:CC.MwAppletView.design({cmlUrl:"http://mw2.concord.org/model/1371db972fa/pagex.cml",width:825,height:550,layout:{centerX:0,centerY:0,width:825,height:550}})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
sc_require("views/breeding_pen_view");sc_require("views/stable_view");Lab.meiosisPage=SC.Page.design({pagePath:"Lab.meiosisPage",title:"Meiosis Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"genomePanel".w(),layout:{centerX:0,top:100,width:1050,height:640},genomePanel:SC.View.design({layout:{top:0,bottom:10,left:5,right:5},childViews:"mothersPoolView fathersPoolView femaleView motherMeiosis offspringTitle offspringView maleView fatherMeiosis fertilization matchView scoreView glowHint playHint gametesHint fertilizationPlayHint".w(),matchView:Geniverse.MatchView.design({layout:{centerX:0,top:5,height:120,width:400},dragonSize:100}),mothersPoolView:Lab.ChallengePoolView.design({layout:{left:12,top:16,width:300,height:97},sex:"female"}),fathersPoolView:Lab.ChallengePoolView.design({layout:{left:733,top:16,width:300,height:97},sex:"male"}),femaleView:Geniverse.OrganismView.design({layout:{top:131,left:115,height:100,width:100},classNames:"sc-theme motherView opaque".w(),contentBinding:"Geniverse.meiosisAnimationController.mother",label:"Mother",showLabel:true,sex:1,isDropTarget:YES,trackScore:YES,glow:YES,acceptsOffspringDrop:NO}),offspringTitle:SC.LabelView.design({layout:{top:131,centerX:107,height:25,width:140},fontWeight:SC.BOLD_WEIGHT,value:"Offspring Drake"}),offspringView:SC.View.design({layout:{top:138,centerX:85,height:100,width:100},childViews:"org".w(),org:Geniverse.OrganismView.design({layout:{left:0,right:0,top:0,bottom:0},contentBinding:"Geniverse.meiosisAnimationController.offspring",canDrag:YES}),toolTip:"Drag the offspring to match a target drake. If it doesn't match, choose a different sperm and egg.  Make sure you look at the alleles first!",classNames:"meiosis-offspring-ready-hint hint-tooltip-leftMiddle hint-target-rightMiddle".w()}),maleView:Geniverse.OrganismView.design({layout:{top:131,right:115,height:100,width:100},classNames:"sc-theme fatherView opaque".w(),contentBinding:"Geniverse.meiosisAnimationController.father",label:"Father",showLabel:true,sex:0,isDropTarget:YES,trackScore:YES,glow:YES,acceptsOffspringDrop:NO}),motherMeiosis:Geniverse.AnimationView.design({layout:{top:246,left:17,height:360,width:325},mode:"parent",swapping:false,meiosisOwner:"mother",dragonBinding:"Geniverse.meiosisAnimationController.mother",gameteJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson"}),fertilization:Geniverse.AnimationView.design({layout:{top:246,centerX:0,height:360,width:325},mode:"offspring",meiosisOwner:"offspring",motherJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson",fatherJsonBinding:"Geniverse.meiosisAnimationController.fatherGameteJson",trackScoreOnPlayButton:YES}),fatherMeiosis:Geniverse.AnimationView.design({layout:{top:246,right:17,height:360,width:325},mode:"parent",swapping:false,meiosisOwner:"father",dragonBinding:"Geniverse.meiosisAnimationController.father",gameteJsonBinding:"Geniverse.meiosisAnimationController.fatherGameteJson"}),scoreView:Geniverse.ScoreView.design({layout:{top:148,centerX:-78,height:46,width:165},showScore:YES,isVisibleBinding:SC.Binding.oneWay("Geniverse.activityController.isArgumentationChallenge").not(),showTargetScore:YES}),glowHint:SC.View.design({layout:{top:131,left:115,height:100,width:100},toolTip:"Drag parents to these yellow spots.",classNames:"hint-available hint-target-bottomMiddle hint-tooltip-topRight".w()}),playHint:SC.View.design({layout:{top:580,left:145,height:10,width:10},toolTip:"Click Play to create four eggs or sperm through the process of meiosis.",classNames:"hint-available hint-tooltip-leftTop hint-dark".w()}),gametesHint:SC.View.design({layout:{top:245,left:280,height:10,width:10},toolTip:"Check the alleles in each sperm or egg.  Select one sperm and one egg to use to create an offspring drake.",classNames:"meiosis-completion-hint hint-tooltip-bottomMiddle".w()}),fertilizationPlayHint:SC.View.design({layout:{top:580,centerX:-20,height:10,width:10},toolTip:"Click Play to fertilize the egg and make a new offspring drake!",classNames:"fertilization-ready-hint hint-tooltip-leftMiddle hint-dark".w()})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.mwAppletPage=SC.Page.design({pagePath:"Lab.mwAppletPage",title:"Identify the Connection Between DNA and Amino Acids",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwAppletView".w(),mwAppletView:SC.View.design({childViews:"mwApplet".w(),mwApplet:CC.MwAppletView.design({cmlUrl:"http://mw2.concord.org/model/1371060f321/transcribe-translate2.cml",width:825,height:500,layout:{centerX:0,centerY:-25,width:825,height:500}})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");sc_require("views/challenge_pool_view");
Lab.singleMeiosisPage=SC.Page.design({pagePath:"Lab.singleMeiosisPage",title:"Simple Meiosis Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"genomePanel".w(),genomePanel:SC.View.design({layout:{centerX:-30,top:100,width:680,height:630},childViews:"challengePoolView parentTitle drakeParentView meiosisView nextButton glowHint playHint gametesHint retryHint".w(),challengePoolView:Lab.ChallengePoolView.design({layout:{centerX:0,top:10,width:410,height:120},dragonSize:100}),parentTitle:SC.LabelView.design({layout:{top:133,centerX:0,height:25,width:120},controlSize:SC.LARGE_CONTROL_SIZE,classNames:"title".w(),value:"Parent Drake"}),drakeParentView:Geniverse.OrganismView.design({layout:{top:157,centerX:0,height:100,width:100},contentBinding:"Geniverse.meiosisAnimationController.mother",isDropTarget:YES,glow:YES}),meiosisView:Geniverse.AnimationView.design({layout:{top:271,centerX:0,height:360,width:325},mode:"parent",swapping:false,meiosisOwner:"mother",dragonBinding:"Geniverse.meiosisAnimationController.mother",gameteJsonBinding:"Geniverse.meiosisAnimationController.motherGameteJson"}),nextButton:SC.ImageView.design(Geniverse.SimpleButton,{layout:{centerX:270,top:58,width:118,height:27},isEnabled:YES,hasHover:YES,classNames:"bringItButton".w(),alt:"Bring it on!",title:"Bring it on!",toolTip:"Click when ready for the challenge.",target:"Lab.statechart",action:"gotoNextActivity"}),glowHint:SC.View.design({layout:{top:157,centerX:0,height:100,width:100},toolTip:"Drag a drake from the parent pool above to this yellow spot.",classNames:"hint-available".w()}),playHint:SC.View.design({layout:{top:593,left:177,height:10,width:10},toolTip:"Click Play to create four eggs or sperm through the process of meiosis.",classNames:"meiosis-ready-hint hint-target-leftMiddle hint-tooltip-rightBottom".w()}),gametesHint:SC.View.design({layout:{top:325,left:505,height:10,width:10},toolTip:"Each egg or sperm contains three chromosomes. Hover over chromosome to see the alleles.",classNames:"meiosis-completion-hint hint-tooltip-leftMiddle".w()}),retryHint:SC.View.design({layout:{top:593,left:177,height:10,width:10},toolTip:"Meiosis assorts the chromosomes randomly. Click Retry to try your luck again!",classNames:"meiosis-completion-hint hint-target-leftMiddle hint-tooltip-rightBottom".w()})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.tagacatSeqenceMatch=SC.Page.design({pagePath:"Lab.tagacatSeqenceMatch",title:"Identify the Connection Between DNA and Amino Acids",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwAppletView".w(),mwAppletView:SC.View.design({childViews:"mwApplet".w(),mwApplet:CC.MwAppletView.design({cmlUrl:"http://mw2.concord.org/model/13724005758/tagacat2.cml",width:825,height:550,layout:{centerX:0,centerY:0,width:825,height:550}})})})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.transcribeFlashPage=SC.Page.design({pagePath:"Lab.transcribeFlashPage",title:"DNA to Trait Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwView".w(),mwView:SC.WebView.design({layout:{centerY:-20,centerX:0,width:721,height:500},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/transcribeFlash/playTranscribe.html",shouldAutoResize:YES})})})});
Lab.marginSize=15;sc_require("views/lab_pane");Lab.translateFlashPage=SC.Page.design({pagePath:"Lab.translateFlashPage",title:"DNA to Trait Page",mainPane:Lab.LabPane.design({mainAppView:SC.View.design({childViews:"mwView".w(),mwView:SC.WebView.design({layout:{centerY:-20,centerX:0,width:721,height:500},value:"/static/geniverse/en/d4a0ac217d0f7c5ddb8ca2ce970cb93a5aab872c/resources/images/translateFlash/playTranslate.html",shouldAutoResize:YES})})})});
sc_require("lib/ga_helper");Lab.main=function main(){Lab.statechart.initStatechart();
SC.routes.add(":strand/:level/:activityType/:activityIndex",Lab.routes,"gotoActivity");
SC.routes.add(":strand/:level/:activityType",Lab.routes,"gotoActivity");SC.routes.add(":strand/:level",Lab.routes,"gotoActivity");
SC.routes.add("lab/:pageName/:paneName",Lab.routes,"gotoLabRoute");SC.routes.add("lab/:pageName",Lab.routes,"gotoLabRoute");
SC.routes.add("caselog",Lab.routes,"gotoCaselog");SC.routes.add("caselog/:level",Lab.routes,"gotoCaselog");
SC.routes.add("avatar",Lab.routes,"gotoAvatarPage");SC.routes.add("endingHub",Lab.routes,"gotoEndingHub");
SC.routes.add("fixtures/lab/:pageName",Lab.routes,"gotoLabRouteWithFixtures");SC.routes.add("fixtures/:strand/:level/:activityType/:activityIndex",Lab.routes,"gotoActivityRouteWithFixtures");
SC.routes.add("fixtures/:strand/:level/:activityType",Lab.routes,"gotoActivityRouteWithFixtures");
SC.routes.add("fixtures/:strand/:level",Lab.routes,"gotoActivityRouteWithFixtures");
SC.routes.add("geniverse/:pageName",Lab.routes,"gotoGeniverseRoute");SC.routes.add(":",Lab.routes,"gotoHomePage");
Lab.ENABLE_CHAT=NO;SC.ExceptionHandler.handleException=function(a){};SC.View.prototype.didCreateLayer=function(){this.$().attr("alt",this.get("toolTip"));
this.set("toolTip",null)};Lab.logController.startNewSession()};function main(){Lab.main()
}function profileDebug(prefix,klass){eval("SC.mixin("+prefix+"."+klass+', { create: function() { SC.Logger.log("Created new '+prefix+"."+klass+'"); return new '+prefix+"._"+klass+"(this, arguments); } });");
eval(prefix+"._"+klass+" = function(base_type, args){ base_type.call(this, args); };");
eval("SC.mixin("+prefix+"._"+klass+", "+prefix+"."+klass+");");eval(prefix+"._"+klass+".prototype = "+prefix+"."+klass+".prototype;")
};